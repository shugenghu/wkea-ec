{"version":3,"file":"product.test.js","sourceRoot":"./src/","sources":["product-card/product.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ITelemetryContent } from '@msdyn365-commerce-modules/utilities';\nimport { buildMockCoreContext, ICoreContext, IImageSettings } from '@msdyn365-commerce/core';\nimport { ProductSearchResult } from '@msdyn365-commerce/retail-proxy';\nimport { render } from 'enzyme';\nimport * as React from 'react';\nimport {ProductComponent} from '../index';\n\nconst mockProduct: ProductSearchResult = {\n    RecordId: 22565429819,\n    ItemId: '81120',\n    Name: 'Cotton Polo',\n    Description: 'Casual shirts are made for the \\u201cgood times\\u201d.  Our custom fitting shirts are relaxed enough to be comfortable without looking baggy.',\n    BasePrice: 59.99,\n    Price: 59.99,\n    TotalRatings: 182,\n    AverageRating: 3.71428571428571,\n    PrimaryImageUrl:'https://cms-ppe-imageresizer-mr.trafficmanager.net/cms/api/fabrikamsb/imageFileData/search?fileName=/Products%2F91032_000_001.png'\n};\n\nconst mockProductWithoutImage: ProductSearchResult = {\n    RecordId: 22565429819,\n    ItemId: '81120',\n    Name: 'Cotton Polo',\n    Description: 'Casual shirts are made for the \\u201cgood times\\u201d.  Our custom fitting shirts are relaxed enough to be comfortable without looking baggy.',\n    BasePrice: 59.99,\n    Price: 59.99,\n    TotalRatings: 182,\n    AverageRating: 3.71428571428571\n};\n\nconst mockProductWithoutName: ProductSearchResult = {\n    RecordId: 22565429819,\n    ItemId: '81120',\n    Name: '',\n    Description: 'Casual shirts are made for the \\u201cgood times\\u201d.  Our custom fitting shirts are relaxed enough to be comfortable without looking baggy.',\n    BasePrice: 59.99,\n    Price: 59.99,\n    TotalRatings: 182,\n    AverageRating: 3.71428571428571,\n    PrimaryImageUrl:'https://cms-ppe-imageresizer-mr.trafficmanager.net/cms/api/fabrikamsb/imageFileData/search?fileName=/Products%2F91032_000_001.png'\n};\n\nconst mockProductWithoutRating: ProductSearchResult = {\n    RecordId: 22565429819,\n    ItemId: '81120',\n    Name: '',\n    Description: 'Casual shirts are made for the \\u201cgood times\\u201d.  Our custom fitting shirts are relaxed enough to be comfortable without looking baggy.',\n    BasePrice: 59.99,\n    Price: 59.99,\n    PrimaryImageUrl:'https://cms-ppe-imageresizer-mr.trafficmanager.net/cms/api/fabrikamsb/imageFileData/search?fileName=/Products%2F91032_000_001.png'\n};\n\nconst defaultImageSettings: IImageSettings = {\n    viewports: {\n        xs: { q: 'w=315&h=315&m=6', w: 0, h: 0 },\n        lg: { q: 'w=315&h=315&m=6', w: 0, h: 0 }\n    },\n    lazyload: true\n};\n\ndescribe('Product component renders correctly', () => {\n    const mockCoreContext = buildMockCoreContext({app: {config: {hideRating: false}}}) as ICoreContext;\n    const telemetryContent = {  pageName: 'Homepage', moduleName: 'Product Collection', telemetry: mockCoreContext.telemetry} as ITelemetryContent;\n    it('renders product correctly', () => {\n\n        const wrapper = render((\n            <ProductComponent\n             context={mockCoreContext}\n             imageSettings={defaultImageSettings}\n             id='test'\n             typeName='test'\n             data={{product: mockProduct}}\n             telemetryContent={telemetryContent}\n            />\n        ));\n        expect(wrapper).toMatchSnapshot();\n    });\n\n    it('returns null for a null product', () => {\n\n        const wrapper = render((\n            <ProductComponent\n             context={mockCoreContext}\n             imageSettings={defaultImageSettings}\n             id='test'\n             typeName='test'\n             data={{}}\n             telemetryContent={telemetryContent}\n            />\n        ));\n        expect(wrapper.find('a')).toHaveLength(0);\n    });\n\n    it('Image is not displayed for invalid images', () => {\n        const wrapper = render((\n            <ProductComponent\n             context={mockCoreContext}\n             imageSettings={defaultImageSettings}\n             id='test'\n             typeName='test'\n             data={{product: mockProductWithoutImage}}\n             telemetryContent={telemetryContent}\n            />\n        ));\n        expect(wrapper).toMatchSnapshot();\n    });\n\n    it('Product without a name', () => {\n        const wrapper = render((\n            <ProductComponent\n             context={mockCoreContext}\n             imageSettings={defaultImageSettings}\n             id='test'\n             typeName='test'\n             data={{product: mockProductWithoutName}}\n             telemetryContent={telemetryContent}\n            />\n        ));\n        expect(wrapper).toMatchSnapshot();\n    });\n\n    it('Product without image alttext', () => {\n        const wrapper = render((\n            <ProductComponent\n             context={mockCoreContext}\n             imageSettings={defaultImageSettings}\n             id='test'\n             typeName='test'\n             data={{product: mockProductWithoutName}}\n             telemetryContent={telemetryContent}\n            />\n        ));\n        expect(wrapper).toMatchSnapshot();\n    });\n\n    it('Product without rating information', () => {\n        const wrapper = render((\n            <ProductComponent\n             context={mockCoreContext}\n             imageSettings={defaultImageSettings}\n             id='test'\n             typeName='test'\n             data={{product: mockProductWithoutRating}}\n             telemetryContent={telemetryContent}\n            />\n        ));\n        expect(wrapper).toMatchSnapshot();\n    });\n});"]}