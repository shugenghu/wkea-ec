{"version":3,"file":"item-added-to-order-template-dialog.component.js","sourceRoot":"./src/","sources":["order-template/item-added-to-order-template-dialog/item-added-to-order-template-dialog.component.tsx"],"names":[],"mappings":"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","sourcesContent":["import { getFallbackImageUrl } from '@msdyn365-commerce-modules/retail-actions';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from '@msdyn365-commerce-modules/utilities';\nimport { getUrlSync, IComponentProps, ICoreContext, IImageSettings, Image } from '@msdyn365-commerce/core';\nimport { ProductPrice, SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport React from 'react';\nimport { PriceComponent } from '../../price/price.components';\n\nexport interface IItemAddedToOrderTemplateDialogResources {\n    viewOrderTemplateButtonText: string;\n    continueShoppingButtonText: string;\n    itemAddedToOrderTemplateHeaderItemOneText: string;\n    itemAddedToOrderTemplateHeaderItemFormatText: string;\n    itemAddedToOrderTemplateHeaderMessageText: string;\n\n    freePriceText: string;\n    originalPriceText: string;\n    currentPriceText: string;\n}\n\nexport interface IItemAddedToOrderTemplateDialogData {\n    product: SimpleProduct;\n    productPrice: ProductPrice;\n    quantity: number;\n    orderTemplateId: string;\n}\n\nexport interface IItemAddedToOrderTemplateDialogProps extends IComponentProps<IItemAddedToOrderTemplateDialogData> {\n    className: string;\n\n    dialogStrings: IItemAddedToOrderTemplateDialogResources;\n\n    modalOpen: boolean | undefined;\n}\n\nconst renderOrderTemplateImage = (\n    context: ICoreContext, className: string, product: SimpleProduct, imageSettings?: IImageSettings) => {\n    const fallbackImageUrl = getFallbackImageUrl(product.ItemId, context.actionContext.requestContext.apiSettings);\n    const defaultImageSettings: IImageSettings = {\n        viewports: {\n            xs: { q: `w=140&h=140&m=6`, w: 0, h: 0 },\n            lg: { q: `w=140&h=140&m=6`, w: 0, h: 0 },\n            xl: { q: `w=140&h=140&m=6`, w: 0, h: 0 }\n        },\n        lazyload: true\n    };\n    return (\n        <Image\n            className={`${className}__image-props`}\n            src={product.PrimaryImageUrl || ''}\n            altText={product.Name}\n            fallBackSrc = {fallbackImageUrl}\n            gridSettings={context.request.gridSettings!}\n            imageSettings={imageSettings || defaultImageSettings}\n            loadFailureBehavior='empty'\n        />\n    );\n};\n\nexport const ItemAddedToOrderTemplateDialog = (dialogProps: IItemAddedToOrderTemplateDialogProps) => {\n    const {\n        dialogStrings,\n        className,\n        context,\n        modalOpen,\n        data: {\n            orderTemplateId,\n            product,\n            productPrice,\n            quantity\n        }\n    } = dialogProps;\n\n    const getOrderTemplatePageUrl = (): string => {\n        const url = getUrlSync('ordertemplate', context.actionContext) || '';\n        const separator = url.includes('?') ? '&' : '?';\n        return `${url}${separator}id=${orderTemplateId}`;\n    };\n\n    const close: () => void = () => {\n        window.location.reload(true);\n    };\n\n    const itemsString = quantity === 1 ? dialogStrings.itemAddedToOrderTemplateHeaderItemOneText : dialogStrings.itemAddedToOrderTemplateHeaderItemFormatText.replace('{0}', quantity.toString());\n\n    return (\n        <Modal isOpen={modalOpen} className={`${className}`}>\n            <ModalHeader className={`${className}__dialog__header`} toggle={close}>\n                <b>{itemsString}</b><span>{dialogStrings.itemAddedToOrderTemplateHeaderMessageText}</span>\n            </ModalHeader>\n            <ModalBody className={`${className}__dialog__body`}>\n                <div className={`${className}__dialog__content`}>\n                    {renderOrderTemplateImage(context, `${className}__dialog`, product)}\n                    <div className={`${className}__dialog__description`}>\n                        <div className={`${className}__dialog__product-name`}>\n                            {product.Name}\n                        </div>\n                        <div className={`${className}__dialog__product-price`}>\n                            {\n                                productPrice && <PriceComponent\n                                    data={{price: productPrice}}\n                                    context={dialogProps.context}\n                                    id={dialogProps.id}\n                                    typeName={dialogProps.typeName}\n                                    freePriceText={dialogProps.dialogStrings.freePriceText}\n                                    originalPriceText={dialogProps.dialogStrings.originalPriceText}\n                                    currentPriceText={dialogProps.dialogStrings.currentPriceText}\n                                />\n                            }\n                        </div>\n                        {\n                            product.Dimensions &&\n                                <div className={`${className}__dialog__product-dimensions`}>\n                                    {product.Dimensions.map(dimension => dimension.DimensionValue?.Value).filter(value => value).join(', ')}\n                                </div>\n                        }\n                    </div>\n                </div>\n            </ModalBody>\n            <ModalFooter\n                className={`${className}__dialog__footer`}\n            >\n                <Button\n                    className={`${className}__dialog__view-order-template-button`}\n                    title={dialogStrings.viewOrderTemplateButtonText}\n                    href={getOrderTemplatePageUrl()}\n                >\n                    {dialogStrings.viewOrderTemplateButtonText}\n                </Button>\n                <Button\n                    className={`${className}__dialog__continue-shopping`}\n                    title={dialogStrings.continueShoppingButtonText}\n                    onClick={close}\n                >\n                    {dialogStrings.continueShoppingButtonText}\n                </Button>\n            </ModalFooter>\n        </Modal>\n    );\n};"]}