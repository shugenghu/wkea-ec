{"version":3,"file":"item-added-to-cart-dialog.component.js","sourceRoot":"./src/","sources":["order-template/item-added-to-cart-dialog/item-added-to-cart-dialog.component.tsx"],"names":[],"mappings":"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","sourcesContent":["import { getFallbackImageUrl } from '@msdyn365-commerce-modules/retail-actions';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from '@msdyn365-commerce-modules/utilities';\nimport { getUrlSync, IComponentProps, ICoreContext, IImageSettings, Image } from '@msdyn365-commerce/core';\nimport { ProductPrice, SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport React from 'react';\nimport { PriceComponent } from '../../price/price.components';\n\nexport interface IItemAddedToCartDialogResources {\n    viewCartButtonText: string;\n    orderTemplateCloseButtonText: string;\n    itemAddedToCartHeaderItemOneText: string;\n    itemAddedToCartHeaderItemFormatText: string;\n    itemAddedToCartHeaderMessageText: string;\n\n    freePriceText: string;\n    originalPriceText: string;\n    currentPriceText: string;\n}\n\nexport interface IItemAddedToCartDialogData {\n    product: SimpleProduct;\n    productPrice: ProductPrice;\n    quantity: number;\n}\n\nexport interface IItemAddedToCartDialogProps extends IComponentProps<IItemAddedToCartDialogData> {\n    className: string;\n\n    dialogStrings: IItemAddedToCartDialogResources;\n\n    modalOpen: boolean | undefined;\n    onClose(): void;\n}\n\nconst renderImage = (\n    context: ICoreContext, className: string, product: SimpleProduct, imageSettings?: IImageSettings) => {\n    const fallbackImageUrl = getFallbackImageUrl(product.ItemId, context.actionContext.requestContext.apiSettings);\n    const defaultImageSettings: IImageSettings = {\n        viewports: {\n            xs: { q: `w=140&h=140&m=6`, w: 0, h: 0 },\n            lg: { q: `w=140&h=140&m=6`, w: 0, h: 0 },\n            xl: { q: `w=140&h=140&m=6`, w: 0, h: 0 }\n        },\n        lazyload: true\n    };\n    return (\n        <Image\n            className={`${className}__image-props`}\n            src={product.PrimaryImageUrl || ''}\n            altText={product.Name}\n            fallBackSrc = {fallbackImageUrl}\n            gridSettings={context.request.gridSettings!}\n            imageSettings={imageSettings || defaultImageSettings}\n            loadFailureBehavior='empty'\n        />\n    );\n};\n\nexport const ItemAddedToCartDialog = (dialogProps: IItemAddedToCartDialogProps) => {\n    const {\n        dialogStrings,\n        className,\n        context,\n        modalOpen,\n        data: {\n            product,\n            productPrice,\n            quantity\n        }\n    } = dialogProps;\n\n    const getCartPageUrl = (): string => {\n        return getUrlSync('cart', context.actionContext) || '';\n    };\n\n    const close: () => void = () => {\n        dialogProps.onClose();\n    };\n\n    const itemsString = quantity === 1 ? dialogStrings.itemAddedToCartHeaderItemOneText : dialogStrings.itemAddedToCartHeaderItemFormatText.replace('{0}', quantity.toString());\n\n    return (\n        <Modal isOpen={modalOpen} className={`${className}`}>\n            <ModalHeader className={`${className}__dialog__header`} toggle={close}>\n                <b>{itemsString}</b><span>{dialogStrings.itemAddedToCartHeaderMessageText}</span>\n            </ModalHeader>\n            <ModalBody className={`${className}__dialog__body`}>\n                <div className={`${className}__dialog__content`}>\n                    {renderImage(context, `${className}__dialog`, product)}\n                    <div className={`${className}__dialog__description`}>\n                        <div className={`${className}__dialog__product-name`}>\n                            {product.Name}\n                        </div>\n                        <div className={`${className}__dialog__product-price`}>\n                            {\n                                productPrice && <PriceComponent\n                                    data={{price: productPrice}}\n                                    context={dialogProps.context}\n                                    id={dialogProps.id}\n                                    typeName={dialogProps.typeName}\n                                    freePriceText={dialogProps.dialogStrings.freePriceText}\n                                    originalPriceText={dialogProps.dialogStrings.originalPriceText}\n                                    currentPriceText={dialogProps.dialogStrings.currentPriceText}\n                                />\n                            }\n                        </div>\n                        {\n                            product.Dimensions &&\n                                <div className={`${className}__dialog__product-dimensions`}>\n                                    {product.Dimensions.map(dimension => dimension.DimensionValue?.Value).filter(value => value).join(', ')}\n                                </div>\n                        }\n                    </div>\n                </div>\n            </ModalBody>\n            <ModalFooter\n                className={`${className}__dialog__footer`}\n            >\n                <Button\n                    className={`${className}__dialog__view-cart-button`}\n                    title={dialogStrings.viewCartButtonText}\n                    href={getCartPageUrl()}\n                >\n                    {dialogStrings.viewCartButtonText}\n                </Button>\n                <Button\n                    className={`${className}__dialog__continue-shopping`}\n                    title={dialogStrings.orderTemplateCloseButtonText}\n                    onClick={close}\n                >\n                    {dialogStrings.orderTemplateCloseButtonText}\n                </Button>\n            </ModalFooter>\n        </Modal>\n    );\n};"]}