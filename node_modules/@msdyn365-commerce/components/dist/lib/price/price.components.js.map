{"version":3,"file":"price.components.js","sourceRoot":"./src/","sources":["price/price.components.tsx"],"names":[],"mappings":"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","sourcesContent":["import classnames from 'classnames';\nimport * as React from 'react';\n\n/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\nimport { IComponent, IComponentProps, msdyn365Commerce } from '@msdyn365-commerce/core';\nimport { ProductPrice } from '@msdyn365-commerce/retail-proxy';\n\nexport interface IPriceComponentProps extends IComponentProps<{price: ProductPrice}> {\n    className?: string;\n    savingsText?: string;\n    freePriceText?: string;\n    originalPriceText?: string;\n    currentPriceText?: string;\n}\nexport interface IPriceComponent extends IComponent<IPriceComponentProps> {\n}\n\nconst PriceComponentActions = {\n};\n\nconst Price: React.FC<IPriceComponentProps> = (props: IPriceComponentProps) => {\n    // CustomerContextualPrice could be 0\n    if (props.data.price.CustomerContextualPrice === undefined) {\n        return null;\n    }\n\n    return (\n        <span className={classnames('msc-price', props.className)}>\n            {showStrikethroughPricing(props) ? renderCurrentPriceWithOriginalPrice(props) : renderCurrentPrice(props)}\n        </span>\n    );\n};\n\nconst showStrikethroughPricing = (props: IPriceComponentProps) => {\n    const originalPrice = getOriginalPrice(props);\n\n    if (originalPrice && props.data.price.CustomerContextualPrice) {\n        return originalPrice > props.data.price.CustomerContextualPrice;\n    }\n\n    return false;\n};\n\nconst getOriginalPrice = (props: IPriceComponentProps) => {\n    return Math.max(props.data.price.BasePrice || 0, props.data.price.TradeAgreementPrice || 0, props.data.price.AdjustedPrice || 0);\n};\n\nconst renderCurrentPrice = (props: IPriceComponentProps): JSX.Element | undefined => {\n    const initialPrice = formatCurrency(props, props.data.price.CustomerContextualPrice);\n    return <span className='msc-price__actual' itemProp='price'>{initialPrice}</span>;\n};\n\nconst formatCurrency = (props: IPriceComponentProps, price: number | undefined): string | undefined => {\n    if (price === undefined) {\n        return undefined;\n    }\n\n    if (price === 0 && props.freePriceText) {\n        return props.freePriceText;\n    }\n\n    return props.context.cultureFormatter.formatCurrency(price);\n};\n\nconst renderCurrentPriceWithOriginalPrice = (props: IPriceComponentProps): JSX.Element | null => {\n    const originalPrice = getOriginalPrice(props);\n    const initialPrice = formatCurrency(props, originalPrice);\n\n    return (\n        <>\n            <span className='sr-only'> {props.originalPriceText} {initialPrice} {props.currentPriceText} {renderCurrentPrice(props)}</span>\n            <span className='msc-price__strikethrough' aria-hidden='true'>{initialPrice}</span>\n            <span aria-hidden='true'>{renderCurrentPrice(props)}</span>\n            {props.savingsText && <span className='msc-price__savings'>{props.savingsText}</span>}\n        </>\n    );\n};\n\n// @ts-ignore\nexport const PriceComponent: React.FunctionComponent<IPriceComponentProps> = msdyn365Commerce.createComponent<IPriceComponent>(\n    'Price',\n    { component: Price, ...PriceComponentActions }\n);"]}