import classnames from 'classnames';
import * as React from 'react';
import { msdyn365Commerce } from '@msdyn365-commerce/core';
const PriceComponentActions = {};
const Price = (props) => {
    if (props.data.price.CustomerContextualPrice === undefined) {
        return null;
    }
    return (React.createElement("span", { className: classnames('msc-price', props.className) }, showStrikethroughPricing(props) ? renderCurrentPriceWithOriginalPrice(props) : renderCurrentPrice(props)));
};
const showStrikethroughPricing = (props) => {
    const originalPrice = getOriginalPrice(props);
    if (originalPrice && props.data.price.CustomerContextualPrice) {
        return originalPrice > props.data.price.CustomerContextualPrice;
    }
    return false;
};
const getOriginalPrice = (props) => {
    return Math.max(props.data.price.BasePrice || 0, props.data.price.TradeAgreementPrice || 0, props.data.price.AdjustedPrice || 0);
};
const renderCurrentPrice = (props) => {
    const initialPrice = formatCurrency(props, props.data.price.CustomerContextualPrice);
    return React.createElement("span", { className: 'msc-price__actual', itemProp: 'price' }, initialPrice);
};
const formatCurrency = (props, price) => {
    if (price === undefined) {
        return undefined;
    }
    if (price === 0 && props.freePriceText) {
        return props.freePriceText;
    }
    return props.context.cultureFormatter.formatCurrency(price);
};
const renderCurrentPriceWithOriginalPrice = (props) => {
    const originalPrice = getOriginalPrice(props);
    const initialPrice = formatCurrency(props, originalPrice);
    return (React.createElement(React.Fragment, null,
        React.createElement("span", { className: 'sr-only' },
            " ",
            props.originalPriceText,
            " ",
            initialPrice,
            " ",
            props.currentPriceText,
            " ",
            renderCurrentPrice(props)),
        React.createElement("span", { className: 'msc-price__strikethrough', "aria-hidden": 'true' }, initialPrice),
        React.createElement("span", { "aria-hidden": 'true' }, renderCurrentPrice(props)),
        props.savingsText && React.createElement("span", { className: 'msc-price__savings' }, props.savingsText)));
};
export const PriceComponent = msdyn365Commerce.createComponent('Price', { component: Price, ...PriceComponentActions });
//# sourceMappingURL=price.components.js.map