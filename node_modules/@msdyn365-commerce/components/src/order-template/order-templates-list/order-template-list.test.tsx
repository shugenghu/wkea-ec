import { render } from 'enzyme';
import * as React from 'react';

import { OrderTemplate } from '@msdyn365-commerce-modules/retail-actions';
import { buildMockCoreContext, ICoreContext } from '@msdyn365-commerce/core';
import { ProductListLine } from '@msdyn365-commerce/retail-proxy';
import { OrderTemplateComponent } from './order-template-list';

describe('OrderTemplateComponent', () => {
    let mockCoreContext: ICoreContext;
    const productListLine: ProductListLine = {
        ProductListId: 'product-list-id',
        LineId: 'line-id',
        ProductId: 42,
        Quantity: 12,
        UnitOfMeasure: 'ea'
    };
    const orderTemplate: OrderTemplate = {
        productList: {
            Id: 'id',
            ProductListLines: [productListLine]
        },
        orderTemplateLines: [{ productListLine: productListLine }],
        totalLines: 0
    };
    const onOrderTemplateSelected = async () => {
        return;
    };

    beforeEach(() => {
        mockCoreContext = buildMockCoreContext({app: {config: {enableStockCheck: false, outOfStockThreshold: 5}}}) as ICoreContext;
    });

    it('renders correctly with all params', () => {
        const orderTemplateComponent = render((
            <OrderTemplateComponent
                context={mockCoreContext}
                className={'class-name'}
                orderTemplate={orderTemplate}
                actionButtonText={'actionButtonText'}
                lineItemsText={'lineItemsText'}
                orderTemplateAction={onOrderTemplateSelected}
            />
        ));
        expect(orderTemplateComponent).toMatchSnapshot();
    });
});