{"version":3,"file":"remove-all-promo-codes.js","sourceRoot":"./src/","sources":["cart-state/remove-all-promo-codes.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,wBAAwB,EAAE,MAAM,qEAAqE,CAAC;AAI/G,MAAM,CAAC,OAAO,CAAC,KAAK,UAAU,mBAAmB,CAAC,IAAgC,EAAE,aAA6B;IAC7G,IAAI,CAAC,IAAI,EAAE;QACP,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAC,CAAC;KAC/C;IAED,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;QACzC,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,OAAO,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7E,OAAO,wBAAwB,CAAC,EAAE,aAAa,EAAE,aAAa,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,UAAU,CAAC;aACjF,IAAI,CAAC,OAAO,CAAC,EAAE;YACZ,OAAmC,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC;QAC5E,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;YACb,aAAa,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAEvC,OAAmC,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC;QAC7E,CAAC,CAAC,CAAC;KACV;IAED,OAAmC,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC;AACzE,CAAC","sourcesContent":["import { IActionContext } from '@msdyn365-commerce/core';\nimport { removeDiscountCodesAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/CartsDataActions.g';\nimport { Cart } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport { ICartActionResultWithCart } from './cart-action-result';\n\nexport default async function removeAllPromoCodes(cart: Readonly<Cart | undefined>, actionContext: IActionContext): Promise<ICartActionResultWithCart> {\n    if (!cart) {\n        return { cart: undefined, status: 'FAILED'};\n    }\n\n    if (cart.Coupons && cart.Coupons.length > 0) {\n        const promoCodes = cart.Coupons.map(coupon => { return coupon.Code || ''; });\n\n        return removeDiscountCodesAsync({ callerContext: actionContext }, cart.Id, promoCodes)\n            .then(newCart => {\n                return <ICartActionResultWithCart> { cart: newCart, status: 'SUCCESS' };\n            }).catch(error => {\n                actionContext.telemetry.warning(error);\n\n                return <ICartActionResultWithCart> { cart: undefined, status: 'FAILED' };\n            });\n    }\n\n    return <ICartActionResultWithCart> { cart: cart, status: 'SUCCESS' };\n}"]}