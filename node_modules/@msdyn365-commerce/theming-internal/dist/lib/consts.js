"use strict";
/*!
 * Copyright (c) Microsoft Corporation.
 * All rights reserved. See LICENSE in the project root for license information.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const utilities_internal_1 = require("@msdyn365-commerce/utilities-internal");
const fs = tslib_1.__importStar(require("fs"));
const path = tslib_1.__importStar(require("path"));
const SLUG = `[Theme Builder] `;
exports.getSharedComponentsDir = () => {
    let sharedComponentsDir = '';
    try {
        sharedComponentsDir = require.resolve('@msdyn365-commerce-modules/shared-components');
        /* this resolve to {somePath}/@msdyn365-commerce-modules/shared-components/dist/lib/index.js from which we need
         * {somePath}/@msdyn365-commerce-modules/shared-components/
         */
        return sharedComponentsDir.replace(/\\/gi, '/').replace(/dist\/lib\/index\.js/gi, '');
    }
    catch (e) {
        utilities_internal_1.trace && utilities_internal_1.trace.info(`${SLUG}[deprecated] Couldn't not find shared-components in node_modules`);
        // symlink scenario
        const symlinkedPath = path.join(path.resolve('.'), 'node_modules', '@msdyn365-commerce-modules', 'shared-components');
        if (fs.existsSync(symlinkedPath)) {
            sharedComponentsDir = symlinkedPath;
            utilities_internal_1.trace && utilities_internal_1.trace.info(`${SLUG}Found shared components at '${symlinkedPath}'`);
        }
    }
    return sharedComponentsDir;
};
exports.SHARED_COMPONENTS_DIR = exports.getSharedComponentsDir();
const _sharedComponentsSourceDir = path.join(exports.SHARED_COMPONENTS_DIR, 'dist', 'lib').replace(/[\\/]/g, '/');
exports.getSharedComponentsSourceDir = fs.existsSync(_sharedComponentsSourceDir) && _sharedComponentsSourceDir;
exports.resolveSharedComponentSourceFiles = (fileName) => path.resolve(exports.SHARED_COMPONENTS_DIR, 'dist', 'lib', 'src', 'scss', !path.extname(fileName) ? `${fileName}.scss` : fileName);
//# sourceMappingURL=consts.js.map