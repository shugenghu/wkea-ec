"use strict";
/*!
 * Copyright (c) Microsoft Corporation.
 * All rights reserved. See LICENSE in the project root for license information.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @description print package versions script
 */
const utilities_internal_1 = require("@msdyn365-commerce/utilities-internal");
const fs = require("fs-extra");
const path = require("path");
const utils_1 = require("./utils");
function printPackageVersions() {
    const packageRootDir = process.cwd();
    const packageVersionsFile = path.resolve(packageRootDir, 'build', 'packageVersions.json');
    if (!fs.existsSync(packageVersionsFile)) {
        utilities_internal_1.trace.warn(`Missing packageVersions.json in your build folder....Running 'yarn build' to generate the files..`);
        try {
            utils_1.execSyncWithConsoleOutput(`yarn msdyn365b build`, packageRootDir);
        }
        catch (e) {
            utilities_internal_1.trace.error(`'yarn build' failed. Please run 'yarn build' again to identify the issues.`);
        }
    }
    utilities_internal_1.trace.info('Printing pacakgeVersions.json...');
    utilities_internal_1.trace.info(fs.readFileSync(packageVersionsFile).toString());
}
exports.default = printPackageVersions;
