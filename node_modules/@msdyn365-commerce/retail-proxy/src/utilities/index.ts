/*!
 * Copyright (c) Microsoft Corporation.
 * All rights reserved. See LICENSE in the project root for license information.
 */

const fullImagePath = /^(\/\/|^)http/;

/**
 * Generates a Image URL based on data return from retail server
 * @param imageUrl The image url returned by Retail Server
 * @param apiSettings Api settings
 */
export const generateImageUrl = (imageUrl: string | undefined, apiSettings: { baseImageUrl: string }): string | undefined => {
    if (imageUrl) {
        if (fullImagePath.test(imageUrl)) {
            return imageUrl;
        }

        // Images hosted in Retail Server must be encoded and joined with the base image url
        return apiSettings.baseImageUrl + encodeURIComponent(imageUrl);
    }
};
