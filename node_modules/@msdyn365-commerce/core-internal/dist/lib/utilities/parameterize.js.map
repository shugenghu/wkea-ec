{"version":3,"file":"parameterize.js","sourceRoot":"","sources":["../../../src/utilities/parameterize.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,gBAAgB,MAAM,sBAAsB,CAAC;AAOpD;;;;;;;GAOG;AACH,MAAM,UAAU,YAAY,CACxB,OAAe,EAAE,EACjB,MAAc,GAAG,EACjB,2BAAsD,EAAE,EACxD,eAAwB;IAExB,8EAA8E;IAC9E,MAAM,aAAa,GACf,CAAC,gBAAgB,CAAC,gBAAgB,IAAI,gBAAgB,CAAC,gBAAgB,CAAC,qBAAqB,CAAC;QAC9F,wBAAwB,CAAC,qBAAqB;QAC1C,CAAC,CAAC,IAAI;QACN,CAAC,CAAC,eAAe,IAAI,IAAI,CAAC;IAElC;;;;;;;;MAQE;IACF,IACI,wBAAwB,CAAC,iBAAiB;QAC1C,CAAC,gBAAgB,CAAC,gBAAgB,IAAI,gBAAgB,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,EAC5F;QACE,4EAA4E;QAC5E,4EAA4E;QAC5E,OAAO,kBAAkB,CACrB,aAAa;aACR,WAAW,EAAE;aACb,OAAO,CAAC,cAAc,EAAE,GAAG,CAAC;aAC5B,IAAI,EAAE;aACN,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;aACpB,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CACjC,CAAC;KACL;IACD,OAAO,aAAa;SACf,WAAW,EAAE;SACb,OAAO,CAAC,gBAAgB,EAAE,GAAG,CAAC;SAC9B,IAAI,EAAE;SACN,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AAC9B,CAAC","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport msdyn365Commerce from '../msdyn365-commerce';\n\nexport interface IParameterizeFeatureFlags {\n    enableUrlLocalization?: Boolean;\n    enableUrlEncoding?: Boolean;\n}\n\n/**\n * Converts a string into a url safe parameter. THIS IS A LOSSY OPERATION.\n * e.g. 'My special string' => 'my-special-string'\n * @param name string to convert into url parameter\n * @param sep segment seperator. Defaults to '-'\n * @param parameterizeFeatureFlags feature switch if we should enable locale info to be saved to the encoded url.\n * @package neutralizedName neutralizedName input\n */\nexport function parameterize(\n    name: string = '',\n    sep: string = '-',\n    parameterizeFeatureFlags: IParameterizeFeatureFlags = {},\n    neutralizedName?: string\n): string {\n    // if neutralizedName flag enabled, we use neutralizedName to construct string\n    const candidateName =\n        (msdyn365Commerce.platformSettings && msdyn365Commerce.platformSettings.enableUrlLocalization) ||\n        parameterizeFeatureFlags.enableUrlLocalization\n            ? name\n            : neutralizedName || name;\n\n    /*\n    1\t‘ ‘ (space)\t-> (single dash)\n    3\tAny character disallowed in URLs -> URL-encode\n    5\t‘ & ‘ (space ampersand space) -> (single dash)\n    6\t‘ - ‘ (space dash space) -> (single dash)\n    7\t‘  ‘ (2+ spaces) -> (single dash)\n    10\t[A-Z] (capital letters) -> [a-z] (lower-case)\n    12\tAny non-ASCII character outside of the set of disallowed  characters -> URL-encode\n    */\n    if (\n        parameterizeFeatureFlags.enableUrlEncoding ||\n        (msdyn365Commerce.platformSettings && msdyn365Commerce.platformSettings.enableUrlEncoding)\n    ) {\n        // replace url reserved characters with dash, and remove front and end dash;\n        // &*!() reserved characters that can not be encoded by encodeURIComponent()\n        return encodeURIComponent(\n            candidateName\n                .toLowerCase()\n                .replace(/[\\s&*!()']+/g, '-')\n                .trim()\n                .replace(/\\-+/g, '-')\n                .replace(/^\\-+|\\-+$/g, '')\n        );\n    }\n    return candidateName\n        .toLowerCase()\n        .replace(/[^a-z0-9\\-_]+/g, ' ')\n        .trim()\n        .replace(/\\s+/g, sep);\n}\n"]}