{"version":3,"file":"build-module-registration.test.js","sourceRoot":"","sources":["../../../src/__tests__/build-module-registration.test.ts"],"names":[],"mappings":";AAAA;;;GAGG;;;AAEH,gBAAc;AACd,iDAA6B;AAC7B,gGAA4E;AAC5E,gFAAsF;AAGtF,IAAM,SAAS,GAAa,GAAG,CAAC;AAChC,IAAM,SAAS,GAAa,IAAI,CAAC;AACjC,IAAM,eAAe,GAAG,4BAA4B,CAAC;AAErD,QAAQ,CAAC,0BAA0B,EAAE;IACjC,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,OAAO,CAAC,UAAC,cAAwB;QACpD,iBAAiB;QACjB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,UAAA,SAAS;YAC1B,EAAE,CAAC,aAAW,cAAc,mBAAc,SAAS,4CAAyC,EAAE;gBAC1F,UAAU;gBACV,IAAM,GAAG,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC;gBAC1B,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gBAC/D,IAAM,KAAK,GAAG,oCAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,cAAc,EAAE,eAAe,EAAE,aAAa,EAAE,gBAAgB,CAAC,EAAE,cAAc,CAAC,CAAC;gBAE5H,MAAM;gBACN,IAAM,MAAM,GAAG,8CAAyB,CAAC;oBACrC,sBAAsB,EAAE,KAAK;oBAC7B,eAAe,EAAE,eAAe;iBACnC,CAAC,CAAC;gBAEH,SAAS;gBACT,MAAM,CAAC,MAAM,CAAC,CAAC,eAAe,EAAE,CAAC;YACrC,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,aAAW,cAAc,wCAAqC,EAAE;YAC/D,UAAU;YACV,IAAM,GAAG,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC;YAC1B,IAAM,KAAK,GAAG,oCAAO,CACjB,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,SAAS,EAAE,mBAAmB,EAAE,oBAAoB,EAAE,sBAAsB,CAAC,EAC/F,cAAc,CACjB,CAAC;YAEF,MAAM;YACN,IAAM,MAAM,GAAG,8CAAyB,CAAC,EAAE,sBAAsB,EAAE,KAAK,EAAE,eAAe,EAAE,eAAe,EAAE,CAAC,CAAC;YAE9G,SAAS;YACT,MAAM,CAAC,MAAM,CAAC,CAAC,eAAe,EAAE,CAAC;QACrC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport 'jest';\nimport * as path from 'path';\nimport { fixPath } from '../module-registration/module-registration-helper';\nimport { getModuleFileRelativePath } from '../module-registration/registration-utils';\n\ntype TSlashes = '\\\\' | '/';\nconst FWD_SLASH: TSlashes = `/`;\nconst BCK_SLASH: TSlashes = `\\\\`;\nconst moduleNamespace = '@msdyn365-commerce-modules';\n\ndescribe('getComponentRelativePath', () => {\n    [BCK_SLASH, FWD_SLASH].forEach((slashDirection: TSlashes) => {\n        // isHoisted flag\n        [true, true].forEach(isHoisted => {\n            it(`[slash: ${slashDirection}, hoisted: ${isHoisted}] can handle absolute path with hoisted`, () => {\n                // arrange\n                const cwd = process.cwd();\n                const basedir = path.resolve(cwd, isHoisted ? '../..' : '../');\n                const input = fixPath(path.join(basedir, 'node_modules', moduleNamespace, 'test-module', 'test-module.js'), slashDirection);\n\n                // act\n                const result = getModuleFileRelativePath({\n                    moduleFileAbsolutePath: input,\n                    moduleNamespace: moduleNamespace\n                });\n\n                // assert\n                expect(result).toMatchSnapshot();\n            });\n        });\n\n        it(`[slash: ${slashDirection}] can handle local module reference`, () => {\n            // arrange\n            const cwd = process.cwd();\n            const input = fixPath(\n                path.resolve(cwd, 'modules', 'local-test-module', 'local-test-module2', 'local-test-module.js'),\n                slashDirection\n            );\n\n            // act\n            const result = getModuleFileRelativePath({ moduleFileAbsolutePath: input, moduleNamespace: moduleNamespace });\n\n            // assert\n            expect(result).toMatchSnapshot();\n        });\n    });\n});\n"]}