"use strict";
/*!
 * Copyright (c) Microsoft Corporation.
 * All rights reserved. See LICENSE in the project root for license information.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
require("jest");
var path = tslib_1.__importStar(require("path"));
var module_registration_helper_1 = require("../module-registration/module-registration-helper");
var registration_utils_1 = require("../module-registration/registration-utils");
var FWD_SLASH = "/";
var BCK_SLASH = "\\";
var moduleNamespace = '@msdyn365-commerce-modules';
describe('getComponentRelativePath', function () {
    [BCK_SLASH, FWD_SLASH].forEach(function (slashDirection) {
        // isHoisted flag
        [true, true].forEach(function (isHoisted) {
            it("[slash: " + slashDirection + ", hoisted: " + isHoisted + "] can handle absolute path with hoisted", function () {
                // arrange
                var cwd = process.cwd();
                var basedir = path.resolve(cwd, isHoisted ? '../..' : '../');
                var input = module_registration_helper_1.fixPath(path.join(basedir, 'node_modules', moduleNamespace, 'test-module', 'test-module.js'), slashDirection);
                // act
                var result = registration_utils_1.getModuleFileRelativePath({
                    moduleFileAbsolutePath: input,
                    moduleNamespace: moduleNamespace
                });
                // assert
                expect(result).toMatchSnapshot();
            });
        });
        it("[slash: " + slashDirection + "] can handle local module reference", function () {
            // arrange
            var cwd = process.cwd();
            var input = module_registration_helper_1.fixPath(path.resolve(cwd, 'modules', 'local-test-module', 'local-test-module2', 'local-test-module.js'), slashDirection);
            // act
            var result = registration_utils_1.getModuleFileRelativePath({ moduleFileAbsolutePath: input, moduleNamespace: moduleNamespace });
            // assert
            expect(result).toMatchSnapshot();
        });
    });
});
//# sourceMappingURL=build-module-registration.test.js.map