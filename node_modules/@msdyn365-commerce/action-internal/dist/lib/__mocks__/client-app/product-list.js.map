{"version":3,"file":"product-list.js","sourceRoot":"","sources":["../../../../src/__mocks__/client-app/product-list.tsx"],"names":[],"mappings":"AAAA;;;GAGG;;AAEH,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AACtC,OAAO,KAAK,MAAM,OAAO,CAAC;AAK1B,OAAO,eAAe,EAAE,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAC;AACtE,OAAO,WAAW,EAAE,EAAE,SAAS,EAAa,MAAM,qBAAqB,CAAC;AACxE,OAAO,qBAAqB,EAAE,EAAqB,SAAS,EAAE,MAAM,wCAAwC,CAAC;AAC7G,OAAO,oBAAoB,EAAE,EAAE,mBAAmB,EAAE,MAAM,wBAAwB,CAAC;AAEnF,aAAa;AAEb,IAAqB,WAAW,GAAhC,MAAqB,WAAY,SAAQ,KAAK,CAAC,SAAoE;IAC/G,YAAY,KAAU;QAClB,KAAK,CAAC,KAAK,CAAC,CAAC;QACb,IAAI,CAAC,KAAK,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;IACnD,CAAC;IAEM,KAAK,CAAC,kBAAkB;QAC3B,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,aAA+B,CAAC;QACvD,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;YAC9C,qBAAqB,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,GAAG,CAAC;YAC7D,WAAW,CAAC,IAAI,SAAS,EAAE,EAAE,GAAG,CAAC;SACpC,CAAC,CAAC;QAEH,MAAM,YAAY,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC;QAC9E,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,CAAC;QACpF,IAAI,CAAC,QAAQ,CAAC;YACV,QAAQ,EAAE,YAAY;YACtB,IAAI,EAAE,IAAI;SACb,CAAC,CAAC;IACP,CAAC;IAEM,MAAM;QACT,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;QAC7B,OAAO,CACH;YACI,gCAAK,IAAI,CAAC,KAAK,CAAC,OAAO,CAAM;YAC7B,6BAAK,SAAS,EAAC,KAAK,IACf,IAAI,CAAC,KAAK,CAAC,QAAQ;gBAChB,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAoB,EAAE,EAAE;oBAC7C,MAAM,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,KAAK,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;oBAC9F,OAAO,CACH,oBAAC,gBAAgB,IACb,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAC3B,OAAO,EAAE,CAAC,CAAC,OAAO,EAClB,MAAM,EAAE,MAAM,EACd,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,EACvC,GAAG,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,EAAE,EAAE,GAC9C,CACL,CAAC;gBACN,CAAC,CAAC;gBACJ,CAAC,CAAC,EAAE,CACN,CACJ,CACT,CAAC;IACN,CAAC;CACJ,CAAA;AA7CoB,WAAW;IAD/B,QAAQ;;GACY,WAAW,CA6C/B;eA7CoB,WAAW;AA+ChC,MAAM,gBAAiB,SAAQ,KAAK,CAAC,aAGpC;IACG,YAAY,KAAU;QAClB,KAAK,CAAC,KAAK,CAAC,CAAC;IACjB,CAAC;IAEM,KAAK,CAAC,SAAS;QAClB,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,gCAAgC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;QACxF,oGAAoG;QACpG,MAAM,eAAe,CAAC,IAAI,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;IAC/F,CAAC;IAEM,KAAK,CAAC,cAAc;QACvB,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,mCAAmC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;QAC3F,MAAM,oBAAoB,CAAC,IAAI,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;IACtG,CAAC;IAEM,MAAM;QACT,OAAO,CACH,6BAAK,SAAS,EAAC,0BAA0B;YACrC,6BAAK,SAAS,EAAC,MAAM;gBACjB,6BAAK,SAAS,EAAC,WAAW;oBACtB,4BAAI,SAAS,EAAC,YAAY,IAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAM;oBAC1D,2BAAG,SAAS,EAAC,WAAW,IAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAK;oBAC5D,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CACjB,2BAAG,IAAI,EAAC,GAAG,EAAC,SAAS,EAAC,mBAAmB,EAAC,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,uBAE1E,CACP,CAAC,CAAC,CAAC,CACA,2BAAG,IAAI,EAAC,GAAG,EAAC,SAAS,EAAC,iBAAiB,EAAC,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,kBAEnE,CACP,CACC,CACJ,CACJ,CACT,CAAC;IACN,CAAC;CACJ","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { observer } from 'mobx-react';\nimport React from 'react';\n\nimport { IActionContext } from '@msdyn365-commerce/core-internal';\nimport { MockProduct } from '../actions/get-products';\n\nimport addToCartAction, { AddToCartInput } from '../actions/add-cart';\nimport getCartData, { CartInput, ICartInfo } from '../actions/get-cart';\nimport getRecommendationData, { ProductWithRating, RecoInput } from '../actions/get-recommendation-products';\nimport removeFromCartAction, { RemoveFromCartInput } from '../actions/remove-cart';\n\n/*@internal*/\n@observer\nexport default class ProductList extends React.Component<any, { products?: ProductWithRating[]; cart?: ICartInfo }> {\n    constructor(props: any) {\n        super(props);\n        this.state = { products: [], cart: undefined };\n    }\n\n    public async componentWillMount() {\n        const ctx = this.props.actionContext as IActionContext;\n        const [recommendations, cart] = await Promise.all([\n            getRecommendationData(new RecoInput(this.props.channel), ctx),\n            getCartData(new CartInput(), ctx)\n        ]);\n\n        const recoProducts = !!recommendations ? recommendations.products : undefined;\n        this.props.actionContext.trace('Recommendations' + JSON.stringify(recommendations));\n        this.setState({\n            products: recoProducts,\n            cart: cart\n        });\n    }\n\n    public render(): JSX.Element {\n        const cart = this.state.cart;\n        return (\n            <div>\n                <h3>{this.props.channel}</h3>\n                <div className='row'>\n                    {this.state.products\n                        ? this.state.products.map((p: ProductWithRating) => {\n                              const inCart = !!cart && !!cart.lines && !!cart.lines.find(l => l.productId === p.product.Id);\n                              return (\n                                  <ProductComponent\n                                      channel={this.props.channel}\n                                      product={p.product}\n                                      inCart={inCart}\n                                      actionContext={this.props.actionContext}\n                                      key={`${this.props.channel}|${p.product.Id}`}\n                                  />\n                              );\n                          })\n                        : ''}\n                </div>\n            </div>\n        );\n    }\n}\n\nclass ProductComponent extends React.PureComponent<\n    { channel: string; product: MockProduct; inCart?: boolean; actionContext: IActionContext },\n    any\n> {\n    constructor(props: any) {\n        super(props);\n    }\n\n    public async addToCart() {\n        this.props.actionContext.trace(`Calling add to cart with id: ${this.props.product.Id}`);\n        // await this.props.actionContext.chainAction(AddToCart, new AddToCartInput(this.props.product, 1));\n        await addToCartAction(new AddToCartInput(this.props.product, 1), this.props.actionContext);\n    }\n\n    public async removeFromCart() {\n        this.props.actionContext.trace(`Calling remove to cart with id: ${this.props.product.Id}`);\n        await removeFromCartAction(new RemoveFromCartInput(this.props.product), this.props.actionContext);\n    }\n\n    public render(): JSX.Element {\n        return (\n            <div className='col-12 col-sm-6 col-lg-3'>\n                <div className='card'>\n                    <div className='card-body'>\n                        <h5 className='card-title'>{this.props.product.Title}</h5>\n                        <p className='card-text'>{this.props.product.Description}</p>\n                        {this.props.inCart ? (\n                            <a href='#' className='btn btn-secondary' onClick={() => this.removeFromCart()}>\n                                Remove from Cart\n                            </a>\n                        ) : (\n                            <a href='#' className='btn btn-primary' onClick={() => this.addToCart()}>\n                                Add To Cart\n                            </a>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n"]}