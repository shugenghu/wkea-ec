{"version":3,"file":"get-product-ratings.js","sourceRoot":"","sources":["../../../../src/__mocks__/actions/get-product-ratings.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { IAction, IActionContext, IActionInput, ICreateActionContext } from '@msdyn365-commerce/core-internal';\nimport { createDataAction } from '../../create-data-action';\n\n/*@internal*/\nexport class ProductRatingInput implements IActionInput {\n    public ProductId: string;\n\n    constructor(id: string) {\n        this.ProductId = id;\n    }\n\n    public shouldCacheOutput = () => true;\n    public getCacheObjectType = () => 'PRODUCT_RATING';\n    public getCacheKey = () => this.ProductId;\n}\n\nasync function GetProductRatings(inputs: ProductRatingInput[], ctx: IActionContext): Promise<ProductRating[]> {\n    const fetchIds: string[] = inputs.map(i => i.ProductId);\n\n    return fetchProductRatings(fetchIds, ctx);\n}\n\nasync function fetchProductRatings(productIds: string[], ctx: IActionContext): Promise<ProductRating[]> {\n    ctx.trace(`Fetching product ratings: ${productIds.join('!')}`);\n    const productRatings: ProductRating[] = [];\n    productIds.map(id => productRatings.push(mockProductRatings[id] as ProductRating));\n    return Promise.resolve(productRatings);\n}\n\nconst createGetProductRatingsInput = (arg: ICreateActionContext<any>): IActionInput[] => {\n    if (arg.config && arg.config.productIds) {\n        return arg.config.productIds.map((pid: string) => new ProductRatingInput(pid));\n    }\n\n    throw new Error('config is not well defined for product rating input');\n};\n\n//// MOCK data\n/*@internal*/\nexport interface ProductRating {\n    Id: string;\n    Rating: number;\n}\n\n/*@internal*/\nexport const mockProductRatings: any = {\n    100: { Id: '100', Rating: 4.2 },\n    101: { Id: '101', Rating: 3.8 },\n    102: { Id: '102', Rating: 4.1 },\n    103: { Id: '103', Rating: 5 },\n    104: { Id: '104', Rating: 1.8 },\n    105: { Id: '105', Rating: 3.7 },\n    106: { Id: '106', Rating: 4.4 },\n    107: { Id: '107', Rating: 4.6 },\n    108: { Id: '108', Rating: 2.9 },\n    109: { Id: '109', Rating: 4.9 },\n    110: { Id: '110', Rating: 3 },\n    111: { Id: '111', Rating: 0.3 },\n    112: { Id: '112', Rating: 0.9 }\n};\n\n/*@internal*/\nexport default createDataAction({\n    action: GetProductRatings as IAction<ProductRating[]>,\n    input: createGetProductRatingsInput,\n    isBatched: true\n});\n"]}