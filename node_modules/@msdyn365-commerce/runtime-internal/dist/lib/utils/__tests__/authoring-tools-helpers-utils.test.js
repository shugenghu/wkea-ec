/*!
 * Copyright (c) Microsoft Corporation.
 * All rights reserved. See LICENSE in the project root for license information.
 */
import { resolveTypesInConfig } from '../authoring-tools-helper-utils';
const imageConfig = {
    heading: {
        text: 'Content Block Heading',
        tag: 'h2'
    },
    image: {
        type: 'imageFileData',
        lastModified: '2020-03-12T22:42:39+00:00',
        lastModifiedBy: 'brdeal@microsoft.com',
        id: 'IDNMAkQ0',
        cmsId: 'cms/api/phpjqgrmtp/identity/IDNMAkQ0',
        state: 'checkedIn',
        isCheckedOutToMe: false,
        isPublished: true,
        errorDetails: '',
        publicUrl: 'https://cms-ppe-imageresizer-mr.trafficmanager.net/cms/api/phpjqgrmtp/imageFileData/MAkQ2',
        previewUrl: 'https://cms-us-ppe-imageresizer-preview-mr.trafficmanager.net/cms/api/phpjqgrmtp/imageFileData/MAkQ2',
        thumbnailUrl: 'https://cms-us-ppe-imageresizer-preview-mr.trafficmanager.net/cms/api/phpjqgrmtp/imageFileData/MAkQ2',
        propertyBag: {
            keywords: ['Products'],
            name: '91015 ^  ^  ^ Sangria ^_000_001.png.png'
        },
        variantInfo: {
            variationCriteria: {
                locales: ['en-us'],
                markets: [],
                targets: ['ecommercechannelid|rpbpwaytjjr'],
                experiments: []
            },
            binaryId: 'MAkQ2',
            binaryCmsId: 'cms/api/phpjqgrmtp/imageFileData/MAkQ2',
            variantProperties: {
                altText: '91015',
                title: '91015',
                description: ''
            }
        },
        binaryMetadata: {
            height: 183,
            href: 'https://img-ppe-cms-mr-microsoft-com.akamaized.net/cms/api/phpjqgrmtp/imageFileData/MAkQ2?ver=fc03',
            imageStyle: 'photo',
            location: {},
            orientation: 'horizontal',
            quality: 75,
            width: 275,
            isDecorativeImage: false,
            isLocalizable: false,
            copyright: '',
            contentType: 'image/jpeg',
            extension: '.jpg',
            binaryId: 'MAkQ2',
            focalRegion: {
                x1: 19,
                x2: 19,
                y1: 153,
                y2: 153
            },
            cropRegions: [
                {
                    name: 'content-block|||defaultCrop|0x0',
                    left: 1,
                    top: 50,
                    width: 84,
                    height: 84,
                    targetWidth: 0,
                    targetHeight: 0
                },
                {
                    name: 'content-block|full-width|image|xl|1600x700',
                    left: 0,
                    top: 58,
                    width: 151,
                    height: 66,
                    targetWidth: 1600,
                    targetHeight: 700
                },
                {
                    name: 'content-block|full-width|image|md|1600x900',
                    left: 142,
                    top: 100,
                    width: 94,
                    height: 53,
                    targetWidth: 1600,
                    targetHeight: 900
                }
            ]
        },
        processingStatus: 'Complete',
        metadata: {
            createdDateTime: '2020-01-24T22:58:03Z',
            lastModifiedBy: 'brdeal@microsoft.com',
            lastModifiedDateTime: '2020-03-12T22:42:39+00:00',
            publishedBy: 'ommited',
            publishedDateTime: '2020-01-24T22:58:05Z',
            publishedVersion: '1',
            version: '2'
        }
    },
    msdyn365__moduleLayout: 'full-width',
    textplacement: 'left',
    paragraph: '<p>Content Block Rich Text</p>\n'
};
const videoConfig = {
    video: {
        sourceUrl: 'https://streaming-west-prod.cms.commerce.dynamics.com/d0325e27-842a-4020-9d0e-2726092c8b42/030ee339-71e8-4566-8d8b-9346a6556711.mp4',
        type: 'videoFileData',
        lastModified: '2020-01-16T21:43:09+00:00',
        lastModifiedBy: 'ommited',
        id: 'IDNMAar3',
        cmsId: 'cms/api/phpjqgrmtp/identity/IDNMAar3',
        state: 'checkedIn',
        isCheckedOutToMe: false,
        isPublished: true,
        errorDetails: '',
        publicUrl: '',
        previewUrl: '',
        thumbnailUrl: 'https://cms-us-ppe-imageresizer-preview-mr.trafficmanager.net/cms/api/phpjqgrmtp/imageFileData/MAd0t',
        propertyBag: {
            keywords: [],
            name: 'Video.mp4'
        },
        variantInfo: {
            variationCriteria: {
                locales: ['en-us'],
                markets: [],
                targets: ['ecommercechannelid|rpbpwaytjjr'],
                experiments: []
            },
            binaryId: 'MAar5',
            binaryCmsId: 'cms/api/phpjqgrmtp/videoFileData/MAar5',
            variantProperties: {
                title: 'Video',
                description: 'Video',
                interactiveTriggersEnabled: false,
                minimumAge: 0
            }
        },
        binaryMetadata: {
            playtime: 13,
            title: 'Video',
            minimumAge: 0,
            thumbnail: {
                href: 'cms/api/phpjqgrmtp/imageFileData/MAd0t',
                height: 360,
                width: 640
            },
            binaryReferences: [
                {
                    href: 'cms/api/phpjqgrmtp/binary/MAar5-1001',
                    contentType: 'video/mp4',
                    extension: '.mp4',
                    clientHref: 'https://streaming-west-prod.cms.commerce.dynamics.com/d0325e27-842a-4020-9d0e-2726092c8b42/030ee339-71e8-4566-8d8b-9346a6556711.mp4',
                    format: '1001'
                },
                {
                    href: 'cms/api/phpjqgrmtp/binary/MAar5-1004unsupported',
                    clientHref: 'https://streaming-west-prod.cms.commerce.dynamics.com/4adb5802-dd57-4d11-ab22-4368078d4582/030ee339-71e8-4566-8d8b-9346a655.ism/manifest',
                    format: '1004'
                },
                {
                    href: 'cms/api/phpjqgrmtp/binary/MAar5-1006unsupported',
                    clientHref: 'https://streaming-west-prod.cms.commerce.dynamics.com/4adb5802-dd57-4d11-ab22-4368078d4582/030ee339-71e8-4566-8d8b-9346a655.ism/manifest(format=m3u8-aapl)',
                    format: '1006'
                },
                {
                    href: 'cms/api/phpjqgrmtp/binary/MAar5-1007unsupported',
                    clientHref: 'https://streaming-west-prod.cms.commerce.dynamics.com/4adb5802-dd57-4d11-ab22-4368078d4582/030ee339-71e8-4566-8d8b-9346a655.ism/manifest(format=mpd-time-csf)',
                    format: '1007'
                },
                {
                    href: 'cms/api/phpjqgrmtp/binary/MAar5-101unsupported',
                    clientHref: 'https://streaming-west-prod.cms.commerce.dynamics.com/4adb5802-dd57-4d11-ab22-4368078d4582/030ee339-71e8-4566-8d8b-9346a655_650.mp4',
                    format: '101'
                }
            ],
            captions: [
                {
                    locale: 'en-us',
                    href: 'cms/api/phpjqgrmtp/binary/MAar5-enus',
                    clientHref: 'https://videos-us-prod.cms.commerce.dynamics.com/cms/api/phpjqgrmtp/videofiledata/MAar5-enus?ver=3e7c'
                }
            ],
            transcripts: [
                {
                    locale: 'en-us',
                    href: 'cms/api/phpjqgrmtp/binary/MAar5-tscriptenus',
                    clientHref: 'https://videos-us-prod.cms.commerce.dynamics.com/cms/api/phpjqgrmtp/videofiledata/MAar5-tscriptenus?ver=eb2a'
                }
            ],
            descriptiveAudioTrack: [],
            regularAudioTrack: [],
            copyright: '',
            binaryId: 'MAar5',
            processingStatus: {
                message: '',
                status: 'Complete'
            }
        },
        processingStatus: 'Complete',
        metadata: {
            createdDateTime: '2020-01-16T21:41:04Z',
            lastModifiedBy: 'ommited',
            lastModifiedDateTime: '2020-01-16T21:43:10+00:00',
            publishedBy: 'ommited',
            publishedDateTime: '2020-01-16T21:43:10Z',
            publishedVersion: '1',
            version: '1'
        }
    },
    playPauseTrigger: true,
    controls: true,
    maskLevel: 40,
    lazyLoad: true
};
const themeSettings = {
    modules: {
        'content-block': {
            properties: {
                'full-width': {
                    properties: {
                        image: {
                            properties: {
                                xs: {
                                    w: 800,
                                    h: 600
                                },
                                sm: {
                                    w: 1200,
                                    h: 900
                                },
                                md: {
                                    w: 1600,
                                    h: 900
                                },
                                lg: {
                                    w: 1600,
                                    h: 700
                                },
                                xl: {
                                    w: 1600,
                                    h: 700
                                }
                            }
                        }
                    }
                }
            }
        }
    }
};
describe('Authoring Tools Helper Util Tests', () => {
    it('resolves image types in module configs correctly', () => {
        // @ts-ignore themeSettings is not a complete PartnerThemeSettings object but its not needed for testing purposes
        resolveTypesInConfig(imageConfig, 'test-module-1', 'content-block', 'full-width', themeSettings);
        expect(imageConfig).toMatchSnapshot();
    });
    it('resolves video types in module configs correctly', () => {
        // @ts-ignore mock functions confuses ts compiler
        global.Date.prototype.getTime = jest.fn().mockReturnValue('12345');
        // @ts-ignore themeSettings is not a complete PartnerThemeSettings object but its not needed for testing purposes
        resolveTypesInConfig(videoConfig, 'test-module-1', 'content-block', 'full-width', themeSettings);
        expect(videoConfig).toMatchSnapshot();
    });
});
//# sourceMappingURL=authoring-tools-helpers-utils.test.js.map