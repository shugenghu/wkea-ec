{"version":3,"file":"authoring-tools-helpers-utils.test.js","sourceRoot":"","sources":["../../../../src/utils/__tests__/authoring-tools-helpers-utils.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\nimport { resolveTypesInConfig } from '../authoring-tools-helper-utils';\n\nconst imageConfig = {\n    heading: {\n        text: 'Content Block Heading',\n        tag: 'h2'\n    },\n    image: {\n        type: 'imageFileData',\n        lastModified: '2020-03-12T22:42:39+00:00',\n        lastModifiedBy: 'brdeal@microsoft.com',\n        id: 'IDNMAkQ0',\n        cmsId: 'cms/api/phpjqgrmtp/identity/IDNMAkQ0',\n        state: 'checkedIn',\n        isCheckedOutToMe: false,\n        isPublished: true,\n        errorDetails: '',\n        publicUrl: 'https://cms-ppe-imageresizer-mr.trafficmanager.net/cms/api/phpjqgrmtp/imageFileData/MAkQ2',\n        previewUrl: 'https://cms-us-ppe-imageresizer-preview-mr.trafficmanager.net/cms/api/phpjqgrmtp/imageFileData/MAkQ2',\n        thumbnailUrl: 'https://cms-us-ppe-imageresizer-preview-mr.trafficmanager.net/cms/api/phpjqgrmtp/imageFileData/MAkQ2',\n        propertyBag: {\n            keywords: ['Products'],\n            name: '91015 ^  ^  ^ Sangria ^_000_001.png.png'\n        },\n        variantInfo: {\n            variationCriteria: {\n                locales: ['en-us'],\n                markets: [],\n                targets: ['ecommercechannelid|rpbpwaytjjr'],\n                experiments: []\n            },\n            binaryId: 'MAkQ2',\n            binaryCmsId: 'cms/api/phpjqgrmtp/imageFileData/MAkQ2',\n            variantProperties: {\n                altText: '91015',\n                title: '91015',\n                description: ''\n            }\n        },\n        binaryMetadata: {\n            height: 183,\n            href: 'https://img-ppe-cms-mr-microsoft-com.akamaized.net/cms/api/phpjqgrmtp/imageFileData/MAkQ2?ver=fc03',\n            imageStyle: 'photo',\n            location: {},\n            orientation: 'horizontal',\n            quality: 75,\n            width: 275,\n            isDecorativeImage: false,\n            isLocalizable: false,\n            copyright: '',\n            contentType: 'image/jpeg',\n            extension: '.jpg',\n            binaryId: 'MAkQ2',\n            focalRegion: {\n                x1: 19,\n                x2: 19,\n                y1: 153,\n                y2: 153\n            },\n            cropRegions: [\n                {\n                    name: 'content-block|||defaultCrop|0x0',\n                    left: 1,\n                    top: 50,\n                    width: 84,\n                    height: 84,\n                    targetWidth: 0,\n                    targetHeight: 0\n                },\n                {\n                    name: 'content-block|full-width|image|xl|1600x700',\n                    left: 0,\n                    top: 58,\n                    width: 151,\n                    height: 66,\n                    targetWidth: 1600,\n                    targetHeight: 700\n                },\n                {\n                    name: 'content-block|full-width|image|md|1600x900',\n                    left: 142,\n                    top: 100,\n                    width: 94,\n                    height: 53,\n                    targetWidth: 1600,\n                    targetHeight: 900\n                }\n            ]\n        },\n        processingStatus: 'Complete',\n        metadata: {\n            createdDateTime: '2020-01-24T22:58:03Z',\n            lastModifiedBy: 'brdeal@microsoft.com',\n            lastModifiedDateTime: '2020-03-12T22:42:39+00:00',\n            publishedBy: 'ommited',\n            publishedDateTime: '2020-01-24T22:58:05Z',\n            publishedVersion: '1',\n            version: '2'\n        }\n    },\n    msdyn365__moduleLayout: 'full-width',\n    textplacement: 'left',\n    paragraph: '<p>Content Block Rich Text</p>\\n'\n};\n\nconst videoConfig = {\n    video: {\n        sourceUrl:\n            'https://streaming-west-prod.cms.commerce.dynamics.com/d0325e27-842a-4020-9d0e-2726092c8b42/030ee339-71e8-4566-8d8b-9346a6556711.mp4',\n        type: 'videoFileData',\n        lastModified: '2020-01-16T21:43:09+00:00',\n        lastModifiedBy: 'ommited',\n        id: 'IDNMAar3',\n        cmsId: 'cms/api/phpjqgrmtp/identity/IDNMAar3',\n        state: 'checkedIn',\n        isCheckedOutToMe: false,\n        isPublished: true,\n        errorDetails: '',\n        publicUrl: '',\n        previewUrl: '',\n        thumbnailUrl: 'https://cms-us-ppe-imageresizer-preview-mr.trafficmanager.net/cms/api/phpjqgrmtp/imageFileData/MAd0t',\n        propertyBag: {\n            keywords: [],\n            name: 'Video.mp4'\n        },\n        variantInfo: {\n            variationCriteria: {\n                locales: ['en-us'],\n                markets: [],\n                targets: ['ecommercechannelid|rpbpwaytjjr'],\n                experiments: []\n            },\n            binaryId: 'MAar5',\n            binaryCmsId: 'cms/api/phpjqgrmtp/videoFileData/MAar5',\n            variantProperties: {\n                title: 'Video',\n                description: 'Video',\n                interactiveTriggersEnabled: false,\n                minimumAge: 0\n            }\n        },\n        binaryMetadata: {\n            playtime: 13,\n            title: 'Video',\n            minimumAge: 0,\n            thumbnail: {\n                href: 'cms/api/phpjqgrmtp/imageFileData/MAd0t',\n                height: 360,\n                width: 640\n            },\n            binaryReferences: [\n                {\n                    href: 'cms/api/phpjqgrmtp/binary/MAar5-1001',\n                    contentType: 'video/mp4',\n                    extension: '.mp4',\n                    clientHref:\n                        'https://streaming-west-prod.cms.commerce.dynamics.com/d0325e27-842a-4020-9d0e-2726092c8b42/030ee339-71e8-4566-8d8b-9346a6556711.mp4',\n                    format: '1001'\n                },\n                {\n                    href: 'cms/api/phpjqgrmtp/binary/MAar5-1004unsupported',\n                    clientHref:\n                        'https://streaming-west-prod.cms.commerce.dynamics.com/4adb5802-dd57-4d11-ab22-4368078d4582/030ee339-71e8-4566-8d8b-9346a655.ism/manifest',\n                    format: '1004'\n                },\n                {\n                    href: 'cms/api/phpjqgrmtp/binary/MAar5-1006unsupported',\n                    clientHref:\n                        'https://streaming-west-prod.cms.commerce.dynamics.com/4adb5802-dd57-4d11-ab22-4368078d4582/030ee339-71e8-4566-8d8b-9346a655.ism/manifest(format=m3u8-aapl)',\n                    format: '1006'\n                },\n                {\n                    href: 'cms/api/phpjqgrmtp/binary/MAar5-1007unsupported',\n                    clientHref:\n                        'https://streaming-west-prod.cms.commerce.dynamics.com/4adb5802-dd57-4d11-ab22-4368078d4582/030ee339-71e8-4566-8d8b-9346a655.ism/manifest(format=mpd-time-csf)',\n                    format: '1007'\n                },\n                {\n                    href: 'cms/api/phpjqgrmtp/binary/MAar5-101unsupported',\n                    clientHref:\n                        'https://streaming-west-prod.cms.commerce.dynamics.com/4adb5802-dd57-4d11-ab22-4368078d4582/030ee339-71e8-4566-8d8b-9346a655_650.mp4',\n                    format: '101'\n                }\n            ],\n            captions: [\n                {\n                    locale: 'en-us',\n                    href: 'cms/api/phpjqgrmtp/binary/MAar5-enus',\n                    clientHref: 'https://videos-us-prod.cms.commerce.dynamics.com/cms/api/phpjqgrmtp/videofiledata/MAar5-enus?ver=3e7c'\n                }\n            ],\n            transcripts: [\n                {\n                    locale: 'en-us',\n                    href: 'cms/api/phpjqgrmtp/binary/MAar5-tscriptenus',\n                    clientHref:\n                        'https://videos-us-prod.cms.commerce.dynamics.com/cms/api/phpjqgrmtp/videofiledata/MAar5-tscriptenus?ver=eb2a'\n                }\n            ],\n            descriptiveAudioTrack: [],\n            regularAudioTrack: [],\n            copyright: '',\n            binaryId: 'MAar5',\n            processingStatus: {\n                message: '',\n                status: 'Complete'\n            }\n        },\n        processingStatus: 'Complete',\n        metadata: {\n            createdDateTime: '2020-01-16T21:41:04Z',\n            lastModifiedBy: 'ommited',\n            lastModifiedDateTime: '2020-01-16T21:43:10+00:00',\n            publishedBy: 'ommited',\n            publishedDateTime: '2020-01-16T21:43:10Z',\n            publishedVersion: '1',\n            version: '1'\n        }\n    },\n    playPauseTrigger: true,\n    controls: true,\n    maskLevel: 40,\n    lazyLoad: true\n};\n\nconst themeSettings = {\n    modules: {\n        'content-block': {\n            properties: {\n                'full-width': {\n                    properties: {\n                        image: {\n                            properties: {\n                                xs: {\n                                    w: 800,\n                                    h: 600\n                                },\n                                sm: {\n                                    w: 1200,\n                                    h: 900\n                                },\n                                md: {\n                                    w: 1600,\n                                    h: 900\n                                },\n                                lg: {\n                                    w: 1600,\n                                    h: 700\n                                },\n                                xl: {\n                                    w: 1600,\n                                    h: 700\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\ndescribe('Authoring Tools Helper Util Tests', () => {\n    it('resolves image types in module configs correctly', () => {\n        // @ts-ignore themeSettings is not a complete PartnerThemeSettings object but its not needed for testing purposes\n        resolveTypesInConfig(imageConfig, 'test-module-1', 'content-block', 'full-width', themeSettings);\n        expect(imageConfig).toMatchSnapshot();\n    });\n\n    it('resolves video types in module configs correctly', () => {\n        // @ts-ignore mock functions confuses ts compiler\n        global.Date.prototype.getTime = jest.fn().mockReturnValue('12345');\n        // @ts-ignore themeSettings is not a complete PartnerThemeSettings object but its not needed for testing purposes\n        resolveTypesInConfig(videoConfig, 'test-module-1', 'content-block', 'full-width', themeSettings);\n        expect(videoConfig).toMatchSnapshot();\n    });\n});\n"]}