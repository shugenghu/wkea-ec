{"version":3,"file":"paths.js","sourceRoot":"","sources":["../../src/paths.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\n'use strict';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n// Make sure any symlinks in the project folder are resolved:\n// https://github.com/facebookincubator/create-react-app/issues/637\nconst appDirectory = fs.realpathSync(process.cwd());\nconst resolveFromBuildFolder = (relativePath: string) => path.resolve(appDirectory, 'build', relativePath);\nconst resolveFromNodeModules = (relativePath: string) => path.resolve(appDirectory, 'node_modules', relativePath);\n\nconst _cache = new Map<string, string>();\n\nexport const getSharedComponentCssPath = (isDebug: boolean) => {\n    const key = `${isDebug}`;\n    if (_cache.has(key)) {\n        return _cache.get(key);\n    }\n    const rootPath = path.resolve(appDirectory, 'build', 'public', 'static', 'shared-components').replace(/\\\\/gi, '/');\n    const appBuildPublicStatic = path.resolve(appDirectory, 'build', 'public', 'static').replace(/\\\\/gi, '/');\n    // @TODO remove fallback logic\n    const sharedComponentsDev = path.relative(appBuildPublicStatic, path.join(rootPath, 'main.css')).replace(/\\\\/gi, '/');\n    const sharedComponentsDevVnext = path.relative(appBuildPublicStatic, path.join(rootPath, 'shared-components.css')).replace(/\\\\/gi, '/');\n    const sharedComponentsProdVnext = path\n        .relative(appBuildPublicStatic, path.join(rootPath, 'shared-components.min.css'))\n        .replace(/\\\\/gi, '/');\n\n    // @TODO this is part of the hack until shared components ships two bundles excluding bootstrap\n    if (fs.existsSync(path.resolve(appBuildPublicStatic, sharedComponentsDev))) {\n        _cache.set(key, sharedComponentsDev);\n    } else {\n        // this code should take over...\n        if (isDebug && fs.existsSync(path.resolve(appBuildPublicStatic, sharedComponentsDevVnext))) {\n            _cache.set(key, sharedComponentsDevVnext);\n        } else if (!isDebug && fs.existsSync(path.resolve(appBuildPublicStatic, sharedComponentsProdVnext))) {\n            _cache.set(key, sharedComponentsProdVnext);\n        } else {\n            // falsey string, won't create output\n            _cache.set(key, '');\n        }\n    }\n    return _cache.get(key);\n};\n\nexport default {\n    KEYSTONE_PAGE_MOCKS_DIR: resolveFromBuildFolder('pageMocks'),\n    KEYSTONE_MODULE_MOCKS_DIR: resolveFromBuildFolder('moduleMocks'),\n    KEYSTONE_NODE_MODULES_DIR: resolveFromNodeModules('@msdyn365-commerce-modules'),\n    KEYSTONE_DEFINITIONS_DIR: resolveFromBuildFolder('definitions'),\n    KEYSTONE_THEMES_DIR: path.resolve(appDirectory, 'src', 'themes'),\n    KEYSTONE_STATIC_DIR: resolveFromBuildFolder('public/static'),\n    KEYSTONE_APP_DEFINITION_FILEPATH: path.resolve(appDirectory, 'lib', 'module-definition-api.json'),\n    KEYSTONE_APP_DAPI_FILEPATH: path.resolve(appDirectory, 'lib', 'module-definition-dapi.json'),\n    KEYSTONE_APP_THEMES_DAPI_FILEPATH: path.resolve(appDirectory, 'lib', 'themes-definition-dapi.json'),\n    KEYSTONE_APP_RESOURCES_DAPI_FILEPATH: path.resolve(appDirectory, 'lib', 'resources-definition-dapi.json'),\n    KEYSTONE_APP_SETTINGS_DAPI_FILEPATH: path.resolve(appDirectory, 'lib', 'themesettings-dapi.json'),\n    KEYSTONE_APP_DAPI_MODULE_PREVIEW_FILEPATH: path.resolve(appDirectory, 'lib', 'module-preview-dapi.json'),\n    KEYSTONE_APP_DAPI_THEME_PREVIEW_FILEPATH: path.resolve(appDirectory, 'lib', 'theme-preview-dapi.json'),\n    KEYSTONE_APP_PACKAGE_VERSION: resolveFromBuildFolder('packageVersions.json'),\n    KEYSTONE_APP_YARN_LOCK: path.resolve(appDirectory, 'yarn.lock'),\n    KEYSTONE_APP_SETTINGS_DIR: resolveFromBuildFolder('settings'),\n    KEYSTONE_SECRETS_DIR: resolveFromBuildFolder('secrets')\n};\n"]}