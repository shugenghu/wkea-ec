{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import{__decorate}from\"tslib\";import{OrderSummary}from'@msdyn365-commerce-modules/order-summary-utilities';import{Alert,Button,getPayloadObject,getTelemetryAttributes,getTelemetryObject,TelemetryConstant,Waiting}from'@msdyn365-commerce-modules/utilities';import{PromoCodeComponent,SaveCartToOrderTemplateComponent}from'@msdyn365-commerce/components';import MsDyn365,{getUrlSync}from'@msdyn365-commerce/core';import classnames from'classnames';import{observer}from'mobx-react';import React from'react';import{CartLineItems}from'./components/cart-line-items';var Cart=/*#__PURE__*/function(_React$Component){_inherits(Cart,_React$Component);var _super=_createSuper(Cart);function Cart(props){var _this;_classCallCheck(this,Cart);_this=_super.call(this,props);_this._getImageSettings=function(imageSettings){return imageSettings||{viewports:{xs:{q:\"w=80&h=94&m=6\",w:0,h:0},sm:{q:\"w=148&h=174&m=6\",w:0,h:0},lg:{q:\"w=148&h=174&m=6\",w:0,h:0}},lazyload:true};};_this._removeItemFromCartHandler=function(cartlineToRemove){if(_this.props.data.cart.result){var input={cartLineIds:[cartlineToRemove.LineId.toString()]};_this.props.data.cart.result.removeCartLines(input)[\"catch\"](function(error){_this.props.telemetry.warning(error);_this.props.telemetry.debug('Unable to Remove Cart Line');});}};_this._moveToWishlistSuccessHandler=function(result,cartline){if(result.status==='ADDED'&&cartline){_this._removeItemFromCartHandler(cartline);}};_this._updateCartlineQuantity=function(cartlineToUpdate,quantity){if(_this.props.data.cart.result){var input={cartLineId:cartlineToUpdate.LineId.toString(),newQuantity:quantity};_this.props.data.cart.result.updateCartLineQuantity(input)[\"catch\"](function(error){_this.props.telemetry.warning(error);_this.props.telemetry.debug('Unable to update Cart Line quantity');});}};_this.telemetryContent=getTelemetryObject(_this.props.context.request.telemetryPageName,_this.props.friendlyName,_this.props.telemetry);_this.payLoad=getPayloadObject('click',_this.telemetryContent,'');return _this;}_createClass(Cart,[{key:\"render\",value:function render(){var _this$props=this.props,cart=_this$props.data.cart.result,_this$props$context$r=_this$props.context.request.user,isAuthenticated=_this$props$context$r.isAuthenticated,signInUrl=_this$props$context$r.signInUrl,resources=_this$props.resources;var guestCheckoutUrl=getUrlSync('checkout',this.props.context.actionContext)||'';var backToShoppingUrl=getUrlSync('home',this.props.context.actionContext)||'';var checkoutURL=this._getCheckoutURL(isAuthenticated,guestCheckoutUrl,signInUrl||'');var isCartEmpty=cart&&cart.cart.CartLines&&cart.cart.CartLines.length===0;var cartLines=this._getCartLines();this.payLoad.contentAction.etext=TelemetryConstant.Checkout;var checkoutBySignInAttributes=getTelemetryAttributes(this.telemetryContent,this.payLoad);this.payLoad.contentAction.etext=TelemetryConstant.GuestCheckout;var checkoutByGuestAttributes=getTelemetryAttributes(this.telemetryContent,this.payLoad);this.payLoad.contentAction.etext=TelemetryConstant.BackToShopping;var backtoShoppingAttributes=getTelemetryAttributes(this.telemetryContent,this.payLoad);var hasErrors=cartLines?cartLines.some(function(cartline){return cartline.error!==undefined;}):false;var viewProps=_objectSpread(_objectSpread({},this.props),{},{className:classnames('ms-cart'),title:/*#__PURE__*/React.createElement(\"h1\",{className:'msc-cart__heading'},resources.cartTitle),CartlinesWrapper:{className:'msc-cartline-wraper'},OrderSummaryWrapper:{className:'msc-order-summary-wrapper'},OrderSummaryItems:{className:'msc-order-summary__items'},cartlines:cartLines,promoCode:this._getPromoCode(),cart:this.props.data.cart.result,context:this.props.context,typeName:this.props.typeName,telemetry:this.props.telemetry,id:this.props.id,removePromoAriaLabelFormat:resources.removePromoAriaLabelFormat,orderSummaryHeading:this.props.data.products&&this.props.data.products.result&&cart&&cart.cart.CartLines&&cart.cart.CartLines.length>0?/*#__PURE__*/React.createElement(\"h2\",{className:'msc-order-summary__heading'},resources.orderSummaryTitle):null,orderSummaryLineitems:this._getOrderSummaryLineItems(),checkoutAsSignInUserButton:!isCartEmpty?/*#__PURE__*/React.createElement(Button,Object.assign({disabled:hasErrors,className:'msc-cart__btn-checkout',href:checkoutURL,title:resources.checkoutButtonTitle},checkoutBySignInAttributes),resources.checkoutButtonTitle):null,checkoutAsGuestButton:!isCartEmpty&&!isAuthenticated?/*#__PURE__*/React.createElement(Button,Object.assign({disabled:hasErrors,className:'msc-cart__btn-guestcheckout',href:guestCheckoutUrl,title:resources.guestCheckoutButtonTitle},checkoutByGuestAttributes),resources.guestCheckoutButtonTitle):null,backToShoppingButton:/*#__PURE__*/React.createElement(Button,Object.assign({className:'msc-cart__btn-backtoshopping'},backtoShoppingAttributes,{href:backToShoppingUrl,title:resources.backToShoppingButtonTitle}),resources.backToShoppingButtonTitle),createTemplateFromCartButton:this._displayAddCartToTemplate()?/*#__PURE__*/React.createElement(SaveCartToOrderTemplateComponent,{addToOrderTemplateDialogResources:this._generateAddToOrderTemplateDialogResources(resources),createOrderTemplateDialogResources:this._generateOrderTemplateNameDialogResources(resources),linesAddedToOrderTemplateDialogResources:this._generateLinesAddedToOrderTemplateDialogResources(resources),createOrderTemplateFromCartButton:resources.createOrderTemplateFromCartButton,context:this.props.context,id:this.props.id,typeName:this.props.typeName,data:{orderTemplates:this.props.data.orderTemplates.result,cartLines:this.props.data.cart.result.cart.CartLines,customerInformation:this.props.data.customerInformation.result}}):null,storeSelector:this.props.slots.storeSelector&&this.props.slots.storeSelector.length>0?this.props.slots.storeSelector[0]:null,removeItemClickHandler:this._removeItemFromCartHandler,moveToWishlistSuccessHandler:this._moveToWishlistSuccessHandler,waitingComponent:/*#__PURE__*/React.createElement(Waiting,{className:'msc-waiting-circular msc-waiting-lg'}),cartLoadingStatus:this.props.data.cart.status==='FAILED'?this.props.resources.cartLoadingErrorMessage:null,cartDataResult:this.props.data.cart.result&&this.props.data.cart.result.isEmpty,OrderSummaryErrors:this._getOrderSummaryErrors(cartLines),telemetryContent:this.telemetryContent});return this.props.renderView(viewProps);}},{key:\"_displayAddCartToTemplate\",value:function _displayAddCartToTemplate(){var _this$props$data$feat,_this$props$data$cust,_this$props$data$cart,_this$props$data$cart2,_this$props$data$cart3;var RetailB2BEcommerceFeatureState=(_this$props$data$feat=this.props.data.featureState.result)===null||_this$props$data$feat===void 0?void 0:_this$props$data$feat.find(function(featureState){return featureState.Name==='Dynamics.AX.Application.RetailB2BEcommerceFeature';});if(RetailB2BEcommerceFeatureState!==null&&RetailB2BEcommerceFeatureState!==void 0&&RetailB2BEcommerceFeatureState.IsEnabled&&(_this$props$data$cust=this.props.data.customerInformation.result)!==null&&_this$props$data$cust!==void 0&&_this$props$data$cust.IsB2b&&this.props.data.orderTemplates.result&&(_this$props$data$cart=this.props.data.cart.result)!==null&&_this$props$data$cart!==void 0&&(_this$props$data$cart2=_this$props$data$cart.cart)!==null&&_this$props$data$cart2!==void 0&&(_this$props$data$cart3=_this$props$data$cart2.CartLines)!==null&&_this$props$data$cart3!==void 0&&_this$props$data$cart3.length&&this.props.data.cart.result.cart.CartLines.length>0&&this.props.data.customerInformation.result){return true;}return false;}},{key:\"_getOrderSummaryErrors\",value:function _getOrderSummaryErrors(cartLines){var allErrors=cartLines&&cartLines.map(function(cartline){var _cartline$data;var PRODUCTASSERVICE=2;var isServiceItem=((_cartline$data=cartline.data)===null||_cartline$data===void 0?void 0:_cartline$data.product.ItemTypeValue)===PRODUCTASSERVICE;if(!isServiceItem&&cartline.error){var fullError=cartline.data&&cartline.data.product.Name?\"\".concat(cartline.data.product.Name,\": \").concat(cartline.error):cartline.error;return/*#__PURE__*/React.createElement(\"div\",{className:'msc-alert__line'},fullError);}return null;}).filter(function(line){return!!line;})||[];return{Wrapper:{tag:Alert,className:'msc-alert',isOpen:allErrors.length>0,color:'danger',assertive:true,'aria-label':this.props.resources.outOfStockErrorMessageHeader},header:/*#__PURE__*/React.createElement(\"div\",{className:'msc-alert__header',\"aria-hidden\":'true'},/*#__PURE__*/React.createElement(\"span\",{className:'msi-exclamation-triangle'}),/*#__PURE__*/React.createElement(\"span\",null,this.props.resources.outOfStockErrorMessageHeader)),errors:allErrors};}},{key:\"_getOrderSummaryLineItems\",value:function _getOrderSummaryLineItems(){var _this$props2=this.props,cart=_this$props2.data.cart.result,telemetry=_this$props2.telemetry,resources=_this$props2.resources;var channelConfiguration=this.props.context&&this.props.context.request&&this.props.context.request.channel;return cart&&cart.cart&&channelConfiguration&&cart.cart.CartLines&&cart.cart.CartLines.length>0?OrderSummary({cart:cart.cart,subTotalLabel:resources.itemsWithCountLabel,shippingLabel:resources.estimatedShippingLabel,otherChargeLabel:resources.otherCharges,taxLabel:resources.estimatedTaxLabel,orderTotalLabel:resources.orderTotal,totalDiscountsLabel:resources.totalDiscountsLabel,context:this.props.context,typeName:this.props.typeName,id:this.props.id,toBeCalculatedText:resources.yetToBeCalculatedText,freeText:resources.priceFree,channelConfiguration:channelConfiguration,telemetry:telemetry}):undefined;}},{key:\"_getPromoCode\",value:function _getPromoCode(){var _this$props3=this.props,cart=_this$props3.data.cart.result,resources=_this$props3.resources;return cart&&/*#__PURE__*/React.createElement(PromoCodeComponent,{cart:cart,promoCodeHeadingText:resources.promoCodeHeadingText,promoPlaceholderText:resources.promoPlaceholderText,promoCodeApplyButtonText:resources.promoCodeApplyButtonText,appliedPromoCodeHeadingText:resources.appliedPromoCodeHeadingText,collapseTimeOut:350,removePromoAriaLabelFormat:resources.removePromoAriaLabelFormat,removePromoText:resources.removePromoText,invalidPromoCodeErrorText:resources.invalidPromoCodeErrorText,failedToAddPromoCodeErrorText:resources.failedToAddPromoCodeErrorText,failedToRemovePromoCodeErrorText:resources.failedToRemovePromoCodeErrorText,duplicatePromoCodeErrorText:resources.duplicatePromotionErrorText,context:this.props.context,id:this.props.id,typeName:this.props.typeName,data:{},telemetryContent:this.telemetryContent});}},{key:\"_generateAddToOrderTemplateDialogResources\",value:function _generateAddToOrderTemplateDialogResources(resources){return{addToOrderTemplateHeader:resources.addToOrderTemplateHeader,noOrderTemplatesMessage:resources.noOrderTemplatesMessage,noOrderTemplatesDescription:resources.noOrderTemplatesDescription,createAnOrderTemplateButtonText:resources.createAnOrderTemplateButtonText,createNewOrderTemplateButtonText:resources.createNewOrderTemplateButtonText,cancelOrderTemplateCreationButtonText:resources.cancelOrderTemplateCreationButtonText,selectTemplatesText:resources.selectTemplatesText,addToTemplateButtonText:resources.addToTemplateButtonText,lineItemsText:resources.lineItemsText};}},{key:\"_generateItemAddedToOrderTemplateDialogResources\",value:function _generateItemAddedToOrderTemplateDialogResources(resources){return{viewOrderTemplateButtonText:resources.viewOrderTemplateButtonText,continueShoppingButtonText:resources.continueShoppingButtonText,itemAddedToOrderTemplateHeaderItemOneText:resources.itemAddedToOrderTemplateHeaderItemOneText,itemAddedToOrderTemplateHeaderItemFormatText:resources.itemAddedToOrderTemplateHeaderItemFormatText,itemAddedToOrderTemplateHeaderMessageText:resources.itemAddedToOrderTemplateHeaderMessageText,freePriceText:resources.freePriceText,originalPriceText:resources.originalPriceText,currentPriceText:resources.currentPriceText};}},{key:\"_generateLinesAddedToOrderTemplateDialogResources\",value:function _generateLinesAddedToOrderTemplateDialogResources(resources){return{viewOrderTemplateButtonText:resources.viewOrderTemplateButtonText,continueShoppingButtonText:resources.continueShoppingButtonText,linesAddedToOrderTemplateHeaderItemsOneText:resources.linesAddedToOrderTemplateHeaderItemsOneText,linesAddedToOrderTemplateHeaderItemsFormatText:resources.linesAddedToOrderTemplateHeaderItemsFormatText,linesAddedToOrderTemplateHeaderLinesOneText:resources.linesAddedToOrderTemplateHeaderLinesOneText,linesAddedToOrderTemplateHeaderLinesFormatText:resources.linesAddedToOrderTemplateHeaderLinesFormatText,linesAddedToOrderTemplateHeaderMessageText:resources.linesAddedToOrderTemplateHeaderMessageText};}},{key:\"_generateDuplicateItemsWhenAddingToOrderTemplateDialogResources\",value:function _generateDuplicateItemsWhenAddingToOrderTemplateDialogResources(resources){return{duplicatedProductsHeader:resources.duplicatedProductsHeader,duplicatedProductsDescription:resources.duplicatedProductsDescription,updateQuantityButtonText:resources.updateQuantityButtonText,cancelDuplicateItemsButtonText:resources.cancelDuplicateItemsButtonText};}},{key:\"_generateOrderTemplateNameDialogResources\",value:function _generateOrderTemplateNameDialogResources(resources){return{orderTemplateHeaderLabel:resources.createOrderTemplateHeader,orderTemplateTitleLabel:resources.orderTemplateTitle,orderTemplateNameAriaLabel:resources.orderTemplateNameAriaLabel,orderTemplateDescription:resources.createOrderTemplateDescription,defaultOrderTemplateName:resources.defaultOrderTemplateName,orderTemplateButtonLabel:resources.createOrderTemplateButtonText,orderTemplateCancelButtonLabel:resources.cancelNewOrderTemplateCreationButtonText};}},{key:\"_getCartLines\",value:function _getCartLines(){var _this$props4=this.props,_this$props4$data=_this$props4.data,cart=_this$props4$data.cart.result,wishlists=_this$props4$data.wishlists.result,orderTemplates=_this$props4$data.orderTemplates.result,customerInformation=_this$props4$data.customerInformation.result,_this$props4$context$=_this$props4.context.request.channel;_this$props4$context$=_this$props4$context$===void 0?{PickupDeliveryModeCode:undefined}:_this$props4$context$;var PickupDeliveryModeCode=_this$props4$context$.PickupDeliveryModeCode,config=_this$props4.config,telemetry=_this$props4.telemetry,resources=_this$props4.resources;var imageSettings=this._getImageSettings(config.imageSettings);return this.props.data.products&&this.props.data.products.result&&cart&&cart.cart.CartLines&&cart.cart.CartLines.length>0?CartLineItems({cartlines:cart.cart.CartLines,products:this.props.data.products.result,productAvailabilites:this.props.data.productAvailabilites.result,productDeliveryOptions:this.props.data.deliveryOptions.result,imageSettings:imageSettings,isStockCheckEnabled:this.props.context.app.config.enableStockCheck||false,maxCartlineQuantity:this.props.context.app.config.maxQuantityForCartLineItem,gridSettings:this.props.context.request.gridSettings,context:this.props.context,typeName:this.props.typeName,id:this.props.id,resources:{sizeString:resources.productDimensionTypeSize,colorString:resources.productDimensionTypeColor,configString:resources.productDimensionTypeConfiguration,styleString:resources.productDimensionTypeStyle,quantityDisplayString:resources.quantityDisplayText,inputQuantityAriaLabel:resources.inputQuantityAriaLabel,decrementButtonAriaLabel:resources.decrementButtonAriaLabel,incrementButtonAriaLabel:resources.incrementButtonAriaLabel,discountStringText:resources.discountStringText,originalPriceText:resources.originalPriceText,currentPriceText:resources.currentPriceText,shippingChargesText:resources.shippingCharges},telemetry:telemetry,addToWishlistButtonText:resources.addToWishlistButtonText,removeFromWishlistButtonText:resources.removeFromWishlistButtonText,removeButtonText:resources.removeCartButtonText,shipItText:resources.shipInsteadDisplayText,pickitUpText:resources.pickItUpDisplayText,changeStoreText:resources.changeStoreDisplayText,storeSelectorStateManager:this.props.data.storeSelectorStateManager.result,outOfStockText:resources.outOfStockErrorMessage,outOfRangeOneText:resources.errorMessageOutOfRangeOneLeft,outOfRangeFormatText:resources.errorMessageOutOfRangeFormat,cartState:this.props.data.cart.result,orgUnitLocations:this.props.data.orgUnitLocations.result,removeItemClickHandler:this._removeItemFromCartHandler,moveToWishlistSuccessHandler:this._moveToWishlistSuccessHandler,updateCartLinesQuantitySuccessHandler:this._updateCartlineQuantity,wishlists:wishlists,defaultWishlistName:resources.defaultWishlistName,pickupDeliveryModeCode:PickupDeliveryModeCode,includeErrors:config.showOutOfStockErrors,showShippingChargesForLineItems:config.showShippingChargesForLineItems,telemetryContent:this.telemetryContent,addToOrderTemplateDialogResources:this._generateAddToOrderTemplateDialogResources(resources),createOrderTemplateDialogResources:this._generateOrderTemplateNameDialogResources(resources),itemAddedToOrderTemplateDialogResources:this._generateItemAddedToOrderTemplateDialogResources(resources),duplicateItemsWhenAddingToOrderTemplateDialogResources:this._generateDuplicateItemsWhenAddingToOrderTemplateDialogResources(resources),addToOrderTemplateButtonText:resources.addToOrderTemplateButtonText,addToOrderTemplateMessage:resources.addToOrderTemplateMessage,addItemToOrderTemplateError:resources.addItemToOrderTemplateError,orderTemplates:orderTemplates,customerInformation:customerInformation}):null;}},{key:\"_getCheckoutURL\",value:function _getCheckoutURL(isAuthenticated,guestCheckoutUrl,signInUrl){if(isAuthenticated){return guestCheckoutUrl;}var absoluteUrlRegExp=new RegExp('^(?:[a-z]+:)?//','i');var isAbsoluteUrl=absoluteUrlRegExp.test(guestCheckoutUrl);var returnURL=guestCheckoutUrl;if(MsDyn365.isBrowser&&!isAbsoluteUrl){returnURL=\"\".concat(window.location.origin).concat(guestCheckoutUrl);}return\"\".concat(signInUrl).concat(signInUrl.indexOf('?')===-1?'?':'&',\"ru=\").concat(returnURL);}}]);return Cart;}(React.Component);Cart=__decorate([observer],Cart);export default Cart;","map":{"version":3,"sources":["modules/cart/cart.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IOrderSummaryLines, OrderSummary } from '@msdyn365-commerce-modules/order-summary-utilities';\nimport { Alert, Button, getPayloadObject, getTelemetryAttributes, getTelemetryObject, INodeProps, IPayLoad, ITelemetryContent, TelemetryConstant, Waiting } from '@msdyn365-commerce-modules/utilities';\nimport {\n    IAddToOrderTemplateDialogResources, IDuplicateItemsWhenAddingToOrderTemplateDialogResources,\n    IItemAddedToOrderTemplateDialogResources, ILinesAddedToOrderTemplateDialogResources, IOrderTemplateNameDialogResources,\n    IWishlistActionSuccessResult, PromoCodeComponent, SaveCartToOrderTemplateComponent } from '@msdyn365-commerce/components';\nimport MsDyn365, { getUrlSync, IImageSettings } from '@msdyn365-commerce/core';\nimport { ICartState } from '@msdyn365-commerce/global-state';\nimport { CartLine } from '@msdyn365-commerce/retail-proxy';\nimport { ReleasedProductType } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react';\nimport React from 'react';\nimport { ICartData } from './cart.data';\nimport { ICartProps, ICartResources } from './cart.props.autogenerated';\nimport { CartLineItems, ICartlinesViewProps } from './components/cart-line-items';\n\nexport interface ICartViewProps extends ICartProps<ICartData> {\n    className: string;\n    title?: React.ReactNode;\n    CartlinesWrapper: INodeProps;\n    cartlines?: ICartlinesViewProps[];\n    cart: ICartState | undefined;\n    orderSummaryHeading: React.ReactNode;\n    orderSummaryLineitems?: IOrderSummaryLines;\n    OrderSummaryWrapper: INodeProps;\n    OrderSummaryItems: INodeProps;\n    OrderSummaryErrors?: IOrderSummaryErrors;\n    checkoutAsGuestButton: React.ReactNode;\n    checkoutAsSignInUserButton: React.ReactNode;\n    storeSelector?: React.ReactNode;\n    backToShoppingButton: React.ReactNode;\n    waitingComponent: React.ReactNode;\n    promoCode: React.ReactNode;\n    cartLoadingStatus: string;\n    cartDataResult: boolean;\n    createTemplateFromCartButton: React.ReactNode;\n    telemetryContent?: ITelemetryContent;\n    removeItemClickHandler(cartlineToRemove: CartLine): void;\n    moveToWishlistSuccessHandler(result: IWishlistActionSuccessResult, cartlineId: CartLine): void;\n}\n\nexport interface IOrderSummaryErrors {\n    Wrapper: INodeProps;\n\n    header: React.ReactNode;\n    errors: React.ReactNode[];\n}\n\n/**\n *\n * Cart component\n * @extends {React.PureComponent<ICartProps<ICartData>>}\n */\n@observer\nclass Cart extends React.Component<ICartProps<ICartData>> {\n    private telemetryContent: ITelemetryContent;\n    private payLoad: IPayLoad;\n\n    constructor(props: ICartProps<ICartData>) {\n        super(props);\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!,\n                                                   this.props.friendlyName,\n                                                   this.props.telemetry);\n        this.payLoad = getPayloadObject('click', this.telemetryContent, '');\n    }\n\n    public render(): JSX.Element | null {\n        const {\n            data: {\n                cart: { result: cart }\n            },\n            context: {\n                request: {\n                    user: {\n                        isAuthenticated,\n                        signInUrl\n                    }\n                }\n            },\n            resources\n        } = this.props;\n\n        const guestCheckoutUrl = getUrlSync('checkout', this.props.context.actionContext) || '';\n        const backToShoppingUrl = getUrlSync('home', this.props.context.actionContext) || '';\n        const checkoutURL = this._getCheckoutURL(isAuthenticated, guestCheckoutUrl, signInUrl || '');\n        const isCartEmpty = cart && cart.cart.CartLines && cart.cart.CartLines.length === 0;\n        const cartLines = this._getCartLines();\n\n        this.payLoad.contentAction.etext = TelemetryConstant.Checkout;\n        const checkoutBySignInAttributes = getTelemetryAttributes(this.telemetryContent, this.payLoad);\n\n        this.payLoad.contentAction.etext = TelemetryConstant.GuestCheckout;\n        const checkoutByGuestAttributes = getTelemetryAttributes(this.telemetryContent, this.payLoad);\n\n        this.payLoad.contentAction.etext = TelemetryConstant.BackToShopping;\n        const backtoShoppingAttributes = getTelemetryAttributes(this.telemetryContent, this.payLoad);\n\n        const hasErrors = cartLines ? cartLines.some(cartline => cartline.error !== undefined) : false;\n\n        const viewProps = {\n            ...this.props,\n            className: classnames('ms-cart'),\n            title: <h1 className={'msc-cart__heading'}>{resources.cartTitle}</h1>,\n            CartlinesWrapper: { className: 'msc-cartline-wraper' },\n            OrderSummaryWrapper: { className: 'msc-order-summary-wrapper' },\n            OrderSummaryItems: { className: 'msc-order-summary__items' },\n            cartlines: cartLines,\n            promoCode: this._getPromoCode(),\n            cart: this.props.data.cart.result,\n            context: this.props.context,\n            typeName: this.props.typeName,\n            telemetry: this.props.telemetry,\n            id: this.props.id,\n            removePromoAriaLabelFormat: resources.removePromoAriaLabelFormat,\n            orderSummaryHeading: this.props.data.products && this.props.data.products.result && cart && cart.cart.CartLines && cart.cart.CartLines.length > 0 ?\n                (\n                    <h2 className={'msc-order-summary__heading'}>{resources.orderSummaryTitle}</h2>\n                ) : null,\n            orderSummaryLineitems: this._getOrderSummaryLineItems(),\n            checkoutAsSignInUserButton: (!isCartEmpty) ?\n                (\n                    <Button disabled={hasErrors} className={'msc-cart__btn-checkout'} href={checkoutURL} title={resources.checkoutButtonTitle}{...checkoutBySignInAttributes} >{resources.checkoutButtonTitle}</Button>\n                ) : null,\n            checkoutAsGuestButton: (!isCartEmpty && !isAuthenticated) ?\n                (\n                    <Button disabled={hasErrors} className={'msc-cart__btn-guestcheckout'} href={guestCheckoutUrl} title={resources.guestCheckoutButtonTitle}{...checkoutByGuestAttributes}>{resources.guestCheckoutButtonTitle}</Button>\n                ) : null,\n            backToShoppingButton: <Button className={'msc-cart__btn-backtoshopping'} {...backtoShoppingAttributes} href={backToShoppingUrl} title={resources.backToShoppingButtonTitle}>{resources.backToShoppingButtonTitle}</Button>,\n            createTemplateFromCartButton: (this._displayAddCartToTemplate()) ?\n                (\n                    <SaveCartToOrderTemplateComponent\n                        addToOrderTemplateDialogResources={this._generateAddToOrderTemplateDialogResources(resources)}\n                        createOrderTemplateDialogResources={this._generateOrderTemplateNameDialogResources(resources)}\n                        linesAddedToOrderTemplateDialogResources={this._generateLinesAddedToOrderTemplateDialogResources(resources)}\n                        createOrderTemplateFromCartButton={resources.createOrderTemplateFromCartButton}\n                        context={this.props.context}\n                        id={this.props.id}\n                        typeName={this.props.typeName}\n                        data={{\n                            orderTemplates: this.props.data.orderTemplates.result!,\n                            cartLines: this.props.data.cart.result!.cart.CartLines!,\n                            customerInformation: this.props.data.customerInformation.result\n                        }}\n                    />\n                ) : null,\n            storeSelector: this.props.slots.storeSelector && this.props.slots.storeSelector.length > 0 ? this.props.slots.storeSelector[0] : null,\n            removeItemClickHandler: this._removeItemFromCartHandler,\n            moveToWishlistSuccessHandler: this._moveToWishlistSuccessHandler,\n            waitingComponent: <Waiting className='msc-waiting-circular msc-waiting-lg' />,\n            cartLoadingStatus: this.props.data.cart.status === 'FAILED' ? this.props.resources.cartLoadingErrorMessage : null,\n            cartDataResult: this.props.data.cart.result && this.props.data.cart.result.isEmpty,\n            OrderSummaryErrors: this._getOrderSummaryErrors(cartLines),\n            telemetryContent: this.telemetryContent\n        };\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    private _displayAddCartToTemplate(): boolean {\n        const RetailB2BEcommerceFeatureState = this.props.data.featureState.result?.find(featureState => featureState.Name === 'Dynamics.AX.Application.RetailB2BEcommerceFeature');\n        if (RetailB2BEcommerceFeatureState?.IsEnabled && this.props.data.customerInformation.result?.IsB2b && this.props.data.orderTemplates.result &&\n            this.props.data.cart.result?.cart?.CartLines?.length && this.props.data.cart.result.cart.CartLines.length > 0 &&\n            this.props.data.customerInformation.result) {\n            return true;\n        }\n\n        return false;\n    }\n\n    private _getOrderSummaryErrors(cartLines: ICartlinesViewProps[] | null): IOrderSummaryErrors | undefined {\n        const allErrors = cartLines && cartLines.map(cartline => {\n\n            // check if the product is service or not by product type\n            const PRODUCTASSERVICE = 2 as ReleasedProductType.Service;\n            const isServiceItem = cartline.data?.product.ItemTypeValue === PRODUCTASSERVICE;\n\n            if (!isServiceItem && cartline.error) {\n                const fullError = (cartline.data && cartline.data.product.Name) ? `${cartline.data.product.Name}: ${cartline.error}` : cartline.error;\n\n                return (\n                    <div className='msc-alert__line'>{fullError}</div>\n                );\n            }\n\n            return null;\n        }).filter((line): line is JSX.Element => !!line) || [];\n\n        return {\n            Wrapper: {\n                tag: Alert,\n                className: 'msc-alert',\n                isOpen: allErrors.length > 0,\n                color: 'danger',\n                assertive: true,\n                'aria-label': this.props.resources.outOfStockErrorMessageHeader\n            },\n            header: (\n                <div className='msc-alert__header' aria-hidden='true'>\n                    <span className='msi-exclamation-triangle' />\n                    <span>{this.props.resources.outOfStockErrorMessageHeader}</span>\n                </div>\n            ),\n            errors: allErrors\n        };\n    }\n\n    private _getOrderSummaryLineItems(): IOrderSummaryLines | undefined {\n        const {\n            data: {\n                cart: { result: cart }\n            },\n            telemetry,\n            resources\n        } = this.props;\n\n        const channelConfiguration = this.props.context && this.props.context.request && this.props.context.request.channel;\n\n        return cart && cart.cart && channelConfiguration && cart.cart.CartLines && cart.cart.CartLines.length > 0 ?\n            (\n                OrderSummary({\n                    cart: cart.cart,\n                    subTotalLabel: resources.itemsWithCountLabel,\n                    shippingLabel: resources.estimatedShippingLabel,\n                    otherChargeLabel: resources.otherCharges,\n                    taxLabel: resources.estimatedTaxLabel,\n                    orderTotalLabel: resources.orderTotal,\n                    totalDiscountsLabel: resources.totalDiscountsLabel,\n                    context: this.props.context,\n                    typeName: this.props.typeName,\n                    id: this.props.id,\n                    toBeCalculatedText: resources.yetToBeCalculatedText,\n                    freeText: resources.priceFree,\n                    channelConfiguration: channelConfiguration,\n                    telemetry: telemetry\n                })\n            ) : undefined;\n    }\n\n    private _getPromoCode(): React.ReactNode {\n        const {\n            data: {\n                cart: { result: cart }\n            },\n            resources\n        } = this.props;\n\n        return cart && (\n            <PromoCodeComponent\n                cart={cart}\n                promoCodeHeadingText={resources.promoCodeHeadingText}\n                promoPlaceholderText={resources.promoPlaceholderText}\n                promoCodeApplyButtonText={resources.promoCodeApplyButtonText}\n                appliedPromoCodeHeadingText={resources.appliedPromoCodeHeadingText}\n                collapseTimeOut={350}\n                removePromoAriaLabelFormat={resources.removePromoAriaLabelFormat}\n                removePromoText={resources.removePromoText}\n                invalidPromoCodeErrorText={resources.invalidPromoCodeErrorText}\n                failedToAddPromoCodeErrorText={resources.failedToAddPromoCodeErrorText}\n                failedToRemovePromoCodeErrorText={resources.failedToRemovePromoCodeErrorText}\n                duplicatePromoCodeErrorText={resources.duplicatePromotionErrorText}\n                context={this.props.context}\n                id={this.props.id}\n                typeName={this.props.typeName}\n                data={{}}\n                telemetryContent={this.telemetryContent}\n            />\n        );\n    }\n\n    private _generateAddToOrderTemplateDialogResources(resources: ICartResources): IAddToOrderTemplateDialogResources {\n        return {\n            addToOrderTemplateHeader: resources.addToOrderTemplateHeader,\n\n            noOrderTemplatesMessage: resources.noOrderTemplatesMessage,\n            noOrderTemplatesDescription: resources.noOrderTemplatesDescription,\n\n            createAnOrderTemplateButtonText: resources.createAnOrderTemplateButtonText,\n            createNewOrderTemplateButtonText: resources.createNewOrderTemplateButtonText,\n            cancelOrderTemplateCreationButtonText: resources.cancelOrderTemplateCreationButtonText,\n\n            selectTemplatesText: resources.selectTemplatesText,\n            addToTemplateButtonText: resources.addToTemplateButtonText,\n            lineItemsText: resources.lineItemsText\n        };\n    }\n\n    private _generateItemAddedToOrderTemplateDialogResources(resources: ICartResources): IItemAddedToOrderTemplateDialogResources {\n        return {\n            viewOrderTemplateButtonText: resources.viewOrderTemplateButtonText,\n            continueShoppingButtonText: resources.continueShoppingButtonText,\n            itemAddedToOrderTemplateHeaderItemOneText: resources.itemAddedToOrderTemplateHeaderItemOneText,\n            itemAddedToOrderTemplateHeaderItemFormatText: resources.itemAddedToOrderTemplateHeaderItemFormatText,\n            itemAddedToOrderTemplateHeaderMessageText: resources.itemAddedToOrderTemplateHeaderMessageText,\n            freePriceText: resources.freePriceText,\n            originalPriceText: resources.originalPriceText,\n            currentPriceText: resources.currentPriceText\n        };\n    }\n\n    private _generateLinesAddedToOrderTemplateDialogResources(resources: ICartResources): ILinesAddedToOrderTemplateDialogResources {\n        return {\n            viewOrderTemplateButtonText: resources.viewOrderTemplateButtonText,\n            continueShoppingButtonText: resources.continueShoppingButtonText,\n            linesAddedToOrderTemplateHeaderItemsOneText: resources.linesAddedToOrderTemplateHeaderItemsOneText,\n            linesAddedToOrderTemplateHeaderItemsFormatText: resources.linesAddedToOrderTemplateHeaderItemsFormatText,\n            linesAddedToOrderTemplateHeaderLinesOneText: resources.linesAddedToOrderTemplateHeaderLinesOneText,\n            linesAddedToOrderTemplateHeaderLinesFormatText: resources.linesAddedToOrderTemplateHeaderLinesFormatText,\n            linesAddedToOrderTemplateHeaderMessageText: resources.linesAddedToOrderTemplateHeaderMessageText\n        };\n    }\n\n    private _generateDuplicateItemsWhenAddingToOrderTemplateDialogResources(resources: ICartResources): IDuplicateItemsWhenAddingToOrderTemplateDialogResources {\n        return {\n            duplicatedProductsHeader: resources.duplicatedProductsHeader,\n            duplicatedProductsDescription: resources.duplicatedProductsDescription,\n            updateQuantityButtonText: resources.updateQuantityButtonText,\n            cancelDuplicateItemsButtonText: resources.cancelDuplicateItemsButtonText\n        };\n    }\n\n    private _generateOrderTemplateNameDialogResources(resources: ICartResources): IOrderTemplateNameDialogResources {\n        return {\n            orderTemplateHeaderLabel: resources.createOrderTemplateHeader,\n            orderTemplateTitleLabel: resources.orderTemplateTitle,\n            orderTemplateNameAriaLabel: resources.orderTemplateNameAriaLabel,\n            orderTemplateDescription: resources.createOrderTemplateDescription,\n\n            defaultOrderTemplateName: resources.defaultOrderTemplateName,\n\n            orderTemplateButtonLabel: resources.createOrderTemplateButtonText,\n            orderTemplateCancelButtonLabel: resources.cancelNewOrderTemplateCreationButtonText\n        };\n    }\n\n    private _getCartLines(): ICartlinesViewProps[] | null {\n        const {\n            data: {\n                cart: { result: cart },\n                wishlists: { result: wishlists },\n                orderTemplates: { result: orderTemplates },\n                customerInformation: { result: customerInformation }\n            },\n            context: {\n                request: {\n                    channel: {\n                        PickupDeliveryModeCode\n                    } = { PickupDeliveryModeCode: undefined }\n                }\n            },\n            config: config,\n            telemetry,\n            resources\n        } = this.props;\n\n        const imageSettings = this._getImageSettings(config.imageSettings);\n\n        return this.props.data.products && this.props.data.products.result && cart && cart.cart.CartLines && cart.cart.CartLines.length > 0 ? (\n            CartLineItems({\n                cartlines: cart.cart.CartLines,\n                products: this.props.data.products.result,\n                productAvailabilites: this.props.data.productAvailabilites.result,\n                productDeliveryOptions: this.props.data.deliveryOptions.result,\n                imageSettings: imageSettings,\n                isStockCheckEnabled: this.props.context.app.config.enableStockCheck || false,\n                maxCartlineQuantity: this.props.context.app.config.maxQuantityForCartLineItem,\n                gridSettings: this.props.context.request.gridSettings!,\n                context: this.props.context,\n                typeName: this.props.typeName,\n                id: this.props.id,\n                resources: {\n                    sizeString: resources.productDimensionTypeSize,\n                    colorString: resources.productDimensionTypeColor,\n                    configString: resources.productDimensionTypeConfiguration,\n                    styleString: resources.productDimensionTypeStyle,\n                    quantityDisplayString: resources.quantityDisplayText,\n                    inputQuantityAriaLabel: resources.inputQuantityAriaLabel,\n                    decrementButtonAriaLabel: resources.decrementButtonAriaLabel,\n                    incrementButtonAriaLabel: resources.incrementButtonAriaLabel,\n                    discountStringText: resources.discountStringText,\n                    originalPriceText: resources.originalPriceText,\n                    currentPriceText:resources.currentPriceText,\n                    shippingChargesText:resources.shippingCharges\n                },\n                telemetry: telemetry,\n                addToWishlistButtonText: resources.addToWishlistButtonText,\n                removeFromWishlistButtonText: resources.removeFromWishlistButtonText,\n                removeButtonText: resources.removeCartButtonText,\n                shipItText: resources.shipInsteadDisplayText,\n                pickitUpText: resources.pickItUpDisplayText,\n                changeStoreText: resources.changeStoreDisplayText,\n                storeSelectorStateManager: this.props.data.storeSelectorStateManager.result,\n                outOfStockText: resources.outOfStockErrorMessage,\n                outOfRangeOneText: resources.errorMessageOutOfRangeOneLeft,\n                outOfRangeFormatText: resources.errorMessageOutOfRangeFormat,\n                cartState: this.props.data.cart.result,\n                orgUnitLocations: this.props.data.orgUnitLocations.result,\n                removeItemClickHandler: this._removeItemFromCartHandler,\n                moveToWishlistSuccessHandler: this._moveToWishlistSuccessHandler,\n                updateCartLinesQuantitySuccessHandler: this._updateCartlineQuantity,\n                wishlists: wishlists,\n                defaultWishlistName: resources.defaultWishlistName,\n                pickupDeliveryModeCode: PickupDeliveryModeCode,\n                includeErrors: config.showOutOfStockErrors,\n                showShippingChargesForLineItems: config.showShippingChargesForLineItems,\n                telemetryContent: this.telemetryContent,\n\n                addToOrderTemplateDialogResources: this._generateAddToOrderTemplateDialogResources(resources),\n                createOrderTemplateDialogResources: this._generateOrderTemplateNameDialogResources(resources),\n                itemAddedToOrderTemplateDialogResources: this._generateItemAddedToOrderTemplateDialogResources(resources),\n                duplicateItemsWhenAddingToOrderTemplateDialogResources: this._generateDuplicateItemsWhenAddingToOrderTemplateDialogResources(resources),\n\n                addToOrderTemplateButtonText: resources.addToOrderTemplateButtonText,\n                addToOrderTemplateMessage: resources.addToOrderTemplateMessage,\n                addItemToOrderTemplateError: resources.addItemToOrderTemplateError,\n                orderTemplates: orderTemplates,\n                customerInformation: customerInformation\n            })\n        ) : null;\n    }\n\n    private _getCheckoutURL(isAuthenticated: boolean, guestCheckoutUrl: string, signInUrl: string): string {\n        if (isAuthenticated) {\n            return guestCheckoutUrl;\n        }\n\n        const absoluteUrlRegExp = new RegExp('^(?:[a-z]+:)?//', 'i');\n        const isAbsoluteUrl = absoluteUrlRegExp.test(guestCheckoutUrl);\n        let returnURL = guestCheckoutUrl;\n        if (MsDyn365.isBrowser && !isAbsoluteUrl) {\n            returnURL = `${window.location.origin}${guestCheckoutUrl}`;\n        }\n\n        return `${signInUrl}${signInUrl.indexOf('?') === -1 ? '?' : '&'}ru=${returnURL}`;\n    }\n\n    private _getImageSettings = (imageSettings: IImageSettings | undefined): IImageSettings => {\n        return imageSettings || {\n            viewports: {\n                xs: { q: `w=80&h=94&m=6`, w: 0, h: 0 },\n                sm: { q: `w=148&h=174&m=6`, w: 0, h: 0 },\n                lg: { q: `w=148&h=174&m=6`, w: 0, h: 0 }\n            },\n            lazyload: true\n        };\n    }\n\n    private _removeItemFromCartHandler = (cartlineToRemove: CartLine) => {\n        if (this.props.data.cart.result) {\n            const input = {\n                cartLineIds: [cartlineToRemove.LineId!.toString()]\n            };\n            this.props.data.cart.result.removeCartLines(input)\n                .catch((error) => {\n                    this.props.telemetry.warning(error);\n                    this.props.telemetry.debug('Unable to Remove Cart Line');\n                });\n        }\n    }\n\n    private _moveToWishlistSuccessHandler = (result: IWishlistActionSuccessResult, cartline?: CartLine) => {\n        if (result.status === 'ADDED' && cartline) {\n            this._removeItemFromCartHandler(cartline);\n        }\n    }\n\n    private _updateCartlineQuantity = (cartlineToUpdate: CartLine, quantity: number) => {\n        if (this.props.data.cart.result) {\n            const input = {\n                cartLineId: cartlineToUpdate.LineId!.toString(),\n                newQuantity: quantity\n            };\n            this.props.data.cart.result.updateCartLineQuantity(input)\n                .catch((error) => {\n                    this.props.telemetry.warning(error);\n                    this.props.telemetry.debug('Unable to update Cart Line quantity');\n                });\n        }\n    }\n}\n\nexport default Cart;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}