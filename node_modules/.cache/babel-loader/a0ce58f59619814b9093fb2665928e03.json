{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{updateAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/CartsDataActions.g';export default function updateCart(_x,_x2,_x3){return _updateCart.apply(this,arguments);}function _updateCart(){_updateCart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(cart,updatedCartObject,actionContext){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(cart){_context.next=2;break;}return _context.abrupt(\"return\",{cart:undefined,status:'FAILED'});case 2:delete updatedCartObject.Id;return _context.abrupt(\"return\",updateAsync({callerContext:actionContext},_objectSpread({Id:cart.Id},updatedCartObject)).then(function(newCart){return{cart:newCart,status:'SUCCESS'};})[\"catch\"](function(error){actionContext.telemetry.warning(error);actionContext.telemetry.debug('Unable to update the cart');return{cart:undefined,status:'FAILED'};}));case 4:case\"end\":return _context.stop();}}},_callee);}));return _updateCart.apply(this,arguments);}","map":{"version":3,"sources":["cart-state/update-cart.ts"],"names":[],"mappings":"0+BACA,OAAS,WAAT,KAA4B,qEAA5B,CAIA,uBAA8B,CAAA,UAA9B,uD,2FAAe,iBAA0B,IAA1B,CAA4D,iBAA5D,CAAqF,aAArF,qHACN,IADM,yDAEA,CAAE,IAAI,CAAE,SAAR,CAAmB,MAAM,CAAE,QAA3B,CAFA,SAKX,MAAO,CAAA,iBAAiB,CAAC,EAAzB,CALW,gCAOJ,WAAW,CACd,CAAE,aAAa,CAAE,aAAjB,CADc,gBAEZ,EAAE,CAAE,IAAI,CAAC,EAFG,EAEI,iBAFJ,EAAX,CAIF,IAJE,CAIG,SAAA,OAAO,CAAG,CACZ,MAAkC,CAAE,IAAI,CAAE,OAAR,CAAiB,MAAM,CAAE,SAAzB,CAAlC,CACH,CANE,WAOI,SAAA,KAAK,CAAG,CACX,aAAa,CAAC,SAAd,CAAwB,OAAxB,CAAgC,KAAhC,EACA,aAAa,CAAC,SAAd,CAAwB,KAAxB,CAA8B,2BAA9B,EAEA,MAAkC,CAAE,IAAI,CAAE,SAAR,CAAmB,MAAM,CAAE,QAA3B,CAAlC,CACH,CAZE,CAPI,wD","sourcesContent":["import { IActionContext } from '@msdyn365-commerce/core';\nimport { updateAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/CartsDataActions.g';\nimport { Cart } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport { ICartActionResultWithCart } from './cart-action-result';\n\nexport default async function updateCart(cart: Readonly<Cart | undefined>, updatedCartObject: Cart, actionContext: IActionContext): Promise<ICartActionResultWithCart> {\n    if (!cart) {\n        return { cart: undefined, status: 'FAILED' };\n    }\n\n    delete updatedCartObject.Id;\n\n    return updateAsync(\n        { callerContext: actionContext },\n        { Id: cart.Id, ...updatedCartObject }\n    )\n        .then(newCart => {\n            return <ICartActionResultWithCart>{ cart: newCart, status: 'SUCCESS' };\n        })\n        .catch(error => {\n            actionContext.telemetry.warning(error);\n            actionContext.telemetry.debug('Unable to update the cart');\n\n            return <ICartActionResultWithCart>{ cart: undefined, status: 'FAILED' };\n        });\n}"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}