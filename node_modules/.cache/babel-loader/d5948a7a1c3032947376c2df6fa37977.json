{"ast":null,"code":"import\"core-js/modules/es.promise.js\";/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/import{createObservableDataAction,sendRequest}from'@msdyn365-commerce/core';import{GetRatingsSummaryInput,getSelectedProductIdFromActionInput}from'./index';import{getRnrEndpointId,getRnrPartnerId}from'./utilities/getRnrKeys';export const createInput=input=>{const productId=getSelectedProductIdFromActionInput(input);if(productId){return new GetRatingsSummaryInput(productId,getRnrPartnerId(input),getRnrEndpointId(input));}throw new Error('[GetRatingsSummary] Not all necessary parameters found while creating Input for getRatingsSummaryApi');};/**\r\n * This function gets the ratings summary\r\n */async function getRatingsSummary(input,ctx){if(!inputIsValid(input)){ctx.trace(\"[GetRatingsSummary] Failed to get ratings summary for product\");return{};}const requestUrl=\"\".concat(input.serviceEndpoint,\"/v2.0/ratings/product/\").concat(input.productId,\"/summary?\")+\"tenantId=\".concat(input.tenantId);return sendRequest(requestUrl,'get').then(response=>{return response.data;}).catch(error=>{ctx.trace(\"[GetRatingsSummary] Failed to get ratings summary for product\");throw error;});}function inputIsValid(input){return input&&input.productId.length>0&&input.tenantId.length>0;}export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/get-ratings-summary',action:getRatingsSummary,input:createInput});","map":{"version":3,"sources":["../../src/get-ratings-summary.ts"],"names":[],"mappings":"sCAAA;;;AAGgG,gGAGhG,OAAS,0BAAT,CAAkH,WAAlH,KAAqI,yBAArI,CACA,OAAS,sBAAT,CAAiC,mCAAjC,KAA4E,SAA5E,CACA,OAAS,gBAAT,CAA2B,eAA3B,KAAkD,wBAAlD,CAEA,MAAO,MAAM,CAAA,WAAW,CAAI,KAAD,EAA8D,CACrF,KAAM,CAAA,SAAS,CAAG,mCAAmC,CAAC,KAAD,CAArD,CACA,GAAI,SAAJ,CAAe,CACX,MAAO,IAAI,CAAA,sBAAJ,CAA2B,SAA3B,CAAsC,eAAe,CAAC,KAAD,CAArD,CAA8D,gBAAgB,CAAC,KAAD,CAA9E,CAAP,CACH,CACD,KAAM,IAAI,CAAA,KAAJ,CAAU,sGAAV,CAAN,CACH,CANM,CAQP;;AAEG,GACH,cAAe,CAAA,iBAAf,CAAiC,KAAjC,CAAgE,GAAhE,CAAmF,CAC/E,GAAI,CAAC,YAAY,CAAC,KAAD,CAAjB,CAA0B,CACtB,GAAG,CAAC,KAAJ,kEACA,MAAO,EAAP,CACH,CAED,KAAM,CAAA,UAAU,CAAG,UAAG,KAAK,CAAC,eAAT,kCAAiD,KAAK,CAAC,SAAvD,iCACH,KAAK,CAAC,QADH,CAAnB,CAEA,MAAO,CAAA,WAAW,CAAiB,UAAjB,CAA6B,KAA7B,CAAX,CAA+C,IAA/C,CAAqD,QAAD,EAAa,CACpE,MAAO,CAAA,QAAQ,CAAC,IAAhB,CACH,CAFM,EAEJ,KAFI,CAEG,KAAD,EAAU,CACf,GAAG,CAAC,KAAJ,kEACA,KAAM,CAAA,KAAN,CACH,CALM,CAAP,CAMH,CAED,QAAS,CAAA,YAAT,CAAsB,KAAtB,CAAmD,CAC/C,MAAO,CAAA,KAAK,EAAI,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAyB,CAAlC,EAAuC,KAAK,CAAC,QAAN,CAAe,MAAf,CAAwB,CAAtE,CACH,CAED,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,+DADkC,CAEtC,MAAM,CAA2B,iBAFK,CAGtC,KAAK,CAAE,WAH+B,CAAD,CAAzC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { RatingsSummary } from '@msdyn365-commerce/commerce-entities';\nimport { createObservableDataAction, IAction, IActionContext, IActionInput, IAny, ICreateActionContext, IGeneric, sendRequest } from '@msdyn365-commerce/core';\nimport { GetRatingsSummaryInput, getSelectedProductIdFromActionInput } from './index';\nimport { getRnrEndpointId, getRnrPartnerId } from './utilities/getRnrKeys';\n\nexport const createInput = (input: ICreateActionContext<IGeneric<IAny>>): IActionInput => {\n    const productId = getSelectedProductIdFromActionInput(input);\n    if (productId) {\n        return new GetRatingsSummaryInput(productId, getRnrPartnerId(input), getRnrEndpointId(input));\n    }\n    throw new Error('[GetRatingsSummary] Not all necessary parameters found while creating Input for getRatingsSummaryApi');\n};\n\n/**\n * This function gets the ratings summary\n */\nasync function getRatingsSummary(input: GetRatingsSummaryInput, ctx: IActionContext): Promise<RatingsSummary> {\n    if (!inputIsValid(input)) {\n        ctx.trace(`[GetRatingsSummary] Failed to get ratings summary for product`);\n        return {};\n    }\n\n    const requestUrl = `${input.serviceEndpoint}/v2.0/ratings/product/${input.productId}/summary?` +\n        `tenantId=${input.tenantId}`;\n    return sendRequest<RatingsSummary>(requestUrl, 'get').then((response) => {\n        return response.data;\n    }).catch((error) => {\n        ctx.trace(`[GetRatingsSummary] Failed to get ratings summary for product`);\n        throw error;\n    });\n}\n\nfunction inputIsValid(input: GetRatingsSummaryInput): boolean {\n    return input && input.productId.length > 0 && input.tenantId.length > 0;\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/retail-actions/get-ratings-summary',\n    action: <IAction<RatingsSummary>>getRatingsSummary,\n    input: createInput\n});"],"sourceRoot":""},"metadata":{},"sourceType":"module"}