{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}/*!\r\n * Copyright (c) Microsoft Corporation.\r\n * All rights reserved. See LICENSE in the project root for license information.\r\n */import classnames from'classnames';import*as React from'react';import ReactDOM from'react-dom';import{EditableField,FieldType}from'../../utilities/editable-fields/editable-field';import{getImageResizeUrl,getLargestGridSettingViewportName,getSourceData}from'./source-builder';export var placeholderImageUrl='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAEALAAAAAABAAEAAAIBTAA7';/**\r\n *  Image\r\n */export var Image=/*#__PURE__*/function(_React$PureComponent){_inherits(Image,_React$PureComponent);var _super=_createSuper(Image);function Image(props){var _this;_classCallCheck(this,Image);_this=_super.call(this,props);_this.defaultImage=function(largestGridSettingViewportName,imageAttributes,lazyLoad,inputImageSettings){var src=imageAttributes.src,className=imageAttributes.className,image=imageAttributes.image,imageSettings=imageAttributes.imageSettings,binaryHash=imageAttributes.binaryHash,altText=imageAttributes.altText,quality=imageAttributes.quality,focalRegion=imageAttributes.focalRegion,cropRegions=imageAttributes.cropRegions,description=imageAttributes.description,fileName=imageAttributes.fileName,fileSize=imageAttributes.fileSize,imageStyle=imageAttributes.imageStyle,isLocalizable=imageAttributes.isLocalizable,isDecorativeImage=imageAttributes.isDecorativeImage,orientation=imageAttributes.orientation,_links=imageAttributes._links,attributes=_objectWithoutProperties(imageAttributes,[\"src\",\"className\",\"image\",\"imageSettings\",\"binaryHash\",\"altText\",\"quality\",\"focalRegion\",\"cropRegions\",\"description\",\"fileName\",\"fileSize\",\"imageStyle\",\"isLocalizable\",\"isDecorativeImage\",\"orientation\",\"_links\"]);var cssClassName=_this.props.className||'';var filteredClassName=lazyLoad?cssClassName?\"\".concat(cssClassName,\" lazyload\"):'lazyload':cssClassName;var viewports=inputImageSettings&&inputImageSettings.viewports;if(viewports&&Object.keys(viewports).length){delete attributes.width;delete attributes.height;}var largestViewport=viewports&&viewports[largestGridSettingViewportName];var urlSrc=getImageResizeUrl(_this.state.src,largestViewport,inputImageSettings);return/*#__PURE__*/React.createElement(EditableField,{type:FieldType.Image,editPropKey:_this.props.editProps&&_this.props.editProps.key,requestContext:_this.props.editProps&&_this.props.editProps.requestContext,fieldProps:_objectSpread(_objectSpread(_objectSpread({alt:_this.props.altText},lazyLoad?{src:placeholderImageUrl,'data-src':urlSrc}:{src:urlSrc}),attributes),{},{key:'default-image',className:filteredClassName,onError:_this.imageFailed,additionalProperties:_this.props.additionalProperties})});};_this.imageFailed=function(){if(_this.props.fallBackSrc&&_this.props.fallBackSrc===_this.state.src||!_this.props.fallBackSrc){_this.setState({loadFailed:true});}else{_this.setState({src:_this.props.fallBackSrc?_this.props.fallBackSrc:_this.props.src});}if(typeof _this.props.onError==='function'){var _this$props;(_this$props=_this.props).onError.apply(_this$props,arguments);}};_this.getSourceTag=function(viewport,imageSettings,largestGridSettingViewportName,lazyLoad){var srcData=getSourceData(_this.state.src,_this.props.gridSettings,_this.props,imageSettings,viewport,largestGridSettingViewportName);if(!srcData){return;}return/*#__PURE__*/React.createElement(\"source\",Object.assign({key:viewport},lazyLoad?{'data-srcset':srcData.srcSet}:{srcSet:srcData.srcSet},srcData.media?{media:srcData.media}:{}));};_this.state={loadFailed:false,src:props.src};return _this;}_createClass(Image,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.src!==prevProps.src||this.props.fallBackSrc!==prevProps.fallBackSrc){this.setState({loadFailed:false,src:this.props.src});}}},{key:\"componentDidMount\",value:function componentDidMount(){// onError will sometimes fire before the react events get hooked up. So we\n// cannot rely on it for determining when image load fails. Instead we also have\n// to find the img that the Image component uses> If its complete, but naturalWidth\n// is zero that means load failed\nvar node=ReactDOM.findDOMNode(this);if(node&&node.querySelector){var child=node.querySelector('img');if(child&&child.complete&&child.naturalWidth===0){if(this.props.fallBackSrc&&this.props.fallBackSrc===this.state.src||!this.props.fallBackSrc){this.setState({loadFailed:true});}else{this.setState({src:this.props.fallBackSrc?this.props.fallBackSrc:this.props.src});}return;}}}},{key:\"render\",value:function render(){var _this2=this;var _this$props2=this.props,loadFailureBehavior=_this$props2.loadFailureBehavior,_this$props2$pictureA=_this$props2.pictureAttributes,pictureAttributes=_this$props2$pictureA===void 0?{}:_this$props2$pictureA,gridSettings=_this$props2.gridSettings,fallBackSrc=_this$props2.fallBackSrc,imageAttributes=_objectWithoutProperties(_this$props2,[\"loadFailureBehavior\",\"pictureAttributes\",\"gridSettings\",\"fallBackSrc\"]);if(this.state.loadFailed||!this.props.src){if(loadFailureBehavior==='hide'){return null;}else if(loadFailureBehavior==='empty'){return/*#__PURE__*/React.createElement(\"div\",{className:classnames('msc-empty_image',imageAttributes.className)});}}var imageSettings=this.props.imageSettings||imageAttributes.imageSettings;var largestGridSettingViewportName=getLargestGridSettingViewportName(gridSettings);// Lazyload by default if nothing is specified\nvar lazyLoad=!imageSettings||!imageSettings.disableLazyLoad;var sourceTags=imageSettings&&imageSettings.viewports?Object.keys(imageSettings.viewports).map(function(vp){return _this2.getSourceTag(vp,imageSettings,largestGridSettingViewportName,lazyLoad);}).filter(Boolean)||[]:[];sourceTags.push(this.defaultImage(largestGridSettingViewportName,imageAttributes,lazyLoad,imageSettings));return/*#__PURE__*/React.createElement(\"picture\",Object.assign({},pictureAttributes),sourceTags);}}]);return Image;}(React.PureComponent);","map":{"version":3,"sources":["../../../../src/components/image/image.tsx"],"names":[],"mappings":"g9DAAA;;;AAGG,GAEH,MAAO,CAAA,UAAP,KAAuB,YAAvB,CACA,MAAO,GAAK,CAAA,KAAZ,KAAuB,OAAvB,CACA,MAAO,CAAA,QAAP,KAAqB,WAArB,CAGA,OAAS,aAAT,CAAwB,SAAxB,KAAyC,gDAAzC,CAEA,OAAS,iBAAT,CAA4B,iCAA5B,CAA+D,aAA/D,KAAoF,kBAApF,CAEA,MAAO,IAAM,CAAA,mBAAmB,CAAG,gFAA5B,CAOP;;AAEG,GACH,UAAa,CAAA,KAAb,kHACI,eAAY,KAAZ,CAA8B,uCAC1B,uBAAM,KAAN,EA2DI,MAAA,YAAA,CAAe,SACnB,8BADmB,CAEnB,eAFmB,CAGnB,QAHmB,CAInB,kBAJmB,CAKnB,IAEI,CAAA,GAFJ,CAoBI,eApBJ,CAEI,GAFJ,CAGI,SAHJ,CAoBI,eApBJ,CAGI,SAHJ,CAII,KAJJ,CAoBI,eApBJ,CAII,KAJJ,CAKI,aALJ,CAoBI,eApBJ,CAKI,aALJ,CAMI,UANJ,CAoBI,eApBJ,CAMI,UANJ,CAOI,OAPJ,CAoBI,eApBJ,CAOI,OAPJ,CAQI,OARJ,CAoBI,eApBJ,CAQI,OARJ,CASI,WATJ,CAoBI,eApBJ,CASI,WATJ,CAUI,WAVJ,CAoBI,eApBJ,CAUI,WAVJ,CAWI,WAXJ,CAoBI,eApBJ,CAWI,WAXJ,CAYI,QAZJ,CAoBI,eApBJ,CAYI,QAZJ,CAaI,QAbJ,CAoBI,eApBJ,CAaI,QAbJ,CAcI,UAdJ,CAoBI,eApBJ,CAcI,UAdJ,CAeI,aAfJ,CAoBI,eApBJ,CAeI,aAfJ,CAgBI,iBAhBJ,CAoBI,eApBJ,CAgBI,iBAhBJ,CAiBI,WAjBJ,CAoBI,eApBJ,CAiBI,WAjBJ,CAkBI,MAlBJ,CAoBI,eApBJ,CAkBI,MAlBJ,CAmBO,UAnBP,0BAoBI,eApBJ,uNAsBA,GAAM,CAAA,YAAY,CAAG,MAAK,KAAL,CAAW,SAAX,EAAwB,EAA7C,CACA,GAAM,CAAA,iBAAiB,CAAG,QAAQ,CAAI,YAAY,WAAM,YAAN,cAAgC,UAAhD,CAA8D,YAAhG,CACA,GAAM,CAAA,SAAS,CAAG,kBAAkB,EAAI,kBAAkB,CAAC,SAA3D,CACA,GAAI,SAAS,EAAI,MAAM,CAAC,IAAP,CAAY,SAAZ,EAAuB,MAAxC,CAAgD,CAC5C,MAAO,CAAA,UAAU,CAAC,KAAlB,CACA,MAAO,CAAA,UAAU,CAAC,MAAlB,CACH,CAED,GAAM,CAAA,eAAe,CAAG,SAAS,EAAI,SAAS,CAAC,8BAAD,CAA9C,CACA,GAAM,CAAA,MAAM,CAAG,iBAAiB,CAAC,MAAK,KAAL,CAAW,GAAZ,CAAiB,eAAjB,CAAkC,kBAAlC,CAAhC,CAEA,mBACI,KAAA,CAAA,aAAA,CAAC,aAAD,CAAc,CACV,IAAI,CAAE,SAAS,CAAC,KADN,CAEV,WAAW,CAAE,MAAK,KAAL,CAAW,SAAX,EAAwB,MAAK,KAAL,CAAW,SAAX,CAAqB,GAFhD,CAGV,cAAc,CAAE,MAAK,KAAL,CAAW,SAAX,EAAwB,MAAK,KAAL,CAAW,SAAX,CAAqB,cAHnD,CAIV,UAAU,4CACN,GAAG,CAAE,MAAK,KAAL,CAAW,OADV,EAEF,QAAQ,CAAG,CAAE,GAAG,CAAE,mBAAP,CAA4B,WAAY,MAAxC,CAAH,CAAsD,CAAE,GAAG,CAAE,MAAP,CAF5D,EAGH,UAHG,MAIN,GAAG,CAAE,eAJC,CAKN,SAAS,CAAE,iBALL,CAMN,OAAO,CAAE,MAAK,WANR,CAON,oBAAoB,CAAE,MAAK,KAAL,CAAW,oBAP3B,EAJA,CAAd,CADJ,CAgBH,CAtDO,CAwDA,MAAA,WAAA,CAAc,UAAuB,CACzC,GAAK,MAAK,KAAL,CAAW,WAAX,EAA0B,MAAK,KAAL,CAAW,WAAX,GAA2B,MAAK,KAAL,CAAW,GAAjE,EAAyE,CAAC,MAAK,KAAL,CAAW,WAAzF,CAAsG,CAClG,MAAK,QAAL,CAAc,CAAE,UAAU,CAAE,IAAd,CAAd,EACH,CAFD,IAEO,CACH,MAAK,QAAL,CAAc,CAAE,GAAG,CAAE,MAAK,KAAL,CAAW,WAAX,CAAyB,MAAK,KAAL,CAAW,WAApC,CAAkD,MAAK,KAAL,CAAW,GAApE,CAAd,EACH,CACD,GAAI,MAAO,OAAK,KAAL,CAAW,OAAlB,GAA8B,UAAlC,CAA8C,iBAC1C,mBAAK,KAAL,EAAW,OAAX,8BACH,CACJ,CATO,CAWA,MAAA,YAAA,CAAe,SACnB,QADmB,CAEnB,aAFmB,CAGnB,8BAHmB,CAInB,QAJmB,CAKnB,CACA,GAAM,CAAA,OAAO,CAAG,aAAa,CACzB,MAAK,KAAL,CAAW,GADc,CAEzB,MAAK,KAAL,CAAW,YAFc,CAGzB,MAAK,KAHoB,CAIzB,aAJyB,CAKzB,QALyB,CAMzB,8BANyB,CAA7B,CAQA,GAAI,CAAC,OAAL,CAAc,CACV,OACH,CACD,mBACI,KAAA,CAAA,aAAA,CAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CACI,GAAG,CAAE,QADT,CAAA,CAES,QAAQ,CAAG,CAAE,cAAe,OAAO,CAAC,MAAzB,CAAH,CAAuC,CAAE,MAAM,CAAE,OAAO,CAAC,MAAlB,CAFxD,CAGS,OAAO,CAAC,KAAR,CAAgB,CAAE,KAAK,CAAE,OAAO,CAAC,KAAjB,CAAhB,CAA2C,EAHpD,CAAA,CADJ,CAOH,CAxBO,CA7HJ,MAAK,KAAL,CAAa,CACT,UAAU,CAAE,KADH,CAET,GAAG,CAAE,KAAK,CAAC,GAFF,CAAb,CAF0B,aAM7B,CAPL,gFAS8B,SAT9B,CASoD,CAC5C,GAAI,KAAK,KAAL,CAAW,GAAX,GAAmB,SAAS,CAAC,GAA7B,EAAoC,KAAK,KAAL,CAAW,WAAX,GAA2B,SAAS,CAAC,WAA7E,CAA0F,CACtF,KAAK,QAAL,CAAc,CAAE,UAAU,CAAE,KAAd,CAAqB,GAAG,CAAE,KAAK,KAAL,CAAW,GAArC,CAAd,EACH,CACJ,CAbL,6DAc4B,CACpB;AACA;AACA;AACA;AACA,GAAM,CAAA,IAAI,CAAG,QAAQ,CAAC,WAAT,CAAqB,IAArB,CAAb,CAEA,GAAI,IAAI,EAAI,IAAI,CAAC,aAAjB,CAAgC,CAC5B,GAAM,CAAA,KAAK,CAAG,IAAI,CAAC,aAAL,CAAmB,KAAnB,CAAd,CACA,GAAI,KAAK,EAAI,KAAK,CAAC,QAAf,EAA2B,KAAK,CAAC,YAAN,GAAuB,CAAtD,CAAyD,CACrD,GAAK,KAAK,KAAL,CAAW,WAAX,EAA0B,KAAK,KAAL,CAAW,WAAX,GAA2B,KAAK,KAAL,CAAW,GAAjE,EAAyE,CAAC,KAAK,KAAL,CAAW,WAAzF,CAAsG,CAClG,KAAK,QAAL,CAAc,CAAE,UAAU,CAAE,IAAd,CAAd,EACH,CAFD,IAEO,CACH,KAAK,QAAL,CAAc,CAAE,GAAG,CAAE,KAAK,KAAL,CAAW,WAAX,CAAyB,KAAK,KAAL,CAAW,WAApC,CAAkD,KAAK,KAAL,CAAW,GAApE,CAAd,EACH,CACD,OACH,CACJ,CACJ,CAhCL,uCAkCiB,kCAC8F,KAAK,KADnG,CACD,mBADC,cACD,mBADC,oCACoB,iBADpB,CACoB,iBADpB,gCACwC,EADxC,uBAC4C,YAD5C,cAC4C,YAD5C,CAC0D,WAD1D,cAC0D,WAD1D,CAC0E,eAD1E,iHAET,GAAI,KAAK,KAAL,CAAW,UAAX,EAAyB,CAAC,KAAK,KAAL,CAAW,GAAzC,CAA8C,CAC1C,GAAI,mBAAmB,GAAK,MAA5B,CAAoC,CAChC,MAAO,KAAP,CACH,CAFD,IAEO,IAAI,mBAAmB,GAAK,OAA5B,CAAqC,CACxC,mBAAO,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAE,UAAU,CAAC,iBAAD,CAAoB,eAAe,CAAC,SAApC,CAA1B,CAAA,CAAP,CACH,CACJ,CAED,GAAM,CAAA,aAAa,CAAG,KAAK,KAAL,CAAW,aAAX,EAA4B,eAAe,CAAC,aAAlE,CACA,GAAM,CAAA,8BAA8B,CAAG,iCAAiC,CAAC,YAAD,CAAxE,CAEA;AACA,GAAM,CAAA,QAAQ,CAAG,CAAC,aAAD,EAAkB,CAAC,aAAa,CAAC,eAAlD,CAEA,GAAM,CAAA,UAAU,CACZ,aAAa,EAAI,aAAa,CAAC,SAA/B,CACM,MAAM,CAAC,IAAP,CAAY,aAAa,CAAC,SAA1B,EACK,GADL,CACS,SAAA,EAAE,QAAI,CAAA,MAAI,CAAC,YAAL,CAAkB,EAAlB,CAAkC,aAAlC,CAAiD,8BAAjD,CAAiF,QAAjF,CAAJ,EADX,EAEK,MAFL,CAEY,OAFZ,GAEwB,EAH9B,CAIM,EALV,CAOA,UAAU,CAAC,IAAX,CAAgB,KAAK,YAAL,CAAkB,8BAAlB,CAAkD,eAAlD,CAAmE,QAAnE,CAA6E,aAA7E,CAAhB,EACA,mBAAO,KAAA,CAAA,aAAA,CAAA,SAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAa,iBAAb,CAAA,CAAiC,UAAjC,CAAP,CACH,CA3DL,mBAA2B,KAAK,CAAC,aAAjC","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport { IImageSettings } from '../..';\nimport { IAny, IGeneric } from '../../interfaces';\nimport { EditableField, FieldType } from '../../utilities/editable-fields/editable-field';\nimport { IImageProps, Viewport } from './IImage';\nimport { getImageResizeUrl, getLargestGridSettingViewportName, getSourceData } from './source-builder';\n\nexport const placeholderImageUrl = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAEALAAAAAABAAEAAAIBTAA7';\n\nexport interface IPictureState {\n    loadFailed: boolean;\n    src: string;\n}\n\n/**\n *  Image\n */\nexport class Image extends React.PureComponent<IImageProps, IPictureState> {\n    constructor(props: IImageProps) {\n        super(props);\n        this.state = {\n            loadFailed: false,\n            src: props.src\n        };\n    }\n\n    public componentDidUpdate(prevProps: IImageProps): void {\n        if (this.props.src !== prevProps.src || this.props.fallBackSrc !== prevProps.fallBackSrc) {\n            this.setState({ loadFailed: false, src: this.props.src });\n        }\n    }\n    public componentDidMount(): void {\n        // onError will sometimes fire before the react events get hooked up. So we\n        // cannot rely on it for determining when image load fails. Instead we also have\n        // to find the img that the Image component uses> If its complete, but naturalWidth\n        // is zero that means load failed\n        const node = ReactDOM.findDOMNode(this) as HTMLElement;\n\n        if (node && node.querySelector) {\n            const child = node.querySelector('img');\n            if (child && child.complete && child.naturalWidth === 0) {\n                if ((this.props.fallBackSrc && this.props.fallBackSrc === this.state.src) || !this.props.fallBackSrc) {\n                    this.setState({ loadFailed: true });\n                } else {\n                    this.setState({ src: this.props.fallBackSrc ? this.props.fallBackSrc : this.props.src });\n                }\n                return;\n            }\n        }\n    }\n\n    public render(): JSX.Element | null {\n        const { loadFailureBehavior, pictureAttributes = {}, gridSettings, fallBackSrc, ...imageAttributes } = this.props;\n        if (this.state.loadFailed || !this.props.src) {\n            if (loadFailureBehavior === 'hide') {\n                return null;\n            } else if (loadFailureBehavior === 'empty') {\n                return <div className={classnames('msc-empty_image', imageAttributes.className)} />;\n            }\n        }\n\n        const imageSettings = this.props.imageSettings || imageAttributes.imageSettings;\n        const largestGridSettingViewportName = getLargestGridSettingViewportName(gridSettings);\n\n        // Lazyload by default if nothing is specified\n        const lazyLoad = !imageSettings || !imageSettings.disableLazyLoad;\n\n        const sourceTags: (JSX.Element | undefined)[] =\n            imageSettings && imageSettings.viewports\n                ? Object.keys(imageSettings.viewports)\n                      .map(vp => this.getSourceTag(vp as Viewport, imageSettings, largestGridSettingViewportName, lazyLoad))\n                      .filter(Boolean) || []\n                : [];\n\n        sourceTags.push(this.defaultImage(largestGridSettingViewportName, imageAttributes, lazyLoad, imageSettings));\n        return <picture {...pictureAttributes}>{sourceTags}</picture>;\n    }\n\n    private defaultImage = (\n        largestGridSettingViewportName: Viewport,\n        imageAttributes: IGeneric<IAny>,\n        lazyLoad: boolean,\n        inputImageSettings?: IImageSettings\n    ) => {\n        const {\n            src,\n            className,\n            image,\n            imageSettings,\n            binaryHash,\n            altText,\n            quality,\n            focalRegion,\n            cropRegions,\n            description,\n            fileName,\n            fileSize,\n            imageStyle,\n            isLocalizable,\n            isDecorativeImage,\n            orientation,\n            _links,\n            ...attributes\n        } = imageAttributes;\n\n        const cssClassName = this.props.className || '';\n        const filteredClassName = lazyLoad ? (cssClassName ? `${cssClassName} lazyload` : 'lazyload') : cssClassName;\n        const viewports = inputImageSettings && inputImageSettings.viewports;\n        if (viewports && Object.keys(viewports).length) {\n            delete attributes.width;\n            delete attributes.height;\n        }\n\n        const largestViewport = viewports && viewports[largestGridSettingViewportName];\n        const urlSrc = getImageResizeUrl(this.state.src, largestViewport, inputImageSettings);\n\n        return (\n            <EditableField\n                type={FieldType.Image}\n                editPropKey={this.props.editProps && this.props.editProps.key}\n                requestContext={this.props.editProps && this.props.editProps.requestContext}\n                fieldProps={{\n                    alt: this.props.altText,\n                    ...(lazyLoad ? { src: placeholderImageUrl, 'data-src': urlSrc } : { src: urlSrc }),\n                    ...attributes,\n                    key: 'default-image',\n                    className: filteredClassName,\n                    onError: this.imageFailed,\n                    additionalProperties: this.props.additionalProperties\n                }}\n            />\n        );\n    };\n\n    private imageFailed = (...args: unknown[]) => {\n        if ((this.props.fallBackSrc && this.props.fallBackSrc === this.state.src) || !this.props.fallBackSrc) {\n            this.setState({ loadFailed: true });\n        } else {\n            this.setState({ src: this.props.fallBackSrc ? this.props.fallBackSrc : this.props.src });\n        }\n        if (typeof this.props.onError === 'function') {\n            this.props.onError(...args);\n        }\n    };\n\n    private getSourceTag = (\n        viewport: Viewport,\n        imageSettings: IImageSettings,\n        largestGridSettingViewportName: Viewport,\n        lazyLoad: boolean\n    ) => {\n        const srcData = getSourceData(\n            this.state.src,\n            this.props.gridSettings,\n            this.props,\n            imageSettings,\n            viewport,\n            largestGridSettingViewportName\n        );\n        if (!srcData) {\n            return;\n        }\n        return (\n            <source\n                key={viewport}\n                {...(lazyLoad ? { 'data-srcset': srcData.srcSet } : { srcSet: srcData.srcSet })}\n                {...(srcData.media ? { media: srcData.media } : {})}\n            />\n        );\n    };\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}