{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import*as React from'react';import{isNonceEnabled,SDK_FRAGMENT_NAME}from'@msdyn365-commerce/core-internal';var DefaultMetaTags=/*#__PURE__*/function(_React$PureComponent){_inherits(DefaultMetaTags,_React$PureComponent);var _super=_createSuper(DefaultMetaTags);function DefaultMetaTags(){_classCallCheck(this,DefaultMetaTags);return _super.apply(this,arguments);}_createClass(DefaultMetaTags,[{key:\"render\",value:function render(){var _this$props=this.props,data=_this$props.data,config=_this$props.config;var nonceToken=this.props.context&&isNonceEnabled(this.props.context.request);var metaTagsHtml='';var metaTags;if(config.metaTags){metaTags=nonceToken?this._addNonceToInlineScript(config.metaTags,nonceToken):config.metaTags;metaTagsHtml=metaTags&&metaTags.join('\\n');}else if(data.metaTags){metaTags=data.metaTags;var metaTagsText=metaTags.map(function(simpleText){return simpleText.text;});metaTagsText=nonceToken?this._addNonceToInlineScript(metaTagsText,nonceToken):metaTagsText;metaTagsHtml=metaTagsText&&metaTagsText.join('\\n');}return/*#__PURE__*/React.createElement(SDK_FRAGMENT_NAME,{key:this.props.id,dangerouslySetInnerHTML:{__html:metaTagsHtml}});}},{key:\"_addNonceToInlineScript\",value:function _addNonceToInlineScript(metaTags,nonceToken){var inlineScripRegex=/<script((?:(?!src=).)*?)>(.*?)<\\/script>/g;return metaTags.map(function(metaTag){if(inlineScripRegex.test(metaTag)){return metaTag.replace(/<script/g,\"<script nonce=\".concat(nonceToken));}return metaTag;}).filter(Boolean);}}]);return DefaultMetaTags;}(React.PureComponent);export default DefaultMetaTags;","map":{"version":3,"sources":["modules/default-metatags/default-metatags.tsx"],"names":[],"mappings":"ohCAKA,MAAO,GAAK,CAAA,KAAZ,KAAuB,OAAvB,CAEA,OAAS,cAAT,CAAyB,iBAAzB,KAAkD,kCAAlD,C,GASM,CAAA,e,+SACW,iBACgB,KAAK,KADrB,CACD,IADC,aACD,IADC,CACK,MADL,aACK,MADL,CAET,GAAM,CAAA,UAAU,CAAG,KAAK,KAAL,CAAW,OAAX,EAAsB,cAAc,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,OAApB,CAAvD,CACA,GAAI,CAAA,YAAY,CAAW,EAA3B,CACA,GAAI,CAAA,QAAJ,CACA,GAAI,MAAM,CAAC,QAAX,CAAqB,CACjB,QAAQ,CAAG,UAAU,CAAG,KAAK,uBAAL,CAA6B,MAAM,CAAC,QAApC,CAA8C,UAA9C,CAAH,CAA+D,MAAM,CAAC,QAA3F,CACA,YAAY,CAAG,QAAQ,EAAI,QAAQ,CAAC,IAAT,CAAc,IAAd,CAA3B,CACH,CAHD,IAGO,IAAI,IAAI,CAAC,QAAT,CAAmB,CACtB,QAAQ,CAAG,IAAI,CAAC,QAAhB,CACA,GAAI,CAAA,YAAY,CAAG,QAAQ,CAAC,GAAT,CAAa,SAAA,UAAU,QAAI,CAAA,UAAU,CAAC,IAAf,EAAvB,CAAnB,CACA,YAAY,CAAG,UAAU,CAAG,KAAK,uBAAL,CAA6B,YAA7B,CAA2C,UAA3C,CAAH,CAA4D,YAArF,CACA,YAAY,CAAG,YAAY,EAAI,YAAY,CAAC,IAAb,CAAkB,IAAlB,CAA/B,CACH,CAED,mBAAO,KAAK,CAAC,aAAN,CAAoB,iBAApB,CAAuC,CAAE,GAAG,CAAE,KAAK,KAAL,CAAW,EAAlB,CAAsB,uBAAuB,CAAE,CAAE,MAAM,CAAE,YAAV,CAA/C,CAAvC,CAAP,CACH,C,wEAE+B,Q,CAAoB,U,CAAkB,CAClE,GAAM,CAAA,gBAAgB,CAAG,2CAAzB,CACA,MAAO,CAAA,QAAQ,CACV,GADE,CACE,SAAA,OAAO,CAAG,CACX,GAAI,gBAAgB,CAAC,IAAjB,CAAsB,OAAtB,CAAJ,CAAoC,CAChC,MAAO,CAAA,OAAO,CAAC,OAAR,CAAgB,UAAhB,yBAA6C,UAA7C,EAAP,CACH,CACD,MAAO,CAAA,OAAP,CACH,CANE,EAOF,MAPE,CAOK,OAPL,CAAP,CAQH,C,6BA7ByB,KAAK,CAAC,a,EAgCpC,cAAe,CAAA,eAAf","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as React from 'react';\n\nimport { isNonceEnabled, SDK_FRAGMENT_NAME } from '@msdyn365-commerce/core-internal';\nimport { IDefaultMetatagsData } from './default-metatags.data';\nimport { IDefaultMetatagsProps } from './default-metatags.props.autogenerated';\n\n/**\n *\n * DefaultPageSummaryMetadata component\n * @extends {React.PureComponent<DefaultPageSummaryProps<{}>>}\n */\nclass DefaultMetaTags extends React.PureComponent<IDefaultMetatagsProps<IDefaultMetatagsData>> {\n    public render(): JSX.Element {\n        const { data, config } = this.props;\n        const nonceToken = this.props.context && isNonceEnabled(this.props.context.request);\n        let metaTagsHtml: string = '';\n        let metaTags;\n        if (config.metaTags) {\n            metaTags = nonceToken ? this._addNonceToInlineScript(config.metaTags, nonceToken) : config.metaTags;\n            metaTagsHtml = metaTags && metaTags.join('\\n');\n        } else if (data.metaTags) {\n            metaTags = data.metaTags;\n            let metaTagsText = metaTags.map(simpleText => simpleText.text);\n            metaTagsText = nonceToken ? this._addNonceToInlineScript(metaTagsText, nonceToken) : metaTagsText;\n            metaTagsHtml = metaTagsText && metaTagsText.join('\\n');\n        }\n        // tslint:disable-next-line:react-no-dangerous-html\n        return React.createElement(SDK_FRAGMENT_NAME, { key: this.props.id, dangerouslySetInnerHTML: { __html: metaTagsHtml } });\n    }\n\n    private _addNonceToInlineScript(metaTags: string[], nonceToken: string): string[] {\n        const inlineScripRegex = /<script((?:(?!src=).)*?)>(.*?)<\\/script>/g;\n        return metaTags\n            .map(metaTag => {\n                if (inlineScripRegex.test(metaTag)) {\n                    return metaTag.replace(/<script/g, `<script nonce=${nonceToken}`);\n                }\n                return metaTag;\n            })\n            .filter(Boolean);\n    }\n}\n\nexport default DefaultMetaTags;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}