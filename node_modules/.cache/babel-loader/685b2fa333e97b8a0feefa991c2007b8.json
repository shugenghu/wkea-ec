{"ast":null,"code":"import\"core-js/modules/es.object.assign.js\";import*as React from'react';import{Alert,Button,format,getPayloadObject,getTelemetryAttributes,getTelemetryObject,Heading,Quantity,TelemetryConstant}from'@msdyn365-commerce-modules/utilities';import{AddToCartComponent,AddToOrderTemplateComponent,AddToWishlistComponent,PriceComponent,RatingComponent}from'@msdyn365-commerce/components';import{getUrlSync}from'@msdyn365-commerce/core';import{getConfigureErrors,getGenericError,getQuantityError}from'../utilities/error-utilities';export function getBuyBoxInventoryLabel(props){const{data:{productAvailableQuantity:{result:productAvailableQuantity}}}=props;if(!productAvailableQuantity||!productAvailableQuantity.length){return undefined;}if(productAvailableQuantity&&productAvailableQuantity.length&&productAvailableQuantity[0].StockLevelLabel){const inventoryClassName=productAvailableQuantity[0].StockLevelCode?\"ms-buybox__inventory-label ms-buybox__inventory-code-\".concat(productAvailableQuantity[0].StockLevelCode.toLowerCase()):'ms-buybox__inventory-label';return/*#__PURE__*/React.createElement(\"div\",{className:'ms-buybox__inventory-info'},/*#__PURE__*/React.createElement(\"span\",{className:inventoryClassName},productAvailableQuantity[0].StockLevelLabel));}return undefined;}export function getBuyboxProductTitle(props){const{data:{product:{result:product}},config:{titleHeadingTag='h1'}}=props;return product&&/*#__PURE__*/React.createElement(Heading,{className:'ms-buybox__product-title',headingTag:titleHeadingTag,text:product.Name||''});}export function getBuyboxProductDescription(props){const{data:{product:{result:product}}}=props;return product&&/*#__PURE__*/React.createElement(\"p\",{className:'ms-buybox__product-description'},product.Description);}let telemetryContent;export function getBuyboxAddToCart(props,state,callbacks){const{id,typeName,context,data:{cart:{result:cart},product:{result:product},productPrice:{result:productPrice},productAvailableQuantity:{result:productAvailableQuantity}},resources}=props;const{quantity,errorState:{configureErrors,quantityError,otherError,errorHost},selectedProduct,isUpdatingDimension,isServiceItem}=state;const productAvailability=state.productAvailableQuantity?state.productAvailableQuantity.ProductAvailableQuantity:productAvailableQuantity&&productAvailableQuantity.length?productAvailableQuantity[0].ProductAvailableQuantity:undefined;const onAddToCartFailed=result=>{callbacks.updateErrorState({errorHost:'ADDTOCART',quantityError:result.failureReason==='OUTOFSTOCK'?getQuantityError(result.stockLeft,resources):undefined,configureErrors:result.failureReason==='MISSINGDIMENSION'?getConfigureErrors(result.missingDimensions,resources):{},otherError:getGenericError(result,cart,resources,context,product,productAvailability,undefined)});};const dialogStrings={goToCartText:resources.buyBoxGoToCartText,continueShoppingText:resources.buyBoxContinueShoppingText,headerItemOneText:resources.buyBoxSingleItemText,headerItemFormatText:resources.buyBoxMultiLineItemFormatText,headerMessageText:resources.buyBoxHeaderMessageText,freePriceText:resources.priceFree,originalPriceText:resources.originalPriceText,currentPriceText:resources.currentPriceText};const defaultImageSettings={viewports:{xs:{q:\"w=240&h=240&m=6\",w:0,h:0},lg:{q:\"w=240&h=240&m=6\",w:0,h:0},xl:{q:\"w=240&h=240&m=6\",w:0,h:0}},lazyload:true};const isLoading=props.data.productAvailableQuantity.status==='LOADING';if(isLoading){callbacks.changeUpdatingDimension(false);}telemetryContent=getTelemetryObject(props.context.request.telemetryPageName,props.friendlyName,props.telemetry);return{ContainerProps:{className:'ms-buybox__add-to-cart-container'},button:product&&/*#__PURE__*/React.createElement(AddToCartComponent,{addToCartText:resources.addToCartText,outOfStockText:resources.outOfStockText,navigationUrl:getUrlSync('cart',context.actionContext),quantity:quantity,data:{product:product,price:productPrice},context:context,id:id,typeName:typeName,onError:onAddToCartFailed,getSelectedProduct:selectedProduct,productAvailability:productAvailability,isLoading:isLoading,isUpdatingDimension:isUpdatingDimension,changeUpdatingDimension:callbacks.changeUpdatingDimension,dialogStrings:dialogStrings,gridSettings:props.context.request.gridSettings,imageSettings:defaultImageSettings,telemetryContent:telemetryContent,isAddServiceItemToCart:isServiceItem}),errorBlock:/*#__PURE__*/React.createElement(BuyboxErrorBlock,{configureErrors:configureErrors,quantityError:quantityError,otherError:otherError,resources:resources,showError:errorHost==='ADDTOCART'})};}export function getBuyboxProductPrice(props){const{id,typeName,context,data:{productPrice:{result:productPrice}},resources}=props;return productPrice&&/*#__PURE__*/React.createElement(PriceComponent,{id:id,typeName:typeName,context:context,data:{price:productPrice},freePriceText:resources.priceFree,originalPriceText:resources.originalPriceText,currentPriceText:resources.currentPriceText});}export function getBuyboxProductRating(props){const{id,typeName,context,data:{ratingsSummary:{result:ratingsSummary}},resources}=props;const ratingComponent=ratingsSummary&&ratingsSummary.averageRating&&/*#__PURE__*/React.createElement(RatingComponent,{avgRating:ratingsSummary.averageRating||0,readOnly:true,ariaLabel:format(resources.averageRatingAriaLabel,ratingsSummary.averageRating,'5'),ratingCount:\"\".concat(ratingsSummary.reviewsCount),data:{},context:context,id:id,typeName:typeName})||undefined;return ratingsSummary&&ratingComponent&&ratingComponent;}function generateAddToOrderTemplateDialogResources(resources){return{addToOrderTemplateHeader:resources.addToOrderTemplateHeader,noOrderTemplatesMessage:resources.noOrderTemplatesMessage,noOrderTemplatesDescription:resources.noOrderTemplatesDescription,createAnOrderTemplateButtonText:resources.createAnOrderTemplateButtonText,createNewOrderTemplateButtonText:resources.createNewOrderTemplateButtonText,cancelOrderTemplateCreationButtonText:resources.cancelOrderTemplateCreationButtonText,selectTemplatesText:resources.selectTemplatesText,addToTemplateButtonText:resources.addToTemplateButtonText,lineItemsText:resources.lineItemsText};}function generateOrderTemplateNameDialogResources(resources){return{orderTemplateHeaderLabel:resources.createOrderTemplateHeader,orderTemplateTitleLabel:resources.orderTemplateTitle,orderTemplateNameAriaLabel:resources.orderTemplateNameAriaLabel,orderTemplateDescription:resources.createOrderTemplateDescription,defaultOrderTemplateName:resources.defaultOrderTemplateName,orderTemplateButtonLabel:resources.createOrderTemplateButtonText,orderTemplateCancelButtonLabel:resources.cancelNewOrderTemplateCreationButtonText};}function generateItemAddedToOrderTemplateDialogResources(resources){return{viewOrderTemplateButtonText:resources.viewOrderTemplateButtonText,continueShoppingButtonText:resources.continueShoppingButtonText,itemAddedToOrderTemplateHeaderItemOneText:resources.itemAddedToOrderTemplateHeaderItemOneText,itemAddedToOrderTemplateHeaderItemFormatText:resources.itemAddedToOrderTemplateHeaderItemFormatText,itemAddedToOrderTemplateHeaderMessageText:resources.itemAddedToOrderTemplateHeaderMessageText,freePriceText:resources.priceFree,originalPriceText:resources.originalPriceText,currentPriceText:resources.currentPriceText};}function generateDuplicateItemsWhenAddingToOrderTemplateDialogResources(resources){return{duplicatedProductsHeader:resources.duplicatedProductsHeader,duplicatedProductsDescription:resources.duplicatedProductsDescription,updateQuantityButtonText:resources.updateQuantityButtonText,cancelDuplicateItemsButtonText:resources.cancelDuplicateItemsButtonText};}export function getBuyboxProductAddToOrderTemplate(props,state,callbacks){const{id,typeName,context,data:{product:{result:product},orderTemplates:{result:orderTemplates},customerInformation:{result:customerInformation}},resources}=props;const{errorState:{configureErrors,quantityError,otherError,errorHost},quantity}=state;const onAddToOrderTemplateFailed=result=>{callbacks.updateErrorState({errorHost:'ORDER_TEMPLATE',configureErrors:result.status==='MISSING_DIMENSION'?getConfigureErrors(result.missingDimensions,resources):{}});};return{ContainerProps:{className:'ms-buybox__add-to-order-template-container'},button:product&&orderTemplates&&/*#__PURE__*/React.createElement(AddToOrderTemplateComponent,{className:'msc-add-to-cart-extra-actions',addToOrderTemplateButtonText:resources.addToOrderTemplateButtonText,addToOrderTemplateDialogResources:generateAddToOrderTemplateDialogResources(resources),createOrderTemplateDialogResources:generateOrderTemplateNameDialogResources(resources),itemAddedToOrderTemplateDialogResources:generateItemAddedToOrderTemplateDialogResources(resources),duplicateItemsWhenAddingToOrderTemplateDialogResources:generateDuplicateItemsWhenAddingToOrderTemplateDialogResources(resources),data:{product:product,quantity:quantity,orderTemplates:orderTemplates,customerInformation:customerInformation},context:context,id:id,typeName:typeName,onError:onAddToOrderTemplateFailed}),errorBlock:/*#__PURE__*/React.createElement(BuyboxErrorBlock,{configureErrors:configureErrors,quantityError:quantityError,otherError:otherError,resources:resources,showError:errorHost==='ORDER_TEMPLATE'})};}export function getBuyboxProductAddToWishlist(props,state,callbacks){const{id,typeName,context,data:{product:{result:product},wishlists:{result:wishlists}},resources}=props;const{errorState:{configureErrors,quantityError,otherError,errorHost},selectedProduct}=state;const onAddToWishlistFailed=result=>{callbacks.updateErrorState({errorHost:'WISHLIST',configureErrors:result.status==='MISSINGDIMENSION'?getConfigureErrors(result.missingDimensions,resources):{}});};return{ContainerProps:{className:'ms-buybox__add-to-wishlist-container'},button:product&&/*#__PURE__*/React.createElement(AddToWishlistComponent,{className:'msc-add-to-cart-extra-actions',addToWishlistButtonText:resources.addToWishlistButtonText,removeFromWishlistButtonText:resources.removeFromWishlistButtonText,addToWishlistMessage:resources.addToWishlistMessage,removedFromWishlistMessage:resources.removedFromWishlistMessage,addItemToWishlistError:resources.addItemToWishlistError,removeItemFromWishlistError:resources.removeItemFromWishlistError,nameOfWishlist:resources.nameOfWishlist,data:{product:product,wishlists:wishlists},context:context,id:id,typeName:typeName,onError:onAddToWishlistFailed,getSelectedProduct:selectedProduct}),errorBlock:/*#__PURE__*/React.createElement(BuyboxErrorBlock,{configureErrors:configureErrors,quantityError:quantityError,otherError:otherError,resources:resources,showError:errorHost==='WISHLIST'})};}export function getBuyboxProductQuantity(props,state,callbacks){const{resources,context:{app:{config:{maxQuantityForCartLineItem}}}}=props;const{quantity,errorState:{quantityError}}=state;const onChange=newValue=>{if(callbacks.updateQuantity){callbacks.updateQuantity(newValue);}};return{ContainerProps:{className:'ms-buybox__quantity'},LabelContainerProps:{tag:'label',className:'ms-buybox__product-quantity-label',htmlFor:'ms-buybox__product-quantity-input'},heading:/*#__PURE__*/React.createElement(\"div\",{className:'ms-buybox__product-quantity-label-heading'},resources.productQuantityHeading),errors:quantityError&&/*#__PURE__*/React.createElement(\"span\",{className:'msc-alert msc-alert-noborder msc-alert-danger'},/*#__PURE__*/React.createElement(\"span\",{className:'msi-exclamation-triangle',\"aria-hidden\":'true'}),/*#__PURE__*/React.createElement(\"span\",null,quantityError)),input:/*#__PURE__*/React.createElement(Quantity,{id:'ms-buybox__product-quantity-input',max:maxQuantityForCartLineItem||10,currentCount:quantity,onChange:onChange,inputQuantityAriaLabel:resources.inputQuantityAriaLabel,telemetryContent:telemetryContent})};}export function getBuyboxShopSimilarLook(props,state,callbacks){const{resources,context,data:{product:{result:product}}}=props;const{errorState:{}}=state;const navigationUrl=()=>{const searchURL=\"\".concat(getUrlSync('search',context&&context.actionContext),\"?productId=\").concat(product&&product.RecordId);document.location.href=searchURL;};const payLoad=getPayloadObject('click',telemetryContent,TelemetryConstant.ShopSimliarLooks);const attribute=getTelemetryAttributes(telemetryContent,payLoad);return{ContainerProps:{className:'ms-buybox__shopsimilarlooks'},input:/*#__PURE__*/React.createElement(Button,Object.assign({title:resources.shopSimilarLooksText,className:'ms-buybox__shop-similar-looks-button',\"aria-label\":resources.shopSimilarLooksText,onClick:navigationUrl},attribute),resources.shopSimilarLooksText)};}export const BuyboxErrorBlock=(_ref)=>{let{showError,configureErrors,quantityError,otherError,resources}=_ref;let errorMessages=[];errorMessages=Object.values(configureErrors).filter(message=>message!==undefined);if(quantityError){errorMessages.push(quantityError);}if(otherError){errorMessages.push(otherError);}return/*#__PURE__*/React.createElement(Alert,{isOpen:showError&&errorMessages.length>0,color:'danger',assertive:true,\"aria-label\":resources.buyboxErrorMessageHeader},/*#__PURE__*/React.createElement(\"div\",{className:'msc-alert__header',\"aria-hidden\":'true'},/*#__PURE__*/React.createElement(\"span\",{className:'msi-exclamation-triangle'}),/*#__PURE__*/React.createElement(\"span\",null,resources.buyboxErrorMessageHeader)),errorMessages.map(message=>{if(message){return/*#__PURE__*/React.createElement(\"div\",{className:'msc-alert__line'},message);}else{return null;}}));};","map":{"version":3,"sources":["modules/buybox/components/buybox-small-components.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\n\nimport { Alert, Button, format, getPayloadObject, getTelemetryAttributes, getTelemetryObject,Heading, INodeProps, ITelemetryContent, Quantity, TelemetryConstant } from '@msdyn365-commerce-modules/utilities';\nimport {\n    AddToCartComponent,\n    AddToOrderTemplateComponent,\n    AddToWishlistComponent,\n    IAddToCartFailureResult,\n    IAddToOrderTemplateDialogResources,\n    IDuplicateItemsWhenAddingToOrderTemplateDialogResources,\n    IItemAddedToOrderTemplateDialogResources,\n    IOrderTemplateActionErrorResult,\n    IOrderTemplateNameDialogResources,\n    IWishlistActionErrorResult,\n    PriceComponent,\n    RatingComponent\n} from '@msdyn365-commerce/components';\nimport { getUrlSync, IImageSettings } from '@msdyn365-commerce/core';\nimport { IBuyboxCallbacks, IBuyboxData, IBuyboxProps, IBuyboxResources, IBuyboxState } from '../../../index';\nimport { getConfigureErrors, getGenericError, getQuantityError } from '../utilities/error-utilities';\n\nexport function getBuyBoxInventoryLabel(props: IBuyboxProps<IBuyboxData>): React.ReactElement | undefined {\n    const {\n        data: { productAvailableQuantity: { result: productAvailableQuantity} },\n    } = props;\n    if(!productAvailableQuantity || !productAvailableQuantity.length) {\n        return undefined;\n    }\n    if(productAvailableQuantity &&\n        productAvailableQuantity.length&&\n        productAvailableQuantity[0].StockLevelLabel) {\n            const inventoryClassName = productAvailableQuantity[0].StockLevelCode?\n            `ms-buybox__inventory-label ms-buybox__inventory-code-${productAvailableQuantity[0].StockLevelCode.toLowerCase()}`:\n            'ms-buybox__inventory-label';\n            return (<div className='ms-buybox__inventory-info'><span className={inventoryClassName} >{productAvailableQuantity[0].StockLevelLabel}</span></div>);\n    }\n\n    return undefined;\n\n}\nexport function getBuyboxProductTitle(props: IBuyboxProps<IBuyboxData>): React.ReactElement | undefined {\n    const {\n        data: { product: { result: product } },\n        config: { titleHeadingTag = 'h1' }\n    } = props;\n\n    return product && (\n        <Heading\n            className='ms-buybox__product-title'\n            headingTag={titleHeadingTag}\n            text={product.Name || ''}\n        />\n    );\n}\n\nexport function getBuyboxProductDescription(props: IBuyboxProps<IBuyboxData>): React.ReactElement | undefined {\n    const {\n        data: { product: { result: product } }\n    } = props;\n\n    return product && (\n        <p className='ms-buybox__product-description'>{product.Description}</p>\n    );\n}\n\nexport interface IBuyboxAddToCartViewProps {\n    ContainerProps: INodeProps;\n    errorBlock?: React.ReactNode;\n    button?: React.ReactNode;\n}\n\nlet telemetryContent: ITelemetryContent;\n\n// tslint:disable-next-line:max-func-body-length\nexport function getBuyboxAddToCart(props: IBuyboxProps<IBuyboxData>, state: IBuyboxState, callbacks: IBuyboxCallbacks): IBuyboxAddToCartViewProps {\n    const {\n        id,\n        typeName,\n        context,\n        data: { cart: { result: cart }, product: { result: product }, productPrice: { result: productPrice }, productAvailableQuantity: { result: productAvailableQuantity} },\n        resources\n    } = props;\n\n    const\n        {\n            quantity,\n            errorState: {\n                configureErrors,\n                quantityError,\n                otherError,\n                errorHost\n            },\n            selectedProduct,\n            isUpdatingDimension,\n            isServiceItem\n        } = state;\n\n    const productAvailability = state.productAvailableQuantity ?\n        state.productAvailableQuantity.ProductAvailableQuantity :\n            productAvailableQuantity && productAvailableQuantity.length?\n             productAvailableQuantity[0].ProductAvailableQuantity: undefined;\n\n    const onAddToCartFailed = (result: IAddToCartFailureResult) => {\n        callbacks.updateErrorState({\n            errorHost: 'ADDTOCART',\n            quantityError: result.failureReason === 'OUTOFSTOCK' ? getQuantityError(result.stockLeft, resources) : undefined,\n            configureErrors: result.failureReason === 'MISSINGDIMENSION' ? getConfigureErrors(result.missingDimensions, resources) : {},\n            otherError: getGenericError(result, cart, resources, context, product, productAvailability, undefined)\n        });\n    };\n\n    const dialogStrings = {\n        goToCartText: resources.buyBoxGoToCartText,\n        continueShoppingText: resources.buyBoxContinueShoppingText,\n        headerItemOneText: resources.buyBoxSingleItemText,\n        headerItemFormatText: resources.buyBoxMultiLineItemFormatText,\n        headerMessageText: resources.buyBoxHeaderMessageText,\n        freePriceText: resources.priceFree,\n        originalPriceText: resources.originalPriceText,\n        currentPriceText: resources.currentPriceText\n    };\n\n    const defaultImageSettings: IImageSettings = {\n        viewports: {\n            xs: { q: `w=240&h=240&m=6`, w: 0, h: 0 },\n            lg: { q: `w=240&h=240&m=6`, w: 0, h: 0 },\n            xl: { q: `w=240&h=240&m=6`, w: 0, h: 0 }\n        },\n        lazyload: true\n    };\n\n    const isLoading = props.data.productAvailableQuantity.status === 'LOADING';\n    if (isLoading) {\n        callbacks.changeUpdatingDimension(false);\n    }\n    telemetryContent = getTelemetryObject(props.context.request.telemetryPageName!,\n                                          props.friendlyName,\n                                          props.telemetry);\n\n    return {\n        ContainerProps: {\n            className: 'ms-buybox__add-to-cart-container'\n        },\n        button: product && (\n            <AddToCartComponent\n                addToCartText={resources.addToCartText}\n                outOfStockText={resources.outOfStockText}\n                navigationUrl={getUrlSync('cart', context.actionContext)}\n                quantity={quantity}\n                data={{product: product, price: productPrice}}\n                context={context}\n                id={id}\n                typeName={typeName}\n                onError={onAddToCartFailed}\n                getSelectedProduct={selectedProduct}\n                productAvailability={productAvailability}\n                isLoading={isLoading}\n                isUpdatingDimension={isUpdatingDimension}\n                changeUpdatingDimension={callbacks.changeUpdatingDimension}\n                dialogStrings={dialogStrings}\n                gridSettings={props.context.request.gridSettings}\n                imageSettings={defaultImageSettings}\n                telemetryContent= {telemetryContent}\n                isAddServiceItemToCart= {isServiceItem}\n            />\n        ),\n    errorBlock: (\n            <BuyboxErrorBlock\n                configureErrors={configureErrors}\n                quantityError={quantityError}\n                otherError={otherError}\n                resources={resources}\n                showError={errorHost === 'ADDTOCART'}\n            />\n        )\n    };\n}\n\nexport function getBuyboxProductPrice(props: IBuyboxProps<IBuyboxData>): React.ReactElement | undefined {\n    const {\n        id,\n        typeName,\n        context,\n        data: { productPrice: { result: productPrice } },\n        resources\n    } = props;\n\n    return productPrice && (\n        <PriceComponent\n            id={id}\n            typeName={typeName}\n            context={context}\n            data={{price: productPrice}}\n            freePriceText={resources.priceFree}\n            originalPriceText={resources.originalPriceText}\n            currentPriceText={resources.currentPriceText}\n        />\n    );\n}\n\nexport function getBuyboxProductRating(props: IBuyboxProps<IBuyboxData>): React.ReactElement | undefined  {\n    const {\n        id,\n        typeName,\n        context,\n        data: { ratingsSummary: { result: ratingsSummary } },\n        resources\n    } = props;\n\n    const ratingComponent = ratingsSummary && ratingsSummary.averageRating && (\n        <RatingComponent\n            avgRating={ratingsSummary.averageRating || 0}\n            readOnly={true}\n            ariaLabel={format(resources.averageRatingAriaLabel, ratingsSummary.averageRating, '5')}\n            ratingCount={`${ratingsSummary.reviewsCount}`}\n            data={{}}\n            context={context}\n            id={id}\n            typeName={typeName}\n        />\n    ) || undefined ;\n\n    return ratingsSummary && ratingComponent && (\n        ratingComponent\n        );\n}\n\nexport interface IBuyboxAddToOrderTemplateViewProps {\n    ContainerProps: INodeProps;\n    errorBlock?: React.ReactNode;\n    button?: React.ReactNode;\n}\n\nfunction generateAddToOrderTemplateDialogResources(resources: IBuyboxResources): IAddToOrderTemplateDialogResources {\n    return {\n        addToOrderTemplateHeader: resources.addToOrderTemplateHeader,\n\n        noOrderTemplatesMessage: resources.noOrderTemplatesMessage,\n        noOrderTemplatesDescription: resources.noOrderTemplatesDescription,\n\n        createAnOrderTemplateButtonText: resources.createAnOrderTemplateButtonText,\n        createNewOrderTemplateButtonText: resources.createNewOrderTemplateButtonText,\n        cancelOrderTemplateCreationButtonText: resources.cancelOrderTemplateCreationButtonText,\n\n        selectTemplatesText: resources.selectTemplatesText,\n        addToTemplateButtonText: resources.addToTemplateButtonText,\n        lineItemsText: resources.lineItemsText\n    };\n}\n\nfunction generateOrderTemplateNameDialogResources(resources: IBuyboxResources): IOrderTemplateNameDialogResources {\n    return {\n        orderTemplateHeaderLabel: resources.createOrderTemplateHeader,\n        orderTemplateTitleLabel: resources.orderTemplateTitle,\n        orderTemplateNameAriaLabel: resources.orderTemplateNameAriaLabel,\n        orderTemplateDescription: resources.createOrderTemplateDescription,\n\n        defaultOrderTemplateName: resources.defaultOrderTemplateName,\n\n        orderTemplateButtonLabel: resources.createOrderTemplateButtonText,\n        orderTemplateCancelButtonLabel: resources.cancelNewOrderTemplateCreationButtonText\n    };\n}\n\nfunction generateItemAddedToOrderTemplateDialogResources(resources: IBuyboxResources): IItemAddedToOrderTemplateDialogResources {\n    return {\n        viewOrderTemplateButtonText: resources.viewOrderTemplateButtonText,\n        continueShoppingButtonText: resources.continueShoppingButtonText,\n        itemAddedToOrderTemplateHeaderItemOneText: resources.itemAddedToOrderTemplateHeaderItemOneText,\n        itemAddedToOrderTemplateHeaderItemFormatText: resources.itemAddedToOrderTemplateHeaderItemFormatText,\n        itemAddedToOrderTemplateHeaderMessageText: resources.itemAddedToOrderTemplateHeaderMessageText,\n        freePriceText: resources.priceFree,\n        originalPriceText: resources.originalPriceText,\n        currentPriceText: resources.currentPriceText\n    };\n}\n\nfunction generateDuplicateItemsWhenAddingToOrderTemplateDialogResources(resources: IBuyboxResources): IDuplicateItemsWhenAddingToOrderTemplateDialogResources {\n    return {\n        duplicatedProductsHeader: resources.duplicatedProductsHeader,\n        duplicatedProductsDescription: resources.duplicatedProductsDescription,\n        updateQuantityButtonText: resources.updateQuantityButtonText,\n        cancelDuplicateItemsButtonText: resources.cancelDuplicateItemsButtonText\n    };\n}\n\nexport function getBuyboxProductAddToOrderTemplate(props: IBuyboxProps<IBuyboxData>, state: IBuyboxState, callbacks: IBuyboxCallbacks): IBuyboxAddToOrderTemplateViewProps | undefined {\n    const {\n        id,\n        typeName,\n        context,\n        data: {\n            product: { result: product },\n            orderTemplates: { result: orderTemplates },\n            customerInformation: { result: customerInformation }\n        },\n        resources\n    } = props;\n\n    const\n        {\n            errorState: {\n                configureErrors,\n                quantityError,\n                otherError,\n                errorHost\n            },\n            quantity\n        } = state;\n\n    const onAddToOrderTemplateFailed = (result: IOrderTemplateActionErrorResult) => {\n        callbacks.updateErrorState({\n            errorHost: 'ORDER_TEMPLATE',\n            configureErrors: result.status === 'MISSING_DIMENSION' ? getConfigureErrors(result.missingDimensions, resources) : {},\n        });\n    };\n\n    return {\n        ContainerProps: {\n            className: 'ms-buybox__add-to-order-template-container'\n        },\n        button: product && orderTemplates && (\n            <AddToOrderTemplateComponent\n                className={'msc-add-to-cart-extra-actions'}\n                addToOrderTemplateButtonText={resources.addToOrderTemplateButtonText}\n                addToOrderTemplateDialogResources={generateAddToOrderTemplateDialogResources(resources)}\n                createOrderTemplateDialogResources={generateOrderTemplateNameDialogResources(resources)}\n                itemAddedToOrderTemplateDialogResources={generateItemAddedToOrderTemplateDialogResources(resources)}\n                duplicateItemsWhenAddingToOrderTemplateDialogResources={generateDuplicateItemsWhenAddingToOrderTemplateDialogResources(resources)}\n                data={{ product: product, quantity: quantity, orderTemplates: orderTemplates, customerInformation: customerInformation }}\n                context={context}\n                id={id}\n                typeName={typeName}\n                onError={onAddToOrderTemplateFailed}\n            />\n        ),\n        errorBlock: (\n            <BuyboxErrorBlock\n                configureErrors={configureErrors}\n                quantityError={quantityError}\n                otherError={otherError}\n                resources={resources}\n                showError={errorHost === 'ORDER_TEMPLATE'}\n            />\n        )\n    };\n}\n\nexport interface IBuyboxAddToWishlistViewProps {\n    ContainerProps: INodeProps;\n    errorBlock?: React.ReactNode;\n    button?: React.ReactNode;\n}\nexport function getBuyboxProductAddToWishlist(props: IBuyboxProps<IBuyboxData>, state: IBuyboxState, callbacks: IBuyboxCallbacks): IBuyboxAddToWishlistViewProps | undefined {\n    const {\n        id,\n        typeName,\n        context,\n        data: {\n            product: { result: product },\n            wishlists: { result: wishlists }\n        },\n        resources\n    } = props;\n\n    const\n        {\n            errorState: {\n                configureErrors,\n                quantityError,\n                otherError,\n                errorHost\n            },\n            selectedProduct\n        } = state;\n\n    const onAddToWishlistFailed = (result: IWishlistActionErrorResult) => {\n        callbacks.updateErrorState({\n            errorHost: 'WISHLIST',\n            configureErrors: result.status === 'MISSINGDIMENSION' ? getConfigureErrors(result.missingDimensions, resources) : {},\n        });\n    };\n\n    return {\n        ContainerProps: {\n            className: 'ms-buybox__add-to-wishlist-container'\n        },\n        button: product && (\n            <AddToWishlistComponent\n                className={'msc-add-to-cart-extra-actions'}\n                addToWishlistButtonText={resources.addToWishlistButtonText}\n                removeFromWishlistButtonText={resources.removeFromWishlistButtonText}\n                addToWishlistMessage={resources.addToWishlistMessage}\n                removedFromWishlistMessage={resources.removedFromWishlistMessage}\n                addItemToWishlistError={resources.addItemToWishlistError}\n                removeItemFromWishlistError={resources.removeItemFromWishlistError}\n                nameOfWishlist={resources.nameOfWishlist}\n                data={{ product: product, wishlists: wishlists }}\n                context={context}\n                id={id}\n                typeName={typeName}\n                onError={onAddToWishlistFailed}\n                getSelectedProduct={selectedProduct}\n            />\n        ),\n        errorBlock: (\n            <BuyboxErrorBlock\n                configureErrors={configureErrors}\n                quantityError={quantityError}\n                otherError={otherError}\n                resources={resources}\n                showError={errorHost === 'WISHLIST'}\n            />\n        )\n    };\n}\n\nexport interface IBuyboxProductQuantityViewProps {\n    ContainerProps: INodeProps;\n    LabelContainerProps: INodeProps;\n\n    heading: React.ReactNode;\n    errors?: React.ReactNode;\n\n    input: React.ReactNode;\n}\nexport function getBuyboxProductQuantity(props: IBuyboxProps<IBuyboxData>, state: IBuyboxState, callbacks: IBuyboxCallbacks): IBuyboxProductQuantityViewProps {\n    const {\n        resources,\n        context: {\n            app: {\n                config: {\n                    maxQuantityForCartLineItem\n                }\n            }\n        }\n    } = props;\n\n    const\n        {\n            quantity,\n            errorState: {\n                quantityError,\n            }\n        } = state;\n\n    const onChange = (newValue: number) => {\n        if (callbacks.updateQuantity) {\n            callbacks.updateQuantity(newValue);\n        }\n    };\n\n    return {\n        ContainerProps: {\n            className: 'ms-buybox__quantity'\n        },\n        LabelContainerProps: {\n            tag: 'label',\n            className: 'ms-buybox__product-quantity-label',\n            htmlFor: 'ms-buybox__product-quantity-input'\n        },\n        heading: (\n            <div className='ms-buybox__product-quantity-label-heading'>{resources.productQuantityHeading}</div>\n        ),\n        errors: quantityError && (\n            <span className='msc-alert msc-alert-noborder msc-alert-danger'>\n                <span className='msi-exclamation-triangle' aria-hidden='true' />\n                <span>{quantityError}</span>\n            </span>\n        ),\n        input: (\n            <Quantity\n                id='ms-buybox__product-quantity-input'\n                max={maxQuantityForCartLineItem || 10}\n                currentCount={quantity}\n                onChange={onChange}\n                inputQuantityAriaLabel={resources.inputQuantityAriaLabel}\n                telemetryContent={telemetryContent}\n            />\n        )\n    };\n}\n\nexport interface IBuyboxShopSimilarLookViewProps {\n    ContainerProps: INodeProps;\n    errors?: React.ReactNode;\n    input: React.ReactNode;\n}\n\nexport function getBuyboxShopSimilarLook(props: IBuyboxProps<IBuyboxData>, state: IBuyboxState, callbacks: IBuyboxCallbacks): IBuyboxShopSimilarLookViewProps {\n    const {\n        resources,\n        context,\n        data: {\n            product: { result: product }\n        },\n    } = props;\n\n    const\n        {\n            errorState: {}\n        } = state;\n\n    const navigationUrl = () => {\n        const searchURL = `${getUrlSync('search', context && context.actionContext)}?productId=${product && product.RecordId}`;\n        document.location.href = searchURL;\n    };\n    const payLoad = getPayloadObject('click', telemetryContent, TelemetryConstant.ShopSimliarLooks);\n    const attribute = getTelemetryAttributes(telemetryContent, payLoad);\n\n    return {\n        ContainerProps: {\n            className: 'ms-buybox__shopsimilarlooks'\n        },\n        input: (\n            <Button\n                title={resources.shopSimilarLooksText}\n                className='ms-buybox__shop-similar-looks-button'\n                aria-label={resources.shopSimilarLooksText}\n                onClick={navigationUrl}\n                {...attribute}\n            >\n            {resources.shopSimilarLooksText}\n            </Button>\n        )\n    };\n}\n\nexport interface IBuyboxErrorBlockProps {\n    configureErrors: { [configureId: string]: string | undefined };\n    quantityError?: string;\n    otherError?: string;\n    resources: IBuyboxResources;\n    showError: boolean;\n}\nexport const BuyboxErrorBlock: React.FC<IBuyboxErrorBlockProps> = ({ showError, configureErrors, quantityError, otherError, resources }) => {\n    let errorMessages: (string | undefined)[] = [];\n\n    errorMessages = Object.values(configureErrors).filter(message => message !== undefined);\n\n    if (quantityError) {\n        errorMessages.push(quantityError);\n    }\n\n    if (otherError) {\n        errorMessages.push(otherError);\n    }\n\n    return (\n        <Alert isOpen={showError && errorMessages.length > 0} color='danger' assertive={true} aria-label={resources.buyboxErrorMessageHeader} >\n            <div className='msc-alert__header' aria-hidden='true'>\n                <span className='msi-exclamation-triangle' />\n                <span>{resources.buyboxErrorMessageHeader}</span>\n            </div>\n            {errorMessages.map((message) => {\n                if (message) {\n                    return (\n                        <div className='msc-alert__line'>{message}</div>\n                    );\n                } else {\n                    return null;\n                }\n            })}\n        </Alert>\n    );\n};"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}