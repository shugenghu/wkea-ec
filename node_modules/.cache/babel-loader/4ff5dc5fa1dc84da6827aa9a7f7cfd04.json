{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}/*!\r\n * Copyright (c) Microsoft Corporation.\r\n * All rights reserved. See LICENSE in the project root for license information.\r\n */import{isNonceEnabled,SDK_FRAGMENT_NAME}from'@msdyn365-commerce/core-internal';import*as React from'react';import{isAbsoluteUrl,isRelativeUrl,logDebug,logError}from'../../utils/script-utils';var DefaultInlineScript=/*#__PURE__*/function(_React$PureComponent){_inherits(DefaultInlineScript,_React$PureComponent);var _super=_createSuper(DefaultInlineScript);function DefaultInlineScript(props){_classCallCheck(this,DefaultInlineScript);return _super.call(this,props);}_createClass(DefaultInlineScript,[{key:\"render\",value:function render(){var config=this.props.config;logDebug(\"Adding script tags for '\".concat(this.props.id,\"/\").concat(this.props.typeName,\"'\"),this.props.telemetry);var source=config.inlineScript;if(!source||source===''||isAbsoluteUrl(source)||isRelativeUrl(source)){logError('Invalid inline script - Empty inline source defined or a url is being used as a source. Use default-external-script to load scripts from an external or relative url.',this.props.telemetry);return null;}if(source.includes('</script>')){logError('Invalid inline script - inline script should not contain html tags',this.props.telemetry);return null;}var nonceToken=this.props.context&&isNonceEnabled(this.props.context.request);var scriptHtml=\"<script \".concat(nonceToken?\"nonce='\".concat(nonceToken,\"'\"):'',\">\").concat(source,\"</script>\");return/*#__PURE__*/React.createElement(SDK_FRAGMENT_NAME,{key:this.props.id,dangerouslySetInnerHTML:{__html:scriptHtml}});}}]);return DefaultInlineScript;}(React.PureComponent);export default DefaultInlineScript;","map":{"version":3,"sources":["modules/default-inline-script/default-inline-script.tsx"],"names":[],"mappings":"ohCAAA;;;AAGG,GAEH,OAAS,cAAT,CAAyB,iBAAzB,KAAkD,kCAAlD,CACA,MAAO,GAAK,CAAA,KAAZ,KAAuB,OAAvB,CACA,OAAS,aAAT,CAAwB,aAAxB,CAAuC,QAAvC,CAAiD,QAAjD,KAAiE,0BAAjE,C,GAQM,CAAA,mB,8IACF,6BAAY,KAAZ,CAAgD,mEACtC,KADsC,EAE/C,C,uEAEY,IACD,CAAA,MADC,CACU,KAAK,KADf,CACD,MADC,CAET,QAAQ,mCAA4B,KAAK,KAAL,CAAW,EAAvC,aAA6C,KAAK,KAAL,CAAW,QAAxD,MAAqE,KAAK,KAAL,CAAW,SAAhF,CAAR,CACA,GAAM,CAAA,MAAM,CAAG,MAAM,CAAC,YAAtB,CAEA,GAAI,CAAC,MAAD,EAAW,MAAM,GAAK,EAAtB,EAA4B,aAAa,CAAC,MAAD,CAAzC,EAAqD,aAAa,CAAC,MAAD,CAAtE,CAAgF,CAC5E,QAAQ,CACJ,uKADI,CAEJ,KAAK,KAAL,CAAW,SAFP,CAAR,CAIA,MAAO,KAAP,CACH,CAED,GAAI,MAAM,CAAC,QAAP,CAAgB,WAAhB,CAAJ,CAAkC,CAC9B,QAAQ,CAAC,oEAAD,CAAuE,KAAK,KAAL,CAAW,SAAlF,CAAR,CACA,MAAO,KAAP,CACH,CAED,GAAM,CAAA,UAAU,CAAG,KAAK,KAAL,CAAW,OAAX,EAAsB,cAAc,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,OAApB,CAAvD,CACA,GAAM,CAAA,UAAU,mBAAc,UAAU,kBAAa,UAAb,MAA6B,EAArD,aAA2D,MAA3D,aAAhB,CAGA,mBAAO,KAAK,CAAC,aAAN,CAAoB,iBAApB,CAAuC,CAAE,GAAG,CAAE,KAAK,KAAL,CAAW,EAAlB,CAAsB,uBAAuB,CAAE,CAAE,MAAM,CAAE,UAAV,CAA/C,CAAvC,CAAP,CACH,C,iCA5B6B,KAAK,CAAC,a,EA+BxC,cAAe,CAAA,mBAAf","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { isNonceEnabled, SDK_FRAGMENT_NAME } from '@msdyn365-commerce/core-internal';\nimport * as React from 'react';\nimport { isAbsoluteUrl, isRelativeUrl, logDebug, logError } from '../../utils/script-utils';\nimport { IDefaultInlineScriptProps } from './default-inline-script.props.autogenerated';\n\n/**\n *\n * DefaultScript\n * @extends {React.PureComponent<IDefaultScriptProps<{}>>}\n */\nclass DefaultInlineScript extends React.PureComponent<IDefaultInlineScriptProps<{}>> {\n    constructor(props: IDefaultInlineScriptProps<{}>) {\n        super(props);\n    }\n\n    public render(): JSX.Element | null {\n        const { config } = this.props;\n        logDebug(`Adding script tags for '${this.props.id}/${this.props.typeName}'`, this.props.telemetry);\n        const source = config.inlineScript;\n\n        if (!source || source === '' || isAbsoluteUrl(source) || isRelativeUrl(source)) {\n            logError(\n                'Invalid inline script - Empty inline source defined or a url is being used as a source. Use default-external-script to load scripts from an external or relative url.',\n                this.props.telemetry\n            );\n            return null;\n        }\n\n        if (source.includes('</script>')) {\n            logError('Invalid inline script - inline script should not contain html tags', this.props.telemetry);\n            return null;\n        }\n\n        const nonceToken = this.props.context && isNonceEnabled(this.props.context.request);\n        const scriptHtml = `<script ${nonceToken ? `nonce='${nonceToken}'` : ''}>${source}</script>`;\n\n        // tslint:disable:react-no-dangerous-html -- intentionally set inner html\n        return React.createElement(SDK_FRAGMENT_NAME, { key: this.props.id, dangerouslySetInnerHTML: { __html: scriptHtml } });\n    }\n}\n\nexport default DefaultInlineScript;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}