{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import\"core-js/modules/web.dom-collections.iterator.js\";import{createOrderTemplate,CreateOrderTemplateInput,updateOrderTemplateHeader,UpdateOrderTemplateHeaderInput}from'@msdyn365-commerce-modules/retail-actions';import{Button,Modal,ModalBody,ModalFooter,ModalHeader}from'@msdyn365-commerce-modules/utilities';import React,{useState}from'react';export const OrderTemplateNameDialog=dialogProps=>{const{isUpdateDialog,existingOrderTemplate,dialogStrings,className,modalOpen,setModalOpen,onCancel,onSuccess,context}=dialogProps;if(!dialogStrings){return null;}const[orderTemplateName,setOrderTemplateName]=useState(dialogProps.orderTemplateName);const cancel=()=>{setModalOpen(false);onCancel();};const submit=async()=>{dialogProps.orderTemplateName=orderTemplateName||dialogStrings.defaultOrderTemplateName;if(isUpdateDialog){if(existingOrderTemplate){existingOrderTemplate.Name=dialogProps.orderTemplateName;const input=new UpdateOrderTemplateHeaderInput(existingOrderTemplate);const orderTemplate=await updateOrderTemplateHeader(input,context.actionContext);setModalOpen(false);await onSuccess(orderTemplate);}else{context.telemetry.error('You need to pass ProductList instance for update.');throw Error('Unexpected error: existing order template was not set.');}}else{const input=new CreateOrderTemplateInput(dialogProps.orderTemplateName);const orderTemplate=await createOrderTemplate(input,context.actionContext);setModalOpen(false);await onSuccess(orderTemplate);}};const updateOrderTemplateName=event=>{setOrderTemplateName(event.target.value);};let inputFieldRef;const setFocus=()=>{var _inputFieldRef;(_inputFieldRef=inputFieldRef)===null||_inputFieldRef===void 0?void 0:_inputFieldRef.focus();};return/*#__PURE__*/React.createElement(Modal,{isOpen:modalOpen,className:\"\".concat(className),onOpened:setFocus},/*#__PURE__*/React.createElement(ModalHeader,{className:\"\".concat(className,\"__dialog__header\"),toggle:cancel},/*#__PURE__*/React.createElement(\"span\",null,dialogStrings.orderTemplateHeaderLabel)),/*#__PURE__*/React.createElement(ModalBody,{className:\"\".concat(className,\"__dialog__body\")},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__content\")},/*#__PURE__*/React.createElement(\"label\",{className:\"\".concat(className,\"__dialog__order-template-name-label\"),htmlFor:\"\".concat(className,\"__dialog__order-template-name\")},dialogStrings.orderTemplateTitleLabel),/*#__PURE__*/React.createElement(\"input\",{id:\"\".concat(className,\"__dialog__order-template-name\"),className:\"\".concat(className,\"__dialog__order-template-name\"),type:'text',\"aria-label\":dialogStrings.orderTemplateNameAriaLabel,placeholder:dialogStrings.defaultOrderTemplateName,onChange:updateOrderTemplateName,value:orderTemplateName,maxLength:250,ref:inputRef=>{inputFieldRef=inputRef;}}),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__description\")},dialogStrings.orderTemplateDescription))),/*#__PURE__*/React.createElement(ModalFooter,{className:\"\".concat(className,\"__dialog__footer\")},/*#__PURE__*/React.createElement(Button,{className:\"\".concat(className,\"__dialog__create-order-template-button\"),title:dialogStrings.orderTemplateButtonLabel,onClick:submit},dialogStrings.orderTemplateButtonLabel),/*#__PURE__*/React.createElement(Button,{className:\"\".concat(className,\"__dialog__cancel-button\"),title:dialogStrings.orderTemplateCancelButtonLabel,onClick:cancel},dialogStrings.orderTemplateCancelButtonLabel)));};","map":{"version":3,"sources":["order-template/order-template-name-dialog/order-template-name-dialog.component.tsx"],"names":[],"mappings":"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","sourcesContent":["import { createOrderTemplate, CreateOrderTemplateInput, updateOrderTemplateHeader, UpdateOrderTemplateHeaderInput } from '@msdyn365-commerce-modules/retail-actions';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from '@msdyn365-commerce-modules/utilities';\nimport { IComponentProps } from '@msdyn365-commerce/core';\nimport { ProductList } from '@msdyn365-commerce/retail-proxy';\nimport React, { useState } from 'react';\n\nexport interface IOrderTemplateNameDialogResources {\n    orderTemplateHeaderLabel: string;\n    orderTemplateTitleLabel: string;\n    orderTemplateNameAriaLabel: string;\n    orderTemplateDescription: string;\n    defaultOrderTemplateName: string;\n    orderTemplateButtonLabel: string;\n    orderTemplateCancelButtonLabel: string;\n}\n\nexport interface IOrderTemplateNameDialogProps extends IComponentProps {\n    isUpdateDialog: boolean | undefined;\n    existingOrderTemplate?: ProductList;\n    className: string;\n    orderTemplateName?: string;\n    dialogStrings: IOrderTemplateNameDialogResources;\n    modalOpen: boolean | undefined;\n    setModalOpen(newValue: boolean): void;\n    onCancel(): void;\n    onSuccess(orderTemplate: ProductList): Promise<void>;\n}\n\nexport const OrderTemplateNameDialog = (dialogProps: IOrderTemplateNameDialogProps) => {\n    const {\n        isUpdateDialog,\n        existingOrderTemplate,\n        dialogStrings,\n        className,\n        modalOpen,\n        setModalOpen,\n        onCancel,\n        onSuccess,\n        context\n    } = dialogProps;\n\n    if (!dialogStrings) {\n        return null;\n    }\n\n    const [orderTemplateName, setOrderTemplateName] = useState(dialogProps.orderTemplateName);\n\n    const cancel: () => void = () => {\n        setModalOpen(false);\n        onCancel();\n    };\n\n    const submit: () => Promise<void> = async () => {\n        dialogProps.orderTemplateName = orderTemplateName || dialogStrings.defaultOrderTemplateName;\n        if (isUpdateDialog) {\n            if (existingOrderTemplate) {\n                existingOrderTemplate.Name = dialogProps.orderTemplateName;\n                const input: UpdateOrderTemplateHeaderInput = new UpdateOrderTemplateHeaderInput(existingOrderTemplate);\n                const orderTemplate: ProductList = await updateOrderTemplateHeader(input, context.actionContext);\n                setModalOpen(false);\n                await onSuccess(orderTemplate);\n            } else {\n                context.telemetry.error('You need to pass ProductList instance for update.');\n                throw Error('Unexpected error: existing order template was not set.');\n            }\n        } else {\n            const input: CreateOrderTemplateInput = new CreateOrderTemplateInput(dialogProps.orderTemplateName!);\n            const orderTemplate: ProductList = await createOrderTemplate(input, context.actionContext);\n            setModalOpen(false);\n            await onSuccess(orderTemplate);\n        }\n    };\n\n    const updateOrderTemplateName = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setOrderTemplateName(event.target.value);\n    };\n\n    let inputFieldRef: HTMLInputElement | null;\n    const setFocus = () => { inputFieldRef?.focus(); };\n\n    return (\n        <Modal isOpen={modalOpen} className={`${className}`} onOpened={setFocus}>\n            <ModalHeader className={`${className}__dialog__header`} toggle={cancel}>\n                <span>{dialogStrings.orderTemplateHeaderLabel}</span>\n            </ModalHeader>\n            <ModalBody className={`${className}__dialog__body`}>\n                <div className={`${className}__dialog__content`}>\n                    <label\n                        className={`${className}__dialog__order-template-name-label`}\n                        htmlFor={`${className}__dialog__order-template-name`}\n                    >\n                        {dialogStrings.orderTemplateTitleLabel}\n                    </label>\n                    <input\n                        id={`${className}__dialog__order-template-name`}\n                        className={`${className}__dialog__order-template-name`}\n                        type='text'\n                        aria-label={dialogStrings.orderTemplateNameAriaLabel}\n                        placeholder={dialogStrings.defaultOrderTemplateName}\n                        onChange={updateOrderTemplateName}\n                        value={orderTemplateName}\n                        maxLength={250}\n                        ref={(inputRef) => { inputFieldRef = inputRef; }}\n                    />\n                    <div className={`${className}__dialog__description`}>{dialogStrings.orderTemplateDescription}</div>\n                </div>\n            </ModalBody>\n            <ModalFooter\n                className={`${className}__dialog__footer`}\n            >\n                <Button\n                    className={`${className}__dialog__create-order-template-button`}\n                    title={dialogStrings.orderTemplateButtonLabel}\n                    onClick={submit}\n                >\n                    {dialogStrings.orderTemplateButtonLabel}\n                </Button>\n                <Button\n                    className={`${className}__dialog__cancel-button`}\n                    title={dialogStrings.orderTemplateCancelButtonLabel}\n                    onClick={cancel}\n                >\n                    {dialogStrings.orderTemplateCancelButtonLabel}\n                </Button>\n            </ModalFooter>\n        </Modal>\n    );\n};"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}