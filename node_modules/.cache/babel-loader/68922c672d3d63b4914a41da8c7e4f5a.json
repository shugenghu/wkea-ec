{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var tslib_1=require(\"tslib\");var Msdyn365=tslib_1.__importStar(require(\"@msdyn365-commerce/core\"));var React=tslib_1.__importStar(require(\"react\"));var __1=require(\"..\");var BackToTop=function(_super){tslib_1.__extends(BackToTop,_super);function BackToTop(props){var _this=_super.call(this,props)||this;_this._renderHeading=function(text){return React.createElement(Msdyn365.Text,{className:'ms-accordion-header-section__heading',text:text,editProps:_this.props.editProps});};_this.state={attributes:{'aria-hidden':true,tabIndex:-1}};_this._reevaluatePosition=_this._reevaluatePosition.bind(_this);_this._scrollToTop=_this._scrollToTop.bind(_this);var payLoad=__1.getPayloadObject('click',props.telemetryContent,__1.TelemetryConstant.BackToTop);_this.attributes=__1.getTelemetryAttributes(props.telemetryContent,payLoad);return _this;}BackToTop.prototype.componentDidMount=function(){window.addEventListener('resize',this._reevaluatePosition);window.addEventListener('scroll',this._reevaluatePosition);this._reevaluatePosition();};BackToTop.prototype.componentWillUnmount=function(){window.removeEventListener('resize',this._reevaluatePosition);window.removeEventListener('scroll',this._reevaluatePosition);};BackToTop.prototype.render=function(){var _a=this.props,className=_a.className,threshold=_a.threshold,delayInMs=_a.delayInMs,scrollStepInPx=_a.scrollStepInPx,props=tslib_1.__rest(_a,[\"className\",\"threshold\",\"delayInMs\",\"scrollStepInPx\"]);var children=this.props.children||React.createElement(\"i\",{className:'fa fa-arrow-up'});if(this.props.text){return React.createElement(\"a\",tslib_1.__assign({className:\"back-to-top \"+className},props,this.state.attributes,{role:'link',onClick:this._scrollToTop},this.attributes),this._renderHeading(this.props.text));}else{return React.createElement(\"a\",tslib_1.__assign({className:\"back-to-top \"+className},props,this.state.attributes,{role:'link',onClick:this._scrollToTop},this.attributes),children);}};BackToTop.prototype._scrollStep=function(){if((document.documentElement.scrollTop||document.body.scrollTop)===0){clearInterval(this.state.intervalId);this.setState({intervalId:0});this._reevaluatePosition();}if(this.state.intervalId!==0){window.scrollTo(0,document.body.scrollTop-this.props.scrollStepInPx);document.body.scrollTop=document.body.scrollTop>0?document.body.scrollTop-this.props.scrollStepInPx:0;}};BackToTop.prototype._scrollToTop=function(e){e.preventDefault();var intervalId=setInterval(this._scrollStep.bind(this),this.props.delayInMs);this.setState({intervalId:intervalId});};BackToTop.prototype._reevaluatePosition=function(){var scrollTop=window.pageYOffset||document.body.scrollTop;var height=Math.min(window.innerHeight,document.documentElement.clientHeight);var threshold=Math.min(this.props.threshold!==undefined?this.props.threshold:-1,100);var hide=scrollTop>0&&threshold>=0?scrollTop<(document.documentElement.scrollHeight-height)*threshold/100:scrollTop<height*2;var tabIndexValue=hide?-1:0;this.setState({attributes:{'aria-hidden':hide,tabIndex:tabIndexValue}});};BackToTop.defaultProps={className:'btn btn-lg btn-secondary',delayInMs:0,scrollStepInPx:25};return BackToTop;}(React.PureComponent);exports[\"default\"]=BackToTop;","map":{"version":3,"sources":["/Users/User/Documents/wkea-ec/Msdyn365.Commerce.Online/node_modules/@msdyn365-commerce-modules/utilities/src/back-to-top/BackToTop.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as Msdyn365 from '@msdyn365-commerce/core';\nimport * as React from 'react';\nimport { getPayloadObject, getTelemetryAttributes, TelemetryConstant } from '..';\nimport { IBackToTopProps } from './BackToTop.props';\n\nexport interface IBackToTopStateAttributes {\n    'aria-hidden': boolean;\n    'tabIndex': number;\n}\n\nexport interface IBackToTopState extends React.ComponentState {\n    attributes: IBackToTopStateAttributes;\n}\n/**\n * Back To Top - This component is used to scroll to the top of the page\n */\nexport default class BackToTop extends React.PureComponent<IBackToTopProps, IBackToTopState> {\n    public static defaultProps: Partial<IBackToTopProps> = {\n        className: 'btn btn-lg btn-secondary',\n        delayInMs: 0,\n        scrollStepInPx: 25,\n    };\n\n    private attributes?: Msdyn365.IDictionary<string>;\n\n    constructor(props: IBackToTopProps) {\n        super(props);\n        this.state = { attributes: { 'aria-hidden': true, tabIndex: -1 } };\n        this._reevaluatePosition = this._reevaluatePosition.bind(this);\n        this._scrollToTop = this._scrollToTop.bind(this);\n        const payLoad = getPayloadObject('click', props.telemetryContent!, TelemetryConstant.BackToTop);\n        this.attributes = getTelemetryAttributes(props.telemetryContent!, payLoad);\n    }\n\n    public componentDidMount(): void {\n        window.addEventListener('resize', this._reevaluatePosition);\n        window.addEventListener('scroll', this._reevaluatePosition);\n        this._reevaluatePosition();\n    }\n\n    public componentWillUnmount(): void {\n        window.removeEventListener('resize', this._reevaluatePosition);\n        window.removeEventListener('scroll', this._reevaluatePosition);\n    }\n\n    public render(): JSX.Element {\n        const { className, threshold, delayInMs, scrollStepInPx, ...props } = this.props;\n        const children = this.props.children || (<i className='fa fa-arrow-up' />);\n        if(this.props.text) {\n                return (\n                <a\n                    className={`back-to-top ${className}`}\n                    {...props}\n                    {...this.state.attributes}\n                    role='link'\n                    onClick={this._scrollToTop}\n                    {...this.attributes}\n                >\n                    {this._renderHeading(this.props.text)}\n                </a>);\n            } else {\n                return (\n                <a\n                    className={`back-to-top ${className}`}\n                    {...props}\n                    {...this.state.attributes}\n                    role='link'\n                    onClick={this._scrollToTop}\n                    {...this.attributes}\n                >\n                {children}\n                </a>);\n            }\n\n    }\n\n    private _renderHeading = (text: string): JSX.Element | undefined => {\n        return(\n            <Msdyn365.Text\n                className='ms-accordion-header-section__heading'\n                text={text}\n                editProps = {this.props.editProps}\n            />\n        );\n    }\n\n    private _scrollStep(): void {\n        if ((document.documentElement.scrollTop || document.body.scrollTop) === 0) {\n            clearInterval(this.state.intervalId);\n            this.setState({ intervalId: 0 });\n            this._reevaluatePosition();\n        }\n\n        if (this.state.intervalId !== 0) {\n            window.scrollTo(0, document.body.scrollTop - this.props.scrollStepInPx);\n            document.body.scrollTop = document.body.scrollTop > 0 ? document.body.scrollTop - this.props.scrollStepInPx : 0;\n        }\n    }\n\n    // tslint:disable-next-line:no-any\n    private _scrollToTop(e: any): void {\n        e.preventDefault();\n        const intervalId = setInterval(this._scrollStep.bind(this), this.props.delayInMs);\n        this.setState({ intervalId: intervalId });\n    }\n\n    private _reevaluatePosition(): void {\n        // TODO:\n        // change the threshold minimum to zero\n        // add a prop for specifying multiplier of page height instead of absolute threshold\n        // add clientWidth check to hide at < 768\n        const scrollTop = window.pageYOffset || document.body.scrollTop;\n        const height = Math.min(window.innerHeight, document.documentElement.clientHeight);\n        const threshold = Math.min(this.props.threshold !== undefined ? this.props.threshold : -1, 100);\n        const hide = scrollTop > 0 && threshold >= 0\n            ? scrollTop < (document.documentElement.scrollHeight - height) * threshold / 100\n            : scrollTop < height * 2;\n        const tabIndexValue = hide ? -1 : 0;\n        this.setState({ attributes: { 'aria-hidden': hide, tabIndex: tabIndexValue } });\n    }\n}\n"]},"metadata":{},"sourceType":"script"}