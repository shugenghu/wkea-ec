{"ast":null,"code":"\"use strict\";require(\"core-js/modules/es.string.split.js\");Object.defineProperty(exports,\"__esModule\",{value:true});var tslib_1=require(\"tslib\");var classnames_1=tslib_1.__importDefault(require(\"classnames\"));var React=tslib_1.__importStar(require(\"react\"));var utilities_1=require(\"../common/utilities\");var PopperContent_1=tslib_1.__importDefault(require(\"../popper-content/PopperContent\"));var DEFAULT_DELAYS={show:0,hide:250};var Tooltip=function(_super){tslib_1.__extends(Tooltip,_super);function Tooltip(props){var _this=_super.call(this,props)||this;_this.ref=React.createRef();_this.addTargetEvents=_this.addTargetEvents.bind(_this);_this.handleDocumentClick=_this.handleDocumentClick.bind(_this);_this.removeTargetEvents=_this.removeTargetEvents.bind(_this);_this.toggle=_this.toggle.bind(_this);_this.onMouseOverTooltip=_this.onMouseOverTooltip.bind(_this);_this.onMouseLeaveTooltip=_this.onMouseLeaveTooltip.bind(_this);_this.onMouseOverTooltipContent=_this.onMouseOverTooltipContent.bind(_this);_this.onMouseLeaveTooltipContent=_this.onMouseLeaveTooltipContent.bind(_this);_this.show=_this.show.bind(_this);_this.hide=_this.hide.bind(_this);_this.onFocusOutTarget=_this.onFocusOutTarget.bind(_this);_this.onEscKeyDown=_this.onEscKeyDown.bind(_this);_this.onEscKeyDownNative=_this.onEscKeyDownNative.bind(_this);_this.target=null;_this.isMobile=false;_this.tabPressed=false;_this.state={tooltipOpen:props.isOpen};return _this;}Tooltip.prototype.componentDidMount=function(){this.target=utilities_1.getTargetElement(this.props.target);this.addTargetEvents();var body=document.getElementsByTagName('body').item(0);if(body){var bodyClasses=body.getAttribute('class');if(bodyClasses&&bodyClasses.indexOf('mobile')>-1){this.isMobile=true;}}if(this.target!==null&&this.target.attributes.getNamedItem('aria-describedby')!==null){this.target.attributes.removeNamedItem('aria-describedby');}};Tooltip.prototype.componentWillUnmount=function(){this.clearHideTimeout();this.clearShowTimeout();this.removeTargetEvents();};Tooltip.prototype.onMouseOverTooltip=function(e){if(this.hideTimeout){this.clearHideTimeout();}this.showTimeout=window.setTimeout(this.show.bind(this,e),this.getDelay('show'));};Tooltip.prototype.onMouseLeaveTooltip=function(e){if(this.showTimeout){this.clearShowTimeout();}this.hideTimeout=window.setTimeout(this.hide.bind(this,e),this.getDelay('hide'));};Tooltip.prototype.onMouseOverTooltipContent=function(){if(this.props.autohide){return;}if(this.hideTimeout){this.clearHideTimeout();}};Tooltip.prototype.onMouseLeaveTooltipContent=function(e){if(this.props.autohide){return;}if(this.showTimeout){this.clearShowTimeout();}this.hideTimeout=window.setTimeout(this.hide.bind(this,e.nativeEvent),this.getDelay('hide'));};Tooltip.prototype.onFocusOutTarget=function(e){var _this=this;if(!this.props.isOpen){return;}if(this.tabPressed){this.tabPressed=false;setTimeout(function(){var nextFocus=document.activeElement;if(!_this.ref||!_this.ref.current||!_this.ref.current.contains(nextFocus)){_this.hide(e);}},1);}else{this.hide(e);}};Tooltip.prototype.onEscKeyDown=function(e){if(e.keyCode===9){this.tabPressed=true;}else if(e.key==='Escape'){this.hide(e.nativeEvent);}};Tooltip.prototype.onEscKeyDownNative=function(e){if(e.keyCode===9){this.tabPressed=true;}else if(e.key==='Escape'){this.hide(e);}};Tooltip.prototype.getDelay=function(key){var delay=this.props.delay;if(typeof delay==='object'){return isNaN(delay[key])?DEFAULT_DELAYS[key]:delay[key];}return delay||0;};Tooltip.prototype.show=function(e){if(!this.props.isOpen){this.clearShowTimeout();this.toggle(e);if(this.target!==null){var ariaAttr=document.createAttribute('aria-describedby');ariaAttr.value=this.props.id;this.target.attributes.setNamedItem(ariaAttr);}}};Tooltip.prototype.hide=function(e){if(this.props.isOpen){this.clearHideTimeout();this.toggle(e);if(this.target!==null&&this.target.attributes.getNamedItem('aria-describedby')!==null){this.target.attributes.removeNamedItem('aria-describedby');}}};Tooltip.prototype.clearShowTimeout=function(){clearTimeout(this.showTimeout);this.showTimeout=undefined;};Tooltip.prototype.clearHideTimeout=function(){clearTimeout(this.hideTimeout);this.hideTimeout=undefined;};Tooltip.prototype.handleDocumentClick=function(e){if(!this.target){return;}var target=e.target;if(e.target===this.target||this.target.contains(target)){if(this.hideTimeout){this.clearHideTimeout();}if(!this.props.isOpen){this.toggle(e);}}else if(this.props.isOpen&&target.getAttribute('role')!=='tooltip'){if(this.showTimeout){this.clearShowTimeout();}this.hideTimeout=window.setTimeout(this.hide.bind(this,e),this.getDelay('hide'));}};Tooltip.prototype.addTargetEvents=function(){var _this=this;if(!this.target){return;}if(this.props.trigger){var triggers=this.props.trigger.split(' ');if(triggers.indexOf('manual')===-1){if(triggers.indexOf('click')>-1){['click','touchstart'].forEach(function(event){document.addEventListener(event,_this.handleDocumentClick,true);});}if(triggers.indexOf('hover')>-1){this.target.addEventListener('mouseover',this.onMouseOverTooltip,true);this.target.addEventListener('mouseout',this.onMouseLeaveTooltip,true);}if(triggers.indexOf('focus')>-1){this.target.addEventListener('focusin',this.show,true);if(this.props.displayMode==='FLYOUT'){this.target.addEventListener('focusout',this.onFocusOutTarget,true);}else{this.target.addEventListener('focusout',this.hide,true);}}this.target.addEventListener('keydown',this.onEscKeyDownNative,true);}}else{this.target.addEventListener('mouseover',this.onMouseOverTooltip,true);this.target.addEventListener('mouseout',this.onMouseLeaveTooltip,true);this.target.addEventListener('keydown',this.onEscKeyDownNative,true);this.target.addEventListener('focusin',this.show,true);if(this.props.displayMode==='FLYOUT'){this.target.addEventListener('focusout',this.onFocusOutTarget,true);}else{this.target.addEventListener('focusout',this.hide,true);}['click','touchstart'].forEach(function(event){document.addEventListener(event,_this.handleDocumentClick,true);});}};Tooltip.prototype.removeTargetEvents=function(){var _this=this;if(!this.target){return;}this.target.removeEventListener('mouseover',this.onMouseOverTooltip,true);this.target.removeEventListener('mouseout',this.onMouseLeaveTooltip,true);this.target.removeEventListener('keydown',this.onEscKeyDownNative,true);this.target.removeEventListener('focusin',this.show,true);this.target.removeEventListener('focusout',this.onFocusOutTarget,true);this.target.removeEventListener('focusout',this.hide,true);['click','touchstart'].forEach(function(event){document.removeEventListener(event,_this.handleDocumentClick,true);});};Tooltip.prototype.toggle=function(e){if(e){if(this.props.disabled){e.preventDefault();}if(this.props.toggle){this.props.toggle();}}};Tooltip.prototype.render=function(){if(!this.props.isOpen||this.isMobile){return null;}var _a=this.props,cssModule=_a.cssModule,isOpen=_a.isOpen,target=_a.target,placementPrefix=_a.placementPrefix,hideArrow=_a.hideArrow,className=_a.className,innerClassName=_a.innerClassName,innerRef=_a.innerRef,modifiers=_a.modifiers,toggle=_a.toggle,autohide=_a.autohide,delay=_a.delay,placement=_a.placement,disabled=_a.disabled,trigger=_a.trigger,boundariesElement=_a.boundariesElement,offset=_a.offset,arrowClassName=_a.arrowClassName,displayMode=_a.displayMode,id=_a.id,attributes=tslib_1.__rest(_a,[\"cssModule\",\"isOpen\",\"target\",\"placementPrefix\",\"hideArrow\",\"className\",\"innerClassName\",\"innerRef\",\"modifiers\",\"toggle\",\"autohide\",\"delay\",\"placement\",\"disabled\",\"trigger\",\"boundariesElement\",\"offset\",\"arrowClassName\",\"displayMode\",\"id\"]);var classes=utilities_1.mapToCssModules(classnames_1.default(displayMode==='FLYOUT'?'msc-flyout-inner':'msc-tooltip-inner',this.props.innerClassName),this.props.cssModule);var popperClasses=utilities_1.mapToCssModules(classnames_1.default(displayMode==='FLYOUT'?'msc-flyout':'msc-tooltip','show',this.props.className),this.props.cssModule);return React.createElement(\"div\",{ref:this.ref},React.createElement(PopperContent_1.default,{placement:placement,isOpen:isOpen||false,target:target,className:popperClasses,hideArrow:hideArrow,placementPrefix:placementPrefix,boundariesElement:boundariesElement,arrowClassName:arrowClassName,offset:offset,modifiers:modifiers,cssModule:cssModule},React.createElement(\"div\",tslib_1.__assign({},attributes,{className:classes,role:displayMode===undefined||displayMode==='TOOLTIP'?'tooltip':undefined,ref:innerRef,id:this.props.id,\"aria-hidden\":isOpen,onMouseOver:this.onMouseOverTooltipContent,onMouseLeave:this.onMouseLeaveTooltipContent,onKeyDown:this.onEscKeyDown}))));};Tooltip.defaultProps={isOpen:false,hideArrow:false,placement:'top',placementPrefix:'msc-bs-tooltip',delay:DEFAULT_DELAYS,autohide:true,toggle:function toggle(){return;}};return Tooltip;}(React.Component);exports.default=Tooltip;","map":{"version":3,"sources":["/Users/User/Documents/wkea-ec/Msdyn365.Commerce.Online/node_modules/@msdyn365-commerce-modules/utilities/src/tooltip/Tooltip.tsx"],"names":[],"mappings":"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","sourcesContent":["import classNames from 'classnames';\nimport * as React from 'react';\nimport { getTargetElement, mapToCssModules } from '../common/utilities';\nimport PopperContent from '../popper-content/PopperContent';\nimport { ITooltipProps } from './Tooltip.props';\n\nconst DEFAULT_DELAYS = {\n    show: 0,\n    hide: 250\n};\n\n/**\n * Tooltip component\n */\nexport default class Tooltip extends React.Component<ITooltipProps> {\n    public static defaultProps: Partial<ITooltipProps> = {\n        isOpen: false,\n        hideArrow: false,\n        placement: 'top',\n        placementPrefix: 'msc-bs-tooltip',\n        delay: DEFAULT_DELAYS,\n        autohide: true,\n        toggle: () => { return; }\n    };\n\n    public ref: React.RefObject<HTMLDivElement>;\n    public hideTimeout?: number;\n    public showTimeout?: number;\n    public target: HTMLElement | null;\n    public isMobile: boolean;\n    public tabPressed: boolean;\n\n    constructor(props: ITooltipProps) {\n        super(props);\n\n        this.ref = React.createRef();\n        this.addTargetEvents = this.addTargetEvents.bind(this);\n        this.handleDocumentClick = this.handleDocumentClick.bind(this);\n        this.removeTargetEvents = this.removeTargetEvents.bind(this);\n        this.toggle = this.toggle.bind(this);\n        this.onMouseOverTooltip = this.onMouseOverTooltip.bind(this);\n        this.onMouseLeaveTooltip = this.onMouseLeaveTooltip.bind(this);\n        this.onMouseOverTooltipContent = this.onMouseOverTooltipContent.bind(this);\n        this.onMouseLeaveTooltipContent = this.onMouseLeaveTooltipContent.bind(this);\n        this.show = this.show.bind(this);\n        this.hide = this.hide.bind(this);\n        this.onFocusOutTarget = this.onFocusOutTarget.bind(this);\n        this.onEscKeyDown = this.onEscKeyDown.bind(this);\n        this.onEscKeyDownNative = this.onEscKeyDownNative.bind(this);\n        this.target = null;\n        this.isMobile = false;\n        this.tabPressed = false;\n        this.state = {\n            tooltipOpen: props.isOpen\n        };\n    }\n\n    public componentDidMount(): void {\n        this.target = getTargetElement(this.props.target);\n        this.addTargetEvents();\n        // remove the attr from parent obj when tooltip is hidden\n\n        const body = document.getElementsByTagName('body').item(0);\n        if (body) {\n            const bodyClasses = body.getAttribute('class');\n            if (bodyClasses && bodyClasses.indexOf('mobile') > -1) {\n                this.isMobile = true;\n            }\n        }\n\n        if (this.target !== null && this.target.attributes.getNamedItem('aria-describedby') !== null) {\n            this.target.attributes.removeNamedItem('aria-describedby');\n        }\n    }\n\n    public componentWillUnmount(): void {\n        this.clearHideTimeout();\n        this.clearShowTimeout();\n        this.removeTargetEvents();\n    }\n\n    public onMouseOverTooltip(e: MouseEvent): void {\n        if (this.hideTimeout) {\n            this.clearHideTimeout();\n        }\n        this.showTimeout = window.setTimeout(this.show.bind(this, e), this.getDelay('show'));\n    }\n\n    public onMouseLeaveTooltip(e: MouseEvent): void {\n        if (this.showTimeout) {\n            this.clearShowTimeout();\n        }\n        this.hideTimeout = window.setTimeout(this.hide.bind(this, e), this.getDelay('hide'));\n    }\n\n    public onMouseOverTooltipContent(): void {\n        if (this.props.autohide) {\n            return;\n        }\n        if (this.hideTimeout) {\n            this.clearHideTimeout();\n        }\n    }\n\n    public onMouseLeaveTooltipContent(e: React.MouseEvent<HTMLDivElement>): void {\n        if (this.props.autohide) {\n            return;\n        }\n        if (this.showTimeout) {\n            this.clearShowTimeout();\n        }\n        this.hideTimeout = window.setTimeout(this.hide.bind(this, e.nativeEvent), this.getDelay('hide'));\n    }\n\n    public onFocusOutTarget(e: Event): void {\n        if (!this.props.isOpen) {\n            return;\n        }\n\n        if (this.tabPressed) {\n            this.tabPressed = false;\n            setTimeout(() => {\n                const nextFocus = document.activeElement;\n\n                if (!this.ref || !this.ref.current || !this.ref.current.contains(nextFocus)) {\n                    this.hide(e);\n                }\n            },         1);\n        } else {\n            this.hide(e);\n        }\n    }\n\n    public onEscKeyDown(e: React.KeyboardEvent<HTMLDivElement>): void {\n        if (e.keyCode === 9) {\n            this.tabPressed = true;\n        } else if (e.key === 'Escape') {\n            this.hide(e.nativeEvent);\n        }\n    }\n\n    public onEscKeyDownNative(e: KeyboardEvent): void {\n        if (e.keyCode === 9) {\n            this.tabPressed = true;\n        } else if (e.key === 'Escape') {\n            this.hide(e);\n        }\n    }\n\n    public getDelay(key: 'show' | 'hide'): number {\n        const { delay } = this.props;\n        if (typeof delay === 'object') {\n            return isNaN(delay[key]) ? DEFAULT_DELAYS[key] : delay[key];\n        }\n\n        return delay || 0;\n    }\n\n    public show(e: Event): void {\n        if (!this.props.isOpen) {\n            this.clearShowTimeout();\n            this.toggle(e);\n            // create a new attr for parent obj when tooltip shown\n            if (this.target !== null) {\n                const ariaAttr = document.createAttribute('aria-describedby');\n                ariaAttr.value = this.props.id as string;\n                this.target.attributes.setNamedItem(ariaAttr);\n            }\n        }\n    }\n\n    public hide(e: Event): void {\n        if (this.props.isOpen) {\n            this.clearHideTimeout();\n            this.toggle(e);\n\n            // remove the attr from parent obj when tooltip is hidden\n            if (this.target !== null && this.target.attributes.getNamedItem('aria-describedby') !== null) {\n                this.target.attributes.removeNamedItem('aria-describedby');\n            }\n        }\n    }\n\n    public clearShowTimeout(): void {\n        clearTimeout(this.showTimeout);\n        this.showTimeout = undefined;\n    }\n\n    public clearHideTimeout(): void {\n        clearTimeout(this.hideTimeout);\n        this.hideTimeout = undefined;\n    }\n\n    public handleDocumentClick(e: Event): void {\n        if (!this.target) { return; }\n\n        const target = e.target as HTMLElement;\n        if (e.target === this.target || this.target.contains(target)) {\n            if (this.hideTimeout) {\n                this.clearHideTimeout();\n            }\n\n            if (!this.props.isOpen) {\n                this.toggle(e);\n            }\n        } else if (this.props.isOpen && target.getAttribute('role') !== 'tooltip') {\n            if (this.showTimeout) {\n                this.clearShowTimeout();\n            }\n            this.hideTimeout = window.setTimeout(this.hide.bind(this, e), this.getDelay('hide'));\n        }\n    }\n\n    public addTargetEvents(): void {\n        if (!this.target) { return; }\n\n        if (this.props.trigger) {\n            const triggers = this.props.trigger.split(' ');\n            if (triggers.indexOf('manual') === -1) {\n                if (triggers.indexOf('click') > -1) {\n                    ['click', 'touchstart'].forEach((event: string) => {\n                        document.addEventListener(event, this.handleDocumentClick, true);\n                    });\n                }\n                if (triggers.indexOf('hover') > -1) {\n                    this.target.addEventListener('mouseover', this.onMouseOverTooltip, true);\n                    this.target.addEventListener('mouseout', this.onMouseLeaveTooltip, true);\n                }\n                if (triggers.indexOf('focus') > -1) {\n                    this.target.addEventListener('focusin', this.show, true);\n                    if (this.props.displayMode === 'FLYOUT') {\n                        this.target.addEventListener('focusout', this.onFocusOutTarget, true);\n                    } else {\n                        this.target.addEventListener('focusout', this.hide, true);\n                    }\n                }\n                this.target.addEventListener('keydown', this.onEscKeyDownNative, true);\n            }\n        } else {\n            this.target.addEventListener('mouseover', this.onMouseOverTooltip, true);\n            this.target.addEventListener('mouseout', this.onMouseLeaveTooltip, true);\n            this.target.addEventListener('keydown', this.onEscKeyDownNative, true);\n            this.target.addEventListener('focusin', this.show, true);\n            if (this.props.displayMode === 'FLYOUT') {\n                this.target.addEventListener('focusout', this.onFocusOutTarget, true);\n            } else {\n                this.target.addEventListener('focusout', this.hide, true);\n            }\n\n            ['click', 'touchstart'].forEach((event: string) => {\n                document.addEventListener(event, this.handleDocumentClick, true);\n            });\n        }\n    }\n\n    public removeTargetEvents(): void {\n        if (!this.target) { return; }\n\n        this.target.removeEventListener('mouseover', this.onMouseOverTooltip, true);\n        this.target.removeEventListener('mouseout', this.onMouseLeaveTooltip, true);\n        this.target.removeEventListener('keydown', this.onEscKeyDownNative, true);\n        this.target.removeEventListener('focusin', this.show, true);\n        this.target.removeEventListener('focusout', this.onFocusOutTarget, true);\n        this.target.removeEventListener('focusout', this.hide, true);\n\n        ['click', 'touchstart'].forEach((event: string) => {\n            document.removeEventListener(event, this.handleDocumentClick, true);\n        });\n    }\n\n    public toggle(e: Event): void {\n        if (e) {\n            if (this.props.disabled) {\n                e.preventDefault();\n            }\n            if (this.props.toggle) {\n                this.props.toggle();\n            }\n        }\n    }\n\n    public render(): JSX.Element | null {\n        if (!this.props.isOpen || this.isMobile) {\n            return null;\n        }\n\n        const {\n            cssModule,\n            isOpen,\n            target,\n            placementPrefix,\n            hideArrow,\n            className,\n            innerClassName,\n            innerRef,\n            modifiers,\n            toggle,\n            autohide,\n            delay,\n            placement,\n            disabled,\n            trigger,\n            boundariesElement,\n            offset,\n            arrowClassName,\n            displayMode,\n            id,\n            ...attributes\n        } = this.props;\n\n        const classes = mapToCssModules(classNames(\n            displayMode === 'FLYOUT' ? 'msc-flyout-inner' : 'msc-tooltip-inner',\n            this.props.innerClassName\n            ),                          this.props.cssModule);\n\n        const popperClasses = mapToCssModules(classNames(\n            displayMode === 'FLYOUT' ? 'msc-flyout' : 'msc-tooltip',\n            'show',\n            this.props.className\n            ),                                this.props.cssModule);\n\n        return (\n            <div ref={this.ref}>\n                <PopperContent\n                    placement={placement}\n                    isOpen={isOpen || false}\n                    target={target}\n                    className={popperClasses}\n                    hideArrow={hideArrow}\n                    placementPrefix={placementPrefix}\n                    boundariesElement={boundariesElement}\n                    arrowClassName={arrowClassName}\n                    offset={offset}\n                    modifiers={modifiers}\n                    cssModule={cssModule}\n                >\n                    <div\n                        {...attributes}\n                        className={classes}\n                        role={displayMode === undefined || displayMode === 'TOOLTIP' ? 'tooltip' : undefined}\n                        ref={innerRef}\n                        id={this.props.id}\n                        aria-hidden={isOpen}\n                        onMouseOver={this.onMouseOverTooltipContent}\n                        onMouseLeave={this.onMouseLeaveTooltipContent}\n                        onKeyDown={this.onEscKeyDown}\n                    />\n                </PopperContent>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"script"}