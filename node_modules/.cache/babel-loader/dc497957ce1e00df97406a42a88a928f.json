{"ast":null,"code":"\"use strict\";require(\"core-js/modules/es.regexp.constructor.js\");require(\"core-js/modules/es.regexp.to-string.js\");require(\"core-js/modules/es.string.replace.js\");Object.defineProperty(exports,\"__esModule\",{value:true});var tslib_1=require(\"tslib\");var classnames_1=tslib_1.__importDefault(require(\"classnames\"));var React=tslib_1.__importStar(require(\"react\"));var utilities_1=require(\"../common/utilities\");var Fade_1=tslib_1.__importDefault(require(\"../fade/Fade\"));var Portal_1=tslib_1.__importDefault(require(\"./Portal\"));var Modal=function(_super){tslib_1.__extends(Modal,_super);function Modal(props){var _this=_super.call(this,props)||this;_this.element=null;_this.ref=React.createRef();_this.mounted=false;_this._getFocusableChildren=_this._getFocusableChildren.bind(_this);_this._handleBackdropClick=_this._handleBackdropClick.bind(_this);_this._handleBackdropMouseDown=_this._handleBackdropMouseDown.bind(_this);_this._handleEscape=_this._handleEscape.bind(_this);_this._handleTab=_this._handleTab.bind(_this);_this._onOpened=_this._onOpened.bind(_this);_this._onClosed=_this._onClosed.bind(_this);_this.state={wasOpen:false,isOpen:props.isOpen||false,mouseDownElement:null};if(props.isOpen){_this._open();}return _this;}Modal.prototype.componentDidMount=function(){if(this.props.onEnter){this.props.onEnter();}this.mounted=true;var element=document.createElement('div');element.setAttribute('tabindex','-1');element.style.visibility='hidden';element.style.position='position';this.element=element;document.body.appendChild(element);this.applicationNode=this.props.applicationNode instanceof HTMLElement?this.props.applicationNode:document.querySelector(\"#\"+this.props.applicationNode);if(this.state.isOpen&&!this.state.wasOpen){this._open();}};Modal.prototype.componentWillUnmount=function(){if(this.props.onExit){this.props.onExit();}if(this.state.isOpen){this._close();}this.mounted=false;if(this.element){document.body.removeChild(this.element);}};Modal.prototype.componentDidUpdate=function(_prevProps,prevState){var _this=this;if(this.state.isOpen&&!prevState.isOpen){setTimeout(function(){var focusableElementArr=_this._getFocusableChildren();if(focusableElementArr&&focusableElementArr.length>0&&focusableElementArr[0]){var firstFocusableElement=focusableElementArr[0];firstFocusableElement.focus();}},100);}};Modal.prototype.componentWillReceiveProps=function(nextProps){if(nextProps.isOpen&&!this.props.isOpen){this.setState({isOpen:nextProps.isOpen});}};Modal.prototype.render=function(){if(this.state.isOpen&&!this.state.wasOpen){this._open();}if(this.element!==null){var _a=this.props,wrapClassName=_a.wrapClassName,modalClassName=_a.modalClassName,backdropClassName=_a.backdropClassName,contentClassName=_a.contentClassName,className=_a.className,cssModule=_a.cssModule,modalTransition=_a.modalTransition,backdropTransition=_a.backdropTransition,backdrop=_a.backdrop,isOpen=_a.isOpen,onOpened=_a.onOpened,onClosed=_a.onClosed,role=_a.role,size=_a.size,tabIndex=_a.tabIndex,external_1=_a.external,verticalPosition=_a.verticalPosition,horizontalPosition=_a.horizontalPosition,keyboard=_a.keyboard,zIndex=_a.zIndex,fade=_a.fade,toggle=_a.toggle,children=_a.children,applicationNode=_a.applicationNode,returnFocusRef=_a.returnFocusRef,ariaLabelledbyId=_a[\"aria-labelledby\"],dialogAttributes=tslib_1.__rest(_a,[\"wrapClassName\",\"modalClassName\",\"backdropClassName\",\"contentClassName\",\"className\",\"cssModule\",\"modalTransition\",\"backdropTransition\",\"backdrop\",\"isOpen\",\"onOpened\",\"onClosed\",\"role\",\"size\",\"tabIndex\",\"external\",\"verticalPosition\",\"horizontalPosition\",\"keyboard\",\"zIndex\",\"fade\",\"toggle\",\"children\",\"applicationNode\",\"returnFocusRef\",'aria-labelledby']);var modalAttributes={onClick:this._handleBackdropClick,onMouseDown:this._handleBackdropMouseDown,onKeyUp:this._handleEscape,onKeyDown:this._handleTab,style:{display:'block'}};var modalTransitions=tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({},Fade_1.default.defaultProps),modalTransition),{baseClass:fade&&modalTransition?modalTransition.baseClass:'',timeout:fade&&modalTransition?modalTransition.timeout:0});var backdropTransitions=tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({},Fade_1.default.defaultProps),backdropTransition),{baseClass:fade&&backdropTransition?backdropTransition.baseClass:'',timeout:fade&&backdropTransition?backdropTransition.timeout:0});var Backdrop=fade?React.createElement(Fade_1.default,tslib_1.__assign({},backdropTransitions,{in:this.state.isOpen&&!!backdrop,cssModule:cssModule,className:classnames_1.default('msc-modal__backdrop',backdropClassName)})):React.createElement(\"div\",{className:classnames_1.default('msc-modal__backdrop','show',backdropClassName)});var dialogBaseClass='msc-modal__dialog';var dialogClasses=classnames_1.default([dialogBaseClass,className,size?\"msc-modal__\"+size:null]);var dialog=React.createElement(\"div\",tslib_1.__assign({ref:this.ref},dialogAttributes,{className:dialogClasses,role:role,\"aria-modal\":this.state.isOpen,\"aria-labelledby\":this.props['aria-labelledby'],tabIndex:tabIndex}),React.createElement(\"div\",{className:classnames_1.default('msc-modal__content',contentClassName),role:'document'},children));return React.createElement(Portal_1.default,{node:this.element},React.createElement(\"div\",{className:wrapClassName},React.createElement(Fade_1.default,tslib_1.__assign({},modalAttributes,modalTransitions,{in:isOpen,onEntered:this._onOpened,onExited:this._onClosed,cssModule:cssModule,appear:fade,className:classnames_1.default('msc-modal',modalClassName)}),external_1,dialog),Backdrop));}return null;};Modal.prototype._open=function(){if(this.element){this.element.style.zIndex=\"\"+(this.props.zIndex||1000);this.element.style.display='block';this.element.style.visibility='visible';if(Modal.openCount===0){if(window){var scrollY_1=window.scrollY;var scrollbarWidth=window.innerWidth-document.body.clientWidth;document.body.style.position=\"fixed\";document.body.style.top=\"-\"+scrollY_1+\"px\";document.body.style.right=scrollbarWidth+\"px\";document.body.style.left=\"0px\";}document.body.className=classnames_1.default(document.body.className,'modal-open');}Modal.openCount+=1;if(this.applicationNode){this.applicationNode.setAttribute('aria-hidden','true');}this.setState(tslib_1.__assign(tslib_1.__assign({},this.state),{wasOpen:true}));}};Modal.prototype._close=function(){var _this=this;if(!this.state.isOpen){return;}if(this.element){this.element.style.display='none';setTimeout(function(){if(_this.element){_this.element.style.visibility='hidden';_this.element.style.removeProperty('display');}},0);}if(Modal.openCount<=1){var modalOpenClassName='modal-open';var modalOpenClassNameRegex=new RegExp(\"(^| )\"+modalOpenClassName+\"( |$)\");document.body.className=document.body.className.replace(modalOpenClassNameRegex,' ').trim();if(window){var scrollY_2=document.body.style.top;document.body.style.position='';document.body.style.top='';document.body.style.right='';document.body.style.left='';window.scrollTo(0,-parseInt(scrollY_2||'0',10));}}Modal.openCount-=1;if(this.applicationNode){this.applicationNode.setAttribute('aria-hidden','false');}if(this.props.returnFocusRef&&this.props.returnFocusRef.current){this.props.returnFocusRef.current.focus();}this.setState(tslib_1.__assign(tslib_1.__assign({},this.state),{wasOpen:false}));};Modal.prototype._getFocusableChildren=function(){if(this.element===null){return null;}return this.element.querySelectorAll(utilities_1.focusableElements.join(', '));};Modal.prototype._getFocusedChild=function(){var focusableChildren=this._getFocusableChildren();try{return document.activeElement;}catch(err){return focusableChildren===null?null:focusableChildren[0];}};Modal.prototype._handleBackdropClick=function(e){if(e.target===this.state.mouseDownElement){e.stopPropagation();if(!this.props.isOpen||this.props.backdrop!==true){return;}var container=this.ref.current;if(e.target&&container&&!container.contains(e.target)&&this.props.toggle){this.props.toggle();}}};Modal.prototype._handleTab=function(e){if(e.which!==9){return;}var focusableChildren=this._getFocusableChildren();if(focusableChildren===null){return;}var totalFocusable=focusableChildren.length;var currentFocus=this._getFocusedChild();var focusedIndex=0;for(var i=0;i<totalFocusable;i+=1){if(focusableChildren[i]===currentFocus){focusedIndex=i;break;}}var el=null;if(e.shiftKey&&focusedIndex===0){e.preventDefault();el=focusableChildren[totalFocusable-1];}else if(!e.shiftKey&&focusedIndex===totalFocusable-1){e.preventDefault();el=focusableChildren[0];}if(el){el.focus();}};Modal.prototype._handleBackdropMouseDown=function(e){this.setState({mouseDownElement:e.target});};Modal.prototype._handleEscape=function(e){if(this.props.isOpen&&this.props.keyboard&&e.keyCode===27&&this.props.toggle){this.props.toggle();}};Modal.prototype._onOpened=function(node,isAppearing){if(this.props.onOpened!==undefined){this.props.onOpened();}if(this.props.modalTransition!==undefined&&this.props.modalTransition.onEntered!==undefined){this.props.modalTransition.onEntered(node,isAppearing);}};Modal.prototype._onClosed=function(node){if(this.props.onClosed!==undefined){this.props.onClosed();}this._close();if(this.props.modalTransition!==undefined&&this.props.modalTransition.onExited!==undefined){this.props.modalTransition.onExited(node);}if(this.mounted){this.setState({isOpen:false});}};Modal.defaultProps={isOpen:false,autoFocus:true,verticalPosition:'top',horizontalPosition:'center',role:'dialog',backdrop:true,keyboard:true,zIndex:1000,tabIndex:0,fade:true,modalTransition:{timeout:utilities_1.TransitionTimeouts.Modal},backdropTransition:{mountOnEnter:true,timeout:utilities_1.TransitionTimeouts.Fade}};Modal.openCount=0;return Modal;}(React.Component);exports.default=Modal;","map":{"version":3,"sources":["/Users/User/Documents/wkea-ec/Msdyn365.Commerce.Online/node_modules/@msdyn365-commerce-modules/utilities/src/modal/Modal.tsx"],"names":[],"mappings":"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","sourcesContent":["import classNames from 'classnames';\nimport * as React from 'react';\nimport { focusableElements, TransitionTimeouts } from '../common/utilities';\nimport Fade from '../fade/Fade';\nimport IModalProps from './Modal.props';\nimport Portal from './Portal';\n\nexport interface IModalState {\n    wasOpen: boolean;\n    isOpen: boolean;\n    mouseDownElement: EventTarget | null;\n}\n\nexport type ModalVerticalPosition = 'top' | 'center' | 'bottom';\nexport type ModalHorizontalPosition = 'left' | 'center' | 'right';\n\n/**\n * Modal component\n */\nexport default class Modal extends React.Component<IModalProps, IModalState> {\n    public static defaultProps: Partial<IModalProps> = {\n        isOpen: false,\n        autoFocus: true,\n        verticalPosition: 'top', // needs to be non-null since we use non-null assertion in getVerticalPositionClass\n        horizontalPosition: 'center', // needs to be non-null since we use non-null assertion in getHorizontalPositionClass\n        role: 'dialog',\n        backdrop: true,\n        keyboard: true,\n        zIndex: 1000,\n        tabIndex: 0,\n        fade: true,\n        modalTransition: {\n            timeout: TransitionTimeouts.Modal\n        },\n        backdropTransition: {\n            mountOnEnter: true,\n            timeout: TransitionTimeouts.Fade // uses standard fade transition\n        }\n    };\n\n    private static openCount: number = 0;\n\n    private element: HTMLElement | null;\n    private mounted: boolean;\n    private ref: React.RefObject<HTMLDivElement>;\n    /** this property is initialized in componentDidMount rather than constructor in case the dialog needs to be pre-rendered. */\n    private applicationNode!: HTMLElement | null;\n\n    constructor(props: IModalProps) {\n        super(props);\n        this.element = null;\n        this.ref = React.createRef();\n        this.mounted = false;\n\n        this._getFocusableChildren = this._getFocusableChildren.bind(this);\n        this._handleBackdropClick = this._handleBackdropClick.bind(this);\n        this._handleBackdropMouseDown = this._handleBackdropMouseDown.bind(this);\n        this._handleEscape = this._handleEscape.bind(this);\n        this._handleTab = this._handleTab.bind(this);\n        this._onOpened = this._onOpened.bind(this);\n        this._onClosed = this._onClosed.bind(this);\n\n        this.state = {\n            wasOpen: false,\n            isOpen: props.isOpen || false,\n            mouseDownElement: null\n        };\n\n        if (props.isOpen) {\n            this._open();\n        }\n    }\n\n    public componentDidMount(): void {\n        if (this.props.onEnter) {\n            this.props.onEnter();\n        }\n        this.mounted = true;\n\n        const element = document.createElement('div');\n        element.setAttribute('tabindex', '-1');\n        element.style.visibility = 'hidden';\n        element.style.position = 'position';\n        this.element = element;\n        document.body.appendChild(element);\n\n        this.applicationNode = (this.props.applicationNode instanceof HTMLElement) ?\n            this.props.applicationNode : document.querySelector(`#${this.props.applicationNode}`);\n\n        if (this.state.isOpen && !this.state.wasOpen) {\n            this._open();\n        }\n    }\n\n    public componentWillUnmount(): void {\n        if (this.props.onExit) {\n            this.props.onExit();\n        }\n        if (this.state.isOpen) {\n            this._close();\n        }\n        this.mounted = false;\n\n        if (this.element) {\n            document.body.removeChild(this.element);\n        }\n    }\n\n    public componentDidUpdate(_prevProps: IModalProps, prevState: IModalState): void {\n        if (this.state.isOpen && !prevState.isOpen) {\n            setTimeout(() => {\n                const focusableElementArr = this._getFocusableChildren();\n                if (focusableElementArr && focusableElementArr.length > 0 && focusableElementArr[0]) {\n                    const firstFocusableElement = focusableElementArr[0] as HTMLElement;\n                    firstFocusableElement.focus();\n                }\n            },         100);\n        }\n    }\n\n    public componentWillReceiveProps(nextProps: IModalProps): void {\n        if (nextProps.isOpen && !this.props.isOpen) {\n            this.setState({ isOpen: nextProps.isOpen });\n        }\n    }\n\n    public render(): JSX.Element | null {\n        if (this.state.isOpen && !this.state.wasOpen) {\n            this._open();\n        }\n        if (this.element !== null) {\n            const {\n                wrapClassName, modalClassName, backdropClassName, contentClassName, className, cssModule,\n                modalTransition, backdropTransition, backdrop, isOpen, onOpened, onClosed,\n                role, size, tabIndex, external, verticalPosition, horizontalPosition, keyboard, zIndex, fade, toggle,\n                children, applicationNode, returnFocusRef, 'aria-labelledby': ariaLabelledbyId,\n                ...dialogAttributes\n            } = this.props;\n\n            const modalAttributes = {\n                onClick: this._handleBackdropClick,\n                onMouseDown: this._handleBackdropMouseDown,\n                onKeyUp: this._handleEscape,\n                onKeyDown: this._handleTab,\n                style: { display: 'block' }\n            };\n\n            const modalTransitions = {\n                ...Fade.defaultProps,\n                ...modalTransition,\n                baseClass: fade && modalTransition ? modalTransition.baseClass : '',\n                timeout: fade && modalTransition ? modalTransition.timeout : 0\n            };\n            const backdropTransitions = {\n                ...Fade.defaultProps,\n                ...backdropTransition,\n                baseClass: fade && backdropTransition ? backdropTransition.baseClass : '',\n                timeout: fade && backdropTransition ? backdropTransition.timeout : 0\n            };\n\n            const Backdrop = fade ?\n                (\n                    <Fade\n                        {...backdropTransitions}\n                        in={this.state.isOpen && !!backdrop}\n                        cssModule={cssModule}\n                        className={classNames('msc-modal__backdrop', backdropClassName)}\n                    />\n                )\n                : <div className={classNames('msc-modal__backdrop', 'show', backdropClassName)} />;\n\n            const dialogBaseClass = 'msc-modal__dialog';\n            const dialogClasses =\n                classNames([\n                    dialogBaseClass,\n                    className,\n                    size ? `msc-modal__${size}` : null\n                ]);\n\n            const dialog = (\n                <div\n                    ref={this.ref}\n                    {...dialogAttributes}\n                    className={dialogClasses}\n                    role={role}\n                    aria-modal={this.state.isOpen}\n                    aria-labelledby={this.props['aria-labelledby']}\n                    tabIndex={tabIndex}\n                >\n                    <div\n                        className={classNames('msc-modal__content', contentClassName)}\n                        role='document'\n                    >\n                        {children}\n                    </div>\n                </div>\n            );\n\n            return (\n                <Portal node={this.element}>\n                    <div className={wrapClassName}>\n                        <Fade\n                            {...modalAttributes}\n                            {...modalTransitions}\n                            in={isOpen}\n                            onEntered={this._onOpened}\n                            onExited={this._onClosed}\n                            cssModule={cssModule}\n                            appear={fade}\n                            className={classNames('msc-modal', modalClassName)}\n                        >\n                            {external}\n                            {dialog}\n                        </Fade>\n                        {Backdrop}\n                    </div>\n                </Portal>\n            );\n        }\n\n        return null;\n    }\n\n    private _open(): void {\n        if (this.element) {\n            this.element.style.zIndex = `${this.props.zIndex || 1000}`;\n            this.element.style.display = 'block';\n            this.element.style.visibility = 'visible';\n            if (Modal.openCount === 0) {\n                if (window) {\n                    const scrollY = window.scrollY;\n                    const scrollbarWidth = window.innerWidth - document.body.clientWidth;\n                    document.body.style.position = `fixed`;\n                    document.body.style.top = `-${scrollY}px`;\n                    document.body.style.right = `${scrollbarWidth}px`;\n                    document.body.style.left = `0px`;\n                }\n\n                document.body.className = classNames(\n                    document.body.className,\n                    'modal-open'\n                );\n            }\n            Modal.openCount += 1;\n\n            if (this.applicationNode) {\n                this.applicationNode.setAttribute('aria-hidden', 'true');\n            }\n\n            this.setState({ ...this.state, wasOpen: true });\n        }\n    }\n\n    private _close(): void {\n        if (!this.state.isOpen) {\n            return;\n        }\n\n        if (this.element) {\n            this.element.style.display = 'none';\n            setTimeout(() => {\n                if(this.element) {\n                    this.element.style.visibility = 'hidden';\n                    this.element.style.removeProperty('display');\n                }\n            },         0);\n\n        }\n\n        if (Modal.openCount <= 1) {\n            const modalOpenClassName = 'modal-open';\n            // Use regex to prevent matching `modal-open` as part of a different class, e.g. `my-modal-opened`\n            const modalOpenClassNameRegex = new RegExp(`(^| )${modalOpenClassName}( |$)`);\n            document.body.className = document.body.className.replace(modalOpenClassNameRegex, ' ').trim();\n\n            if (window) {\n                const scrollY = document.body.style.top;\n                document.body.style.position = '';\n                document.body.style.top = '';\n                document.body.style.right = '';\n                document.body.style.left = '';\n                window.scrollTo(0, -parseInt(scrollY || '0', 10));\n            }\n        }\n        Modal.openCount -= 1;\n\n        if (this.applicationNode) {\n            this.applicationNode.setAttribute('aria-hidden', 'false');\n        }\n\n        if (this.props.returnFocusRef && this.props.returnFocusRef.current) {\n            this.props.returnFocusRef.current.focus();\n        }\n\n        this.setState({ ...this.state, wasOpen: false });\n    }\n\n    private _getFocusableChildren(): NodeListOf<Element> | null {\n        if (this.element === null) {\n            return null;\n        }\n\n        return this.element.querySelectorAll(focusableElements.join(', '));\n    }\n\n    private _getFocusedChild(): Element | null {\n        const focusableChildren = this._getFocusableChildren();\n\n        try {\n            return document.activeElement;\n        } catch (err) {\n            return focusableChildren === null ? null : focusableChildren[0];\n        }\n    }\n\n    private _handleBackdropClick(e: React.MouseEvent): void {\n        if (e.target === this.state.mouseDownElement) {\n            e.stopPropagation();\n            if (!this.props.isOpen || this.props.backdrop !== true) {\n                return;\n            }\n\n            const container = this.ref.current;\n\n            if (e.target && container && !container.contains(e.target as Node) && this.props.toggle) {\n                this.props.toggle();\n            }\n        }\n    }\n\n    private _handleTab(e: React.KeyboardEvent): void {\n        if (e.which !== 9) {\n            return;\n        }\n\n        const focusableChildren = this._getFocusableChildren();\n        if (focusableChildren === null) {\n            return;\n        }\n\n        const totalFocusable = focusableChildren.length;\n        const currentFocus = this._getFocusedChild();\n\n        let focusedIndex = 0;\n\n        for (let i = 0; i < totalFocusable; i += 1) {\n            if (focusableChildren[i] === currentFocus) {\n                focusedIndex = i;\n                break;\n            }\n        }\n\n        let el: HTMLElement | null = null;\n        if (e.shiftKey && focusedIndex === 0) {\n            e.preventDefault();\n            el = focusableChildren[totalFocusable - 1] as HTMLElement;\n        } else if (!e.shiftKey && focusedIndex === totalFocusable - 1) {\n            e.preventDefault();\n            el = focusableChildren[0] as HTMLElement;\n        }\n        if (el) {\n            el.focus();\n        }\n    }\n\n    private _handleBackdropMouseDown(e: React.MouseEvent): void {\n        this.setState({\n            mouseDownElement: e.target\n        });\n    }\n\n    private _handleEscape(e: React.KeyboardEvent): void {\n        if (this.props.isOpen && this.props.keyboard && e.keyCode === 27 && this.props.toggle) {\n            this.props.toggle();\n        }\n    }\n\n    private _onOpened(node: HTMLElement, isAppearing: boolean): void {\n        if (this.props.onOpened !== undefined) {\n            this.props.onOpened();\n        }\n        if (this.props.modalTransition !== undefined && this.props.modalTransition.onEntered !== undefined) {\n            this.props.modalTransition.onEntered(node, isAppearing);\n        }\n    }\n\n    private _onClosed(node: HTMLElement): void {\n        if (this.props.onClosed !== undefined) {\n            this.props.onClosed();\n        }\n        this._close();\n        if (this.props.modalTransition !== undefined && this.props.modalTransition.onExited !== undefined) {\n            this.props.modalTransition.onExited(node);\n        }\n        if (this.mounted) {\n            this.setState({ isOpen: false });\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"script"}