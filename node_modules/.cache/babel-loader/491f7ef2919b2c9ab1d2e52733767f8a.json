{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import{getPayloadObject,getTelemetryAttributes,getTelemetryObject,onTelemetryClick}from'@msdyn365-commerce-modules/utilities';import*as Msdyn365 from'@msdyn365-commerce/core';import classnames from'classnames';import*as React from'react';export var FooterItem=/*#__PURE__*/function(_React$PureComponent){_inherits(FooterItem,_React$PureComponent);var _super=_createSuper(FooterItem);function FooterItem(props){var _this;_classCallCheck(this,FooterItem);_this=_super.call(this,props);_this.handleHeadingChange=function(event){return _this.props.config.heading.text=event.target.value;};_this.handleTextChange=function(event){return _this.props.config.text=event.target.value;};_this.handleLinkTextChange=function(event){return _this.props.config.link.linkText=event.target.value;};_this.telemetryContent=getTelemetryObject(_this.props.context.request.telemetryPageName,_this.props.friendlyName,_this.props.telemetry);_this.payLoad=getPayloadObject('click',_this.telemetryContent,'','');return _this;}_createClass(FooterItem,[{key:\"render\",value:function render(){var _this$props$config=this.props.config,heading=_this$props$config.heading,image=_this$props$config.image,link=_this$props$config.link,text=_this$props$config.text;var footerItemClassName=classnames('ms-footer__item',this.props.config.className);var linkText=link&&link.linkText?link.linkText:'';this.payLoad.contentAction.etext=linkText;this.attributes=getTelemetryAttributes(this.telemetryContent,this.payLoad);var viewProps=_objectSpread(_objectSpread({},this.props),{},{heading:this._createHeading(heading),image:this._createImageMarkup(image),text:this._createText(text),linkText:this._createLinkText(link),EditableLink:this._createLink(link),FooterItem:{moduleProps:this.props,className:footerItemClassName},HeadingContainer:{className:'ms-footer__heading'},ItemContainer:{className:'ms-footer__link__container'},Link:link&&link.linkUrl&&link.linkUrl.destinationUrl&&_objectSpread({tag:'a',className:'ms-footer__link',href:link.linkUrl.destinationUrl,title:linkText,target:link.openInNewTab?'_blank':undefined,onClick:onTelemetryClick(this.telemetryContent,this.payLoad,linkText)},this.attributes),className:footerItemClassName});return this.props.renderView(viewProps);}},{key:\"_createLink\",value:function _createLink(link){if(link){var linkText=link.linkText?link.linkText:'';var editableLink={ariaLabel:link.ariaLabel,className:'ms-footer__link',linkText:linkText,linkUrl:link.linkUrl.destinationUrl,openInNewTab:link.openInNewTab,role:'button',additionalProperties:this.attributes,onClick:onTelemetryClick(this.telemetryContent,this.payLoad,linkText)};return/*#__PURE__*/React.createElement(Msdyn365.Link,{link:editableLink,editProps:{onTextChange:this.handleLinkTextChange,requestContext:this.props.context.request}});}return null;}},{key:\"_createLinkText\",value:function _createLinkText(link){if(!link||!link.linkText){return null;}return/*#__PURE__*/React.createElement(\"span\",{className:'ms-footer__link__text'},link.linkText);}},{key:\"_createHeading\",value:function _createHeading(heading){if(!heading||!heading.text||!heading.text.length){return null;}return/*#__PURE__*/React.createElement(Msdyn365.Text,{tag:heading.tag||'h2',text:heading.text,className:'ms-footer__heading__title',editProps:{onEdit:this.handleHeadingChange,requestContext:this.props.context.request}});}},{key:\"_createText\",value:function _createText(text){if(!text){return null;}return/*#__PURE__*/React.createElement(Msdyn365.Text,{tag:'div',text:text,className:'ms-footer-item__text',editProps:{onEdit:this.handleTextChange,requestContext:this.props.context.request}});}},{key:\"_createImageMarkup\",value:function _createImageMarkup(item,ariaHiddenAttr){if(!item||!item.src||!item.src.length){return null;}var defaultImageSettings={viewports:{xs:{q:\"w=24&h=24&m=6\",w:0,h:0},lg:{q:\"w=24&h=24&m=6\",w:0,h:0}},lazyload:true};return/*#__PURE__*/React.createElement(Msdyn365.Image,Object.assign({},item,{gridSettings:this.props.context.request.gridSettings,imageSettings:item.imageSettings||defaultImageSettings,loadFailureBehavior:'default',\"aria-hidden\":ariaHiddenAttr,editProps:{key:this.props.config.image||{},requestContext:this.props.context.request}}));}}]);return FooterItem;}(React.PureComponent);export default FooterItem;","map":{"version":3,"sources":["modules/footer-item/footer-item.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getPayloadObject, getTelemetryAttributes, getTelemetryObject, IModuleProps, INodeProps, IPayLoad, ITelemetryContent, onTelemetryClick } from '@msdyn365-commerce-modules/utilities';\nimport * as Msdyn365 from '@msdyn365-commerce/core';\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport { IFooterItemConfig, IFooterItemProps, IHeadingData, ILinkData } from './footer-item.props.autogenerated';\n\nexport interface IFooterViewProps extends IFooterItemProps<IFooterItemConfig> {\n    heading: React.ReactNode;\n    image: React.ReactNode;\n    text: React.ReactNode;\n    linkText: React.ReactNode;\n    className?:string;\n    FooterItem: IModuleProps;\n    HeadingContainer: INodeProps;\n    ItemContainer: INodeProps;\n    Link: INodeProps;\n    EditableLink: React.ReactNode;\n}\n\n/**\n *\n * FooterItem component\n * @extends {React.PureComponent<IFooterItemProps<IFooterItemConfig>>}\n */\nexport class FooterItem extends React.PureComponent<IFooterItemProps<IFooterItemConfig>> {\n    private telemetryContent: ITelemetryContent;\n    private payLoad: IPayLoad;\n    private attributes: Msdyn365.IDictionary<string> | undefined;\n    constructor(props: IFooterItemProps<IFooterItemConfig>) {\n        super(props);\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!,\n                                                   this.props.friendlyName,\n                                                   this.props.telemetry);\n        // Construct telemetry attribute to render\n        this.payLoad = getPayloadObject('click', this.telemetryContent, '', '');\n    }\n\n    public render(): JSX.Element {\n        const {heading, image, link, text} = this.props.config;\n        const footerItemClassName = classnames('ms-footer__item', this.props.config.className);\n        const linkText = link && link.linkText ? link.linkText : '';\n        this.payLoad.contentAction.etext = linkText;\n        this.attributes = getTelemetryAttributes(this.telemetryContent, this.payLoad);\n        const viewProps: IFooterViewProps = {\n            ... this.props,\n            heading: this._createHeading(heading!),\n            image: this._createImageMarkup(image!),\n            text:this._createText(text!),\n            linkText: this._createLinkText(link!),\n            EditableLink: this._createLink(link!),\n            // @ts-ignore\n            FooterItem: {\n                moduleProps: this.props,\n                className: footerItemClassName\n            },\n            // @ts-ignore\n            HeadingContainer: {\n                className: 'ms-footer__heading'\n            },\n            // @ts-ignore\n            ItemContainer: {\n                className: 'ms-footer__link__container'\n            },\n             // @ts-ignore\n            Link: link && link.linkUrl && link.linkUrl.destinationUrl && {\n                tag: 'a',\n                className: 'ms-footer__link',\n                href: link.linkUrl.destinationUrl,\n                title:linkText,\n                target: link.openInNewTab ? '_blank' : undefined,\n                onClick: onTelemetryClick(this.telemetryContent, this.payLoad, linkText),\n                ...this.attributes\n            },\n            className:footerItemClassName\n        };\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    public handleHeadingChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.heading!.text = event.target.value;\n\n    public handleTextChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.text = event.target.value;\n\n    public handleLinkTextChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.link!.linkText = event.target.value;\n\n    private _createLink(link: ILinkData): React.ReactNode | null {\n        if(link) {\n            const linkText = link.linkText ? link.linkText : '';\n            // TODO: Update the inner tag in the anchor link to span\n            const editableLink: Msdyn365.ILinksData = {\n                ariaLabel: link.ariaLabel,\n                className: 'ms-footer__link',\n                linkText: linkText,\n                linkUrl: link.linkUrl.destinationUrl,\n                openInNewTab: link.openInNewTab,\n                role: 'button',\n                additionalProperties: this.attributes!,\n                onClick: onTelemetryClick(this.telemetryContent, this.payLoad, linkText)\n            };\n            return(\n                <Msdyn365.Link\n                    link={editableLink}\n                    editProps={{onTextChange: this.handleLinkTextChange, requestContext: this.props.context.request}}\n                />\n            );\n\n        }\n        return null;\n    }\n\n    private _createLinkText(link: ILinkData): React.ReactNode | null {\n        if(!link || !link.linkText) {\n            return null;\n        }\n\n        return (<span className='ms-footer__link__text'>{link.linkText}</span>);\n    }\n\n    private _createHeading(heading: IHeadingData): React.ReactNode | null {\n        if(!heading || !heading.text || !heading.text.length) {\n            return null;\n        }\n\n        return (\n            <Msdyn365.Text\n                tag= {heading.tag || 'h2'}\n                text= {heading.text}\n                className='ms-footer__heading__title'\n                editProps= {{onEdit: this.handleHeadingChange, requestContext: this.props.context.request}}\n            />\n        );\n    }\n\n    private _createText(text: string): React.ReactNode | null {\n        if (!text) {\n            return null;\n        }\n        return (\n                <Msdyn365.Text\n                    tag= 'div'\n                    text= {text}\n                    className='ms-footer-item__text'\n                    editProps={{onEdit: this.handleTextChange, requestContext: this.props.context.request}}\n                />\n        );\n    }\n\n    private _createImageMarkup(item: Msdyn365.IImageData, ariaHiddenAttr?: boolean): React.ReactNode | null {\n        if(!item || !item.src || !item.src.length) {\n            return null;\n        }\n\n        const defaultImageSettings: Msdyn365.IImageSettings = {\n            viewports: {\n                xs: { q: `w=24&h=24&m=6`, w: 0, h: 0 },\n                lg: { q: `w=24&h=24&m=6`, w: 0, h: 0 }\n            },\n            lazyload: true\n        };\n        return (\n            <Msdyn365.Image\n                {...item}\n                gridSettings={this.props.context.request.gridSettings!}\n                imageSettings={item.imageSettings || defaultImageSettings}\n                loadFailureBehavior='default'\n                aria-hidden={ariaHiddenAttr}\n                editProps={{key:this.props.config.image || {}, requestContext: this.props.context.request}}\n            />\n        );\n    }\n}\n\nexport default FooterItem;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}