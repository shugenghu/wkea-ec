{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{createProductListAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';/**\r\n *  Input class for the CreateOrderTemplate data action.\r\n */export class CreateOrderTemplateInput{constructor(templateName){this.getCacheKey=()=>'CreateOrderTemplateInput';this.getCacheObjectType=()=>'CreateOrderTemplateInput';this.dataCacheType=()=>'none';this.templateName=templateName;}}/**\r\n * createInput method for the CreateOrderTemplate method.\r\n * @param {ICreateActionContext} inputData The input data passed to the createInput method.\r\n * @param {string} templateName The name of template.\r\n */export const createOrderTemplateInput=(inputData,templateName)=>{const{requestContext}=inputData;if(!requestContext.user.isAuthenticated){throw new Error('Unable to create order template. User is not authenticated.');}return new CreateOrderTemplateInput(templateName);};/**\r\n * The action method for the CreateOrderTemplate data action.\r\n * @param {CreateOrderTemplateInput} input The action input.\r\n * @param {IActionContext} ctx The action context.\r\n */export async function createOrderTemplateAction(input,ctx){try{const orderTemplate={Id:'',Name:input.templateName,ProductListTypeValue:1/* OrderTemplate */};const createdProductList=await createProductListAsync({callerContext:ctx},orderTemplate);if(createdProductList&&createdProductList.Id!==''){return createdProductList;}else{ctx.telemetry.error('Created product list was null');throw Error('Created product list was null');}}catch(error){ctx.telemetry.error('Not able to create order template',error);throw error;}}/**\r\n * The CreateOrderTemplate Data Action.\r\n * Returns created order template.\r\n */export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/order-templates/create-order-template',action:createOrderTemplateAction,input:createOrderTemplateInput});","map":{"version":3,"sources":["../../../src/order-templates/create-order-template.ts"],"names":[],"mappings":"sCAAA,OAEI,0BAFJ,KAOO,yBAPP,CASA,OAAS,sBAAT,KAAuC,4EAAvC,CAEA;;AAEG,GACH,MAAM,MAAO,CAAA,wBAAwB,CAGjC,WAAA,CAAY,YAAZ,CAAgC,CAIzB,KAAA,WAAA,CAAc,IAAM,0BAApB,CACA,KAAA,kBAAA,CAAqB,IAAM,0BAA3B,CACA,KAAA,aAAA,CAAgB,IAAiB,MAAjC,CALH,KAAK,YAAL,CAAoB,YAApB,CACH,CALgC,CAYrC;;;;AAIG,GACH,MAAO,MAAM,CAAA,wBAAwB,CAAG,CAAC,SAAD,CAAkC,YAAlC,GAAoF,CACxH,KAAM,CAAE,cAAF,EAAqB,SAA3B,CACA,GAAI,CAAC,cAAc,CAAC,IAAf,CAAoB,eAAzB,CAA0C,CACtC,KAAM,IAAI,CAAA,KAAJ,CAAU,6DAAV,CAAN,CACH,CACD,MAAO,IAAI,CAAA,wBAAJ,CAA6B,YAA7B,CAAP,CACH,CANM,CAQP;;;;AAIG,GACH,MAAO,eAAe,CAAA,yBAAf,CAAyC,KAAzC,CAA0E,GAA1E,CAA6F,CAChG,GAAI,CACA,KAAM,CAAA,aAAa,CAAgB,CAC/B,EAAE,CAAE,EAD2B,CAE/B,IAAI,CAAE,KAAK,CAAC,YAFmB,CAG/B,oBAAoB,CAAA,CAAA,mBAHW,CAAnC,CAKA,KAAM,CAAA,kBAAkB,CAAG,KAAM,CAAA,sBAAsB,CAAC,CACpD,aAAa,CAAE,GADqC,CAAD,CAEpD,aAFoD,CAAvD,CAGA,GAAI,kBAAkB,EAAI,kBAAkB,CAAC,EAAnB,GAA0B,EAApD,CAAwD,CACpD,MAAO,CAAA,kBAAP,CACH,CAFD,IAEO,CACH,GAAG,CAAC,SAAJ,CAAc,KAAd,CAAoB,+BAApB,EACA,KAAM,CAAA,KAAK,CAAC,+BAAD,CAAX,CACH,CACJ,CAAC,MAAO,KAAP,CAAc,CACZ,GAAG,CAAC,SAAJ,CAAc,KAAd,CAAoB,mCAApB,CAAyD,KAAzD,EACA,KAAM,CAAA,KAAN,CACH,CACJ,CAED;;;AAGG,GACH,cAAe,CAAA,0BAA0B,CAAc,CACnD,EAAE,CAAE,iFAD+C,CAEnD,MAAM,CAAwB,yBAFqB,CAGnD,KAAK,CAAE,wBAH4C,CAAd,CAAzC","sourcesContent":["import {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext\n} from '@msdyn365-commerce/core';\nimport { ProductList, ProductListType } from '@msdyn365-commerce/retail-proxy';\nimport { createProductListAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';\n\n/**\n *  Input class for the CreateOrderTemplate data action.\n */\nexport class CreateOrderTemplateInput implements IActionInput {\n    public readonly templateName: string;\n\n    constructor(templateName: string) {\n        this.templateName = templateName;\n    }\n\n    public getCacheKey = () => 'CreateOrderTemplateInput';\n    public getCacheObjectType = () => 'CreateOrderTemplateInput';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * createInput method for the CreateOrderTemplate method.\n * @param {ICreateActionContext} inputData The input data passed to the createInput method.\n * @param {string} templateName The name of template.\n */\nexport const createOrderTemplateInput = (inputData: ICreateActionContext, templateName: string): CreateOrderTemplateInput => {\n    const { requestContext } = inputData;\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('Unable to create order template. User is not authenticated.');\n    }\n    return new CreateOrderTemplateInput(templateName);\n};\n\n/**\n * The action method for the CreateOrderTemplate data action.\n * @param {CreateOrderTemplateInput} input The action input.\n * @param {IActionContext} ctx The action context.\n */\nexport async function createOrderTemplateAction(input: CreateOrderTemplateInput, ctx: IActionContext): Promise<ProductList> {\n    try {\n        const orderTemplate: ProductList = {\n            Id: '',\n            Name: input.templateName,\n            ProductListTypeValue: ProductListType.OrderTemplate\n        };\n        const createdProductList = await createProductListAsync({\n            callerContext: ctx\n        }, orderTemplate);\n        if (createdProductList && createdProductList.Id !== '') {\n            return createdProductList;\n        } else {\n            ctx.telemetry.error('Created product list was null');\n            throw Error('Created product list was null');\n        }\n    } catch (error) {\n        ctx.telemetry.error('Not able to create order template', error);\n        throw error;\n    }\n}\n\n/**\n * The CreateOrderTemplate Data Action.\n * Returns created order template.\n */\nexport default createObservableDataAction<ProductList>({\n    id: '@msdyn365-commerce-modules/retail-actions/order-templates/create-order-template',\n    action: <IAction<ProductList>>createOrderTemplateAction,\n    input: createOrderTemplateInput\n});"],"sourceRoot":""},"metadata":{},"sourceType":"module"}