{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{getCategoriesAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/CategoriesDataActions.g';/**\r\n * Input for get-categories data action\r\n */export class CategoriesInput{constructor(context,mappedToHierarchy,maxItems){this.getCacheKey=()=>\"\".concat(this.channelId,\"|top-\").concat(this.maxItems||250);this.getCacheObjectType=()=>this._mappedToHierarchy?'CategoryHierarchy':'Category';this.dataCacheType=()=>'application';this._mappedToHierarchy=mappedToHierarchy;this.maxItems=maxItems||250;this.channelId=context&&context.apiSettings&&context.apiSettings.channelId?Number(context.apiSettings.channelId):0;}}/**\r\n * Creates the input required to make the retail api call\r\n */export const createCategoriesInput=inputData=>{const topItems=inputData.config&&inputData.config.topCategories&&parseInt(inputData.config.topCategories,10);return new CategoriesInput(inputData.requestContext,false,topItems);};/**\r\n * Calls the Retail API and returns all the categories as a flat list\r\n */export async function getCategoryAction(input,ctx){return getCategoriesAsync({callerContext:ctx},input.channelId);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/get-categories',action:getCategoryAction,input:createCategoriesInput});","map":{"version":3,"sources":["../../src/get-categories.ts"],"names":[],"mappings":"sCAEA,OAAS,0BAAT,KAAkG,yBAAlG,CACA,OAAS,kBAAT,KAAmC,0EAAnC,CAEA;;AAEG,GACH,MAAM,MAAO,CAAA,eAAe,CAIxB,WAAA,CAAY,OAAZ,CAAsC,iBAAtC,CAAkE,QAAlE,CAAmF,CAM5E,KAAA,WAAA,CAAc,cAAS,KAAK,SAAd,iBAA+B,KAAK,QAAL,EAAiB,GAAhD,CAAd,CACA,KAAA,kBAAA,CAAqB,IAAO,KAAK,kBAAL,CAA0B,mBAA1B,CAAgD,UAA5E,CACA,KAAA,aAAA,CAAgB,IAAiB,aAAjC,CAPH,KAAK,kBAAL,CAA0B,iBAA1B,CACA,KAAK,QAAL,CAAgB,QAAQ,EAAI,GAA5B,CACA,KAAK,SAAL,CAAiB,OAAO,EAAI,OAAO,CAAC,WAAnB,EAAkC,OAAO,CAAC,WAAR,CAAoB,SAAtD,CAAkE,MAAM,CAAC,OAAO,CAAC,WAAR,CAAoB,SAArB,CAAxE,CAA0G,CAA3H,CACH,CARuB,CAe5B;;AAEG,GACH,MAAO,MAAM,CAAA,qBAAqB,CAAI,SAAD,EAAkE,CACnG,KAAM,CAAA,QAAQ,CAAG,SAAS,CAAC,MAAV,EAAoB,SAAS,CAAC,MAAV,CAAiB,aAArC,EAAsD,QAAQ,CAAC,SAAS,CAAC,MAAV,CAAiB,aAAlB,CAAiC,EAAjC,CAA/E,CACA,MAAO,IAAI,CAAA,eAAJ,CAAoB,SAAS,CAAC,cAA9B,CAA8C,KAA9C,CAAqD,QAArD,CAAP,CACH,CAHM,CAKP;;AAEG,GACH,MAAO,eAAe,CAAA,iBAAf,CAAiC,KAAjC,CAAyD,GAAzD,CAA4E,CAC/E,MAAsC,CAAA,kBAAkB,CAAC,CAAE,aAAa,CAAE,GAAjB,CAAD,CAAyB,KAAK,CAAC,SAA/B,CAAxD,CACH,CAED,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,0DADkC,CAEtC,MAAM,CAAgC,iBAFA,CAGtC,KAAK,CAAE,qBAH+B,CAAD,CAAzC","sourcesContent":["import { CategoryHierarchy } from '@msdyn365-commerce/commerce-entities';\nimport { CacheType, IAction, IActionContext, IActionInput } from '@msdyn365-commerce/core';\nimport { createObservableDataAction, IAny, ICreateActionContext, IGeneric, IRequestContext } from '@msdyn365-commerce/core';\nimport { getCategoriesAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/CategoriesDataActions.g';\n\n/**\n * Input for get-categories data action\n */\nexport class CategoriesInput implements IActionInput {\n    public readonly maxItems: number;\n    public readonly channelId: number;\n    private _mappedToHierarchy: boolean;\n    constructor(context: IRequestContext, mappedToHierarchy: boolean, maxItems?: number) {\n        this._mappedToHierarchy = mappedToHierarchy;\n        this.maxItems = maxItems || 250;\n        this.channelId = context && context.apiSettings && context.apiSettings.channelId ? Number(context.apiSettings.channelId) : 0;\n    }\n\n    public getCacheKey = () => `${this.channelId}|top-${this.maxItems || 250}`;\n    public getCacheObjectType = () => (this._mappedToHierarchy ? 'CategoryHierarchy' : 'Category');\n    public dataCacheType = (): CacheType => 'application';\n}\n\n/**\n * Creates the input required to make the retail api call\n */\nexport const createCategoriesInput = (inputData: ICreateActionContext<IGeneric<IAny>>): IActionInput => {\n    const topItems = inputData.config && inputData.config.topCategories && parseInt(inputData.config.topCategories, 10);\n    return new CategoriesInput(inputData.requestContext, false, topItems);\n};\n\n/**\n * Calls the Retail API and returns all the categories as a flat list\n */\nexport async function getCategoryAction(input: CategoriesInput, ctx: IActionContext): Promise<CategoryHierarchy[]> {\n    return <CategoryHierarchy[]><unknown>(getCategoriesAsync({ callerContext: ctx }, input.channelId));\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/retail-actions/get-categories',\n    action: <IAction<CategoryHierarchy[]>>getCategoryAction,\n    input: createCategoriesInput\n});\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}