{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{generateImageUrl,buildCacheKey}from'./utilities/utils';import{getMediaLocationsAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';/**\r\n * Product Input\r\n */export var MediaLocationsByIdInput=function MediaLocationsByIdInput(apiSettings,productId,catalogId){var _this=this;_classCallCheck(this,MediaLocationsByIdInput);this.getCacheKey=function(){return buildCacheKey(\"MediaLocationID-\".concat(_this.productId&&_this.productId.toString()),_this.apiSettings);};this.getCacheObjectType=function(){return'MediaLocations';};this.dataCacheType=function(){return'none';};this.productId=productId;this.channelId=+apiSettings.channelId;this.catalogId=catalogId||0;this.apiSettings=apiSettings;};/**\r\n * Creates the input required to make the retail api call\r\n */export var createMediaLocationsByIdInput=function createMediaLocationsByIdInput(inputData){var productId=inputData.config&&+inputData.config.productId||undefined;return new MediaLocationsByIdInput(inputData.requestContext.apiSettings,productId,undefined);};/**\r\n * Calls the Retail API and returns the product based on the passed MediaLocationsByIdInput\r\n */export function getMediaLocationsByIdAction(_x,_x2){return _getMediaLocationsByIdAction.apply(this,arguments);}function _getMediaLocationsByIdAction(){_getMediaLocationsByIdAction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input,ctx){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!input.productId){_context.next=2;break;}return _context.abrupt(\"return\",getMediaLocationsAsync({callerContext:ctx,queryResultSettings:{}},input.productId,input.channelId,input.catalogId).then(function(response){return response.map(function(mediaLocation){mediaLocation.Uri=generateImageUrl(mediaLocation.Uri,ctx.requestContext.apiSettings);mediaLocation.AltText=mediaLocation.AltText?mediaLocation.AltText:'';return mediaLocation;});}));case 2:return _context.abrupt(\"return\",[]);case 3:case\"end\":return _context.stop();}}},_callee);}));return _getMediaLocationsByIdAction.apply(this,arguments);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/get-media-locations-by-id',action:getMediaLocationsByIdAction,input:createMediaLocationsByIdInput});","map":{"version":3,"sources":["../../src/get-media-locations-by-id.ts"],"names":[],"mappings":"8MACA,OAAS,0BAAT,KAAiG,yBAAjG,CAEA,OAAS,gBAAT,CAA2B,aAA3B,KAAgD,mBAAhD,CACA,OAAS,sBAAT,KAAuC,wEAAvC,CACA;;AAEG,GACH,UAAa,CAAA,uBAAb,CAMI,iCAAY,WAAZ,CAA+C,SAA/C,CAAmE,SAAnE,CAAqF,8DAO9E,KAAA,WAAA,CAAc,iBAAM,CAAA,aAAa,2BAAoB,KAAI,CAAC,SAAL,EAAkB,KAAI,CAAC,SAAL,CAAe,QAAf,EAAtC,EAAmE,KAAI,CAAC,WAAxE,CAAnB,EAAd,CACA,KAAA,kBAAA,CAAqB,iBAAM,gBAAN,EAArB,CACA,KAAA,aAAA,CAAgB,iBAAiB,MAAjB,EAAhB,CARH,KAAK,SAAL,CAAiB,SAAjB,CACA,KAAK,SAAL,CAAiB,CAAC,WAAW,CAAC,SAA9B,CACA,KAAK,SAAL,CAAiB,SAAS,EAAI,CAA9B,CACA,KAAK,WAAL,CAAmB,WAAnB,CACH,CAXL,CAkBA;;AAEG,GACH,MAAO,IAAM,CAAA,6BAA6B,CAAG,QAAhC,CAAA,6BAAgC,CAAC,SAAD,CAA6E,CACtH,GAAM,CAAA,SAAS,CAAG,SAAS,CAAC,MAAV,EAAoB,CAAC,SAAS,CAAC,MAAV,CAAiB,SAAtC,EAAmD,SAArE,CACA,MAAO,IAAI,CAAA,uBAAJ,CAA4B,SAAS,CAAC,cAAV,CAAyB,WAArD,CAAkE,SAAlE,CAA6E,SAA7E,CAAP,CACH,CAHM,CAKP;;AAEG,GACH,eAAsB,CAAA,2BAAtB,oE,6HAAO,iBAA2C,KAA3C,CAA2E,GAA3E,sHACC,KAAK,CAAC,SADP,yDAEQ,sBAAsB,CAAC,CAAE,aAAa,CAAE,GAAjB,CAAsB,mBAAmB,CAAE,EAA3C,CAAD,CAAkD,KAAK,CAAC,SAAxD,CAAmE,KAAK,CAAC,SAAzE,CAAoF,KAAK,CAAC,SAA1F,CAAtB,CAA2H,IAA3H,CAAgI,SAAA,QAAQ,CAAG,CAC9I,MAAO,CAAA,QAAQ,CAAC,GAAT,CACH,SAAC,aAAD,CAAgD,CAC5C,aAAa,CAAC,GAAd,CAAoB,gBAAgB,CAAC,aAAa,CAAC,GAAf,CAAoB,GAAG,CAAC,cAAJ,CAAmB,WAAvC,CAApC,CACA,aAAa,CAAC,OAAd,CAAwB,aAAa,CAAC,OAAd,CAAwB,aAAa,CAAC,OAAtC,CAAgD,EAAxE,CACA,MAAO,CAAA,aAAP,CACH,CALE,CAAP,CAOH,CARM,CAFR,yCAYI,EAZJ,wD,8DAeP,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,qEADkC,CAEtC,MAAM,CAAmC,2BAFH,CAGtC,KAAK,CAAE,6BAH+B,CAAD,CAAzC","sourcesContent":["import { CacheType, IAction, IActionInput, ICommerceApiSettings } from '@msdyn365-commerce/core';\nimport { createObservableDataAction, IActionContext, IAny, ICreateActionContext, IGeneric } from '@msdyn365-commerce/core';\nimport { MediaLocation } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport { generateImageUrl, buildCacheKey } from './utilities/utils';\nimport { getMediaLocationsAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';\n/**\n * Product Input\n */\nexport class MediaLocationsByIdInput implements IActionInput {\n    public productId?: number;\n    public channelId: number;\n    public catalogId: number;\n    private apiSettings: ICommerceApiSettings;\n\n    constructor(apiSettings: ICommerceApiSettings, productId?: number, catalogId?: number) {\n        this.productId = productId;\n        this.channelId = +apiSettings.channelId;\n        this.catalogId = catalogId || 0;\n        this.apiSettings = apiSettings;\n    }\n\n    public getCacheKey = () => buildCacheKey(`MediaLocationID-${this.productId && this.productId.toString()}`, this.apiSettings);\n    public getCacheObjectType = () => 'MediaLocations';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * Creates the input required to make the retail api call\n */\nexport const createMediaLocationsByIdInput = (inputData: ICreateActionContext<IGeneric<IAny>>): MediaLocationsByIdInput => {\n    const productId = inputData.config && +inputData.config.productId || undefined;\n    return new MediaLocationsByIdInput(inputData.requestContext.apiSettings, productId, undefined);\n};\n\n/**\n * Calls the Retail API and returns the product based on the passed MediaLocationsByIdInput\n */\nexport async function getMediaLocationsByIdAction(input: MediaLocationsByIdInput, ctx: IActionContext): Promise<MediaLocation[]> {\n    if (input.productId) {\n        return getMediaLocationsAsync({ callerContext: ctx, queryResultSettings: {} }, input.productId, input.channelId, input.catalogId).then(response => {\n            return response.map(\n                (mediaLocation: MediaLocation): MediaLocation => {\n                    mediaLocation.Uri = generateImageUrl(mediaLocation.Uri, ctx.requestContext.apiSettings);\n                    mediaLocation.AltText = mediaLocation.AltText ? mediaLocation.AltText : '';\n                    return mediaLocation;\n                }\n            );\n        });\n    }\n    return [];\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/retail-actions/get-media-locations-by-id',\n    action: <IAction<MediaLocation[] | null>>getMediaLocationsByIdAction,\n    input: createMediaLocationsByIdInput\n});\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}