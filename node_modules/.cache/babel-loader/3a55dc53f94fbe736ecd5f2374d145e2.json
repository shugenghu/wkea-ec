{"ast":null,"code":"import\"core-js/modules/es.string.includes.js\";/*!\r\n * Copyright (c) Microsoft Corporation.\r\n * All rights reserved. See LICENSE in the project root for license information.\r\n */import{isNonceEnabled,SDK_FRAGMENT_NAME}from'@msdyn365-commerce/core-internal';import*as React from'react';import{isAbsoluteUrl,isRelativeUrl,logDebug,logError}from'../../utils/script-utils';class DefaultInlineScript extends React.PureComponent{constructor(props){super(props);}render(){const{config}=this.props;logDebug(\"Adding script tags for '\".concat(this.props.id,\"/\").concat(this.props.typeName,\"'\"),this.props.telemetry);const source=config.inlineScript;if(!source||source===''||isAbsoluteUrl(source)||isRelativeUrl(source)){logError('Invalid inline script - Empty inline source defined or a url is being used as a source. Use default-external-script to load scripts from an external or relative url.',this.props.telemetry);return null;}if(source.includes('</script>')){logError('Invalid inline script - inline script should not contain html tags',this.props.telemetry);return null;}const nonceToken=this.props.context&&isNonceEnabled(this.props.context.request);const scriptHtml=\"<script \".concat(nonceToken?\"nonce='\".concat(nonceToken,\"'\"):'',\">\").concat(source,\"</script>\");return/*#__PURE__*/React.createElement(SDK_FRAGMENT_NAME,{key:this.props.id,dangerouslySetInnerHTML:{__html:scriptHtml}});}}export default DefaultInlineScript;","map":{"version":3,"sources":["modules/default-inline-script/default-inline-script.tsx"],"names":[],"mappings":"8CAAA;;;AAGG,GAEH,OAAS,cAAT,CAAyB,iBAAzB,KAAkD,kCAAlD,CACA,MAAO,GAAK,CAAA,KAAZ,KAAuB,OAAvB,CACA,OAAS,aAAT,CAAwB,aAAxB,CAAuC,QAAvC,CAAiD,QAAjD,KAAiE,0BAAjE,CAQA,KAAM,CAAA,mBAAN,QAAkC,CAAA,KAAK,CAAC,aAA4C,CAChF,WAAA,CAAY,KAAZ,CAAgD,CAC5C,MAAM,KAAN,EACH,CAEM,MAAM,EAAA,CACT,KAAM,CAAE,MAAF,EAAa,KAAK,KAAxB,CACA,QAAQ,mCAA4B,KAAK,KAAL,CAAW,EAAvC,aAA6C,KAAK,KAAL,CAAW,QAAxD,MAAqE,KAAK,KAAL,CAAW,SAAhF,CAAR,CACA,KAAM,CAAA,MAAM,CAAG,MAAM,CAAC,YAAtB,CAEA,GAAI,CAAC,MAAD,EAAW,MAAM,GAAK,EAAtB,EAA4B,aAAa,CAAC,MAAD,CAAzC,EAAqD,aAAa,CAAC,MAAD,CAAtE,CAAgF,CAC5E,QAAQ,CACJ,uKADI,CAEJ,KAAK,KAAL,CAAW,SAFP,CAAR,CAIA,MAAO,KAAP,CACH,CAED,GAAI,MAAM,CAAC,QAAP,CAAgB,WAAhB,CAAJ,CAAkC,CAC9B,QAAQ,CAAC,oEAAD,CAAuE,KAAK,KAAL,CAAW,SAAlF,CAAR,CACA,MAAO,KAAP,CACH,CAED,KAAM,CAAA,UAAU,CAAG,KAAK,KAAL,CAAW,OAAX,EAAsB,cAAc,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,OAApB,CAAvD,CACA,KAAM,CAAA,UAAU,mBAAc,UAAU,kBAAa,UAAb,MAA6B,EAArD,aAA2D,MAA3D,aAAhB,CAGA,mBAAO,KAAK,CAAC,aAAN,CAAoB,iBAApB,CAAuC,CAAE,GAAG,CAAE,KAAK,KAAL,CAAW,EAAlB,CAAsB,uBAAuB,CAAE,CAAE,MAAM,CAAE,UAAV,CAA/C,CAAvC,CAAP,CACH,CA5B+E,CA+BpF,cAAe,CAAA,mBAAf","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { isNonceEnabled, SDK_FRAGMENT_NAME } from '@msdyn365-commerce/core-internal';\nimport * as React from 'react';\nimport { isAbsoluteUrl, isRelativeUrl, logDebug, logError } from '../../utils/script-utils';\nimport { IDefaultInlineScriptProps } from './default-inline-script.props.autogenerated';\n\n/**\n *\n * DefaultScript\n * @extends {React.PureComponent<IDefaultScriptProps<{}>>}\n */\nclass DefaultInlineScript extends React.PureComponent<IDefaultInlineScriptProps<{}>> {\n    constructor(props: IDefaultInlineScriptProps<{}>) {\n        super(props);\n    }\n\n    public render(): JSX.Element | null {\n        const { config } = this.props;\n        logDebug(`Adding script tags for '${this.props.id}/${this.props.typeName}'`, this.props.telemetry);\n        const source = config.inlineScript;\n\n        if (!source || source === '' || isAbsoluteUrl(source) || isRelativeUrl(source)) {\n            logError(\n                'Invalid inline script - Empty inline source defined or a url is being used as a source. Use default-external-script to load scripts from an external or relative url.',\n                this.props.telemetry\n            );\n            return null;\n        }\n\n        if (source.includes('</script>')) {\n            logError('Invalid inline script - inline script should not contain html tags', this.props.telemetry);\n            return null;\n        }\n\n        const nonceToken = this.props.context && isNonceEnabled(this.props.context.request);\n        const scriptHtml = `<script ${nonceToken ? `nonce='${nonceToken}'` : ''}>${source}</script>`;\n\n        // tslint:disable:react-no-dangerous-html -- intentionally set inner html\n        return React.createElement(SDK_FRAGMENT_NAME, { key: this.props.id, dangerouslySetInnerHTML: { __html: scriptHtml } });\n    }\n}\n\nexport default DefaultInlineScript;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}