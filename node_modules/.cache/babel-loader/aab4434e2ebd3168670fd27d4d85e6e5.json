{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/esm/slicedToArray\";import{createOrderTemplate,CreateOrderTemplateInput,updateOrderTemplateHeader,UpdateOrderTemplateHeaderInput}from'@msdyn365-commerce-modules/retail-actions';import{Button,Modal,ModalBody,ModalFooter,ModalHeader}from'@msdyn365-commerce-modules/utilities';import React,{useState}from'react';export var OrderTemplateNameDialog=function OrderTemplateNameDialog(dialogProps){var isUpdateDialog=dialogProps.isUpdateDialog,existingOrderTemplate=dialogProps.existingOrderTemplate,dialogStrings=dialogProps.dialogStrings,className=dialogProps.className,modalOpen=dialogProps.modalOpen,setModalOpen=dialogProps.setModalOpen,onCancel=dialogProps.onCancel,onSuccess=dialogProps.onSuccess,context=dialogProps.context;if(!dialogStrings){return null;}var _useState=useState(dialogProps.orderTemplateName),_useState2=_slicedToArray(_useState,2),orderTemplateName=_useState2[0],setOrderTemplateName=_useState2[1];var cancel=function cancel(){setModalOpen(false);onCancel();};var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var input,orderTemplate,_input,_orderTemplate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dialogProps.orderTemplateName=orderTemplateName||dialogStrings.defaultOrderTemplateName;if(!isUpdateDialog){_context.next=17;break;}if(!existingOrderTemplate){_context.next=13;break;}existingOrderTemplate.Name=dialogProps.orderTemplateName;input=new UpdateOrderTemplateHeaderInput(existingOrderTemplate);_context.next=7;return updateOrderTemplateHeader(input,context.actionContext);case 7:orderTemplate=_context.sent;setModalOpen(false);_context.next=11;return onSuccess(orderTemplate);case 11:_context.next=15;break;case 13:context.telemetry.error('You need to pass ProductList instance for update.');throw Error('Unexpected error: existing order template was not set.');case 15:_context.next=24;break;case 17:_input=new CreateOrderTemplateInput(dialogProps.orderTemplateName);_context.next=20;return createOrderTemplate(_input,context.actionContext);case 20:_orderTemplate=_context.sent;setModalOpen(false);_context.next=24;return onSuccess(_orderTemplate);case 24:case\"end\":return _context.stop();}}},_callee);}));return function submit(){return _ref.apply(this,arguments);};}();var updateOrderTemplateName=function updateOrderTemplateName(event){setOrderTemplateName(event.target.value);};var inputFieldRef;var setFocus=function setFocus(){var _inputFieldRef;(_inputFieldRef=inputFieldRef)===null||_inputFieldRef===void 0?void 0:_inputFieldRef.focus();};return/*#__PURE__*/React.createElement(Modal,{isOpen:modalOpen,className:\"\".concat(className),onOpened:setFocus},/*#__PURE__*/React.createElement(ModalHeader,{className:\"\".concat(className,\"__dialog__header\"),toggle:cancel},/*#__PURE__*/React.createElement(\"span\",null,dialogStrings.orderTemplateHeaderLabel)),/*#__PURE__*/React.createElement(ModalBody,{className:\"\".concat(className,\"__dialog__body\")},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__content\")},/*#__PURE__*/React.createElement(\"label\",{className:\"\".concat(className,\"__dialog__order-template-name-label\"),htmlFor:\"\".concat(className,\"__dialog__order-template-name\")},dialogStrings.orderTemplateTitleLabel),/*#__PURE__*/React.createElement(\"input\",{id:\"\".concat(className,\"__dialog__order-template-name\"),className:\"\".concat(className,\"__dialog__order-template-name\"),type:'text',\"aria-label\":dialogStrings.orderTemplateNameAriaLabel,placeholder:dialogStrings.defaultOrderTemplateName,onChange:updateOrderTemplateName,value:orderTemplateName,maxLength:250,ref:function ref(inputRef){inputFieldRef=inputRef;}}),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__description\")},dialogStrings.orderTemplateDescription))),/*#__PURE__*/React.createElement(ModalFooter,{className:\"\".concat(className,\"__dialog__footer\")},/*#__PURE__*/React.createElement(Button,{className:\"\".concat(className,\"__dialog__create-order-template-button\"),title:dialogStrings.orderTemplateButtonLabel,onClick:submit},dialogStrings.orderTemplateButtonLabel),/*#__PURE__*/React.createElement(Button,{className:\"\".concat(className,\"__dialog__cancel-button\"),title:dialogStrings.orderTemplateCancelButtonLabel,onClick:cancel},dialogStrings.orderTemplateCancelButtonLabel)));};","map":{"version":3,"sources":["order-template/order-template-name-dialog/order-template-name-dialog.component.tsx"],"names":[],"mappings":"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","sourcesContent":["import { createOrderTemplate, CreateOrderTemplateInput, updateOrderTemplateHeader, UpdateOrderTemplateHeaderInput } from '@msdyn365-commerce-modules/retail-actions';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from '@msdyn365-commerce-modules/utilities';\nimport { IComponentProps } from '@msdyn365-commerce/core';\nimport { ProductList } from '@msdyn365-commerce/retail-proxy';\nimport React, { useState } from 'react';\n\nexport interface IOrderTemplateNameDialogResources {\n    orderTemplateHeaderLabel: string;\n    orderTemplateTitleLabel: string;\n    orderTemplateNameAriaLabel: string;\n    orderTemplateDescription: string;\n    defaultOrderTemplateName: string;\n    orderTemplateButtonLabel: string;\n    orderTemplateCancelButtonLabel: string;\n}\n\nexport interface IOrderTemplateNameDialogProps extends IComponentProps {\n    isUpdateDialog: boolean | undefined;\n    existingOrderTemplate?: ProductList;\n    className: string;\n    orderTemplateName?: string;\n    dialogStrings: IOrderTemplateNameDialogResources;\n    modalOpen: boolean | undefined;\n    setModalOpen(newValue: boolean): void;\n    onCancel(): void;\n    onSuccess(orderTemplate: ProductList): Promise<void>;\n}\n\nexport const OrderTemplateNameDialog = (dialogProps: IOrderTemplateNameDialogProps) => {\n    const {\n        isUpdateDialog,\n        existingOrderTemplate,\n        dialogStrings,\n        className,\n        modalOpen,\n        setModalOpen,\n        onCancel,\n        onSuccess,\n        context\n    } = dialogProps;\n\n    if (!dialogStrings) {\n        return null;\n    }\n\n    const [orderTemplateName, setOrderTemplateName] = useState(dialogProps.orderTemplateName);\n\n    const cancel: () => void = () => {\n        setModalOpen(false);\n        onCancel();\n    };\n\n    const submit: () => Promise<void> = async () => {\n        dialogProps.orderTemplateName = orderTemplateName || dialogStrings.defaultOrderTemplateName;\n        if (isUpdateDialog) {\n            if (existingOrderTemplate) {\n                existingOrderTemplate.Name = dialogProps.orderTemplateName;\n                const input: UpdateOrderTemplateHeaderInput = new UpdateOrderTemplateHeaderInput(existingOrderTemplate);\n                const orderTemplate: ProductList = await updateOrderTemplateHeader(input, context.actionContext);\n                setModalOpen(false);\n                await onSuccess(orderTemplate);\n            } else {\n                context.telemetry.error('You need to pass ProductList instance for update.');\n                throw Error('Unexpected error: existing order template was not set.');\n            }\n        } else {\n            const input: CreateOrderTemplateInput = new CreateOrderTemplateInput(dialogProps.orderTemplateName!);\n            const orderTemplate: ProductList = await createOrderTemplate(input, context.actionContext);\n            setModalOpen(false);\n            await onSuccess(orderTemplate);\n        }\n    };\n\n    const updateOrderTemplateName = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setOrderTemplateName(event.target.value);\n    };\n\n    let inputFieldRef: HTMLInputElement | null;\n    const setFocus = () => { inputFieldRef?.focus(); };\n\n    return (\n        <Modal isOpen={modalOpen} className={`${className}`} onOpened={setFocus}>\n            <ModalHeader className={`${className}__dialog__header`} toggle={cancel}>\n                <span>{dialogStrings.orderTemplateHeaderLabel}</span>\n            </ModalHeader>\n            <ModalBody className={`${className}__dialog__body`}>\n                <div className={`${className}__dialog__content`}>\n                    <label\n                        className={`${className}__dialog__order-template-name-label`}\n                        htmlFor={`${className}__dialog__order-template-name`}\n                    >\n                        {dialogStrings.orderTemplateTitleLabel}\n                    </label>\n                    <input\n                        id={`${className}__dialog__order-template-name`}\n                        className={`${className}__dialog__order-template-name`}\n                        type='text'\n                        aria-label={dialogStrings.orderTemplateNameAriaLabel}\n                        placeholder={dialogStrings.defaultOrderTemplateName}\n                        onChange={updateOrderTemplateName}\n                        value={orderTemplateName}\n                        maxLength={250}\n                        ref={(inputRef) => { inputFieldRef = inputRef; }}\n                    />\n                    <div className={`${className}__dialog__description`}>{dialogStrings.orderTemplateDescription}</div>\n                </div>\n            </ModalBody>\n            <ModalFooter\n                className={`${className}__dialog__footer`}\n            >\n                <Button\n                    className={`${className}__dialog__create-order-template-button`}\n                    title={dialogStrings.orderTemplateButtonLabel}\n                    onClick={submit}\n                >\n                    {dialogStrings.orderTemplateButtonLabel}\n                </Button>\n                <Button\n                    className={`${className}__dialog__cancel-button`}\n                    title={dialogStrings.orderTemplateCancelButtonLabel}\n                    onClick={cancel}\n                >\n                    {dialogStrings.orderTemplateCancelButtonLabel}\n                </Button>\n            </ModalFooter>\n        </Modal>\n    );\n};"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}