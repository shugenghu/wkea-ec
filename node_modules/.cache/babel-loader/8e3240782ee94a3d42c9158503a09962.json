{"ast":null,"code":"import\"core-js/modules/es.regexp.to-string.js\";import\"core-js/modules/es.string.includes.js\";import\"core-js/modules/es.string.replace.js\";import{getFallbackImageUrl}from'@msdyn365-commerce-modules/retail-actions';import{Button,Modal,ModalBody,ModalFooter,ModalHeader}from'@msdyn365-commerce-modules/utilities';import{getUrlSync,Image}from'@msdyn365-commerce/core';import React from'react';import{PriceComponent}from'../../price/price.components';const renderOrderTemplateImage=(context,className,product,imageSettings)=>{const fallbackImageUrl=getFallbackImageUrl(product.ItemId,context.actionContext.requestContext.apiSettings);const defaultImageSettings={viewports:{xs:{q:\"w=140&h=140&m=6\",w:0,h:0},lg:{q:\"w=140&h=140&m=6\",w:0,h:0},xl:{q:\"w=140&h=140&m=6\",w:0,h:0}},lazyload:true};return/*#__PURE__*/React.createElement(Image,{className:\"\".concat(className,\"__image-props\"),src:product.PrimaryImageUrl||'',altText:product.Name,fallBackSrc:fallbackImageUrl,gridSettings:context.request.gridSettings,imageSettings:imageSettings||defaultImageSettings,loadFailureBehavior:'empty'});};export const ItemAddedToOrderTemplateDialog=dialogProps=>{const{dialogStrings,className,context,modalOpen,data:{orderTemplateId,product,productPrice,quantity}}=dialogProps;const getOrderTemplatePageUrl=()=>{const url=getUrlSync('ordertemplate',context.actionContext)||'';const separator=url.includes('?')?'&':'?';return\"\".concat(url).concat(separator,\"id=\").concat(orderTemplateId);};const close=()=>{window.location.reload(true);};const itemsString=quantity===1?dialogStrings.itemAddedToOrderTemplateHeaderItemOneText:dialogStrings.itemAddedToOrderTemplateHeaderItemFormatText.replace('{0}',quantity.toString());return/*#__PURE__*/React.createElement(Modal,{isOpen:modalOpen,className:\"\".concat(className)},/*#__PURE__*/React.createElement(ModalHeader,{className:\"\".concat(className,\"__dialog__header\"),toggle:close},/*#__PURE__*/React.createElement(\"b\",null,itemsString),/*#__PURE__*/React.createElement(\"span\",null,dialogStrings.itemAddedToOrderTemplateHeaderMessageText)),/*#__PURE__*/React.createElement(ModalBody,{className:\"\".concat(className,\"__dialog__body\")},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__content\")},renderOrderTemplateImage(context,\"\".concat(className,\"__dialog\"),product),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__description\")},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__product-name\")},product.Name),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__product-price\")},productPrice&&/*#__PURE__*/React.createElement(PriceComponent,{data:{price:productPrice},context:dialogProps.context,id:dialogProps.id,typeName:dialogProps.typeName,freePriceText:dialogProps.dialogStrings.freePriceText,originalPriceText:dialogProps.dialogStrings.originalPriceText,currentPriceText:dialogProps.dialogStrings.currentPriceText})),product.Dimensions&&/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__product-dimensions\")},product.Dimensions.map(dimension=>{var _dimension$DimensionV;return(_dimension$DimensionV=dimension.DimensionValue)===null||_dimension$DimensionV===void 0?void 0:_dimension$DimensionV.Value;}).filter(value=>value).join(', '))))),/*#__PURE__*/React.createElement(ModalFooter,{className:\"\".concat(className,\"__dialog__footer\")},/*#__PURE__*/React.createElement(Button,{className:\"\".concat(className,\"__dialog__view-order-template-button\"),title:dialogStrings.viewOrderTemplateButtonText,href:getOrderTemplatePageUrl()},dialogStrings.viewOrderTemplateButtonText),/*#__PURE__*/React.createElement(Button,{className:\"\".concat(className,\"__dialog__continue-shopping\"),title:dialogStrings.continueShoppingButtonText,onClick:close},dialogStrings.continueShoppingButtonText)));};","map":{"version":3,"sources":["order-template/item-added-to-order-template-dialog/item-added-to-order-template-dialog.component.tsx"],"names":[],"mappings":"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","sourcesContent":["import { getFallbackImageUrl } from '@msdyn365-commerce-modules/retail-actions';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from '@msdyn365-commerce-modules/utilities';\nimport { getUrlSync, IComponentProps, ICoreContext, IImageSettings, Image } from '@msdyn365-commerce/core';\nimport { ProductPrice, SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport React from 'react';\nimport { PriceComponent } from '../../price/price.components';\n\nexport interface IItemAddedToOrderTemplateDialogResources {\n    viewOrderTemplateButtonText: string;\n    continueShoppingButtonText: string;\n    itemAddedToOrderTemplateHeaderItemOneText: string;\n    itemAddedToOrderTemplateHeaderItemFormatText: string;\n    itemAddedToOrderTemplateHeaderMessageText: string;\n\n    freePriceText: string;\n    originalPriceText: string;\n    currentPriceText: string;\n}\n\nexport interface IItemAddedToOrderTemplateDialogData {\n    product: SimpleProduct;\n    productPrice: ProductPrice;\n    quantity: number;\n    orderTemplateId: string;\n}\n\nexport interface IItemAddedToOrderTemplateDialogProps extends IComponentProps<IItemAddedToOrderTemplateDialogData> {\n    className: string;\n\n    dialogStrings: IItemAddedToOrderTemplateDialogResources;\n\n    modalOpen: boolean | undefined;\n}\n\nconst renderOrderTemplateImage = (\n    context: ICoreContext, className: string, product: SimpleProduct, imageSettings?: IImageSettings) => {\n    const fallbackImageUrl = getFallbackImageUrl(product.ItemId, context.actionContext.requestContext.apiSettings);\n    const defaultImageSettings: IImageSettings = {\n        viewports: {\n            xs: { q: `w=140&h=140&m=6`, w: 0, h: 0 },\n            lg: { q: `w=140&h=140&m=6`, w: 0, h: 0 },\n            xl: { q: `w=140&h=140&m=6`, w: 0, h: 0 }\n        },\n        lazyload: true\n    };\n    return (\n        <Image\n            className={`${className}__image-props`}\n            src={product.PrimaryImageUrl || ''}\n            altText={product.Name}\n            fallBackSrc = {fallbackImageUrl}\n            gridSettings={context.request.gridSettings!}\n            imageSettings={imageSettings || defaultImageSettings}\n            loadFailureBehavior='empty'\n        />\n    );\n};\n\nexport const ItemAddedToOrderTemplateDialog = (dialogProps: IItemAddedToOrderTemplateDialogProps) => {\n    const {\n        dialogStrings,\n        className,\n        context,\n        modalOpen,\n        data: {\n            orderTemplateId,\n            product,\n            productPrice,\n            quantity\n        }\n    } = dialogProps;\n\n    const getOrderTemplatePageUrl = (): string => {\n        const url = getUrlSync('ordertemplate', context.actionContext) || '';\n        const separator = url.includes('?') ? '&' : '?';\n        return `${url}${separator}id=${orderTemplateId}`;\n    };\n\n    const close: () => void = () => {\n        window.location.reload(true);\n    };\n\n    const itemsString = quantity === 1 ? dialogStrings.itemAddedToOrderTemplateHeaderItemOneText : dialogStrings.itemAddedToOrderTemplateHeaderItemFormatText.replace('{0}', quantity.toString());\n\n    return (\n        <Modal isOpen={modalOpen} className={`${className}`}>\n            <ModalHeader className={`${className}__dialog__header`} toggle={close}>\n                <b>{itemsString}</b><span>{dialogStrings.itemAddedToOrderTemplateHeaderMessageText}</span>\n            </ModalHeader>\n            <ModalBody className={`${className}__dialog__body`}>\n                <div className={`${className}__dialog__content`}>\n                    {renderOrderTemplateImage(context, `${className}__dialog`, product)}\n                    <div className={`${className}__dialog__description`}>\n                        <div className={`${className}__dialog__product-name`}>\n                            {product.Name}\n                        </div>\n                        <div className={`${className}__dialog__product-price`}>\n                            {\n                                productPrice && <PriceComponent\n                                    data={{price: productPrice}}\n                                    context={dialogProps.context}\n                                    id={dialogProps.id}\n                                    typeName={dialogProps.typeName}\n                                    freePriceText={dialogProps.dialogStrings.freePriceText}\n                                    originalPriceText={dialogProps.dialogStrings.originalPriceText}\n                                    currentPriceText={dialogProps.dialogStrings.currentPriceText}\n                                />\n                            }\n                        </div>\n                        {\n                            product.Dimensions &&\n                                <div className={`${className}__dialog__product-dimensions`}>\n                                    {product.Dimensions.map(dimension => dimension.DimensionValue?.Value).filter(value => value).join(', ')}\n                                </div>\n                        }\n                    </div>\n                </div>\n            </ModalBody>\n            <ModalFooter\n                className={`${className}__dialog__footer`}\n            >\n                <Button\n                    className={`${className}__dialog__view-order-template-button`}\n                    title={dialogStrings.viewOrderTemplateButtonText}\n                    href={getOrderTemplatePageUrl()}\n                >\n                    {dialogStrings.viewOrderTemplateButtonText}\n                </Button>\n                <Button\n                    className={`${className}__dialog__continue-shopping`}\n                    title={dialogStrings.continueShoppingButtonText}\n                    onClick={close}\n                >\n                    {dialogStrings.continueShoppingButtonText}\n                </Button>\n            </ModalFooter>\n        </Modal>\n    );\n};"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}