{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{buildCacheKey}from'@msdyn365-commerce-modules/retail-actions';import{createObservableDataAction}from'@msdyn365-commerce/core';import{getOrgUnitLocationsByAreaAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/OrgUnitsDataActions.g';const searchArea={Radius:Math.max(),DistanceUnitValue:0};const getOrgUnitLocations=()=>async ctx=>{return getOrgUnitLocationsByAreaAsync({callerContext:ctx,queryResultSettings:{}},searchArea);};export class GetOrgUnitLocationsInput{constructor(apiSettings){this.getCacheKey=()=>buildCacheKey(\"OrgUnitLocations\",this.apiSettings);this.getCacheObjectType=()=>\"OrgUnitLocations\";this.dataCacheType=()=>'request';this.apiSettings=apiSettings;}}const createOrgUnitLocationsInput=inputData=>{return new GetOrgUnitLocationsInput(inputData.requestContext.apiSettings);};export async function getOrgUnitLocationsAction(input,ctx){if(!ctx){throw new Error(\"getOrgUnitLocationsAction - Action context cannot be null/undefined\");}let orgUnitLocations=[];try{orgUnitLocations=await getOrgUnitLocations()(ctx);}catch(error){throw error;}return{orgUnitLocations:orgUnitLocations};}export default createObservableDataAction({id:'@msdyn365-commerce-modules/order-management/get-org-unit-locations',action:getOrgUnitLocationsAction,input:createOrgUnitLocationsInput});","map":{"version":3,"sources":["actions/get-org-unit-locations.ts"],"names":[],"mappings":"sCAAA,OAAS,aAAT,KAA8B,2CAA9B,CACA,OAEI,0BAFJ,KAUO,yBAVP,CAYA,OAAS,8BAAT,KAA+C,wEAA/C,CAMA,KAAM,CAAA,UAAU,CAAe,CAC3B,MAAM,CAAE,IAAI,CAAC,GAAL,EADmB,CAE3B,iBAAiB,CAAE,CAFQ,CAA/B,CAQA,KAAM,CAAA,mBAAmB,CAAG,IAAM,KAAO,CAAA,GAAP,EAA0D,CACxF,MAAO,CAAA,8BAA8B,CACjC,CACI,aAAa,CAAE,GADnB,CAEI,mBAAmB,CAAE,EAFzB,CADiC,CAKjC,UALiC,CAArC,CAOH,CARD,CAaA,MAAM,MAAO,CAAA,wBAAwB,CAGjC,WAAA,CAAY,WAAZ,CAA6C,CAItC,KAAA,WAAA,CAAc,IAAM,aAAa,oBAAqB,KAAK,WAA1B,CAAjC,CACA,KAAA,kBAAA,CAAqB,sBAArB,CACA,KAAA,aAAA,CAAgB,IAAiB,SAAjC,CALH,KAAK,WAAL,CAAmB,WAAnB,CACH,CALgC,CAerC,KAAM,CAAA,2BAA2B,CAAI,SAAD,EAAoD,CACpF,MAAO,IAAI,CAAA,wBAAJ,CAA6B,SAAS,CAAC,cAAV,CAAyB,WAAtD,CAAP,CACH,CAFD,CAOA,MAAO,eAAe,CAAA,yBAAf,CACH,KADG,CAEH,GAFG,CAEgB,CAEnB,GAAI,CAAC,GAAL,CAAU,CACN,KAAM,IAAI,CAAA,KAAJ,uEAAN,CACH,CAED,GAAI,CAAA,gBAAgB,CAAsB,EAA1C,CAEA,GAAI,CACA,gBAAgB,CAAG,KAAM,CAAA,mBAAmB,GAAG,GAAH,CAA5C,CACH,CAAC,MAAO,KAAP,CAAc,CACZ,KAAM,CAAA,KAAN,CACH,CAED,MAAO,CAAE,gBAAgB,CAAE,gBAApB,CAAP,CACH,CAED,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,oEADkC,CAEtC,MAAM,CAA8B,yBAFE,CAGtC,KAAK,CAAE,2BAH+B,CAAD,CAAzC","sourcesContent":["import { buildCacheKey } from '@msdyn365-commerce-modules/retail-actions';\nimport {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    IAny,\n    ICommerceApiSettings,\n    ICreateActionContext,\n    IGeneric\n} from '@msdyn365-commerce/core';\nimport { OrgUnitLocation, SearchArea } from '@msdyn365-commerce/retail-proxy';\nimport { getOrgUnitLocationsByAreaAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/OrgUnitsDataActions.g';\n\ninterface IOrgUnitLocations {\n    orgUnitLocations: OrgUnitLocation[];\n}\n\nconst searchArea: SearchArea = {\n    Radius: Math.max(),\n    DistanceUnitValue: 0 // 0 is miles\n};\n\n/**\n * Calls the Retail API and returns the orgUnitLocations\n */\nconst getOrgUnitLocations = () => async (ctx: IActionContext): Promise<OrgUnitLocation[]> => {\n    return getOrgUnitLocationsByAreaAsync(\n        {\n            callerContext: ctx,\n            queryResultSettings: {}\n        },\n        searchArea\n    );\n};\n\n/**\n *  Action input\n */\nexport class GetOrgUnitLocationsInput implements IActionInput {\n    private apiSettings: ICommerceApiSettings;\n\n    constructor(apiSettings: ICommerceApiSettings) {\n        this.apiSettings = apiSettings;\n    }\n\n    public getCacheKey = () => buildCacheKey(`OrgUnitLocations`, this.apiSettings);\n    public getCacheObjectType = () => `OrgUnitLocations`;\n    public dataCacheType = (): CacheType => 'request';\n}\n\n/**\n * Creates the input required to make the retail api call\n */\nconst createOrgUnitLocationsInput = (inputData: ICreateActionContext<IGeneric<IAny>>) => {\n    return new GetOrgUnitLocationsInput(inputData.requestContext.apiSettings);\n};\n\n/**\n * Get orgUnitLocations action\n */\nexport async function getOrgUnitLocationsAction(\n    input: GetOrgUnitLocationsInput,\n    ctx: IActionContext\n): Promise<IOrgUnitLocations> {\n    if (!ctx) {\n        throw new Error(`getOrgUnitLocationsAction - Action context cannot be null/undefined`);\n    }\n\n    let orgUnitLocations: OrgUnitLocation[] = [];\n\n    try {\n        orgUnitLocations = await getOrgUnitLocations()(ctx);\n    } catch (error) {\n        throw error;\n    }\n\n    return { orgUnitLocations: orgUnitLocations };\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/order-management/get-org-unit-locations',\n    action: <IAction<IOrgUnitLocations>>getOrgUnitLocationsAction,\n    input: createOrgUnitLocationsInput\n});\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}