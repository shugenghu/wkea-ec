{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var tslib_1=require(\"tslib\");var core_1=tslib_1.__importDefault(require(\"@msdyn365-commerce/core\"));var classnames_1=tslib_1.__importDefault(require(\"classnames\"));var React=tslib_1.__importStar(require(\"react\"));var __1=require(\"../\");var utilities_1=require(\"./../common/utilities\");var SliderThumb_1=tslib_1.__importDefault(require(\"./SliderThumb\"));var orientations={horizontal:{dimension:'width',direction:'left',coordinate:'x'},vertical:{dimension:'height',direction:'top',coordinate:'y'}};var EventType;(function(EventType){EventType[EventType[\"Start\"]=0]=\"Start\";EventType[EventType[\"End\"]=1]=\"End\";EventType[EventType[\"Change\"]=2]=\"Change\";})(EventType||(EventType={}));var Slider=function(_super){tslib_1.__extends(Slider,_super);function Slider(props){var _this=_super.call(this,props)||this;_this.ref=React.createRef();_this.thumb1Ref=React.createRef();_this.thumb2Ref=React.createRef();_this._renderLabels=function(labels){return React.createElement(\"div\",{className:'slider__labels p-0'},labels.map(function(label){return React.createElement(\"div\",{key:label.labelId,role:'presentation',className:\"slider__labels-item \"+label.labelPositioning},label.labelString);}));};_this._renderSliderThumbs=function(thumbStyles){return React.createElement(React.Fragment,null,React.createElement(\"input\",{type:'range',id:_this.props.sliderThumbs[0].id+\"range\",className:\"slider__thumb__range sr-only\",min:_this.props.min,max:_this.isRangeSlider?_this.state.sliderThumbs[1].value-_this.props.step:_this.props.max,value:_this.state.sliderThumbs[0].value,role:'slider',\"aria-live\":'polite',\"aria-valuemin\":_this.props.min,\"aria-valuemax\":_this.isRangeSlider?_this.state.sliderThumbs[1].value-_this.props.step:_this.props.max,\"aria-label\":_this.props.sliderThumbs[0].ariaLabel,\"aria-valuenow\":_this.state.sliderThumbs[0].value,\"aria-orientation\":_this.props.orientation,onChange:_this._handleOnChange,onBlur:_this.props.onBlur}),React.createElement(SliderThumb_1[\"default\"],{id:_this.props.sliderThumbs[0].id,ref:_this.thumb1Ref,handleStart:_this._handleStart,handleDrag:_this._handleDrag,handleEnd:_this._handleEnd,handleFocus:_this.props.onFocus,handleBlur:_this.props.onBlur,handleTooltipText:_this.props.handleTooltipText,showTooltip:_this.props.showTooltip,style:thumbStyles[0],trackThumbClass:_this.props.trackThumbClass,sliderValue:_this.state.sliderThumbs[0].value}),' ',_this.isRangeSlider&&React.createElement(React.Fragment,null,React.createElement(\"input\",{type:'range',id:_this.props.sliderThumbs[1].id+\"range\",className:\"slider__thumb__range sr-only\",min:_this.state.sliderThumbs[0].value+_this.props.step,max:_this.props.max,value:_this.state.sliderThumbs[1].value,role:'slider',\"aria-live\":'polite',\"aria-valuemin\":_this.state.sliderThumbs[0].value+_this.props.step,\"aria-valuemax\":_this.props.max,\"aria-label\":_this.props.sliderThumbs[1].ariaLabel,\"aria-valuenow\":_this.state.sliderThumbs[1].value,\"aria-orientation\":_this.props.orientation,onChange:_this._handleOnChange,onBlur:_this.props.onBlur,onFocus:_this.props.onFocus}),React.createElement(SliderThumb_1[\"default\"],{id:_this.props.sliderThumbs[1].id,ref:_this.thumb2Ref,sliderValue:_this.state.sliderThumbs[1].value,handleStart:_this._handleStart,handleDrag:_this._handleDrag,handleEnd:_this._handleEnd,handleFocus:_this.props.onFocus,handleBlur:_this.props.onBlur,handleTooltipText:_this.props.handleTooltipText,showTooltip:_this.props.showTooltip,style:thumbStyles[1],trackThumbClass:_this.props.trackThumbClass,ariaValueText:_this.props.sliderThumbs[1].ariaValueText})));};_this._handleUpdate=function(){var orientation=_this.props.orientation;var dimensionStr=utilities_1.toUpperCaseFirstChar(orientations[orientation].dimension);var sliderPos=_this.ref.current[\"offset\"+dimensionStr];var handlePos=_this.thumb1Ref.current.sliderButtonRef.current[\"offset\"+dimensionStr];_this.setState({limit:sliderPos-handlePos,grab:orientations.horizontal.direction==='right'?-handlePos/2:handlePos/2});};_this._handleStart=function(e){e.stopPropagation();var eventType=e.type;document.addEventListener('mousemove',_this._handleDrag);document.addEventListener('mouseup',_this._handleEnd);var castTarget=e.target;var thumbid=castTarget&&castTarget.id;_this.setState(function(_prevState){return{active:true,id:thumbid};},function(){_this._getThumbAndPublishEvent(castTarget,0,eventType);});};_this._position=function(e){var grab=_this.state.grab;var orientation=_this.props.orientation;var castEvent=e;var node=_this.ref;var coordinateStyle=utilities_1.toUpperCaseFirstChar(orientations[orientation].coordinate);var directionStyle=orientations[orientation].direction;var clientCoordinateStyle=\"client\"+coordinateStyle;var coordinate=!castEvent.touches?e[clientCoordinateStyle]:castEvent.touches[0][clientCoordinateStyle];var direction=node.current.getBoundingClientRect()[directionStyle];var pos=orientations.horizontal.direction==='right'?direction-coordinate-grab:coordinate-direction-grab;return _this._getValueFromPosition(pos);};_this._getPositionFromValue=function(value){var limit=_this.state.limit;var _a=_this.props,min=_a.min,max=_a.max;var diffMaxMin=max-min;var diffValMin=value-min;var percentage=diffValMin/diffMaxMin;return Math.round(percentage*limit);};_this._getValueFromPosition=function(pos){var limit=_this.state.limit;var _a=_this.props,orientation=_a.orientation,min=_a.min,max=_a.max,step=_a.step;var percentage=utilities_1.clamp(pos,0,limit)/(limit||1);var baseVal=step*Math.round(percentage*(max-min)/step);var value=orientation==='horizontal'?baseVal+min:max-baseVal;return utilities_1.clamp(value,min,max);};_this._coordinates=function(pos){var _a=_this.state,limit=_a.limit,grab=_a.grab;var orientation=_this.props.orientation;var value=_this._getValueFromPosition(pos);var position=_this._getPositionFromValue(value);var handlePos=orientation==='horizontal'?position+grab:position;var fillPos=orientation==='horizontal'?handlePos:limit-handlePos;return{fill:fillPos,handle:handlePos,label:handlePos};};_this._setSliderValue=function(sliderThumb,castTarget,eventType){if(_this.isRangeSlider){_this.setState(function(_prevState){return{sliderThumbs:tslib_1.__assign({},_this.props.sliderThumbs)};},function(){_this._getThumbAndPublishEvent(castTarget,2,eventType);});}else{_this.setState(function(_prevState){return{sliderThumbs:sliderThumb};},function(){_this._getThumbAndPublishEvent(castTarget,2,eventType);});}};_this._publishNotification=function(thumb,delegate,eventType){delegate({id:thumb&&thumb.id||'',slider:_this,firstThumbValue:_this.state.sliderThumbs[0].value,secondThumbValue:_this.state.sliderThumbs[1]&&_this.state.sliderThumbs[1].value||NaN,eventType:eventType});};_this._getThumbAndPublishEvent=function(element,eventType,nativeEventType){var elmenentId='';if(element&&element.id&&eventType===2){elmenentId=element.id.replace('range','');}var thumb=element&&_this._getThumbFromProps(elmenentId);if(eventType===1){if(_this.props.onChangeEnd){_this._publishNotification(thumb&&thumb[0],_this.props.onChangeEnd,nativeEventType);}}if(eventType===0){if(_this.props.onChangeStart){_this._publishNotification(thumb&&thumb[0],_this.props.onChangeStart,nativeEventType);}}if(eventType===2){if(_this.props.onChange){_this._publishNotification(thumb&&thumb[0],_this.props.onChange,nativeEventType);}}};_this.isRangeSlider=_this.props.sliderThumbs.length===2;_this.state={sliderThumbs:_this.props.sliderThumbs,grab:0,limit:0,active:false,id:''};_this._handleUpdate=_this._handleUpdate.bind(_this);_this._handleDrag=_this._handleDrag.bind(_this);_this._handleEnd=_this._handleEnd.bind(_this);_this._handleStart=_this._handleStart.bind(_this);_this._handleOnChange=_this._handleOnChange.bind(_this);_this._setSliderValue=_this._setSliderValue.bind(_this);_this._getThumbFromProps=_this._getThumbFromProps.bind(_this);_this._publishNotification=_this._publishNotification.bind(_this);_this._getThumbAndPublishEvent=_this._getThumbAndPublishEvent.bind(_this);_this._willThumbsCrossOver=_this._willThumbsCrossOver.bind(_this);_this._handleOnClick=_this._handleOnClick.bind(_this);if(core_1[\"default\"].isBrowser&&document.body.parentElement&&document.body.parentElement.getAttribute('dir')==='rtl'){orientations.horizontal.direction='right';}return _this;}Slider.getDerivedStateFromProps=function(props,state){if(props.sliderThumbs.length&&props.sliderThumbs[0].value!==state.sliderThumbs[0].value||props.sliderThumbs.length>1&&props.sliderThumbs[1].value!==state.sliderThumbs[1].value){var nextState=tslib_1.__assign({},state);nextState.sliderThumbs[0].value=props.sliderThumbs[0].value;if(props.sliderThumbs.length>1){nextState.sliderThumbs[1].value=props.sliderThumbs[1].value;}return nextState;}return null;};Slider.prototype.componentDidMount=function(){this._handleUpdate();core_1[\"default\"].isBrowser&&window.addEventListener('resize',this._handleUpdate);};Slider.prototype.shouldComponentUpdate=function(nextProps,_nextState){var shouldRender=true;if(this.isRangeSlider){var thumb1Position=this._getPositionFromValue(nextProps.sliderThumbs[0].value);var thumb2Position=this._getPositionFromValue(nextProps.sliderThumbs[1].value);shouldRender=thumb2Position>0?thumb2Position>=thumb1Position+nextProps.step:true;}return shouldRender;};Slider.prototype.componentWillUnmount=function(){window.removeEventListener('resize',this._handleUpdate);};Slider.prototype.render=function(){var _a,_b,_c,_d,_e;var orientation=this.props.orientation;var sliderClass=this.props.className?Slider.sliderBaseClass+\" slider-\"+orientation+\" \"+this.props.className:Slider.sliderBaseClass+\" slider-\"+orientation;var sliderId=this.props.id;var dimension=orientations[orientation].dimension;var direction=orientations[orientation].direction;var camelCasedDirection=utilities_1.toUpperCaseFirstChar(direction);var positionThumb1=this._getPositionFromValue(this.props.sliderThumbs[0].value);var coordsThumb1=this._coordinates(positionThumb1);var fillStyle=(_a={},_a[dimension]=coordsThumb1.fill+\"px\",_a);var handleStyle=[];handleStyle.push((_b={},_b[direction]=coordsThumb1.handle+\"px\",_b));var trackProgressClass=classnames_1[\"default\"]('progress-bar',this.props.trackProgressClass?this.props.trackProgressClass:'');if(this.isRangeSlider){var positionThumb2=this._getPositionFromValue(this.props.sliderThumbs[1].value);var coordsThumb2=this._coordinates(positionThumb2);handleStyle.push((_c={},_c[direction]=coordsThumb2.handle+\"px\",_c));if(orientation==='vertical'){fillStyle=(_d={},_d[\"marginBottom\"]=coordsThumb1.fill+\"px\",_d[dimension]=coordsThumb2.fill-coordsThumb1.fill+\"px\",_d);}else{fillStyle=(_e={},_e[\"margin\"+camelCasedDirection]=(orientations.horizontal.direction===\"right\"?coordsThumb1.fill-this.state.grab:coordsThumb1.fill)+\"px\",_e[dimension]=coordsThumb2.handle-coordsThumb1.handle+\"px\",_e);}}return React.createElement(\"div\",{className:sliderClass,ref:this.ref,onClick:this._handleOnClick,role:'none'},this.props.showProgressBar&&React.createElement(__1.Progress,tslib_1.__assign({id:\"progress_\"+sliderId,ariaLabel:this.props.ariaLabel,className:trackProgressClass,min:this.props.min,max:this.props.max,value:this.props.fillTrackValue?this.props.fillTrackValue:0},this.props.fillTrackValue?{'aria-valuetext':this.props.fillTrackValue}:{})),React.createElement(\"div\",{className:'slider__track',id:\"\"+sliderId,style:fillStyle}),this._renderSliderThumbs(handleStyle),this.props.showLabels?this._renderLabels(this.props.labels):null);};Slider.prototype._handleEnd=function(e){var _this=this;e.stopPropagation();var eventType=e.type;var castTarget=e.target;this.setState(function(_prevState){return{active:false,id:''};},function(){_this._getThumbAndPublishEvent(castTarget,1,eventType);});document.removeEventListener('mousemove',this._handleDrag);document.removeEventListener('mouseup',this._handleEnd);};Slider.prototype._handleDrag=function(e){e.stopPropagation();var value=this._position(e);var eventType=e.type;var castThumb=e.target;var thumbId=this.state.id||castThumb&&castThumb.id;var thumbPressed=this._getThumbFromProps(thumbId);if(thumbPressed&&!this._willThumbsCrossOver(thumbPressed[0],e)){thumbPressed[0].value=value;this._setSliderValue(thumbPressed,castThumb,eventType);}};Slider.prototype._handleOnClick=function(e){var _this=this;e.stopPropagation();var position=this._position(e);var castThumb=e.target;var thumb1=this._getThumbFromProps(this.props.sliderThumbs[0].id);var eventType=e.type;if(this.isRangeSlider){var thumb2_1=this._getThumbFromProps(this.props.sliderThumbs[1].id);if(thumb1&&thumb2_1){var thumb2Value=thumb2_1[0].value;if(position>=thumb2Value){thumb2_1[0].value=position;}else{thumb1[0].value=position;}this.setState(function(_prevState){return{sliderThumbs:[thumb1[0],thumb2_1[0]]};},function(){_this._getThumbAndPublishEvent(castThumb,2,eventType);});}}else if(thumb1){thumb1[0].value=position;this.setState(function(_prevState){return{sliderThumbs:thumb1};},function(){_this._getThumbAndPublishEvent(castThumb,2,eventType);});}};Slider.prototype._handleOnChange=function(e){e.stopPropagation();var castTarget=e.target;var thumbInteractedWith=castTarget&&this._getThumbFromProps(castTarget.id.replace('range',''));var eventType=e.type;thumbInteractedWith[0].value=parseInt(e.target.value,10);this._setSliderValue(thumbInteractedWith,castTarget,eventType);};Slider.prototype._getThumbFromProps=function(thumbId){var thumbFound;thumbFound=this.props.sliderThumbs.filter(function(thumb){return thumb.id===thumbId;});return thumbFound.length>0?thumbFound:null;};Slider.prototype._willThumbsCrossOver=function(thumbPressed,event){if(!this.isRangeSlider){return false;}else{var keycode=0;var checkCondition=false;if(event.type==='keydown'){var castEvent=event;keycode=castEvent.keyCode;if(thumbPressed===this.props.sliderThumbs[1]&&(keycode===38||keycode===39)||thumbPressed===this.props.sliderThumbs[0]&&(keycode===37||keycode===40)){return false;}else{checkCondition=true;}}if(event.type==='touchmove'||event.type==='mousemove'||event.type==='click'){var value=this._position(event);if(this.state.sliderThumbs[1].value<value&&thumbPressed.id===this.props.sliderThumbs[1].id||this.state.sliderThumbs[0].value>value&&thumbPressed.id===this.props.sliderThumbs[0].id){return false;}else{checkCondition=true;}}return checkCondition&&this.props.sliderThumbs[1].value-this.props.step*2>=this.props.sliderThumbs[0].value?false:true;}};Slider.defaultProps={showTooltip:true,inForm:false,orientation:'horizontal',min:0,max:100,step:1,sliderThumbs:[{id:'slider_thumb_id',value:50}]};Slider.sliderBaseClass='slider';return Slider;}(React.Component);exports[\"default\"]=Slider;","map":{"version":3,"sources":["/Users/User/Documents/wkea-ec/Msdyn365.Commerce.Online/node_modules/@msdyn365-commerce-modules/utilities/src/slider/Slider.tsx"],"names":[],"mappings":"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","sourcesContent":["import MsDyn365 from '@msdyn365-commerce/core';\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport { Progress } from '../';\nimport { clamp, toUpperCaseFirstChar } from './../common/utilities';\nimport { ISliderChangeNotification, ISliderLabel, ISliderProps, ISliderThumbProps } from './Slider.props';\nimport SliderThumb from './SliderThumb';\n\n// This maintains the min and max values for the 2 thumbs\nexport interface ISliderState {\n    sliderThumbs: ISliderThumbProps[];\n    limit: number;\n    grab: number;\n    active: boolean;\n    id: string;\n}\n\nconst orientations = {\n    horizontal: {\n        dimension: 'width',\n        direction: 'left',\n        coordinate: 'x'\n    },\n    vertical: {\n        dimension: 'height',\n        direction: 'top',\n        coordinate: 'y'\n    }\n};\n\ninterface IFillCoordinates {\n    fill: number;\n    handle: number;\n    label: number;\n}\n\nconst enum EventType {\n    Start,\n    End,\n    Change\n}\n\n/**\n * Slider - This is a slider component this component morphs into a range slider\n * based on flags\n */\n\nexport default class Slider extends React.Component<ISliderProps, ISliderState> {\n    public static defaultProps: Partial<ISliderProps> = {\n        showTooltip: true,\n        inForm: false,\n        orientation: 'horizontal',\n        min: 0,\n        max: 100,\n        step: 1,\n        sliderThumbs: [{ id: 'slider_thumb_id', value: 50 }]\n    };\n    private static sliderBaseClass: string = 'slider';\n\n    public isRangeSlider: boolean;\n    private ref: React.RefObject<HTMLDivElement> = React.createRef<HTMLDivElement>();\n    private thumb1Ref: React.RefObject<SliderThumb> = React.createRef<SliderThumb>();\n    private thumb2Ref: React.RefObject<SliderThumb> = React.createRef<SliderThumb>();\n\n    public static getDerivedStateFromProps(props: ISliderProps, state: ISliderState): ISliderState | null {\n        if ((props.sliderThumbs.length && props.sliderThumbs[0].value !== state.sliderThumbs[0].value) ||\n                (props.sliderThumbs.length > 1 && props.sliderThumbs[1].value !== state.sliderThumbs[1].value)) {\n                const nextState = { ...state };\n                nextState.sliderThumbs[0].value = props.sliderThumbs[0].value;\n                if (props.sliderThumbs.length > 1) {\n                    nextState.sliderThumbs[1].value = props.sliderThumbs[1].value;\n                }\n                return nextState;\n            }\n        return null;\n    }\n\n    constructor(props: ISliderProps) {\n        super(props);\n        this.isRangeSlider = this.props.sliderThumbs.length === 2;\n        this.state = {\n            sliderThumbs: this.props.sliderThumbs,\n            grab: 0,\n            limit: 0,\n            active: false,\n            id: ''\n        };\n        this._handleUpdate = this._handleUpdate.bind(this);\n        this._handleDrag = this._handleDrag.bind(this);\n        this._handleEnd = this._handleEnd.bind(this);\n        this._handleStart = this._handleStart.bind(this);\n        this._handleOnChange = this._handleOnChange.bind(this);\n        this._setSliderValue = this._setSliderValue.bind(this);\n        this._getThumbFromProps = this._getThumbFromProps.bind(this);\n        this._publishNotification = this._publishNotification.bind(this);\n        this._getThumbAndPublishEvent = this._getThumbAndPublishEvent.bind(this);\n        this._willThumbsCrossOver = this._willThumbsCrossOver.bind(this);\n        this._handleOnClick = this._handleOnClick.bind(this);\n        if (MsDyn365.isBrowser && document.body.parentElement && document.body.parentElement.getAttribute('dir') === 'rtl') {\n            orientations.horizontal.direction ='right';\n        }\n    }\n\n    public componentDidMount(): void {\n        this._handleUpdate();\n        MsDyn365.isBrowser && window.addEventListener('resize', this._handleUpdate);\n    }\n\n    public shouldComponentUpdate(nextProps: ISliderProps, _nextState: ISliderState): boolean {\n        let shouldRender = true;\n        if (this.isRangeSlider) {\n            const thumb1Position = this._getPositionFromValue(nextProps.sliderThumbs[0].value);\n            const thumb2Position = this._getPositionFromValue(nextProps.sliderThumbs[1].value);\n            /**\n             * During first render the second thumb isn't positioned since handleUpdate positions it after it's mounted\n             * in the componentDidMount method. This check is to make sure that the first render happens correctly and then\n             * for all subsequent renders and updates, the thumb2 position cannot be 0 thanks to this condition.\n             */\n            shouldRender = thumb2Position > 0 ? thumb2Position >= thumb1Position + nextProps.step : true;\n        }\n        return shouldRender;\n    }\n\n    public componentWillUnmount(): void {\n        window.removeEventListener('resize', this._handleUpdate);\n    }\n\n    public render(): JSX.Element {\n        const { orientation } = this.props;\n        const sliderClass = this.props.className\n            ? `${Slider.sliderBaseClass} slider-${orientation} ${this.props.className}`\n            : `${Slider.sliderBaseClass} slider-${orientation}`;\n\n        const sliderId = this.props.id;\n        const dimension = orientations[orientation].dimension;\n        const direction = orientations[orientation].direction;\n        const camelCasedDirection = toUpperCaseFirstChar(direction);\n        const positionThumb1 = this._getPositionFromValue(this.props.sliderThumbs[0].value);\n        const coordsThumb1 = this._coordinates(positionThumb1);\n        let fillStyle = { [dimension]: `${coordsThumb1.fill}px` };\n        const handleStyle: React.CSSProperties[] = [];\n        handleStyle.push({ [direction]: `${coordsThumb1.handle}px` });\n        const trackProgressClass = classnames('progress-bar', this.props.trackProgressClass ? this.props.trackProgressClass : '');\n\n        if (this.isRangeSlider) {\n            const positionThumb2 = this._getPositionFromValue(this.props.sliderThumbs[1].value);\n            const coordsThumb2 = this._coordinates(positionThumb2);\n            handleStyle.push({ [direction]: `${coordsThumb2.handle}px` });\n            if (orientation === 'vertical') {\n                fillStyle = {\n                    [`marginBottom`]: `${coordsThumb1.fill}px`,\n                    [dimension]: `${coordsThumb2.fill - coordsThumb1.fill}px`\n                };\n            } else {\n                fillStyle = {\n                    [`margin${camelCasedDirection}`]: `${orientations.horizontal.direction === `right` ? coordsThumb1.fill - this.state.grab : coordsThumb1.fill }px`,\n                    [dimension]: `${coordsThumb2.handle - coordsThumb1.handle}px`\n                };\n            }\n        }\n\n        return (\n            <div className={sliderClass} ref={this.ref} onClick={this._handleOnClick} role='none'>\n                {this.props.showProgressBar && (\n                    <Progress\n                        id={`progress_${sliderId}`}\n                        ariaLabel={this.props.ariaLabel}\n                        className={trackProgressClass}\n                        min={this.props.min}\n                        max={this.props.max}\n                        value={this.props.fillTrackValue ? this.props.fillTrackValue : 0 }\n                        {...(this.props.fillTrackValue ? { 'aria-valuetext': this.props.fillTrackValue } : {})}\n                    />\n                )}\n                <div className='slider__track' id={`${sliderId}`} style={fillStyle} />\n                {this._renderSliderThumbs(handleStyle)}\n                {this.props.showLabels ? this._renderLabels(this.props.labels!) : null}\n            </div>\n        );\n    }\n\n    private _renderLabels = (labels: ISliderLabel[]): JSX.Element => {\n        return (\n            <div className={'slider__labels p-0'}>\n                {labels.map((label: ISliderLabel) => {\n                    return (\n                        <div key={label.labelId} role='presentation' className={`slider__labels-item ${label.labelPositioning}`}>\n                            {label.labelString}\n                        </div>\n                    );\n                })}\n            </div>\n        );\n    };\n\n    private _renderSliderThumbs = (thumbStyles: React.CSSProperties[]): React.ReactFragment | JSX.Element | null => {\n        return (\n            <React.Fragment>\n                <input\n                    type={'range'}\n                    id={`${this.props.sliderThumbs[0].id}range`}\n                    className={`slider__thumb__range sr-only`}\n                    min={this.props.min}\n                    max={this.isRangeSlider ? this.state.sliderThumbs[1].value - this.props.step : this.props.max}\n                    value={this.state.sliderThumbs[0].value}\n                    role='slider'\n                    aria-live='polite'\n                    aria-valuemin={this.props.min}\n                    aria-valuemax={this.isRangeSlider ? this.state.sliderThumbs[1].value - this.props.step : this.props.max}\n                    aria-label={this.props.sliderThumbs[0].ariaLabel}\n                    aria-valuenow={this.state.sliderThumbs[0].value}\n                    aria-orientation={this.props.orientation}\n                    onChange={this._handleOnChange}\n                    onBlur={this.props.onBlur}\n                />\n                <SliderThumb\n                    id={this.props.sliderThumbs[0].id}\n                    ref={this.thumb1Ref}\n                    handleStart={this._handleStart}\n                    handleDrag={this._handleDrag}\n                    handleEnd={this._handleEnd}\n                    handleFocus={this.props.onFocus}\n                    handleBlur={this.props.onBlur}\n                    handleTooltipText={this.props.handleTooltipText}\n                    showTooltip={this.props.showTooltip}\n                    style={thumbStyles[0]}\n                    trackThumbClass={this.props.trackThumbClass}\n                    sliderValue={this.state.sliderThumbs[0].value}\n                />{' '}\n                {this.isRangeSlider && (\n                    <>\n                        <input\n                            type={'range'}\n                            id={`${this.props.sliderThumbs[1].id}range`}\n                            className={`slider__thumb__range sr-only`}\n                            min={this.state.sliderThumbs[0].value + this.props.step}\n                            max={this.props.max}\n                            value={this.state.sliderThumbs[1].value}\n                            role='slider'\n                            aria-live='polite'\n                            aria-valuemin={this.state.sliderThumbs[0].value + this.props.step}\n                            aria-valuemax={this.props.max}\n                            aria-label={this.props.sliderThumbs[1].ariaLabel}\n                            aria-valuenow={this.state.sliderThumbs[1].value}\n                            aria-orientation={this.props.orientation}\n                            onChange={this._handleOnChange}\n                            onBlur={this.props.onBlur}\n                            onFocus={this.props.onFocus}\n                        />\n                        <SliderThumb\n                            id={this.props.sliderThumbs[1].id}\n                            ref={this.thumb2Ref}\n                            sliderValue={this.state.sliderThumbs[1].value}\n                            handleStart={this._handleStart}\n                            handleDrag={this._handleDrag}\n                            handleEnd={this._handleEnd}\n                            handleFocus={this.props.onFocus}\n                            handleBlur={this.props.onBlur}\n                            handleTooltipText={this.props.handleTooltipText}\n                            showTooltip={this.props.showTooltip}\n                            style={thumbStyles[1]}\n                            trackThumbClass={this.props.trackThumbClass}\n                            ariaValueText={this.props.sliderThumbs[1].ariaValueText}\n                        />\n                    </>\n                )}\n            </React.Fragment>\n        );\n    };\n\n    private _handleUpdate = (): void => {\n        const { orientation } = this.props;\n        const dimensionStr = toUpperCaseFirstChar(orientations[orientation].dimension);\n\n        // To get the offsetWidth and offsetHeight of the slider element\n        const sliderPos = this.ref.current![`offset${dimensionStr}`];\n        const handlePos = this.thumb1Ref.current!.sliderButtonRef.current![`offset${dimensionStr}`];\n\n        this.setState({\n            limit: sliderPos - handlePos,\n            grab : orientations.horizontal.direction === 'right' ? - handlePos / 2 : handlePos / 2\n        });\n    };\n\n    private _handleStart = (e: React.TouchEvent | React.KeyboardEvent | React.MouseEvent): void => {\n        e.stopPropagation();\n        const eventType = e.type;\n        document.addEventListener('mousemove', (this._handleDrag as unknown) as EventListener);\n        document.addEventListener('mouseup', (this._handleEnd as unknown) as EventListener);\n        const castTarget = e.target as HTMLElement;\n        const thumbid = castTarget && castTarget.id;\n        this.setState(\n            (_prevState: ISliderState) => {\n                return { active: true, id: thumbid };\n            },\n            () => {\n                this._getThumbAndPublishEvent(castTarget, EventType.Start, eventType);\n            }\n        );\n    };\n\n    private _handleEnd(e: React.KeyboardEvent | React.MouseEvent | React.TouchEvent): void {\n        e.stopPropagation();\n        const eventType = e.type;\n        const castTarget = e.target as HTMLElement;\n        this.setState(\n            (_prevState: ISliderState) => {\n                return { active: false, id: '' };\n            },\n            () => {\n                this._getThumbAndPublishEvent(castTarget, EventType.End, eventType);\n            }\n        );\n        document.removeEventListener('mousemove', (this._handleDrag as unknown) as EventListener);\n        document.removeEventListener('mouseup', (this._handleEnd as unknown) as EventListener);\n    }\n\n    private _handleDrag(e: React.MouseEvent | React.TouchEvent): void {\n        e.stopPropagation();\n        const value = this._position(e);\n        const eventType = e.type;\n        const castThumb = e.target as HTMLElement;\n        const thumbId = this.state.id || (castThumb && castThumb.id);\n        const thumbPressed = this._getThumbFromProps(thumbId);\n\n        if (thumbPressed && !this._willThumbsCrossOver(thumbPressed[0], e)) {\n            thumbPressed[0].value = value;\n            this._setSliderValue(thumbPressed, castThumb, eventType);\n        }\n    }\n\n    private _handleOnClick(e: React.MouseEvent | React.TouchEvent): void {\n        e.stopPropagation();\n        const position =  this._position(e);\n        const castThumb = e.target as HTMLElement;\n        const thumb1 = this._getThumbFromProps(this.props.sliderThumbs[0].id);\n        const eventType = e.type;\n\n        if (this.isRangeSlider) {\n            const thumb2 = this._getThumbFromProps(this.props.sliderThumbs[1].id);\n\n            if (thumb1 && thumb2) {\n                const thumb2Value = thumb2[0].value;\n\n                if (position >= thumb2Value) {\n                    thumb2[0].value = position;\n                } else {\n                    thumb1[0].value = position;\n                }\n\n                this.setState(\n                    (_prevState: ISliderState) => {\n                        return ({ sliderThumbs: [thumb1[0], thumb2[0]] });\n                    },\n                    () => {\n                        this._getThumbAndPublishEvent(castThumb, EventType.Change, eventType);\n                    }\n                );\n            }\n\n        } else if (thumb1) {\n            thumb1[0].value = position;\n            this.setState(\n                (_prevState: ISliderState) => {\n                    return ({ sliderThumbs: thumb1 });\n                },\n                () => {\n                    this._getThumbAndPublishEvent(castThumb, EventType.Change, eventType);\n                }\n            );\n        }\n    }\n\n    private _position = (e: React.KeyboardEvent | React.MouseEvent | React.TouchEvent): number => {\n        const { grab } = this.state;\n        const { orientation } = this.props;\n        const castEvent = (e as unknown) as TouchEvent;\n        const node = this.ref;\n        const coordinateStyle = toUpperCaseFirstChar(orientations[orientation].coordinate);\n        const directionStyle = orientations[orientation].direction;\n        // string conversion to the right property value\n        const clientCoordinateStyle = `client${coordinateStyle}`;\n        const coordinate = !castEvent.touches ? e[clientCoordinateStyle] : castEvent.touches[0][clientCoordinateStyle];\n        const direction = node.current!.getBoundingClientRect()[directionStyle];\n        const pos = orientations.horizontal.direction === 'right' ? direction - coordinate - grab : coordinate - direction - grab;\n        return this._getValueFromPosition(pos);\n    };\n\n    private _getPositionFromValue = (value: number): number => {\n        const { limit } = this.state;\n        const { min, max } = this.props;\n        const diffMaxMin = max - min;\n        const diffValMin = value - min;\n        const percentage = diffValMin / diffMaxMin;\n        return Math.round(percentage * limit);\n    };\n\n    /**\n     * Translate position of slider to slider value\n     * @param  {number} pos - Current position/coordinates of slider\n     * @return {number} value - Slider value\n     */\n    private _getValueFromPosition = (pos: number): number => {\n        const { limit } = this.state;\n        const { orientation, min, max, step } = this.props;\n\n        const percentage = clamp(pos, 0, limit) / (limit || 1);\n        const baseVal = step * Math.round((percentage * (max - min)) / step);\n        const value = orientation === 'horizontal' ? baseVal + min : max - baseVal;\n\n        return clamp(value, min, max);\n    };\n\n    /**\n     * Grab coordinates of slider\n     * @param  {Object} pos - Position object\n     * @return {Object} - Slider fill/handle coordinates\n     */\n    private _coordinates = (pos: number): IFillCoordinates => {\n        const { limit, grab } = this.state;\n        const { orientation } = this.props;\n        const value = this._getValueFromPosition(pos);\n        const position = this._getPositionFromValue(value);\n        const handlePos = orientation === 'horizontal' ? position + grab : position;\n        const fillPos = orientation === 'horizontal' ? handlePos : limit - handlePos;\n\n        return {\n            fill: fillPos,\n            handle: handlePos,\n            label: handlePos\n        };\n    };\n\n    private _handleOnChange(e: React.ChangeEvent<HTMLInputElement>): void {\n        e.stopPropagation();\n        const castTarget = e.target as HTMLInputElement;\n        const thumbInteractedWith = castTarget && this._getThumbFromProps(castTarget.id.replace('range',''));\n        const eventType = e.type;\n        thumbInteractedWith![0].value = parseInt(e.target.value, 10);\n        this._setSliderValue(thumbInteractedWith!, castTarget, eventType);\n    }\n\n    private _setSliderValue = (sliderThumb: ISliderThumbProps[], castTarget: HTMLElement, eventType: string): void => {\n        if (this.isRangeSlider) {\n            this.setState((_prevState: ISliderState) => {\n                return {\n                    sliderThumbs: { ...this.props.sliderThumbs }\n                };\n            },            () => {\n                this._getThumbAndPublishEvent(castTarget, EventType.Change, eventType);\n            });\n        } else {\n            this.setState((_prevState: ISliderState) => {\n                return {\n                    sliderThumbs: sliderThumb\n                };\n            },            () => {\n                this._getThumbAndPublishEvent(castTarget, EventType.Change, eventType);\n            });\n        }\n    };\n\n    private _getThumbFromProps(thumbId: string): ISliderThumbProps[] | null {\n        let thumbFound;\n\n        thumbFound = this.props.sliderThumbs.filter((thumb: ISliderThumbProps) => {\n            return thumb.id === thumbId;\n        });\n\n        return thumbFound.length > 0 ? thumbFound : null;\n    }\n\n    private _publishNotification = (\n        thumb: ISliderThumbProps | null,\n        delegate: (sliderNotification: Readonly<ISliderChangeNotification>) => void,\n        eventType: string\n    ): void => {\n        delegate({\n            id: (thumb && thumb.id) || '',\n            slider: this,\n            firstThumbValue: this.state.sliderThumbs[0].value,\n            secondThumbValue: (this.state.sliderThumbs[1] && this.state.sliderThumbs[1].value) || NaN,\n            eventType: eventType\n        });\n    };\n\n    private _getThumbAndPublishEvent = (element: HTMLElement, eventType: EventType, nativeEventType: string): void => {\n        let elmenentId = '';\n        if (element && element.id && eventType === EventType.Change) {\n            elmenentId = element.id.replace('range','');\n        }\n        const thumb = element && this._getThumbFromProps(elmenentId);\n\n        if (eventType === EventType.End) {\n            if (this.props.onChangeEnd) {\n                this._publishNotification(thumb && thumb[0], this.props.onChangeEnd, nativeEventType);\n            }\n        }\n        if (eventType === EventType.Start) {\n            if (this.props.onChangeStart) {\n                this._publishNotification(thumb && thumb[0], this.props.onChangeStart, nativeEventType);\n            }\n        }\n        if (eventType === EventType.Change) {\n            if (this.props.onChange) {\n                this._publishNotification(thumb && thumb[0], this.props.onChange, nativeEventType);\n            }\n        }\n    };\n\n    private _willThumbsCrossOver(\n        thumbPressed: ISliderThumbProps,\n        event: React.KeyboardEvent | React.MouseEvent | React.TouchEvent\n    ): boolean {\n        if (!this.isRangeSlider) {\n            return false;\n        } else {\n            let keycode = 0;\n            let checkCondition = false;\n\n            if (event.type === 'keydown') {\n                const castEvent = (event as unknown) as KeyboardEvent;\n                keycode = castEvent.keyCode;\n                if (\n                    (thumbPressed === this.props.sliderThumbs[1] && (keycode === 38 || keycode === 39)) ||\n                    (thumbPressed === this.props.sliderThumbs[0] && (keycode === 37 || keycode === 40))\n                ) {\n                    return false;\n                } else {\n                    checkCondition = true;\n                }\n            }\n            if (event.type === 'touchmove' || event.type === 'mousemove' || event.type === 'click') {\n                const value = this._position(event);\n                if (\n                    (this.state.sliderThumbs[1].value < value && thumbPressed.id === this.props.sliderThumbs[1].id) ||\n                    (this.state.sliderThumbs[0].value > value && thumbPressed.id === this.props.sliderThumbs[0].id)\n                ) {\n                    return false;\n                } else {\n                    checkCondition = true;\n                }\n            }\n\n            return checkCondition && this.props.sliderThumbs[1].value - this.props.step * 2 >= this.props.sliderThumbs[0].value\n                ? false\n                : true;\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"script"}