{"ast":null,"code":"/*!\r\n * Copyright (c) Microsoft Corporation.\r\n * All rights reserved. See LICENSE in the project root for license information.\r\n */import{getFallbackImageUrl}from'@msdyn365-commerce-modules/retail-actions';import{getPayloadObject,getTelemetryAttributes}from'@msdyn365-commerce-modules/utilities';import{PriceComponent}from'@msdyn365-commerce/components';import{Image}from'@msdyn365-commerce/core';import classNames from'classnames';import*as React from'react';import{Quantity}from'../../utilities/quantity';var CartLineItemFunctions={renderProductDimensions:function renderProductDimensions(Product,DimensionStrings){if(!Product||!Product.Dimensions){return[];}return Product.Dimensions.map(function(productDimension){if(productDimension.DimensionTypeValue===1){return/*#__PURE__*/React.createElement(\"div\",{key:\"\".concat(Product.RecordId,\"ProductDimensions1\"),className:'msc-cart-line__product-variant-item'},/*#__PURE__*/React.createElement(\"span\",{className:'msc-cart-line__product-variant-color'},DimensionStrings.colorString,\":\",/*#__PURE__*/React.createElement(\"span\",{className:'name'},productDimension.DimensionValue&&productDimension.DimensionValue.Value)));}if(productDimension.DimensionTypeValue===2){return/*#__PURE__*/React.createElement(\"div\",{key:\"\".concat(Product.RecordId,\"ProductDimensions2\"),className:'msc-cart-line__product-variant-item'},/*#__PURE__*/React.createElement(\"span\",{className:'msc-cart-line__product-configuration'},DimensionStrings.configString,\":\",/*#__PURE__*/React.createElement(\"span\",{className:'name'},productDimension.DimensionValue&&productDimension.DimensionValue.Value)));}if(productDimension.DimensionTypeValue===3){return/*#__PURE__*/React.createElement(\"div\",{key:\"\".concat(Product.RecordId,\"ProductDimensions3\"),className:'msc-cart-line__product-variant-item'},/*#__PURE__*/React.createElement(\"span\",{className:'msc-cart-line__product-variant-size'},DimensionStrings.sizeString,\":\",/*#__PURE__*/React.createElement(\"span\",{className:'name'},productDimension.DimensionValue&&productDimension.DimensionValue.Value)));}if(productDimension.DimensionTypeValue===4){return/*#__PURE__*/React.createElement(\"div\",{key:\"\".concat(Product.RecordId,\"ProductDimensions4\"),className:'msc-cart-line__product-variant-item'},/*#__PURE__*/React.createElement(\"span\",{className:'msc-cart-line__product-variant-style'},DimensionStrings.styleString,\":\",/*#__PURE__*/React.createElement(\"span\",{className:'name'},productDimension.DimensionValue&&productDimension.DimensionValue.Value)));}return null;});},renderDiscountLines:function renderDiscountLines(props){if(!props.data.cartLine.DiscountLines||props.data.cartLine.DiscountLines.length===0){return null;}return props.data.cartLine.DiscountLines.map(function(discountLine,index){return/*#__PURE__*/React.createElement(\"div\",{key:discountLine.OfferId||index,className:'msc-cart-line-item-product-discount'},/*#__PURE__*/React.createElement(\"span\",null,discountLine.OfferName?discountLine.OfferName:'',\":\",\" \".concat(props.resources.discountStringText||'Discount',\" \")),/*#__PURE__*/React.createElement(\"span\",{className:'cart-line-item-product-discount-price'},/*#__PURE__*/React.createElement(PriceComponent,{data:props.isSalesLine?{price:{CustomerContextualPrice:props.data.cartLine.PeriodicDiscount}}:{price:{CustomerContextualPrice:props.data.cartLine.DiscountAmountWithoutTax,BasePrice:props.data.cartLine.DiscountAmount}},context:props.context,id:props.id,typeName:props.typeName})),/*#__PURE__*/React.createElement(\"span\",null,\" (\".concat(discountLine.Percentage!==undefined?discountLine.Percentage:'',\"%)\")));});},renderInventoryLabel:function renderInventoryLabel(props){if(!props.inventoryInformationLabel){return null;}var inventoryCssName=props.inventoryLabelClassName?\"msc-cart-line__product-inventory-label \".concat(props.inventoryLabelClassName):'msc-cart-line__product-inventory-label';return/*#__PURE__*/React.createElement(\"span\",{className:inventoryCssName},props.inventoryInformationLabel);},renderShippingLabel:function renderShippingLabel(props){var _props$context$reques;var pickupDeliveryModeCode=(_props$context$reques=props.context.request.channel)===null||_props$context$reques===void 0?void 0:_props$context$reques.PickupDeliveryModeCode;var cartline=props.data.cartLine;var hasShippingMethod=!!cartline.DeliveryMode&&cartline.DeliveryMode!==pickupDeliveryModeCode?true:false;if(!hasShippingMethod){return undefined;}var shippingChargeLines=(cartline.ChargeLines||[]).filter(function(chargeLine){return chargeLine.IsShipping;});if(shippingChargeLines.length===0){return undefined;}var freightFee=shippingChargeLines.reduce(function(chargeTotal,chargeLine){return chargeTotal+(chargeLine.CalculatedAmount||0);},0);var priceComponent=/*#__PURE__*/React.createElement(PriceComponent,{data:{price:{CustomerContextualPrice:freightFee}},freePriceText:'Free',context:props.context,id:props.id,typeName:props.typeName,className:'msc-cart-line__freight-actual'});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"label\",{className:'msc-cart-line__freight-label'},\"\".concat(props.resources.shippingChargesText,\":\")),/*#__PURE__*/React.createElement(\"span\",{className:'shipping-value'},priceComponent));},renderOtherCharges:function renderOtherCharges(props){var _cartline$ChargeLines;var cartline=props.data.cartLine;var otherCharges=(_cartline$ChargeLines=cartline.ChargeLines)===null||_cartline$ChargeLines===void 0?void 0:_cartline$ChargeLines.filter(function(chargeline){return!chargeline.IsShipping;});return otherCharges&&otherCharges.map(function(otherCharge,key){return/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__other-charges',key:key},/*#__PURE__*/React.createElement(\"label\",{className:'msc-cart-line__other-charges-label'},\"\".concat(otherCharge.Description,\":\")),/*#__PURE__*/React.createElement(\"span\",{className:'other-charge-value'},/*#__PURE__*/React.createElement(PriceComponent,{data:{price:{CustomerContextualPrice:otherCharge.CalculatedAmount}},context:props.context,id:props.id,typeName:props.typeName,className:'msc-cart-line__other-charges-actual'})));})||undefined;}};var CartLine=function CartLine(props){var isSalesLine=props.isSalesLine,productUrl=props.productUrl,resources=props.resources;var product=props.data.product;var destructDimensionStrings={sizeString:resources.sizeString,colorString:resources.colorString,styleString:resources.styleString,configString:resources.configString};var fallbackImageUrl=getFallbackImageUrl(product.ItemId,props.context.actionContext.requestContext.apiSettings);var productDimensions=CartLineItemFunctions.renderProductDimensions(product,destructDimensionStrings);var renderDisountLines=CartLineItemFunctions.renderDiscountLines(props);var renderInventoryLabel=CartLineItemFunctions.renderInventoryLabel(props);var renderShippingLabel=CartLineItemFunctions.renderShippingLabel(props);var renderOtherCharges=CartLineItemFunctions.renderOtherCharges(props);var payLoad=getPayloadObject('click',props.telemetryContent,'',product.RecordId.toString());var prodAttribute=getTelemetryAttributes(props.telemetryContent,payLoad);var onChange=function onChange(newValue){if(props.quantityOnChange){props.quantityOnChange(props.data.cartLine,newValue);}};var _generateErrorMessage=function _generateErrorMessage(){if(props.errorMessage){return/*#__PURE__*/React.createElement(\"div\",{className:'msc-alert__header'},/*#__PURE__*/React.createElement(\"span\",{className:'msi-exclamation-triangle'}),/*#__PURE__*/React.createElement(\"span\",null,props.errorMessage));}return null;};var _generateQuantityandPrice=function _generateQuantityandPrice(){var nodes=[];if(props.isOutOfStock){var errorMessage=_generateErrorMessage();if(errorMessage){return[errorMessage];}return null;}if(props.isQuantityEditable){nodes.push(/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__product-quantity'},/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__product-quantity-label'},resources.quantityDisplayString),_generateErrorMessage(),/*#__PURE__*/React.createElement(Quantity,{id:\"msc-cart-line__quantity_\".concat(props.data.product.RecordId),max:props.maxQuantity||10,currentCount:props.currentQuantity,onChange:onChange,inputQuantityAriaLabel:resources.inputQuantityAriaLabel,decrementButtonAriaLabel:resources.decrementButtonAriaLabel,incrementButtonAriaLabel:resources.incrementButtonAriaLabel,key:props.data.cartLine.LineId,disabled:!props.isCartStateReady,telemetryContent:props.telemetryContent})));}else{nodes.push(/*#__PURE__*/React.createElement(\"div\",{className:classNames('msc-cart-line__quantity',{'single-quantity':props.data.cartLine.Quantity===1})},/*#__PURE__*/React.createElement(\"label\",{className:'quantity-label'},resources.quantityDisplayString,\":\"),_generateErrorMessage(),/*#__PURE__*/React.createElement(\"span\",{className:'quantity-value'},props.data.cartLine.Quantity)));}nodes.push(/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__product-savings'},/*#__PURE__*/React.createElement(PriceComponent,{data:isSalesLine?{price:{CustomerContextualPrice:props.data.cartLine.NetAmount,BasePrice:props.data.cartLine.Price}}:{price:{CustomerContextualPrice:props.data.cartLine.NetAmountWithoutTax,BasePrice:props.data.cartLine.NetPrice}},context:props.context,id:props.id,typeName:props.typeName,className:'msc-cart-line__product-savings-actual',originalPriceText:resources.originalPriceText,currentPriceText:resources.currentPriceText}),props.data.cartLine.DiscountAmount&&props.data.cartLine.DiscountAmount>0&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{className:'msc-cart-line__product-savings-label'},\" \".concat(props.resources.discountStringText||'Discount',\" \")),/*#__PURE__*/React.createElement(PriceComponent,{data:props.isSalesLine?{price:{CustomerContextualPrice:props.data.cartLine.PeriodicDiscount}}:{price:{CustomerContextualPrice:props.data.cartLine.DiscountAmountWithoutTax,BasePrice:props.data.cartLine.DiscountAmount}},context:props.context,id:props.id,typeName:props.typeName,className:'msc-cart-line__product-savings-text'}))||null));return nodes;};return/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line'},/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__product-image'},/*#__PURE__*/React.createElement(Image,{src:props.primaryImageUrl||'',fallBackSrc:fallbackImageUrl,altText:product.Name,gridSettings:props.gridSettings,imageSettings:props.imageSettings,loadFailureBehavior:'empty'})),/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__content'},/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__product'},/*#__PURE__*/React.createElement(\"a\",Object.assign({className:'msc-cart-line__product-title',href:productUrl},prodAttribute),product.Name),productDimensions.length>0?/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__product-variants'},productDimensions):'',/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__product-price'},/*#__PURE__*/React.createElement(PriceComponent,{data:isSalesLine?{price:{CustomerContextualPrice:props.data.cartLine.NetAmount,BasePrice:props.data.cartLine.Price}}:{price:{CustomerContextualPrice:props.data.cartLine.NetAmountWithoutTax,BasePrice:props.data.cartLine.NetPrice}},context:props.context,id:props.id,typeName:props.typeName,className:'discount-value'})),renderDisountLines,renderInventoryLabel,props.showShippingChargesForLineItems&&/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__freight'},renderShippingLabel),renderOtherCharges),_generateQuantityandPrice()));};export default CartLine;","map":{"version":3,"sources":["modules/fabrikam/views/components/cartlineitem.component.tsx"],"names":[],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { getFallbackImageUrl } from '@msdyn365-commerce-modules/retail-actions';\nimport { getPayloadObject, getTelemetryAttributes, ITelemetryContent } from '@msdyn365-commerce-modules/utilities';\nimport { PriceComponent } from '@msdyn365-commerce/components';\nimport { IComponentProps, IGridSettings, IImageSettings, Image } from '@msdyn365-commerce/core';\nimport { SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport { CartLine, SalesLine } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { Quantity } from '../../utilities/quantity';\n\n/**\n * ICartlineResourceString: Interface for specifying the\n * resource strings that the component needs\n */\nexport interface ICartlineResourceString {\n    /** Display string for discount label */\n    discountStringText: string;\n    /** String for size key  */\n    sizeString: string;\n    /** String for color key  */\n    colorString: string;\n    /** String associated with the configuration product dimension  */\n    configString: string;\n    /** String for style key  */\n    styleString: string;\n    /** Display string for quantity label  */\n    quantityDisplayString: string;\n    /** Display string for quantity label  */\n    inputQuantityAriaLabel: string;\n    /** Aria label for the decrement button in quantity component  */\n    decrementButtonAriaLabel: string;\n    /** Aria label for the increment button in quantity component  */\n    incrementButtonAriaLabel: string;\n    /** original text screenreader */\n    originalPriceText: string;\n    /** current text screenreader  */\n    currentPriceText: string;\n    /** shipping Charges Text  */\n    shippingChargesText: string;\n}\n\ninterface ICartLineData {\n    cartLine: CartLine | SalesLine;\n    product: SimpleProduct;\n}\n\n/**\n * ICartLineProps: The props required to render cartLineitem\n */\nexport interface ICartLineProps extends IComponentProps<ICartLineData> {\n    /** The flag to change the quantity component from interactible to static  */\n    disableQuantityInteractivity?: boolean;\n    /** The primary image url  */\n    primaryImageUrl?: string;\n    /** The product url  */\n    productUrl?: string;\n    /** GridSettings for the product image in cartLine  */\n    gridSettings: IGridSettings;\n    /** ImageSettings for the product image in cartLine  */\n    imageSettings: IImageSettings;\n    /** Boolean flag to indicate if the item is out of stock  */\n    isOutOfStock?: boolean;\n    /** Flag to make quantity section editable  */\n    isQuantityEditable?: boolean;\n    /** Max quantity for line item  */\n    maxQuantity?: number;\n    /** Current quantity for line item  */\n    currentQuantity?: number;\n    /** Resource string for the component  */\n    resources: ICartlineResourceString;\n    /** SalesLine flag  */\n    isSalesLine?: boolean;\n    /** Error message to show in place of quantity */\n    errorMessage?: string;\n    /** Inventory information label  */\n    inventoryInformationLabel?: string;\n    /** Inventory information class name  */\n    inventoryLabelClassName?: string;\n    /** Flag to show/hide shipping charges for line items  */\n    showShippingChargesForLineItems?: boolean;\n    /** Boolean flag to indicate if cart state status is ready  */\n    isCartStateReady?: boolean;\n    /** The telemetry content */\n    telemetryContent?: ITelemetryContent;\n    /** Quantity onChange callback  */\n    quantityOnChange?(cartLine: CartLine, newQuantity: number): void;\n}\n\ninterface IDimensionStrings {\n    /** String for size key  */\n    sizeString: string;\n    /** String for color key  */\n    colorString: string;\n    /** String associated with the configuration product dimension  */\n    configString: string;\n    /** String for style key  */\n    styleString: string;\n}\n\nconst CartLineItemFunctions = {\n    renderProductDimensions: (Product: SimpleProduct, DimensionStrings: IDimensionStrings) => {\n        if (!Product || !Product.Dimensions) {\n            return [];\n        }\n\n        return Product.Dimensions.map(productDimension => {\n\n            if (productDimension.DimensionTypeValue === 1) {\n                return (\n                    <div key={`${Product.RecordId}ProductDimensions1`} className='msc-cart-line__product-variant-item'>\n                        <span className='msc-cart-line__product-variant-color'>{DimensionStrings.colorString}:\n                        <span className='name'>{productDimension.DimensionValue && productDimension.DimensionValue.Value}</span></span>\n                    </div>\n                );\n            }\n\n            if (productDimension.DimensionTypeValue === 2) {\n                return (\n                    <div key={`${Product.RecordId}ProductDimensions2`} className='msc-cart-line__product-variant-item'>\n                        <span className='msc-cart-line__product-configuration'>{DimensionStrings.configString}:\n                        <span className='name'>{productDimension.DimensionValue && productDimension.DimensionValue.Value}</span></span>\n                    </div>\n                );\n            }\n\n            if (productDimension.DimensionTypeValue === 3) {\n                return (\n                    <div key={`${Product.RecordId}ProductDimensions3`} className='msc-cart-line__product-variant-item'>\n                        <span className='msc-cart-line__product-variant-size'>{DimensionStrings.sizeString}:\n                        <span className='name'>{productDimension.DimensionValue && productDimension.DimensionValue.Value}</span></span>\n                    </div>\n                );\n            }\n\n            if (productDimension.DimensionTypeValue === 4) {\n                return (\n                    <div key={`${Product.RecordId}ProductDimensions4`} className='msc-cart-line__product-variant-item'>\n                        <span className='msc-cart-line__product-variant-style'>{DimensionStrings.styleString}:\n                        <span className='name'>{productDimension.DimensionValue && productDimension.DimensionValue.Value}</span></span>\n                    </div>\n                );\n            }\n            return null;\n        });\n    },\n    renderDiscountLines: (props: ICartLineProps) => {\n\n        if (!props.data.cartLine.DiscountLines || props.data.cartLine.DiscountLines.length === 0) {\n            return null;\n        }\n        return props.data.cartLine.DiscountLines.map((discountLine, index) => {\n            return (\n                <div key={discountLine.OfferId || index} className='msc-cart-line-item-product-discount'>\n                    <span>\n                        {discountLine.OfferName ? discountLine.OfferName : ''}:\n                        {` ${props.resources.discountStringText || 'Discount'} `}\n                    </span>\n                    <span className={'cart-line-item-product-discount-price'}>\n                        <PriceComponent\n                            data={props.isSalesLine ? {\n                                price: {\n                                    // @ts-ignore\n                                    CustomerContextualPrice: props.data.cartLine.PeriodicDiscount\n                                }\n                            } : {\n                                    price: {\n                                        CustomerContextualPrice: props.data.cartLine.DiscountAmountWithoutTax,\n                                        BasePrice: props.data.cartLine.DiscountAmount\n                                    }\n                                }}\n                            context={props.context}\n                            id={props.id}\n                            typeName={props.typeName}\n                        />\n                    </span>\n                    <span>\n                        {` (${discountLine.Percentage !== undefined ? discountLine.Percentage : ''}%)`}\n                    </span>\n                </div>\n            );\n        });\n    },\n    renderInventoryLabel: (props: ICartLineProps) => {\n        if (!props.inventoryInformationLabel) {\n            return null;\n        }\n        const inventoryCssName = props.inventoryLabelClassName ? `msc-cart-line__product-inventory-label ${props.inventoryLabelClassName}` : 'msc-cart-line__product-inventory-label';\n        return (\n            <span className={inventoryCssName}>{props.inventoryInformationLabel}</span>\n        );\n    },\n    renderShippingLabel: (props: ICartLineProps) => {\n        const pickupDeliveryModeCode = props.context.request.channel?.PickupDeliveryModeCode;\n        const cartline = props.data.cartLine;\n        const hasShippingMethod = !!cartline.DeliveryMode && cartline.DeliveryMode !== pickupDeliveryModeCode ? true : false;\n        if (!hasShippingMethod) {\n            return undefined;\n        }\n\n        const shippingChargeLines = (cartline.ChargeLines || []).filter(chargeLine => chargeLine.IsShipping);\n\n        if (shippingChargeLines.length === 0) {\n            return undefined;\n        }\n\n        const freightFee = shippingChargeLines.reduce((chargeTotal, chargeLine) => {\n            return chargeTotal + (chargeLine.CalculatedAmount || 0);\n        },                                            0);\n\n        const priceComponent = (\n            <PriceComponent\n                data={{\n                    price: {\n                        // @ts-ignore\n                        CustomerContextualPrice: freightFee\n                    }\n                }}\n                freePriceText={'Free'}\n                context={props.context}\n                id={props.id}\n                typeName={props.typeName}\n                className='msc-cart-line__freight-actual'\n            />\n        );\n        return (\n            <>\n                <label className='msc-cart-line__freight-label'>{`${props.resources.shippingChargesText}:`}</label>\n                <span className='shipping-value'>\n                    {priceComponent}\n                </span>\n            </>\n        );\n    },\n    renderOtherCharges: (props: ICartLineProps) => {\n        const cartline = props.data.cartLine;\n        const otherCharges = cartline.ChargeLines?.filter((chargeline) => !chargeline.IsShipping);\n\n        return otherCharges && otherCharges.map((otherCharge, key) => {\n            return (\n                <div className='msc-cart-line__other-charges' key={key}>\n                    <label className='msc-cart-line__other-charges-label'>{`${otherCharge.Description}:`}</label>\n                    <span className='other-charge-value'>\n                        <PriceComponent\n                            data={{\n                                price: {\n                                    // @ts-ignore\n                                    CustomerContextualPrice: otherCharge.CalculatedAmount\n                                }\n                            }}\n                            context={props.context}\n                            id={props.id}\n                            typeName={props.typeName}\n                            className='msc-cart-line__other-charges-actual'\n                        />\n                    </span>\n                </div>\n            );\n        }) || undefined;\n    }\n};\n\n// tslint:disable-next-line:max-func-body-length\nconst CartLine: React.FC<ICartLineProps> = (props: ICartLineProps) => {\n    const { isSalesLine, productUrl, resources } = props;\n    const { product } = props.data;\n\n    const destructDimensionStrings = {\n        sizeString: resources.sizeString,\n        colorString: resources.colorString,\n        styleString: resources.styleString,\n        configString: resources.configString\n    };\n\n    const fallbackImageUrl = getFallbackImageUrl(product.ItemId, props.context.actionContext.requestContext.apiSettings);\n    const productDimensions = CartLineItemFunctions.renderProductDimensions(product, destructDimensionStrings);\n    const renderDisountLines = CartLineItemFunctions.renderDiscountLines(props);\n    const renderInventoryLabel = CartLineItemFunctions.renderInventoryLabel(props);\n    const renderShippingLabel = CartLineItemFunctions.renderShippingLabel(props);\n    const renderOtherCharges = CartLineItemFunctions.renderOtherCharges(props);\n    const payLoad = getPayloadObject('click', props.telemetryContent!, '', product.RecordId.toString());\n    const prodAttribute = getTelemetryAttributes(props.telemetryContent!, payLoad);\n\n    const onChange = (newValue: number) => {\n        if (props.quantityOnChange) {\n            props.quantityOnChange(props.data.cartLine, newValue);\n        }\n    };\n\n    const _generateErrorMessage = (): JSX.Element | null => {\n        if (props.errorMessage) {\n            return (\n                <div className='msc-alert__header'>\n                    <span className='msi-exclamation-triangle' />\n                    <span>{props.errorMessage}</span>\n                </div>\n            );\n        }\n\n        return null;\n    };\n\n    const _generateQuantityandPrice = (): JSX.Element[] | null => {\n        const nodes = [];\n        if (props.isOutOfStock) {\n            const errorMessage = _generateErrorMessage();\n\n            if (errorMessage) {\n                return [errorMessage];\n            }\n\n            return null;\n        }\n        if (props.isQuantityEditable) {\n            nodes.push(\n                <div className='msc-cart-line__product-quantity'>\n                    <div className='msc-cart-line__product-quantity-label'>{resources.quantityDisplayString}</div>\n\n                    {_generateErrorMessage()}\n\n                    <Quantity\n                        id={`msc-cart-line__quantity_${props.data.product.RecordId}`}\n                        max={props.maxQuantity || 10}\n                        currentCount={props.currentQuantity}\n                        onChange={onChange}\n                        inputQuantityAriaLabel={resources.inputQuantityAriaLabel}\n                        decrementButtonAriaLabel={resources.decrementButtonAriaLabel}\n                        incrementButtonAriaLabel={resources.incrementButtonAriaLabel}\n                        key={props.data.cartLine.LineId}\n                        disabled={!props.isCartStateReady}\n                        telemetryContent={props.telemetryContent}\n                    />\n                </div>\n            );\n        } else {\n            nodes.push(\n                <div className={classNames('msc-cart-line__quantity', { 'single-quantity': props.data.cartLine.Quantity === 1 })}>\n                    <label className='quantity-label'>{resources.quantityDisplayString}:</label>\n\n                    {_generateErrorMessage()}\n\n                    <span className='quantity-value'>{props.data.cartLine.Quantity}</span>\n                </div>\n            );\n        }\n\n        nodes.push(\n            <div className='msc-cart-line__product-savings'>\n                <PriceComponent\n                    data={isSalesLine ? {\n                        price: {\n                            // @ts-ignore\n                            CustomerContextualPrice: props.data.cartLine.NetAmount,\n                            BasePrice: props.data.cartLine.Price\n                        }\n                    } : {\n                            price: {\n                                CustomerContextualPrice: props.data.cartLine.NetAmountWithoutTax,\n                                BasePrice: props.data.cartLine.NetPrice\n                            }\n                        }}\n                    context={props.context}\n                    id={props.id}\n                    typeName={props.typeName}\n                    className='msc-cart-line__product-savings-actual'\n                    originalPriceText={resources.originalPriceText}\n                    currentPriceText={resources.currentPriceText}\n                />\n                {\n                    props.data.cartLine.DiscountAmount && props.data.cartLine.DiscountAmount > 0 &&\n                    <>\n                        <span className='msc-cart-line__product-savings-label'>{` ${props.resources.discountStringText || 'Discount'} `}</span>\n                        <PriceComponent\n                            data={props.isSalesLine ? {\n                                price: {\n                                    // @ts-ignore\n                                    CustomerContextualPrice: props.data.cartLine.PeriodicDiscount\n                                }\n                            } : {\n                                    price: {\n                                        CustomerContextualPrice: props.data.cartLine.DiscountAmountWithoutTax,\n                                        BasePrice: props.data.cartLine.DiscountAmount\n                                    }\n                                }}\n                            context={props.context}\n                            id={props.id}\n                            typeName={props.typeName}\n                            className='msc-cart-line__product-savings-text'\n                        />\n                    </> ||\n                    null\n                }\n            </div>\n        );\n\n        return nodes;\n    };\n\n    return (\n        <div className='msc-cart-line'>\n            <div className='msc-cart-line__product-image'>\n                <Image src={props.primaryImageUrl || ''} fallBackSrc={fallbackImageUrl} altText={product.Name} gridSettings={props.gridSettings} imageSettings={props.imageSettings} loadFailureBehavior='empty' />\n            </div>\n            <div className='msc-cart-line__content'>\n                <div className='msc-cart-line__product'>\n                    <a className='msc-cart-line__product-title' href={productUrl} {...prodAttribute} >{product.Name}</a>\n                    {productDimensions.length > 0 ?\n                        <div className='msc-cart-line__product-variants'>{productDimensions}</div> :\n                        ''\n                    }\n                    <div className='msc-cart-line__product-price'>\n                        <PriceComponent\n                            data={isSalesLine ? {\n                                price: {\n                                    // @ts-ignore\n                                    CustomerContextualPrice: props.data.cartLine.NetAmount,\n                                    BasePrice: props.data.cartLine.Price\n                                }\n                            } : {\n                                    price: {\n                                        CustomerContextualPrice: props.data.cartLine.NetAmountWithoutTax,\n                                        BasePrice: props.data.cartLine.NetPrice\n                                    }\n                                }}\n                            context={props.context}\n                            id={props.id}\n                            typeName={props.typeName}\n                            className='discount-value'\n                        />\n                    </div>\n                    {renderDisountLines}\n                    {renderInventoryLabel}\n                    {props.showShippingChargesForLineItems && <div className='msc-cart-line__freight'>\n                        {renderShippingLabel}\n                    </div>}\n                    {renderOtherCharges}\n                </div>\n                {\n                    _generateQuantityandPrice()\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default CartLine;"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}