{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import{removeDiscountCodesAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/CartsDataActions.g';export default function removeAllPromoCodes(_x,_x2){return _removeAllPromoCodes.apply(this,arguments);}function _removeAllPromoCodes(){_removeAllPromoCodes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(cart,actionContext){var promoCodes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(cart){_context.next=2;break;}return _context.abrupt(\"return\",{cart:undefined,status:'FAILED'});case 2:if(!(cart.Coupons&&cart.Coupons.length>0)){_context.next=5;break;}promoCodes=cart.Coupons.map(function(coupon){return coupon.Code||'';});return _context.abrupt(\"return\",removeDiscountCodesAsync({callerContext:actionContext},cart.Id,promoCodes).then(function(newCart){return{cart:newCart,status:'SUCCESS'};})[\"catch\"](function(error){actionContext.telemetry.warning(error);return{cart:undefined,status:'FAILED'};}));case 5:return _context.abrupt(\"return\",{cart:cart,status:'SUCCESS'});case 6:case\"end\":return _context.stop();}}},_callee);}));return _removeAllPromoCodes.apply(this,arguments);}","map":{"version":3,"sources":["cart-state/remove-all-promo-codes.ts"],"names":[],"mappings":"uIACA,OAAS,wBAAT,KAAyC,qEAAzC,CAIA,uBAA8B,CAAA,mBAA9B,4D,6GAAe,iBAAmC,IAAnC,CAAqE,aAArE,oIACN,IADM,yDAEA,CAAE,IAAI,CAAE,SAAR,CAAmB,MAAM,CAAE,QAA3B,CAFA,cAKP,IAAI,CAAC,OAAL,EAAgB,IAAI,CAAC,OAAL,CAAa,MAAb,CAAsB,CAL/B,0BAMD,UANC,CAMY,IAAI,CAAC,OAAL,CAAa,GAAb,CAAiB,SAAA,MAAM,CAAG,CAAG,MAAO,CAAA,MAAM,CAAC,IAAP,EAAe,EAAtB,CAA2B,CAAxD,CANZ,iCAQA,wBAAwB,CAAC,CAAE,aAAa,CAAE,aAAjB,CAAD,CAAmC,IAAI,CAAC,EAAxC,CAA4C,UAA5C,CAAxB,CACF,IADE,CACG,SAAA,OAAO,CAAG,CACZ,MAAmC,CAAE,IAAI,CAAE,OAAR,CAAiB,MAAM,CAAE,SAAzB,CAAnC,CACH,CAHE,WAGM,SAAA,KAAK,CAAG,CACb,aAAa,CAAC,SAAd,CAAwB,OAAxB,CAAgC,KAAhC,EAEA,MAAmC,CAAE,IAAI,CAAE,SAAR,CAAmB,MAAM,CAAE,QAA3B,CAAnC,CACH,CAPE,CARA,yCAkBwB,CAAE,IAAI,CAAE,IAAR,CAAc,MAAM,CAAE,SAAtB,CAlBxB,wD","sourcesContent":["import { IActionContext } from '@msdyn365-commerce/core';\nimport { removeDiscountCodesAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/CartsDataActions.g';\nimport { Cart } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport { ICartActionResultWithCart } from './cart-action-result';\n\nexport default async function removeAllPromoCodes(cart: Readonly<Cart | undefined>, actionContext: IActionContext): Promise<ICartActionResultWithCart> {\n    if (!cart) {\n        return { cart: undefined, status: 'FAILED'};\n    }\n\n    if (cart.Coupons && cart.Coupons.length > 0) {\n        const promoCodes = cart.Coupons.map(coupon => { return coupon.Code || ''; });\n\n        return removeDiscountCodesAsync({ callerContext: actionContext }, cart.Id, promoCodes)\n            .then(newCart => {\n                return <ICartActionResultWithCart> { cart: newCart, status: 'SUCCESS' };\n            }).catch(error => {\n                actionContext.telemetry.warning(error);\n\n                return <ICartActionResultWithCart> { cart: undefined, status: 'FAILED' };\n            });\n    }\n\n    return <ICartActionResultWithCart> { cart: cart, status: 'SUCCESS' };\n}"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}