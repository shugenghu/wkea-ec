{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import{getTelemetryObject}from'@msdyn365-commerce-modules/utilities';import classnames from'classnames';import*as React from'react';var CarouselModule=/*#__PURE__*/function(_React$PureComponent){_inherits(CarouselModule,_React$PureComponent);var _super=_createSuper(CarouselModule);function CarouselModule(props,state){var _this;_classCallCheck(this,CarouselModule);_this=_super.call(this,props);_this._handleDismissCarousel=function(){if(_this.props.context&&_this.props.context.request&&_this.props.context.request.cookies){_this.props.context.request.cookies.set(\"CarouselDismiss_\".concat(_this.props.id),'true');_this.setState({dismissCarousel:true});}};_this._next=function(){var slots=_this.props.slots;var nextIndex=_this.state.activeIndex===(slots&&slots.content&&slots.content.length-1)?0:_this.state.activeIndex+1;if(_this.animating){_this.setState({closeNow:true,activeIndex:nextIndex});}else{_this.setState({activeIndex:nextIndex});}};_this._previous=function(){var slots=_this.props.slots&&_this.props.slots.content;var nextIndex=_this.state.activeIndex===0?slots?slots.length-1:0:_this.state.activeIndex-1;if(_this.animating){_this.setState({closeNow:true,activeIndex:nextIndex});}else{_this.setState({activeIndex:nextIndex});}};_this._onExiting=function(){_this.animating=true;};_this._onExited=function(){_this.animating=false;_this.setState({closeNow:false});};_this._goToIndex=function(newIndex){if(_this.animating){return;}_this.setState({activeIndex:newIndex});};_this.state={activeIndex:0,closeNow:false,dismissCarousel:false};_this.animating=false;_this.telemetryContent=getTelemetryObject(_this.props.context.request.telemetryPageName,_this.props.friendlyName,_this.props.telemetry);return _this;}_createClass(CarouselModule,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.context&&this.props.context.request&&this.props.context.request.cookies){if(this.props.context.request.cookies.get(\"CarouselDismiss_\".concat(this.props.id))===undefined){this.props.context.request.cookies.set(\"CarouselDismiss_\".concat(this.props.id),'false');this.setState({dismissCarousel:false});}}}},{key:\"render\",value:function render(){if(this.state.dismissCarousel){return null;}var className=this.props.config.className;var viewProps=_objectSpread(_objectSpread(_objectSpread({},this.props),this.state),{},{telemetryContent:this.telemetryContent,carouselContainer:{moduleProps:this.props,className:classnames('ms-carousel',className)},closeAnimation:this.state.closeNow?'close-now':'',next:this._next,previous:this._previous,onIndicatorsClickHandler:this._goToIndex,handleDismissCarousel:this._handleDismissCarousel,handleOnExited:this._onExited,handleOnExiting:this._onExiting});return this.props.renderView(viewProps);}}]);return CarouselModule;}(React.PureComponent);export default CarouselModule;","map":{"version":3,"sources":["modules/carousel/carousel.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getTelemetryObject, IModuleProps, ITelemetryContent } from '@msdyn365-commerce-modules/utilities';\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport { ICarouselData } from './carousel.data';\nimport { ICarouselProps  } from './carousel.props.autogenerated';\nimport { ICarouselState } from './carousel.state';\n\nexport interface ICarouselViewProps extends ICarouselProps<{}>, ICarouselState {\n    closeAnimation: string;\n    carouselContainer: IModuleProps;\n    telemetryContent: ITelemetryContent;\n    next(): void;\n    previous(): void;\n    onIndicatorsClickHandler():void;\n    handleDismissCarousel(): void;\n    handleOnExited(): void;\n    handleOnExiting(): void;\n}\n\n/**\n *\n * CarouselModule component\n * @extends {React.PureComponent<ICarouselProps<ICarouselData>>}\n */\nclass CarouselModule extends React.PureComponent<ICarouselProps<ICarouselData>, ICarouselState> {\n    private animating: boolean;\n    private telemetryContent: ITelemetryContent;\n\n    constructor(props: ICarouselProps<ICarouselData>, state: ICarouselState) {\n        super(props);\n        this.state = { activeIndex: 0, closeNow: false, dismissCarousel: false };\n        this.animating = false;\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!,\n                                                   this.props.friendlyName,\n                                                   this.props.telemetry);\n    }\n\n    public componentDidMount(): void {\n        if(this.props.context && this.props.context.request && this.props.context.request.cookies) {\n            if (this.props.context.request.cookies.get(`CarouselDismiss_${this.props.id}`) === undefined) {\n                this.props.context.request.cookies.set(`CarouselDismiss_${this.props.id}`, 'false');\n                this.setState({ dismissCarousel: false });\n            }\n        }\n    }\n\n    public render(): JSX.Element | null {\n        if (this.state.dismissCarousel) {\n            return null;\n        }\n\n        const { className } = this.props.config;\n\n        const viewProps = {\n            // Context for telemetry and raw data for C1 to do customization\n            // Including computed data, state data and methods\n            ...this.props,\n            ...this.state,\n            telemetryContent: this.telemetryContent,\n            carouselContainer: {\n                moduleProps: this.props,\n                className:  classnames('ms-carousel', className)\n            },\n            closeAnimation: this.state.closeNow ? 'close-now' : '',\n            next: this._next,\n            previous: this._previous,\n            onIndicatorsClickHandler: this._goToIndex,\n            handleDismissCarousel: this._handleDismissCarousel,\n            handleOnExited: this._onExited,\n            handleOnExiting: this._onExiting};\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    /**\n     * function implementation to dismiss the Carousel\n     */\n    private _handleDismissCarousel = (): void => {\n        if(this.props.context && this.props.context.request && this.props.context.request.cookies) {\n            this.props.context.request.cookies.set(`CarouselDismiss_${this.props.id}`, 'true');\n            this.setState({ dismissCarousel: true });\n        }\n    }\n\n    /**\n     * function implementation to move to next slide\n     */\n    private _next = (): void => {\n        const { slots } = this.props;\n        const nextIndex = this.state.activeIndex === (slots && slots.content && slots.content.length - 1) ? 0 : this.state.activeIndex + 1;\n\n        if (this.animating) {\n            this.setState({ closeNow: true,  activeIndex: nextIndex });\n        } else {\n            this.setState({ activeIndex: nextIndex });\n        }\n    }\n\n    /**\n     * function implementation to move to previous slide\n     */\n    private _previous = (): void => {\n        const slots = this.props.slots && this.props.slots.content;\n        const nextIndex = this.state.activeIndex === 0 ? (slots ? slots.length - 1 : 0) : this.state.activeIndex - 1;\n\n        if (this.animating) {\n            this.setState({ closeNow: true,  activeIndex: nextIndex });\n        } else {\n            this.setState({ activeIndex: nextIndex });\n        }\n    }\n\n    private _onExiting = (): void => {\n        this.animating = true;\n    }\n\n    private _onExited = (): void => {\n        this.animating = false;\n        this.setState({ closeNow: false });\n    }\n\n    /**\n     * function implementation to move to a given slide\n     */\n    private _goToIndex = (newIndex: number): void => {\n        if (this.animating) { return; }\n        this.setState({ activeIndex: newIndex });\n    }\n}\n\nexport default CarouselModule;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}