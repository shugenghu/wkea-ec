{"ast":null,"code":"import{PriceComponent}from'@msdyn365-commerce/components';import*as React from'react';export var getOrderDetailsPaymentMethods=function getOrderDetailsPaymentMethods(_ref){var priceContext=_ref.priceContext,tenderLines=_ref.tenderLines,tenderIdOperationIdMap=_ref.tenderIdOperationIdMap,_ref$resource=_ref.resource,paymentMethodsTitle=_ref$resource.paymentMethodsTitle,creditCardEndingLabel=_ref$resource.creditCardEndingLabel,giftCardEndingLabel=_ref$resource.giftCardEndingLabel,amountCoveredLabel=_ref$resource.amountCoveredLabel,loyaltyCardUsedLabel=_ref$resource.loyaltyCardUsedLabel,cashUsedLabel=_ref$resource.cashUsedLabel,customerAccountUsedLabel=_ref$resource.customerAccountUsedLabel;var OPERATIONS={PayCard:201,PayGiftCertificate:214,PayLoyalty:207,PayCash:200,PayCustomerAccount:202};var getLastFourDigit=function getLastFourDigit(){var digits=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return digits.substr(-4);};var getCard=function getCard(tenderLine){var cardLastFourDigit=getLastFourDigit(tenderLine.MaskedCardNumber);var isValidCardNumber=cardLastFourDigit&&!isNaN(cardLastFourDigit);return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-details__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-card'},\"\".concat(tenderLine.CardTypeId,\" \").concat(isValidCardNumber?\"\".concat(creditCardEndingLabel,\" \").concat(cardLastFourDigit):\"\")));};var getCustomerAccountPayment=function getCustomerAccountPayment(tenderLine){return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-details__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-customer-account'},customerAccountUsedLabel,\" \",tenderLine.CustomerId),/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-customer-account-info'},amountCoveredLabel,/*#__PURE__*/React.createElement(PriceComponent,Object.assign({},priceContext,{className:'ms-order-details__payment-methods-customer-account-amount',data:{price:{CustomerContextualPrice:tenderLine.Amount||0}}}))));};var getGiftCertificate=function getGiftCertificate(tenderLine){return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-details__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-gift-card-number'},giftCardEndingLabel,\" \",getLastFourDigit(tenderLine.GiftCardId)),/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-gift-card-amount-info'},amountCoveredLabel,/*#__PURE__*/React.createElement(PriceComponent,Object.assign({},priceContext,{className:'ms-order-details__payment-methods-gift-card-amount',data:{price:{CustomerContextualPrice:tenderLine.Amount||0}}}))));};var getLoyalty=function getLoyalty(tenderLine){return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-details__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-loyalty-number'},loyaltyCardUsedLabel,\" \",tenderLine.LoyaltyCardId),/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-loyalty-amount-info'},amountCoveredLabel,/*#__PURE__*/React.createElement(PriceComponent,Object.assign({},priceContext,{className:'ms-order-details__payment-methods-loyalty-amount',data:{price:{CustomerContextualPrice:tenderLine.Amount||0}}}))));};var getCash=function getCash(tenderLine){return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-details__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-cash'},cashUsedLabel),/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-details__payment-methods-cash-amount-info'},amountCoveredLabel,/*#__PURE__*/React.createElement(PriceComponent,Object.assign({},priceContext,{className:'ms-order-details__payment-methods-cash-amount',data:{price:{CustomerContextualPrice:tenderLine.Amount||0}}}))));};return{paymentMethodsProps:{className:'ms-order-details__payment-methods'},title:/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-details__payment-methods-title'},paymentMethodsTitle),methods:tenderLines.reduce(function(lines,tenderLine){if(!tenderLine.TenderTypeId){return lines;}switch(tenderIdOperationIdMap[tenderLine.TenderTypeId]){case OPERATIONS.PayCard:lines.push(getCard(tenderLine));break;case OPERATIONS.PayGiftCertificate:lines.push(getGiftCertificate(tenderLine));break;case OPERATIONS.PayLoyalty:lines.push(getLoyalty(tenderLine));break;case OPERATIONS.PayCash:lines.push(getCash(tenderLine));break;case OPERATIONS.PayCustomerAccount:lines.push(getCustomerAccountPayment(tenderLine));break;default:}return lines;},[])};};","map":{"version":3,"sources":["modules/order-details/components/get-payment-methods.tsx"],"names":[],"mappings":"AAIA,OAAS,cAAT,KAA+B,+BAA/B,CAEA,MAAO,GAAK,CAAA,KAAZ,KAAuB,OAAvB,CAIA,MAAO,IAAM,CAAA,6BAA6B,CAAG,QAAhC,CAAA,6BAAgC,MAKD,IAJxC,CAAA,YAIwC,MAJxC,YAIwC,CAHxC,WAGwC,MAHxC,WAGwC,CAFxC,sBAEwC,MAFxC,sBAEwC,oBADxC,QACwC,CAD5B,mBAC4B,eAD5B,mBAC4B,CADP,qBACO,eADP,qBACO,CADgB,mBAChB,eADgB,mBAChB,CADqC,kBACrC,eADqC,kBACrC,CADyD,oBACzD,eADyD,oBACzD,CAD+E,aAC/E,eAD+E,aAC/E,CAD8F,wBAC9F,eAD8F,wBAC9F,CAExC,GAAM,CAAA,UAAU,CAAG,CACf,OAAO,CAAE,GADM,CAEf,kBAAkB,CAAE,GAFL,CAGf,UAAU,CAAE,GAHG,CAIf,OAAO,CAAE,GAJM,CAKf,kBAAkB,CAAE,GALL,CAAnB,CAQA,GAAM,CAAA,gBAAgB,CAAG,QAAnB,CAAA,gBAAmB,MAAC,CAAA,MAAD,2DAAU,EAAV,OAAiB,CAAA,MAAM,CAAC,MAAP,CAAc,CAAC,CAAf,CAAjB,EAAzB,CAEA,GAAM,CAAA,OAAO,CAAG,QAAV,CAAA,OAAU,CAAC,UAAD,CAA2B,CACvC,GAAM,CAAA,iBAAiB,CAAG,gBAAgB,CAAC,UAAU,CAAC,gBAAZ,CAA1C,CAEA,GAAM,CAAA,iBAAiB,CAAG,iBAAiB,EAAI,CAAC,KAAK,CAAC,iBAAD,CAArD,CAEA,mBACI,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,wCAAf,CAAwD,GAAG,CAAE,UAAU,CAAC,YAAxE,CAAA,cACI,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,wCAAb,CAAA,WACQ,UAAU,CAAC,UADnB,aACiC,iBAAiB,WAAM,qBAAN,aAA+B,iBAA/B,IADlD,EADJ,CADJ,CAOH,CAZD,CAcA,GAAM,CAAA,yBAAyB,CAAG,QAA5B,CAAA,yBAA4B,CAAC,UAAD,qBAC9B,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,wCAAf,CAAwD,GAAG,CAAE,UAAU,CAAC,YAAxE,CAAA,cACI,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,oDAAb,CAAA,CACK,wBADL,C,GAAA,CACgC,UAAU,CAAC,UAD3C,CADJ,cAII,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,yDAAb,CAAA,CACK,kBADL,cAEI,KAAA,CAAA,aAAA,CAAC,cAAD,CAAe,MAAA,CAAA,MAAA,CAAA,EAAA,CACP,YADO,CACK,CAChB,SAAS,CAAC,2DADM,CAEhB,IAAI,CAAE,CAAE,KAAK,CAAE,CAAE,uBAAuB,CAAE,UAAU,CAAC,MAAX,EAAqB,CAAhD,CAAT,CAFU,CADL,CAAf,CAFJ,CAJJ,CAD8B,EAAlC,CAgBA,GAAM,CAAA,kBAAkB,CAAG,QAArB,CAAA,kBAAqB,CAAC,UAAD,qBACvB,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,wCAAf,CAAwD,GAAG,CAAE,UAAU,CAAC,YAAxE,CAAA,cACI,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,oDAAb,CAAA,CACK,mBADL,C,GAAA,CAC2B,gBAAgB,CAAC,UAAU,CAAC,UAAZ,CAD3C,CADJ,cAII,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,yDAAb,CAAA,CACK,kBADL,cAEI,KAAA,CAAA,aAAA,CAAC,cAAD,CAAe,MAAA,CAAA,MAAA,CAAA,EAAA,CACP,YADO,CACK,CAChB,SAAS,CAAC,oDADM,CAEhB,IAAI,CAAE,CAAE,KAAK,CAAE,CAAE,uBAAuB,CAAE,UAAU,CAAC,MAAX,EAAqB,CAAhD,CAAT,CAFU,CADL,CAAf,CAFJ,CAJJ,CADuB,EAA3B,CAgBA,GAAM,CAAA,UAAU,CAAG,QAAb,CAAA,UAAa,CAAC,UAAD,qBACf,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,wCAAf,CAAwD,GAAG,CAAE,UAAU,CAAC,YAAxE,CAAA,cACI,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,kDAAb,CAAA,CACK,oBADL,C,GAAA,CAC4B,UAAU,CAAC,aADvC,CADJ,cAII,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,uDAAb,CAAA,CACK,kBADL,cAEI,KAAA,CAAA,aAAA,CAAC,cAAD,CAAe,MAAA,CAAA,MAAA,CAAA,EAAA,CACP,YADO,CACK,CAChB,SAAS,CAAC,kDADM,CAEhB,IAAI,CAAE,CAAE,KAAK,CAAE,CAAE,uBAAuB,CAAE,UAAU,CAAC,MAAX,EAAqB,CAAhD,CAAT,CAFU,CADL,CAAf,CAFJ,CAJJ,CADe,EAAnB,CAgBA,GAAM,CAAA,OAAO,CAAG,QAAV,CAAA,OAAU,CAAC,UAAD,qBACZ,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,wCAAf,CAAwD,GAAG,CAAE,UAAU,CAAC,YAAxE,CAAA,cACI,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,wCAAb,CAAA,CAAuD,aAAvD,CADJ,cAEI,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,oDAAb,CAAA,CACK,kBADL,cAEI,KAAA,CAAA,aAAA,CAAC,cAAD,CAAe,MAAA,CAAA,MAAA,CAAA,EAAA,CACP,YADO,CACK,CAChB,SAAS,CAAC,+CADM,CAEhB,IAAI,CAAE,CAAE,KAAK,CAAE,CAAE,uBAAuB,CAAE,UAAU,CAAC,MAAX,EAAqB,CAAhD,CAAT,CAFU,CADL,CAAf,CAFJ,CAFJ,CADY,EAAhB,CAcA,MAAO,CACH,mBAAmB,CAAE,CAAE,SAAS,CAAE,mCAAb,CADlB,CAEH,KAAK,cAAE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,yCAAf,CAAA,CAA0D,mBAA1D,CAFJ,CAGH,OAAO,CAAE,WAAW,CAAC,MAAZ,CAAmB,SAAC,KAAD,CAA2B,UAA3B,CAAyC,CACjE,GAAI,CAAC,UAAU,CAAC,YAAhB,CAA8B,CAC1B,MAAO,CAAA,KAAP,CACH,CACD,OAAQ,sBAAsB,CAAC,UAAU,CAAC,YAAZ,CAA9B,EACI,IAAK,CAAA,UAAU,CAAC,OAAhB,CACI,KAAK,CAAC,IAAN,CAAW,OAAO,CAAC,UAAD,CAAlB,EACA,MACJ,IAAK,CAAA,UAAU,CAAC,kBAAhB,CACI,KAAK,CAAC,IAAN,CAAW,kBAAkB,CAAC,UAAD,CAA7B,EACA,MACJ,IAAK,CAAA,UAAU,CAAC,UAAhB,CACI,KAAK,CAAC,IAAN,CAAW,UAAU,CAAC,UAAD,CAArB,EACA,MACJ,IAAK,CAAA,UAAU,CAAC,OAAhB,CACI,KAAK,CAAC,IAAN,CAAW,OAAO,CAAC,UAAD,CAAlB,EACA,MACJ,IAAK,CAAA,UAAU,CAAC,kBAAhB,CACI,KAAK,CAAC,IAAN,CAAW,yBAAyB,CAAC,UAAD,CAApC,EACA,MACJ,QAhBJ,CAmBA,MAAO,CAAA,KAAP,CACH,CAxBQ,CAwBmB,EAxBnB,CAHN,CAAP,CA6BH,CA1HM","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PriceComponent } from '@msdyn365-commerce/components';\nimport { TenderLine } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport * as React from 'react';\nimport { IPaymentMethods, IPaymentMethodsInput } from '../../../common';\n\n// tslint:disable-next-line:max-func-body-length\nexport const getOrderDetailsPaymentMethods = ({\n    priceContext,\n    tenderLines,\n    tenderIdOperationIdMap,\n    resource: { paymentMethodsTitle, creditCardEndingLabel, giftCardEndingLabel, amountCoveredLabel, loyaltyCardUsedLabel, cashUsedLabel, customerAccountUsedLabel }\n}: IPaymentMethodsInput): IPaymentMethods => {\n\n    const OPERATIONS = {\n        PayCard: 201,\n        PayGiftCertificate: 214,\n        PayLoyalty: 207,\n        PayCash: 200,\n        PayCustomerAccount: 202,\n    };\n\n    const getLastFourDigit = (digits = '') => digits.substr(-4);\n\n    const getCard = (tenderLine: TenderLine) => {\n        const cardLastFourDigit = getLastFourDigit(tenderLine.MaskedCardNumber);\n        // @ts-ignore\n        const isValidCardNumber = cardLastFourDigit && !isNaN(cardLastFourDigit);\n\n        return (\n            <div className='ms-order-details__payment-methods-line' key={tenderLine.TenderTypeId}>\n                <p className='ms-order-details__payment-methods-card'>\n                    {`${tenderLine.CardTypeId} ${isValidCardNumber ? `${creditCardEndingLabel} ${cardLastFourDigit}` : ``}`}\n                </p>\n            </div>\n        );\n    };\n\n    const getCustomerAccountPayment = (tenderLine: TenderLine) => (\n        <div className='ms-order-details__payment-methods-line' key={tenderLine.TenderTypeId}>\n            <p className='ms-order-details__payment-methods-customer-account'>\n                {customerAccountUsedLabel} {tenderLine.CustomerId}\n            </p>\n            <p className='ms-order-details__payment-methods-customer-account-info'>\n                {amountCoveredLabel}\n                <PriceComponent\n                    {...priceContext}\n                    className='ms-order-details__payment-methods-customer-account-amount'\n                    data={{ price: { CustomerContextualPrice: tenderLine.Amount || 0 } }}\n                />\n            </p>\n        </div>\n    );\n\n    const getGiftCertificate = (tenderLine: TenderLine) => (\n        <div className='ms-order-details__payment-methods-line' key={tenderLine.TenderTypeId}>\n            <p className='ms-order-details__payment-methods-gift-card-number'>\n                {giftCardEndingLabel} {getLastFourDigit(tenderLine.GiftCardId)}\n            </p>\n            <p className='ms-order-details__payment-methods-gift-card-amount-info'>\n                {amountCoveredLabel}\n                <PriceComponent\n                    {...priceContext}\n                    className='ms-order-details__payment-methods-gift-card-amount'\n                    data={{ price: { CustomerContextualPrice: tenderLine.Amount || 0 } }}\n                />\n            </p>\n        </div>\n    );\n\n    const getLoyalty = (tenderLine: TenderLine) => (\n        <div className='ms-order-details__payment-methods-line' key={tenderLine.TenderTypeId}>\n            <p className='ms-order-details__payment-methods-loyalty-number'>\n                {loyaltyCardUsedLabel} {tenderLine.LoyaltyCardId}\n            </p>\n            <p className='ms-order-details__payment-methods-loyalty-amount-info'>\n                {amountCoveredLabel}\n                <PriceComponent\n                    {...priceContext}\n                    className='ms-order-details__payment-methods-loyalty-amount'\n                    data={{ price: { CustomerContextualPrice: tenderLine.Amount || 0 } }}\n                />\n            </p>\n        </div>\n    );\n\n    const getCash = (tenderLine: TenderLine) => (\n        <div className='ms-order-details__payment-methods-line' key={tenderLine.TenderTypeId}>\n            <p className='ms-order-details__payment-methods-cash'>{cashUsedLabel}</p>\n            <p className='ms-order-details__payment-methods-cash-amount-info'>\n                {amountCoveredLabel}\n                <PriceComponent\n                    {...priceContext}\n                    className='ms-order-details__payment-methods-cash-amount'\n                    data={{ price: { CustomerContextualPrice: tenderLine.Amount || 0 } }}\n                />\n            </p>\n        </div>\n    );\n\n    return {\n        paymentMethodsProps: { className: 'ms-order-details__payment-methods' },\n        title: <div className='ms-order-details__payment-methods-title'>{paymentMethodsTitle}</div>,\n        methods: tenderLines.reduce((lines: React.ReactNode[], tenderLine) => {\n            if (!tenderLine.TenderTypeId) {\n                return lines;\n            }\n            switch (tenderIdOperationIdMap[tenderLine.TenderTypeId]) {\n                case OPERATIONS.PayCard:\n                    lines.push(getCard(tenderLine));\n                    break;\n                case OPERATIONS.PayGiftCertificate:\n                    lines.push(getGiftCertificate(tenderLine));\n                    break;\n                case OPERATIONS.PayLoyalty:\n                    lines.push(getLoyalty(tenderLine));\n                    break;\n                case OPERATIONS.PayCash:\n                    lines.push(getCash(tenderLine));\n                    break;\n                case OPERATIONS.PayCustomerAccount:\n                    lines.push(getCustomerAccountPayment(tenderLine));\n                    break;\n                default:\n                // do nothing\n            }\n            return lines;\n        },                          [])\n    };\n};\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}