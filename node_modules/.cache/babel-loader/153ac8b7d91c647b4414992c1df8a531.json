{"ast":null,"code":"import{PriceComponent}from'@msdyn365-commerce/components';import*as React from'react';export var getOrderConfirmationPaymentMethods=function getOrderConfirmationPaymentMethods(_ref){var priceContext=_ref.priceContext,tenderLines=_ref.tenderLines,tenderIdOperationIdMap=_ref.tenderIdOperationIdMap,_ref$resource=_ref.resource,paymentMethodsTitle=_ref$resource.paymentMethodsTitle,creditCardEndingLabel=_ref$resource.creditCardEndingLabel,giftCardEndingLabel=_ref$resource.giftCardEndingLabel,amountCoveredLabel=_ref$resource.amountCoveredLabel,loyaltyCardUsedLabel=_ref$resource.loyaltyCardUsedLabel,cashUsedLabel=_ref$resource.cashUsedLabel;var getLastFourDigit=function getLastFourDigit(){var digits=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return digits.substr(-4);};var getCard=function getCard(tenderLine){var cardLastFourDigit=getLastFourDigit(tenderLine.MaskedCardNumber);var isValidCardNumber=cardLastFourDigit&&!isNaN(cardLastFourDigit);return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-confirmation__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-confirmation__payment-methods-card'},\"\".concat(tenderLine.CardTypeId,\" \").concat(isValidCardNumber?\"\".concat(creditCardEndingLabel,\" \").concat(cardLastFourDigit):\"\")));};var getGiftCertificate=function getGiftCertificate(tenderLine){return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-confirmation__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-confirmation__payment-methods-gift-card-number'},giftCardEndingLabel,\" \",getLastFourDigit(tenderLine.GiftCardId)),/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-confirmation__payment-methods-gift-card-amount-info'},amountCoveredLabel,/*#__PURE__*/React.createElement(PriceComponent,Object.assign({},priceContext,{className:'ms-order-confirmation__payment-methods-gift-card-amount',data:{price:{CustomerContextualPrice:tenderLine.Amount||0}}}))));};var getLoyalty=function getLoyalty(tenderLine){return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-confirmation__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-confirmation__payment-methods-loyalty-number'},loyaltyCardUsedLabel,\" \",tenderLine.LoyaltyCardId),/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-confirmation__payment-methods-loyalty-amount-info'},amountCoveredLabel,/*#__PURE__*/React.createElement(PriceComponent,Object.assign({},priceContext,{className:'ms-order-confirmation__payment-methods-loyalty-amount',data:{price:{CustomerContextualPrice:tenderLine.Amount||0}}}))));};var getCash=function getCash(tenderLine){return/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-confirmation__payment-methods-line',key:tenderLine.TenderTypeId},/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-confirmation__payment-methods-cash'},cashUsedLabel),/*#__PURE__*/React.createElement(\"p\",{className:'ms-order-confirmation__payment-methods-cash-amount-info'},amountCoveredLabel,/*#__PURE__*/React.createElement(PriceComponent,Object.assign({},priceContext,{className:'ms-order-confirmation__payment-methods-cash-amount',data:{price:{CustomerContextualPrice:tenderLine.Amount||0}}}))));};return{paymentMethodsProps:{className:'ms-order-confirmation__payment-methods'},title:/*#__PURE__*/React.createElement(\"div\",{className:'ms-order-confirmation__payment-methods-title'},paymentMethodsTitle),methods:tenderLines.reduce(function(lines,tenderLine){if(!tenderLine.TenderTypeId){return lines;}switch(tenderIdOperationIdMap[tenderLine.TenderTypeId]){case 201:lines.push(getCard(tenderLine));break;case 214:lines.push(getGiftCertificate(tenderLine));break;case 207:lines.push(getLoyalty(tenderLine));break;case 200:lines.push(getCash(tenderLine));break;default:}return lines;},[])};};","map":{"version":3,"sources":["modules/order-confirmation/components/get-payment-methods.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PriceComponent } from '@msdyn365-commerce/components';\nimport { TenderLine } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport * as React from 'react';\nimport { IPaymentMethods, IPaymentMethodsInput } from '../../../common';\n\nexport const getOrderConfirmationPaymentMethods = ({\n    priceContext,\n    tenderLines,\n    tenderIdOperationIdMap,\n    resource: { paymentMethodsTitle, creditCardEndingLabel, giftCardEndingLabel, amountCoveredLabel, loyaltyCardUsedLabel, cashUsedLabel }\n}: IPaymentMethodsInput): IPaymentMethods => {\n    const getLastFourDigit = (digits = '') => digits.substr(-4);\n\n    const getCard = (tenderLine: TenderLine) => {\n        const cardLastFourDigit = getLastFourDigit(tenderLine.MaskedCardNumber);\n        // @ts-ignore\n        const isValidCardNumber = cardLastFourDigit && !isNaN(cardLastFourDigit);\n\n        return (\n            <div className='ms-order-confirmation__payment-methods-line' key={tenderLine.TenderTypeId}>\n                <p className='ms-order-confirmation__payment-methods-card'>\n                    {`${tenderLine.CardTypeId} ${isValidCardNumber ? `${creditCardEndingLabel} ${cardLastFourDigit}` : ``}`}\n                </p>\n            </div>);\n    };\n\n    const getGiftCertificate = (tenderLine: TenderLine) => (\n        <div className='ms-order-confirmation__payment-methods-line' key={tenderLine.TenderTypeId}>\n            <p className='ms-order-confirmation__payment-methods-gift-card-number'>\n                {giftCardEndingLabel} {getLastFourDigit(tenderLine.GiftCardId)}\n            </p>\n            <p className='ms-order-confirmation__payment-methods-gift-card-amount-info'>\n                {amountCoveredLabel}\n                <PriceComponent\n                    {...priceContext}\n                    className='ms-order-confirmation__payment-methods-gift-card-amount'\n                    data={{ price: { CustomerContextualPrice: tenderLine.Amount || 0 } }}\n                />\n            </p>\n        </div>\n    );\n\n    const getLoyalty = (tenderLine: TenderLine) => (\n        <div className='ms-order-confirmation__payment-methods-line' key={tenderLine.TenderTypeId}>\n            <p className='ms-order-confirmation__payment-methods-loyalty-number'>\n                {loyaltyCardUsedLabel} {tenderLine.LoyaltyCardId}\n            </p>\n            <p className='ms-order-confirmation__payment-methods-loyalty-amount-info'>\n                {amountCoveredLabel}\n                <PriceComponent\n                    {...priceContext}\n                    className='ms-order-confirmation__payment-methods-loyalty-amount'\n                    data={{ price: { CustomerContextualPrice: tenderLine.Amount || 0 } }}\n                />\n            </p>\n        </div>\n    );\n\n    const getCash = (tenderLine: TenderLine) => (\n        <div className='ms-order-confirmation__payment-methods-line' key={tenderLine.TenderTypeId}>\n            <p className='ms-order-confirmation__payment-methods-cash'>{cashUsedLabel}</p>\n            <p className='ms-order-confirmation__payment-methods-cash-amount-info'>\n                {amountCoveredLabel}\n                <PriceComponent\n                    {...priceContext}\n                    className='ms-order-confirmation__payment-methods-cash-amount'\n                    data={{ price: { CustomerContextualPrice: tenderLine.Amount || 0 } }}\n                />\n            </p>\n        </div>\n    );\n\n    return {\n        paymentMethodsProps: { className: 'ms-order-confirmation__payment-methods' },\n        title: <div className='ms-order-confirmation__payment-methods-title'>{paymentMethodsTitle}</div>,\n        methods: tenderLines.reduce((lines: React.ReactNode[], tenderLine) => {\n            if (!tenderLine.TenderTypeId) {\n                return lines;\n            }\n            switch (tenderIdOperationIdMap[tenderLine.TenderTypeId]) {\n                case 201:\n                    lines.push(getCard(tenderLine));\n                    break;\n                case 214:\n                    lines.push(getGiftCertificate(tenderLine));\n                    break;\n                case 207:\n                    lines.push(getLoyalty(tenderLine));\n                    break;\n                case 200:\n                    lines.push(getCash(tenderLine));\n                    break;\n                default:\n                // do nothing\n            }\n            return lines;\n        },                          [])\n    };\n};\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}