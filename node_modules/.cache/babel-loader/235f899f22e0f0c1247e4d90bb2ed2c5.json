{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{getProductSearchRefinersAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';export async function getProductRefinerHierarchy(searchCriteria,queryResultSettings,ctx){return getProductSearchRefinersAsync({callerContext:ctx,queryResultSettings:queryResultSettings},searchCriteria).then(productRefiners=>{if(!productRefiners){ctx.trace('[getRefinersByCriteriaAction] returned no refiners');return[];}const result=(productRefiners||[]).map(productRefiner=>productRefiner);if(!result.length){ctx.trace('[getRefinersByCriteriaAction] returned no IProductRefinerHierarchy objects');return[];}return result;});}","map":{"version":3,"sources":["modules/search-result-container/actions/get-product-refiner-hierarchy.ts"],"names":[],"mappings":"sCAGA,OAAS,6BAAT,KAA8C,wEAA9C,CAQA,MAAO,eAAe,CAAA,0BAAf,CAA0C,cAA1C,CAAiF,mBAAjF,CAA4H,GAA5H,CAA+I,CAClJ,MAAO,CAAA,6BAA6B,CAAC,CAAE,aAAa,CAAE,GAAjB,CAAsB,mBAAmB,CAAE,mBAA3C,CAAD,CAAmE,cAAnE,CAA7B,CAAgH,IAAhH,CAAsH,eAAD,EAAsC,CAC9J,GAAI,CAAC,eAAL,CAAsB,CAClB,GAAG,CAAC,KAAJ,CAAU,oDAAV,EACA,MAAmC,EAAnC,CACH,CAED,KAAM,CAAA,MAAM,CAAG,CAAC,eAAe,EAAI,EAApB,EAAwB,GAAxB,CAA6B,cAAD,EAA8D,cAA1F,CAAf,CAEA,GAAI,CAAC,MAAM,CAAC,MAAZ,CAAoB,CAChB,GAAG,CAAC,KAAJ,CAAU,4EAAV,EACA,MAAmC,EAAnC,CACH,CAED,MAAO,CAAA,MAAP,CACH,CAdM,CAAP,CAeH","sourcesContent":["import { IProductRefinerHierarchy } from '@msdyn365-commerce/commerce-entities';\nimport { IActionContext } from '@msdyn365-commerce/core';\nimport { IQueryResultSettings, ProductRefiner, ProductSearchCriteria } from '@msdyn365-commerce/retail-proxy';\nimport { getProductSearchRefinersAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';\n\n/**\n * Uses Bulk refiner API to get refiners and child refiner values\n * @param searchCriteria product search criteria\n * @param maxItems max items\n * @param ctx action context\n */\nexport async function getProductRefinerHierarchy(searchCriteria: ProductSearchCriteria, queryResultSettings: IQueryResultSettings, ctx: IActionContext): Promise<IProductRefinerHierarchy[]> {\n    return getProductSearchRefinersAsync({ callerContext: ctx, queryResultSettings: queryResultSettings }, searchCriteria).then((productRefiners: ProductRefiner[]) => {\n        if (!productRefiners) {\n            ctx.trace('[getRefinersByCriteriaAction] returned no refiners');\n            return <IProductRefinerHierarchy[]>[];\n        }\n\n        const result = (productRefiners || []).map((productRefiner: ProductRefiner) => <IProductRefinerHierarchy>productRefiner);\n\n        if (!result.length) {\n            ctx.trace('[getRefinersByCriteriaAction] returned no IProductRefinerHierarchy objects');\n            return <IProductRefinerHierarchy[]>[];\n        }\n\n        return result;\n    });\n}"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}