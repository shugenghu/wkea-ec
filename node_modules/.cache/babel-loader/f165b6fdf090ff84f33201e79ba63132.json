{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import classnames from'classnames';import*as React from'react';import{msdyn365Commerce}from'@msdyn365-commerce/core';const PriceComponentActions={};const Price=props=>{if(props.data.price.CustomerContextualPrice===undefined){return null;}return/*#__PURE__*/React.createElement(\"span\",{className:classnames('msc-price',props.className)},showStrikethroughPricing(props)?renderCurrentPriceWithOriginalPrice(props):renderCurrentPrice(props));};const showStrikethroughPricing=props=>{const originalPrice=getOriginalPrice(props);if(originalPrice&&props.data.price.CustomerContextualPrice){return originalPrice>props.data.price.CustomerContextualPrice;}return false;};const getOriginalPrice=props=>{return Math.max(props.data.price.BasePrice||0,props.data.price.TradeAgreementPrice||0,props.data.price.AdjustedPrice||0);};const renderCurrentPrice=props=>{const initialPrice=formatCurrency(props,props.data.price.CustomerContextualPrice);return/*#__PURE__*/React.createElement(\"span\",{className:'msc-price__actual',itemProp:'price'},initialPrice);};const formatCurrency=(props,price)=>{if(price===undefined){return undefined;}if(price===0&&props.freePriceText){return props.freePriceText;}return props.context.cultureFormatter.formatCurrency(price);};const renderCurrentPriceWithOriginalPrice=props=>{const originalPrice=getOriginalPrice(props);const initialPrice=formatCurrency(props,originalPrice);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{className:'sr-only'},\" \",props.originalPriceText,\" \",initialPrice,\" \",props.currentPriceText,\" \",renderCurrentPrice(props)),/*#__PURE__*/React.createElement(\"span\",{className:'msc-price__strikethrough',\"aria-hidden\":'true'},initialPrice),/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":'true'},renderCurrentPrice(props)),props.savingsText&&/*#__PURE__*/React.createElement(\"span\",{className:'msc-price__savings'},props.savingsText));};export const PriceComponent=msdyn365Commerce.createComponent('Price',_objectSpread({component:Price},PriceComponentActions));","map":{"version":3,"sources":["price/price.components.tsx"],"names":[],"mappings":"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","sourcesContent":["import classnames from 'classnames';\nimport * as React from 'react';\n\n/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\nimport { IComponent, IComponentProps, msdyn365Commerce } from '@msdyn365-commerce/core';\nimport { ProductPrice } from '@msdyn365-commerce/retail-proxy';\n\nexport interface IPriceComponentProps extends IComponentProps<{price: ProductPrice}> {\n    className?: string;\n    savingsText?: string;\n    freePriceText?: string;\n    originalPriceText?: string;\n    currentPriceText?: string;\n}\nexport interface IPriceComponent extends IComponent<IPriceComponentProps> {\n}\n\nconst PriceComponentActions = {\n};\n\nconst Price: React.FC<IPriceComponentProps> = (props: IPriceComponentProps) => {\n    // CustomerContextualPrice could be 0\n    if (props.data.price.CustomerContextualPrice === undefined) {\n        return null;\n    }\n\n    return (\n        <span className={classnames('msc-price', props.className)}>\n            {showStrikethroughPricing(props) ? renderCurrentPriceWithOriginalPrice(props) : renderCurrentPrice(props)}\n        </span>\n    );\n};\n\nconst showStrikethroughPricing = (props: IPriceComponentProps) => {\n    const originalPrice = getOriginalPrice(props);\n\n    if (originalPrice && props.data.price.CustomerContextualPrice) {\n        return originalPrice > props.data.price.CustomerContextualPrice;\n    }\n\n    return false;\n};\n\nconst getOriginalPrice = (props: IPriceComponentProps) => {\n    return Math.max(props.data.price.BasePrice || 0, props.data.price.TradeAgreementPrice || 0, props.data.price.AdjustedPrice || 0);\n};\n\nconst renderCurrentPrice = (props: IPriceComponentProps): JSX.Element | undefined => {\n    const initialPrice = formatCurrency(props, props.data.price.CustomerContextualPrice);\n    return <span className='msc-price__actual' itemProp='price'>{initialPrice}</span>;\n};\n\nconst formatCurrency = (props: IPriceComponentProps, price: number | undefined): string | undefined => {\n    if (price === undefined) {\n        return undefined;\n    }\n\n    if (price === 0 && props.freePriceText) {\n        return props.freePriceText;\n    }\n\n    return props.context.cultureFormatter.formatCurrency(price);\n};\n\nconst renderCurrentPriceWithOriginalPrice = (props: IPriceComponentProps): JSX.Element | null => {\n    const originalPrice = getOriginalPrice(props);\n    const initialPrice = formatCurrency(props, originalPrice);\n\n    return (\n        <>\n            <span className='sr-only'> {props.originalPriceText} {initialPrice} {props.currentPriceText} {renderCurrentPrice(props)}</span>\n            <span className='msc-price__strikethrough' aria-hidden='true'>{initialPrice}</span>\n            <span aria-hidden='true'>{renderCurrentPrice(props)}</span>\n            {props.savingsText && <span className='msc-price__savings'>{props.savingsText}</span>}\n        </>\n    );\n};\n\n// @ts-ignore\nexport const PriceComponent: React.FunctionComponent<IPriceComponentProps> = msdyn365Commerce.createComponent<IPriceComponent>(\n    'Price',\n    { component: Price, ...PriceComponentActions }\n);"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}