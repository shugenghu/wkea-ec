{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import{getProductSearchRefinersAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';export function getProductRefinerHierarchy(_x,_x2,_x3){return _getProductRefinerHierarchy.apply(this,arguments);}function _getProductRefinerHierarchy(){_getProductRefinerHierarchy=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(searchCriteria,queryResultSettings,ctx){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",getProductSearchRefinersAsync({callerContext:ctx,queryResultSettings:queryResultSettings},searchCriteria).then(function(productRefiners){if(!productRefiners){ctx.trace('[getRefinersByCriteriaAction] returned no refiners');return[];}var result=(productRefiners||[]).map(function(productRefiner){return productRefiner;});if(!result.length){ctx.trace('[getRefinersByCriteriaAction] returned no IProductRefinerHierarchy objects');return[];}return result;}));case 1:case\"end\":return _context.stop();}}},_callee);}));return _getProductRefinerHierarchy.apply(this,arguments);}","map":{"version":3,"sources":["modules/search-result-container/actions/get-product-refiner-hierarchy.ts"],"names":[],"mappings":"uIAGA,OAAS,6BAAT,KAA8C,wEAA9C,CAQA,eAAsB,CAAA,0BAAtB,uE,2HAAO,iBAA0C,cAA1C,CAAiF,mBAAjF,CAA4H,GAA5H,kJACI,6BAA6B,CAAC,CAAE,aAAa,CAAE,GAAjB,CAAsB,mBAAmB,CAAE,mBAA3C,CAAD,CAAmE,cAAnE,CAA7B,CAAgH,IAAhH,CAAqH,SAAC,eAAD,CAAsC,CAC9J,GAAI,CAAC,eAAL,CAAsB,CAClB,GAAG,CAAC,KAAJ,CAAU,oDAAV,EACA,MAAmC,EAAnC,CACH,CAED,GAAM,CAAA,MAAM,CAAG,CAAC,eAAe,EAAI,EAApB,EAAwB,GAAxB,CAA4B,SAAC,cAAD,QAA8D,CAAA,cAA9D,EAA5B,CAAf,CAEA,GAAI,CAAC,MAAM,CAAC,MAAZ,CAAoB,CAChB,GAAG,CAAC,KAAJ,CAAU,4EAAV,EACA,MAAmC,EAAnC,CACH,CAED,MAAO,CAAA,MAAP,CACH,CAdM,CADJ,wD","sourcesContent":["import { IProductRefinerHierarchy } from '@msdyn365-commerce/commerce-entities';\nimport { IActionContext } from '@msdyn365-commerce/core';\nimport { IQueryResultSettings, ProductRefiner, ProductSearchCriteria } from '@msdyn365-commerce/retail-proxy';\nimport { getProductSearchRefinersAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';\n\n/**\n * Uses Bulk refiner API to get refiners and child refiner values\n * @param searchCriteria product search criteria\n * @param maxItems max items\n * @param ctx action context\n */\nexport async function getProductRefinerHierarchy(searchCriteria: ProductSearchCriteria, queryResultSettings: IQueryResultSettings, ctx: IActionContext): Promise<IProductRefinerHierarchy[]> {\n    return getProductSearchRefinersAsync({ callerContext: ctx, queryResultSettings: queryResultSettings }, searchCriteria).then((productRefiners: ProductRefiner[]) => {\n        if (!productRefiners) {\n            ctx.trace('[getRefinersByCriteriaAction] returned no refiners');\n            return <IProductRefinerHierarchy[]>[];\n        }\n\n        const result = (productRefiners || []).map((productRefiner: ProductRefiner) => <IProductRefinerHierarchy>productRefiner);\n\n        if (!result.length) {\n            ctx.trace('[getRefinersByCriteriaAction] returned no IProductRefinerHierarchy objects');\n            return <IProductRefinerHierarchy[]>[];\n        }\n\n        return result;\n    });\n}"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}