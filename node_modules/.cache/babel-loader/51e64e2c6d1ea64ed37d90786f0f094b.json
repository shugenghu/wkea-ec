{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol===\"undefined\"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]();},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it[\"return\"]!=null)it[\"return\"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}/*!\r\n * Copyright (c) Microsoft Corporation.\r\n * All rights reserved. See LICENSE in the project root for license information.\r\n */import{isNonceEnabled,sanitizeForXss}from'@msdyn365-commerce/core-internal';import fastJson from'fast-json-stringify';import{renderToString}from'react-dom/server';import{GLIMPSE_LOGGER_NAME,PAGE_LOGGER_NAME}from'../consts';import{CommentTag}from'./helpers';var APPINSIGHTS_EXCLUDED_DOMAINS=[];export var getExcludedDomains=function getExcludedDomains(appContext){if(!APPINSIGHTS_EXCLUDED_DOMAINS.length){var excludedDomains=appContext.platform&&appContext.platform.correlationHeaderExcludedDomains||[];APPINSIGHTS_EXCLUDED_DOMAINS=excludedDomains;}return JSON.stringify(APPINSIGHTS_EXCLUDED_DOMAINS);};var renderToStringWithNonceToken=function renderToStringWithNonceToken(scriptTags,nonceToken){var scriptTagStringsWithNonce='';var _iterator=_createForOfIteratorHelper(scriptTags),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var scriptTag=_step.value;var scriptTagString=renderToString(scriptTag);// if it is inline script, we add nonce token to it.\nif(nonceToken&&scriptTag.props&&scriptTag.props.children&&scriptTag.type==='script'&&!scriptTag.props.src){scriptTagStringsWithNonce=scriptTagStringsWithNonce.concat(scriptTagString.replace(/<script/g,\"<script nonce=\".concat(nonceToken)));}else{scriptTagStringsWithNonce=scriptTagStringsWithNonce.concat(scriptTagString);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return scriptTagStringsWithNonce;};export var renderTags=function renderTags(tags,nonceToken){// nonceToken will only be used when render <script> element. For this, we\n// only check if it is inline script when nonceToken parameter is passed in.\nif(!tags||tags.length===0){return'';}return renderToStringWithNonceToken(tags,nonceToken);};export var injectStylePresets=function injectStylePresets(url){if(!url){return'';}return\"<link rel=\\\"stylesheet\\\" href=\\\"\".concat(url,\"\\\" crossorigin=\\\"anonymous\\\" />\");};/**\r\n * Returns the following debug information in json format\r\n * to be included in the head tag as data-info attribute\r\n *      v: Version\r\n *      dg: DeviceGroup\r\n *      th: Theme\r\n *      lo: Locale\r\n *      m: Market\r\n *      la: Language\r\n *      ru: RequestUrl\r\n * @param props\r\n * @param isWindowDataInfo\r\n */export var getDebugInfo=function getDebugInfo(props,isWindowDataInfo){var context=props.context,requestUrl=props.requestUrl;var version=props.appData.bv?props.appData.bv:'Unable to get build version';var baseDataInfo={lo:context.locale,ru:requestUrl&&requestUrl.href};var localeParts=context.locale.split('-');// Grab the language and market from the locale\nvar market=context.locale;var language=context.locale;if(localeParts.length===2){market=localeParts[1];language=localeParts[0];}// tslint:disable-next-line: no-any\nvar debugValues=baseDataInfo;if(isWindowDataInfo){debugValues=_objectSpread(_objectSpread({},baseDataInfo),{},{v:version,dg:context.device.Type,m:market,la:language,ru:requestUrl&&requestUrl.href,fs:props.context.features});}return JSON.stringify(debugValues);};export var useToolGlimpse=function useToolGlimpse(props){var params=props.context.query;return params&&params.usetool==='glimpse';};export var includePageLogs=function includePageLogs(props){var logger=props.telemetry.getNamedLoggerInstance(PAGE_LOGGER_NAME);if(logger){return\"\".concat(CommentTag('Start Server Logs'),\"<script type=\\\"text/javascript\\\">window.__pageLogs__ = \").concat(JSON.stringify(logger.logs),\";</script>\").concat(CommentTag('End Server Logs'));}return'';};// tslint:disable:max-line-length\nexport var includeGlimpseNodeTab=function includeGlimpseNodeTab(props){var logger=props.telemetry.getNamedLoggerInstance(GLIMPSE_LOGGER_NAME);if(logger){if(useToolGlimpse(props)){return\"\".concat(CommentTag('START GLIMPSE JS'),\"<script type=\\\"text/javascript\\\">function glm(){if(window.glimpse){var e=window._glimpseData.data;delete e.glimpse_views,delete e.microsoft_onerenderframework_webproject_toolshelper_partnermodulestab,Object.assign(e,{Node:{name:\\\"Node\\\",data:\").concat(sanitizeForXss(JSON.stringify(logger.getLogs())),\"}}),window.glimpse.data.update(window._glimpseData)}}\\\"loading\\\"===document.readyState?document.addEventListener(\\\"DOMContentLoaded\\\",glm):glm();\\n                        </script>\").concat(CommentTag('END GLIMPSE JS'));}else if(props.isDebug){// TODO: is there a better way to add this?\n// @ts-ignore\nreturn\"\".concat(CommentTag('Start Server Logs'),\"<script type=\\\"text/javascript\\\">window.__server__ = \").concat(JSON.stringify(logger.getLogs()),\";</script>\").concat(CommentTag('End Server Logs'));}}return'';};/**\r\n * Parses app-settings to return the content security policy\r\n * that should be applied to this site\r\n */export var getContentSecurityPolicy=function getContentSecurityPolicy(ctx){// If CSP is disabled return policy that allows everything\n// Check if disableContentSecurityPolicy is set to true\nif(!ctx||!ctx.app||!ctx.app.contentSecurityPolicy||ctx.app.contentSecurityPolicy.disableContentSecurityPolicy){return'';}var cspDirectives=ctx.app.contentSecurityPolicy;var directives='';// If running in dev mode add the following to allowed list for connect and img src\nif(process.env.NODE_ENV==='development'){cspDirectives['connect-src']=(cspDirectives['connect-src']||[]).concat(['localhost:*','wss:']);if(process.env.MSDyn365Commerce_BASEURL){cspDirectives['connect-src'].push(process.env.MSDyn365Commerce_BASEURL);}if(process.env.MSDyn365Commerce_BASEIMAGEURL){var baseImageUrl=new URL(process.env.MSDyn365Commerce_BASEIMAGEURL).origin;cspDirectives['img-src']=(cspDirectives['img-src']||[]).concat([baseImageUrl]);}}var nonceToken=isNonceEnabled(ctx);if(nonceToken){cspDirectives['script-src']=(cspDirectives['script-src']||[]).concat([\"'nonce-\".concat(nonceToken,\"'\")]);}Object.keys(cspDirectives).forEach(function(directive){var policies=cspDirectives[directive];directives+=Array.isArray(policies)?\"\".concat(directive,\" \").concat(policies.join(' '),\";\"):'';});return directives;};/*\r\nFast JSON Stringify Constructors\r\n\r\nThe following are Fast JSON Stringify constructors for initialData properties.\r\nIf a property of _moduleList, requestContext, _themeModulesList or pageRoot is updated\r\nyou will need to update the JSON schema of the following constructors to reflect the change\r\n*/export var moduleListFastJson=fastJson({type:'array',items:{type:'object',properties:{id:{type:'string'},typeName:{type:'string'},dataActions:{type:'array',nullable:true,items:{type:'object',nullable:true,additionalProperties:true,properties:{name:{nullable:true,type:'string'},entity:{nullable:true,type:'string'},inputs:{nullable:true,type:'string'}}}}}}});export var requestContextFastJson=fastJson({type:'object',additionalProperties:true,nullable:true,properties:{channel:{type:'object',additionalProperties:true},url:{type:'object',properties:{requestUrl:{type:'string'},staticCdnUrl:{type:'string'}}},urlTokens:{additionalProperties:true,type:'object',properties:{itemId:{type:'string'},recordId:{type:'string'},productName:{type:'string'},locale:{type:'string'},categories:{type:'array',items:{type:'string'}},pageType:{type:'string'}}},locale:{type:'string'},telemetryPageName:{type:'string'},market:{type:'string'},textDirection:{type:'string'},sitePath:{type:'string'},device:{type:'object',properties:{Type:{type:'string'}}},user:{type:'object',additionalProperties:true,properties:{token:{nullable:true,type:'string'},isAuthenticated:{type:'boolean'},signInUrl:{type:'string'},signOutUrl:{type:'string'},signUpUrl:{type:'string'},editProfileUrl:{type:'string'},signInName:{nullable:true,type:'string'},name:{nullable:true,type:'string'},firstName:{nullable:true,type:'string'},lastName:{nullable:true,type:'string'},emailAddress:{nullable:true,type:'string'},customerAccountNumer:{nullable:true,type:'string'},tenantId:{nullable:true,type:'string'},optOutWebActivityTracking:{nullable:true,type:'boolean'},userClaims:{type:'object',nullable:true,additionalProperties:true}}},app:{type:'object',additionalProperties:true,properties:{config:{type:'object',additionalProperties:true},routes:{type:'object',additionalProperties:true,properties:{account:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},accountProfile:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},backToShopping:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},cart:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},checkout:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},home:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},loyalty:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},loyaltyJoin:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},orderConfirmation:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},orderDetails:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},search:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},wishlist:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}},loyaltyTerms:{type:'object',properties:{destinationUrl:{type:'string'},type:{type:'string'}}}}},platform:{type:'object',additionalProperties:true,properties:{disableCookieCompliance:{type:'boolean'},imageQuality:{type:'integer'},skipToMainText:{type:'string'}}},contentSecurityPolicy:{type:'object',properties:{enableNonce:{type:'boolean'},disableContentSecurityPolicy:{type:'boolean'},enableReportOnlyMode:{type:'boolean'},'child-src':{type:'array',items:{type:'string'}},'connect-src':{type:'array',items:{type:'string'}},'img-src':{type:'array',items:{type:'string'}},'script-src':{type:'array',items:{type:'string'}},'style-src':{type:'array',items:{type:'string'}},'default-src':{type:'array',items:{type:'string'}},'base-uri':{type:'array',items:{type:'string'}},'font-src':{type:'array',items:{type:'string'}},'object-src':{type:'array',items:{type:'string'}},'media-src':{type:'array',items:{type:'string'}}}}}},query:{type:'object',additionalProperties:true},previewContext:{nullable:true,type:'string'},suggestedMarket:{nullable:true,type:'string'},apiSettings:{type:'object',properties:{baseUrl:{type:'string'},channelId:{type:'integer'},catalogId:{type:'integer'},oun:{type:'string'},baseImageUrl:{type:'string'},ratingsReviewsEndpoint:{type:'string'},retailServerProxyVersion:{type:'string'},rnr:{type:'object',properties:{proxyUrl:{type:'string'},url:{type:'string'},id:{type:'string'}}},ratingsReviewsProxyEndpoint:{type:'string'}}},operationId:{type:'string'},connectors:{type:'object',nullable:true,properties:{expConnector:{nullable:true,type:'string'}}},params:{type:'object',properties:{mock:{type:'string'},isDebug:{type:'boolean'},isEditor:{type:'boolean'},isPreview:{type:'boolean'},concatJs:{type:'object',properties:{hasValue:{type:'boolean'},isTruthy:{type:'boolean'},value:{type:'boolean'}}},theme:{type:'string'}}},features:{type:'object',additionalProperties:true},pageData:{type:'object',additionalProperties:true},_debug:{type:'object',properties:{commerceSDKVersion:{type:'string'},commerceSSKVersion:{type:'string'},retailProxyVersion:{type:'string'}}},themeOverride:{type:'object',properties:{url:{type:'string'},disableDefault:{type:'boolean'}}},telemetrySettings:{type:'object',additionalProperties:true,properties:{doNotCollectBiData:{type:'boolean'},optOutWebActivityTracking:{type:'boolean'},eventHubEndPoint:{type:'string'},eventHubAuthToken:{type:'string'},operationId:{type:'string'},instrumentationKey:{type:'string'},environmentId:{type:'string'},url:{type:'string'},clientAuth:{type:'string'},commerceCoreEnvId:{type:'string'}}},requestUrl:{type:'string'},clientContext:{type:'object',properties:{deviceType:{type:'string'}}},requestFormData:{nullable:true,type:'object',additionalProperties:true},canonicalDomain:{type:'string'},canonicalUrl:{nullable:true,type:'string'},staticContext:{type:'object',properties:{staticCdnUrl:{type:'string'},staticCdnUrlWithLocale:{type:'string'}}},gridSettings:{type:'object',properties:{xs:{type:'object',properties:{w:{type:'integer'},h:{type:'integer'}}},sm:{type:'object',properties:{w:{type:'integer'},h:{type:'integer'}}},md:{type:'object',properties:{w:{type:'integer'},h:{type:'integer'}}},lg:{type:'object',properties:{w:{type:'integer'},h:{type:'integer'}}},xl:{type:'object',properties:{w:{type:'integer'},h:{type:'integer'}}}}},debugMode:{type:'integer'},redirectUrl:{nullable:true,type:'string'},sameSiteRequired:{type:'boolean'},siteStylePreset:{type:'string'},pageStylePreset:{type:'string'},telemetryData:{type:'object',additionalProperties:true},headers:{type:'object',additionalProperties:true},experiments:{type:'object',nullable:true,properties:{userId:{type:'string',nullable:true},activeExperiments:{type:'array',items:{type:'object',nullable:true,properties:{experimentId:{type:'string'},variantId:{type:'string'},moduleId:{type:'string'}}}},moduleIdToExperimentIdMap:{type:'object',nullable:true,additionalProperties:true}}}}});export var themeModulesFastJson=fastJson({type:'array',items:{type:'string'}});export var pageRootFastJson=fastJson({additionalProperties:true,title:'Page root fast json',type:'object',properties:{id:{type:'string'},typeName:{type:'string'},config:{$ref:'#/definitions/setting'},modules:{$ref:'#/definitions/rootModules'}},definitions:{rootModules:{type:'object',additionalProperties:true,properties:{htmlHead:{$ref:'#/definitions/moduleContent'},bodyBegin:{$ref:'#/definitions/moduleContent'},bodyEnd:{$ref:'#/definitions/moduleContent'},body:{$ref:'#/definitions/moduleContent'}}},moduleContent:{type:'array',items:{type:'object',additionalProperties:true,properties:{config:{$ref:'#/definitions/setting'},id:{type:'string'},typeName:{type:'string'},friendlyName:{type:'string',nullable:true},modules:{type:'object',additionalProperties:true,nullable:true}}}},setting:{additionalProperties:true,nullable:true,type:'object'}}});","map":{"version":3,"sources":["../../../src/utils/base-page-utils.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { IAny, IDictionary, IGeneric, IRequestContext, isNonceEnabled, msdyn365Commerce, sanitizeForXss } from '@msdyn365-commerce/core-internal';\nimport { PageLogger, RetainLogger } from '@msdyn365-commerce/telemetry-internal';\nimport fastJson from 'fast-json-stringify';\nimport { renderToString } from 'react-dom/server';\nimport { IBasePageProps } from '../components/IBasePageProps';\nimport { GLIMPSE_LOGGER_NAME, PAGE_LOGGER_NAME } from '../consts';\nimport { CommentTag } from './helpers';\n\nlet APPINSIGHTS_EXCLUDED_DOMAINS: string[] = [];\n\nexport const getExcludedDomains = (appContext: IGeneric<IAny>) => {\n    if (!APPINSIGHTS_EXCLUDED_DOMAINS.length) {\n        const excludedDomains: string[] = (appContext.platform && appContext.platform.correlationHeaderExcludedDomains) || [];\n        APPINSIGHTS_EXCLUDED_DOMAINS = excludedDomains;\n    }\n    return JSON.stringify(APPINSIGHTS_EXCLUDED_DOMAINS);\n};\n\nconst renderToStringWithNonceToken = (scriptTags:React.ReactElement[], nonceToken?:string) => {\n    let scriptTagStringsWithNonce = '';\n    for (const scriptTag of scriptTags) {\n        const scriptTagString:string = renderToString(scriptTag);\n        // if it is inline script, we add nonce token to it.\n        if (nonceToken &&scriptTag.props && scriptTag.props.children && scriptTag.type === 'script' && !scriptTag.props.src) {\n            scriptTagStringsWithNonce = scriptTagStringsWithNonce.concat(scriptTagString.replace(/<script/g, `<script nonce=${nonceToken}`));\n        } else {\n            scriptTagStringsWithNonce = scriptTagStringsWithNonce.concat(scriptTagString);\n        }\n    }\n    return scriptTagStringsWithNonce;\n};\n\nexport const renderTags = (tags: React.ReactElement[], nonceToken?:string) => {\n    // nonceToken will only be used when render <script> element. For this, we\n    // only check if it is inline script when nonceToken parameter is passed in.\n    if (!tags || tags.length === 0) {\n        return '';\n    }\n    return renderToStringWithNonceToken(tags, nonceToken);\n};\n\nexport const injectStylePresets = (url: string | undefined) => {\n    if (!url) {\n        return '';\n    }\n\n    return `<link rel=\"stylesheet\" href=\"${url}\" crossorigin=\"anonymous\" />`;\n};\n\n/**\n * Returns the following debug information in json format\n * to be included in the head tag as data-info attribute\n *      v: Version\n *      dg: DeviceGroup\n *      th: Theme\n *      lo: Locale\n *      m: Market\n *      la: Language\n *      ru: RequestUrl\n * @param props\n * @param isWindowDataInfo\n */\nexport const getDebugInfo = (props: IBasePageProps, isWindowDataInfo: boolean): string => {\n    const { context, requestUrl } = props;\n\n    const version = props.appData.bv ? props.appData.bv : 'Unable to get build version';\n\n    const baseDataInfo = {\n        lo: context.locale,\n        ru: requestUrl && requestUrl.href\n    };\n    const localeParts: string[] = context.locale.split('-');\n\n    // Grab the language and market from the locale\n    let market = context.locale;\n    let language = context.locale;\n    if (localeParts.length === 2) {\n        market = localeParts[1];\n        language = localeParts[0];\n    }\n\n    // tslint:disable-next-line: no-any\n    let debugValues: any = baseDataInfo;\n    if (isWindowDataInfo) {\n        debugValues = {\n            ...baseDataInfo,\n            v: version,\n            dg: context.device.Type,\n            m: market,\n            la: language,\n            ru: requestUrl && requestUrl.href,\n            fs: props.context.features\n        };\n    }\n\n    return JSON.stringify(debugValues);\n};\n\nexport const useToolGlimpse = (props: IBasePageProps): boolean | undefined => {\n    const params = props.context.query;\n    return params && params.usetool === 'glimpse';\n};\n\nexport const includePageLogs = (props: IBasePageProps): string => {\n    const logger = props.telemetry.getNamedLoggerInstance<PageLogger>(PAGE_LOGGER_NAME);\n    if (logger) {\n        return `${CommentTag('Start Server Logs')}<script type=\"text/javascript\">window.__pageLogs__ = ${JSON.stringify(\n            logger.logs\n        )};</script>${CommentTag('End Server Logs')}`;\n    }\n    return '';\n};\n\n// tslint:disable:max-line-length\nexport const includeGlimpseNodeTab = (props: IBasePageProps): string => {\n    const logger = props.telemetry.getNamedLoggerInstance<RetainLogger>(GLIMPSE_LOGGER_NAME);\n    if (logger) {\n        if (useToolGlimpse(props)) {\n            return `${CommentTag(\n                'START GLIMPSE JS'\n            )}<script type=\"text/javascript\">function glm(){if(window.glimpse){var e=window._glimpseData.data;delete e.glimpse_views,delete e.microsoft_onerenderframework_webproject_toolshelper_partnermodulestab,Object.assign(e,{Node:{name:\"Node\",data:${sanitizeForXss(\n                JSON.stringify(logger.getLogs())\n            )}}}),window.glimpse.data.update(window._glimpseData)}}\"loading\"===document.readyState?document.addEventListener(\"DOMContentLoaded\",glm):glm();\n                        </script>${CommentTag('END GLIMPSE JS')}`;\n        } else if (props.isDebug) {\n            // TODO: is there a better way to add this?\n            // @ts-ignore\n            return `${CommentTag('Start Server Logs')}<script type=\"text/javascript\">window.__server__ = ${JSON.stringify(\n                logger.getLogs()\n            )};</script>${CommentTag('End Server Logs')}`;\n        }\n    }\n    return '';\n};\n\n/**\n * Parses app-settings to return the content security policy\n * that should be applied to this site\n */\nexport const getContentSecurityPolicy = (ctx: IRequestContext): string => {\n    // If CSP is disabled return policy that allows everything\n    // Check if disableContentSecurityPolicy is set to true\n    if (!ctx || !ctx.app || !ctx.app.contentSecurityPolicy || ctx.app.contentSecurityPolicy.disableContentSecurityPolicy) {\n        return '';\n    }\n\n    const cspDirectives = ctx.app.contentSecurityPolicy;\n    let directives: string = '';\n    // If running in dev mode add the following to allowed list for connect and img src\n    if (process.env.NODE_ENV === 'development') {\n        cspDirectives['connect-src'] = (cspDirectives['connect-src'] || []).concat(['localhost:*', 'wss:']);\n\n        if (process.env.MSDyn365Commerce_BASEURL) {\n            cspDirectives['connect-src'].push(process.env.MSDyn365Commerce_BASEURL);\n        }\n\n        if (process.env.MSDyn365Commerce_BASEIMAGEURL) {\n            const baseImageUrl = new URL(process.env.MSDyn365Commerce_BASEIMAGEURL).origin;\n            cspDirectives['img-src'] = (cspDirectives['img-src'] || []).concat([baseImageUrl]);\n        }\n    }\n    const nonceToken = isNonceEnabled(ctx);\n    if (nonceToken) {\n        cspDirectives['script-src'] = (cspDirectives['script-src'] || []).concat([`'nonce-${nonceToken}'`]);\n    }\n\n    Object.keys(cspDirectives).forEach((directive: string) => {\n        const policies = cspDirectives[directive];\n        directives += Array.isArray(policies) ? `${directive} ${policies.join(' ')};` : '';\n    });\n\n    return directives;\n};\n\n/*\nFast JSON Stringify Constructors\n\nThe following are Fast JSON Stringify constructors for initialData properties.\nIf a property of _moduleList, requestContext, _themeModulesList or pageRoot is updated\nyou will need to update the JSON schema of the following constructors to reflect the change\n*/\nexport const moduleListFastJson = fastJson({\n    type: 'array',\n    items: {\n        type: 'object',\n        properties: {\n            id: {\n                type: 'string'\n            },\n            typeName: {\n                type: 'string'\n            },\n            dataActions: {\n                type: 'array',\n                nullable: true,\n                items: {\n                    type: 'object',\n                    nullable: true,\n                    additionalProperties: true,\n                    properties: {\n                        name: {\n                            nullable: true,\n                            type: 'string'\n                        },\n                        entity: {\n                            nullable: true,\n                            type: 'string'\n                        },\n                        inputs: {\n                            nullable: true,\n                            type: 'string'\n                        }\n                    }\n                }\n            }\n        }\n    }\n});\n\nexport const requestContextFastJson = fastJson({\n    type: 'object',\n    additionalProperties: true,\n    nullable: true,\n    properties: {\n        channel: {\n            type: 'object',\n            additionalProperties: true\n        },\n        url: {\n            type: 'object',\n            properties: {\n                requestUrl: {\n                    type: 'string'\n                },\n                staticCdnUrl: {\n                    type: 'string'\n                }\n            }\n        },\n        urlTokens: {\n            additionalProperties: true,\n            type: 'object',\n            properties: {\n                itemId: {\n                    type: 'string'\n                },\n                recordId: {\n                    type: 'string'\n                },\n                productName: {\n                    type: 'string'\n                },\n                locale: {\n                    type: 'string'\n                },\n                categories: {\n                    type: 'array',\n                    items: {\n                        type: 'string'\n                    }\n                },\n                pageType: {\n                    type: 'string'\n                }\n            }\n        },\n        locale: {\n            type: 'string'\n        },\n        telemetryPageName: {\n            type: 'string'\n        },\n        market: {\n            type: 'string'\n        },\n        textDirection: {\n            type: 'string'\n        },\n        sitePath: {\n            type: 'string'\n        },\n        device: {\n            type: 'object',\n            properties: {\n                Type: {\n                    type: 'string'\n                }\n            }\n        },\n        user: {\n            type: 'object',\n            additionalProperties: true,\n            properties: {\n                token: {\n                    nullable: true,\n                    type: 'string'\n                },\n                isAuthenticated: {\n                    type: 'boolean'\n                },\n                signInUrl: {\n                    type: 'string'\n                },\n                signOutUrl: {\n                    type: 'string'\n                },\n                signUpUrl: {\n                    type: 'string'\n                },\n                editProfileUrl: {\n                    type: 'string'\n                },\n                signInName: {\n                    nullable: true,\n                    type: 'string'\n                },\n                name: {\n                    nullable: true,\n                    type: 'string'\n                },\n                firstName: {\n                    nullable: true,\n                    type: 'string'\n                },\n                lastName: {\n                    nullable: true,\n                    type: 'string'\n                },\n                emailAddress: {\n                    nullable: true,\n                    type: 'string'\n                },\n                customerAccountNumer: {\n                    nullable: true,\n                    type: 'string'\n                },\n                tenantId: {\n                    nullable: true,\n                    type: 'string'\n                },\n                optOutWebActivityTracking: {\n                    nullable: true,\n                    type: 'boolean'\n                },\n                userClaims: {\n                    type: 'object',\n                    nullable: true,\n                    additionalProperties: true\n                }\n            }\n        },\n        app: {\n            type: 'object',\n            additionalProperties: true,\n            properties: {\n                config: {\n                    type: 'object',\n                    additionalProperties: true\n                },\n                routes: {\n                    type: 'object',\n                    additionalProperties: true,\n                    properties: {\n                        account: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        accountProfile: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        backToShopping: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        cart: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        checkout: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        home: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        loyalty: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        loyaltyJoin: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        orderConfirmation: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        orderDetails: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        search: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        wishlist: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        },\n                        loyaltyTerms: {\n                            type: 'object',\n                            properties: {\n                                destinationUrl: {\n                                    type: 'string'\n                                },\n                                type: {\n                                    type: 'string'\n                                }\n                            }\n                        }\n                    }\n                },\n                platform: {\n                    type: 'object',\n                    additionalProperties: true,\n                    properties: {\n                        disableCookieCompliance: {\n                            type: 'boolean'\n                        },\n                        imageQuality: {\n                            type: 'integer'\n                        },\n                        skipToMainText: {\n                            type: 'string'\n                        }\n                    }\n                },\n                contentSecurityPolicy: {\n                    type: 'object',\n                    properties: {\n                        enableNonce:{\n                            type:'boolean'\n                        },\n                        disableContentSecurityPolicy: {\n                            type: 'boolean'\n                        },\n                        enableReportOnlyMode: {\n                            type: 'boolean'\n                        },\n                        'child-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'connect-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'img-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'script-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'style-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'default-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'base-uri': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'font-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'object-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        },\n                        'media-src': {\n                            type: 'array',\n                            items: {\n                                type: 'string'\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        query: {\n            type: 'object',\n            additionalProperties: true\n        },\n        previewContext: {\n            nullable: true,\n            type: 'string'\n        },\n        suggestedMarket: {\n            nullable: true,\n            type: 'string'\n        },\n        apiSettings: {\n            type: 'object',\n            properties: {\n                baseUrl: {\n                    type: 'string'\n                },\n                channelId: {\n                    type: 'integer'\n                },\n                catalogId: {\n                    type: 'integer'\n                },\n                oun: {\n                    type: 'string'\n                },\n                baseImageUrl: {\n                    type: 'string'\n                },\n                ratingsReviewsEndpoint: {\n                    type: 'string'\n                },\n                retailServerProxyVersion: {\n                    type: 'string'\n                },\n                rnr: {\n                    type: 'object',\n                    properties: {\n                        proxyUrl: {\n                            type: 'string'\n                        },\n                        url: {\n                            type: 'string'\n                        },\n                        id: {\n                            type: 'string'\n                        }\n                    }\n                },\n                ratingsReviewsProxyEndpoint: {\n                    type: 'string'\n                }\n            }\n        },\n        operationId: {\n            type: 'string'\n        },\n        connectors: {\n            type: 'object',\n            nullable: true,\n            properties: {\n                expConnector: {\n                    nullable: true,\n                    type: 'string'\n                }\n            }\n        },\n        params: {\n            type: 'object',\n            properties: {\n                mock: {\n                    type: 'string'\n                },\n                isDebug: {\n                    type: 'boolean'\n                },\n                isEditor: {\n                    type: 'boolean'\n                },\n                isPreview: {\n                    type: 'boolean'\n                },\n                concatJs: {\n                    type: 'object',\n                    properties: {\n                        hasValue: {\n                            type: 'boolean'\n                        },\n                        isTruthy: {\n                            type: 'boolean'\n                        },\n                        value: {\n                            type: 'boolean'\n                        }\n                    }\n                },\n                theme: {\n                    type: 'string'\n                }\n            }\n        },\n        features: {\n            type: 'object',\n            additionalProperties: true\n        },\n        pageData: {\n            type: 'object',\n            additionalProperties: true\n        },\n        _debug: {\n            type: 'object',\n            properties: {\n                commerceSDKVersion: {\n                    type: 'string'\n                },\n                commerceSSKVersion: {\n                    type: 'string'\n                },\n                retailProxyVersion: {\n                    type: 'string'\n                }\n            }\n        },\n        themeOverride: {\n            type: 'object',\n            properties: {\n                url: {\n                    type: 'string'\n                },\n                disableDefault: {\n                    type: 'boolean'\n                }\n            }\n        },\n        telemetrySettings: {\n            type: 'object',\n            additionalProperties: true,\n            properties: {\n                doNotCollectBiData: {\n                    type: 'boolean'\n                },\n                optOutWebActivityTracking: {\n                    type: 'boolean'\n                },\n                eventHubEndPoint: {\n                    type: 'string'\n                },\n                eventHubAuthToken: {\n                    type: 'string'\n                },\n                operationId: {\n                    type: 'string'\n                },\n                instrumentationKey: {\n                    type: 'string'\n                },\n                environmentId: {\n                    type: 'string'\n                },\n                url: {\n                    type: 'string'\n                },\n                clientAuth: {\n                    type: 'string'\n                },\n                commerceCoreEnvId: {\n                    type: 'string'\n                }\n            }\n        },\n        requestUrl: {\n            type: 'string'\n        },\n        clientContext: {\n            type: 'object',\n            properties: {\n                deviceType: {\n                    type: 'string'\n                }\n            }\n        },\n        requestFormData: {\n            nullable: true,\n            type: 'object',\n            additionalProperties: true\n        },\n        canonicalDomain: {\n            type: 'string'\n        },\n        canonicalUrl: {\n            nullable: true,\n            type: 'string'\n        },\n        staticContext: {\n            type: 'object',\n            properties: {\n                staticCdnUrl: {\n                    type: 'string'\n                },\n                staticCdnUrlWithLocale: {\n                    type: 'string'\n                }\n            }\n        },\n        gridSettings: {\n            type: 'object',\n            properties: {\n                xs: {\n                    type: 'object',\n                    properties: {\n                        w: {\n                            type: 'integer'\n                        },\n                        h: {\n                            type: 'integer'\n                        }\n                    }\n                },\n                sm: {\n                    type: 'object',\n                    properties: {\n                        w: {\n                            type: 'integer'\n                        },\n                        h: {\n                            type: 'integer'\n                        }\n                    }\n                },\n                md: {\n                    type: 'object',\n                    properties: {\n                        w: {\n                            type: 'integer'\n                        },\n                        h: {\n                            type: 'integer'\n                        }\n                    }\n                },\n                lg: {\n                    type: 'object',\n                    properties: {\n                        w: {\n                            type: 'integer'\n                        },\n                        h: {\n                            type: 'integer'\n                        }\n                    }\n                },\n                xl: {\n                    type: 'object',\n                    properties: {\n                        w: {\n                            type: 'integer'\n                        },\n                        h: {\n                            type: 'integer'\n                        }\n                    }\n                }\n            }\n        },\n        debugMode: {\n            type: 'integer'\n        },\n        redirectUrl: {\n            nullable: true,\n            type: 'string'\n        },\n        sameSiteRequired: {\n            type: 'boolean'\n        },\n        siteStylePreset: {\n            type: 'string'\n        },\n        pageStylePreset: {\n            type: 'string'\n        },\n        telemetryData: {\n            type: 'object',\n            additionalProperties: true\n        },\n        headers: {\n            type: 'object',\n            additionalProperties: true\n        },\n        experiments: {\n            type: 'object',\n            nullable: true,\n            properties: {\n                userId: {\n                    type: 'string',\n                    nullable: true\n                },\n                activeExperiments: {\n                    type: 'array',\n                    items: {\n                        type: 'object',\n                        nullable: true,\n                        properties: {\n                            experimentId: {\n                                type: 'string'\n                            },\n                            variantId: {\n                                type: 'string'\n                            },\n                            moduleId: {\n                                type: 'string'\n                            }\n                        }\n                    }\n                },\n                moduleIdToExperimentIdMap: {\n                    type: 'object',\n                    nullable: true,\n                    additionalProperties: true\n                }\n            }\n        }\n    }\n});\n\nexport const themeModulesFastJson = fastJson({\n    type: 'array',\n    items: {\n        type: 'string'\n    }\n});\n\nexport const pageRootFastJson = fastJson({\n    additionalProperties: true,\n    title: 'Page root fast json',\n    type: 'object',\n    properties: {\n        id: {\n            type: 'string'\n        },\n        typeName: {\n            type: 'string'\n        },\n        config: {\n            $ref: '#/definitions/setting'\n        },\n        modules: {\n            $ref: '#/definitions/rootModules'\n        }\n    },\n    definitions: {\n        rootModules: {\n            type: 'object',\n            additionalProperties: true,\n            properties: {\n                htmlHead: {\n                    $ref: '#/definitions/moduleContent'\n                },\n                bodyBegin: {\n                    $ref: '#/definitions/moduleContent'\n                },\n                bodyEnd: {\n                    $ref: '#/definitions/moduleContent'\n                },\n                body: {\n                    $ref: '#/definitions/moduleContent'\n                }\n            }\n        },\n        moduleContent: {\n            type: 'array',\n            items: {\n                type: 'object',\n                additionalProperties: true,\n                properties: {\n                    config: {\n                        $ref: '#/definitions/setting'\n                    },\n                    id: {\n                        type: 'string'\n                    },\n                    typeName: {\n                        type: 'string'\n                    },\n                    friendlyName: {\n                        type: 'string',\n                        nullable: true\n                    },\n                    modules: {\n                        type: 'object',\n                        additionalProperties: true,\n                        nullable: true\n                    }\n                }\n            }\n        },\n        setting: {\n            additionalProperties: true,\n            nullable: true,\n            type: 'object'\n        }\n    }\n});\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}