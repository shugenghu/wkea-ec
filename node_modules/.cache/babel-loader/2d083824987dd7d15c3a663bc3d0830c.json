{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import{buildCacheKeyWithUrlTokens,getFullOrderTemplate,GetFullOrderTemplateInput,QueryResultSettingsProxy}from'@msdyn365-commerce-modules/retail-actions';import{createObservableDataAction}from'@msdyn365-commerce/core';export var ActiveOrderTemplateLinesInput=function ActiveOrderTemplateLinesInput(requestContext,config){var _this=this,_requestContext$query;_classCallCheck(this,ActiveOrderTemplateLinesInput);this.getCacheKey=function(){return buildCacheKeyWithUrlTokens('ActiveOrderTemplateLines',_this.requestContext);};this.getCacheObjectType=function(){return'ActiveOrderTemplateLines';};this.dataCacheType=function(){return'instance';};this.shouldCacheOutput=function(){return false;};if(!((_requestContext$query=requestContext.query)!==null&&_requestContext$query!==void 0&&_requestContext$query.id)){throw new Error('Failed to get order template id from the query.');}if(!config){throw new Error('Failed to get order template module configuration');}this.orderTemplateId=requestContext.query.id;this.queryResultSettings=QueryResultSettingsProxy.fromModuleData(requestContext,config).QueryResultSettings;this.queryResultSettings.count=true;this.requestContext=requestContext;};export function getActiveOrderTemplateLines(_x,_x2){return _getActiveOrderTemplateLines.apply(this,arguments);}function _getActiveOrderTemplateLines(){_getActiveOrderTemplateLines=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input,context){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",getFullOrderTemplate(new GetFullOrderTemplateInput(input.orderTemplateId,input.queryResultSettings),context));case 1:case\"end\":return _context.stop();}}},_callee);}));return _getActiveOrderTemplateLines.apply(this,arguments);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/order-template/order-template/get-order-template-lines',action:getActiveOrderTemplateLines,input:function input(context){if(!context.config){throw new Error('Failed to get order template module configuration');}return new ActiveOrderTemplateLinesInput(context.requestContext,context.config);}});","map":{"version":3,"sources":["modules/order-template/actions/get-order-template.ts"],"names":[],"mappings":"8MAAA,OACI,0BADJ,CAEI,oBAFJ,CAGI,yBAHJ,CAMI,wBANJ,KAOO,2CAPP,CAQA,OAEI,0BAFJ,KAQO,yBARP,CAcA,UAAa,CAAA,6BAAb,CAKI,uCAAY,cAAZ,CAA6C,MAA7C,CAAqF,0FAc9E,KAAA,WAAA,CAAc,iBAAe,CAAA,0BAA0B,CAAC,0BAAD,CAA6B,KAAI,CAAC,cAAlC,CAAzC,EAAd,CACA,KAAA,kBAAA,CAAqB,iBAAc,0BAAd,EAArB,CACA,KAAA,aAAA,CAAgB,iBAAiB,UAAjB,EAAhB,CACA,KAAA,iBAAA,CAAoB,iBAAM,MAAN,EAApB,CAhBH,GAAI,yBAAC,cAAc,CAAC,KAAhB,0CAAC,sBAAsB,EAAvB,CAAJ,CAA+B,CAC3B,KAAM,IAAI,CAAA,KAAJ,CAAU,iDAAV,CAAN,CACH,CACD,GAAI,CAAC,MAAL,CAAa,CACT,KAAM,IAAI,CAAA,KAAJ,CAAU,mDAAV,CAAN,CACH,CACD,KAAK,eAAL,CAAuB,cAAc,CAAC,KAAf,CAAqB,EAA5C,CACA,KAAK,mBAAL,CAA2B,wBAAwB,CAAC,cAAzB,CAAwC,cAAxC,CAAwD,MAAxD,EAAgE,mBAA3F,CAEA,KAAK,mBAAL,CAAyB,KAAzB,CAAiC,IAAjC,CACA,KAAK,cAAL,CAAsB,cAAtB,CACH,CAjBL,CA4BA,eAAsB,CAAA,2BAAtB,oE,6HAAO,iBAA2C,KAA3C,CAAiF,OAAjF,kJACI,oBAAoB,CAAC,GAAI,CAAA,yBAAJ,CAA8B,KAAK,CAAC,eAApC,CAAqD,KAAK,CAAC,mBAA3D,CAAD,CAAkF,OAAlF,CADxB,wD,8DAIP,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,mFADkC,CAEtC,MAAM,CAA0B,2BAFM,CAGtC,KAAK,CAAE,eAAC,OAAD,CAAkC,CACrC,GAAI,CAAC,OAAO,CAAC,MAAb,CAAqB,CACjB,KAAM,IAAI,CAAA,KAAJ,CAAU,mDAAV,CAAN,CACH,CACD,MAAO,IAAI,CAAA,6BAAJ,CAAkC,OAAO,CAAC,cAA1C,CAA0D,OAAO,CAAC,MAAlE,CAAP,CACH,CARqC,CAAD,CAAzC","sourcesContent":["import {\n    buildCacheKeyWithUrlTokens,\n    getFullOrderTemplate,\n    GetFullOrderTemplateInput,\n    IQueryResultSettingsModuleConfig,\n    OrderTemplate,\n    QueryResultSettingsProxy\n} from '@msdyn365-commerce-modules/retail-actions';\nimport {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext,\n    IRequestContext\n} from '@msdyn365-commerce/core';\nimport { IQueryResultSettings } from '@msdyn365-commerce/retail-proxy';\n\n/**\n * Input class for getActiveOrderTemplateLines data action\n */\nexport class ActiveOrderTemplateLinesInput implements IActionInput {\n    public requestContext: IRequestContext;\n    public orderTemplateId: string;\n    public queryResultSettings: IQueryResultSettings;\n\n    constructor(requestContext: IRequestContext, config: IQueryResultSettingsModuleConfig) {\n        if (!requestContext.query?.id) {\n            throw new Error('Failed to get order template id from the query.');\n        }\n        if (!config) {\n            throw new Error('Failed to get order template module configuration');\n        }\n        this.orderTemplateId = requestContext.query.id;\n        this.queryResultSettings = QueryResultSettingsProxy.fromModuleData(requestContext, config).QueryResultSettings;\n\n        this.queryResultSettings.count = true;\n        this.requestContext = requestContext;\n    }\n\n    public getCacheKey = (): string =>  buildCacheKeyWithUrlTokens('ActiveOrderTemplateLines', this.requestContext);\n    public getCacheObjectType = (): string => 'ActiveOrderTemplateLines';\n    public dataCacheType = (): CacheType => 'instance';\n    public shouldCacheOutput = () => false;\n}\n\n/**\n * Calls the Retail API and returns a ProductList object based on the passed GetCartInput\n */\nexport async function getActiveOrderTemplateLines(input: ActiveOrderTemplateLinesInput, context: IActionContext): Promise<OrderTemplate> {\n    return getFullOrderTemplate(new GetFullOrderTemplateInput(input.orderTemplateId, input.queryResultSettings), context);\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/order-template/order-template/get-order-template-lines',\n    action: <IAction<OrderTemplate>>getActiveOrderTemplateLines,\n    input: (context: ICreateActionContext) => {\n        if (!context.config) {\n            throw new Error('Failed to get order template module configuration');\n        }\n        return new ActiveOrderTemplateLinesInput(context.requestContext, context.config);\n    }\n});\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}