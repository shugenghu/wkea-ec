{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import{buildCacheKey}from'@msdyn365-commerce-modules/retail-actions';import{createObservableDataAction}from'@msdyn365-commerce/core';import{getChannelsAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/StoreOperationsDataActions.g';var getChannels=function getChannels(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",getChannelsAsync({callerContext:ctx}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var GetChannelIdentitiesInput=function GetChannelIdentitiesInput(apiSettings){var _this=this;_classCallCheck(this,GetChannelIdentitiesInput);this.getCacheKey=function(){return buildCacheKey(\"ChannelIdentities\",_this.apiSettings);};this.getCacheObjectType=function(){return\"ChannelIdentities\";};this.dataCacheType=function(){return'request';};this.apiSettings=apiSettings;};var createChannelIdentitiesInput=function createChannelIdentitiesInput(inputData){return new GetChannelIdentitiesInput(inputData.requestContext.apiSettings);};export function getChannelsAction(_x2,_x3){return _getChannelsAction.apply(this,arguments);}function _getChannelsAction(){_getChannelsAction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(input,ctx){var channels;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(ctx){_context2.next=2;break;}throw new Error(\"getChannelsAction - Action context cannot be null/undefined\");case 2:channels=[];_context2.prev=3;_context2.next=6;return getChannels()(ctx);case 6:channels=_context2.sent;_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](3);throw _context2.t0;case 12:return _context2.abrupt(\"return\",{channelIdentities:channels});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[3,9]]);}));return _getChannelsAction.apply(this,arguments);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/order-management/get-channels',action:getChannelsAction,input:createChannelIdentitiesInput});","map":{"version":3,"sources":["actions/get-channels.ts"],"names":[],"mappings":"8MAAA,OAAS,aAAT,KAA8B,2CAA9B,CACA,OAEI,0BAFJ,KAUO,yBAVP,CAYA,OAAS,gBAAT,KAAiC,+EAAjC,CASA,GAAM,CAAA,WAAW,CAAG,QAAd,CAAA,WAAc,kGAAM,iBAAO,GAAP,kJACf,gBAAgB,CACnB,CACI,aAAa,CAAE,GADnB,CADmB,CADD,wDAAN,gEAApB,CAWA,UAAa,CAAA,yBAAb,CAGI,mCAAY,WAAZ,CAA6C,gEAItC,KAAA,WAAA,CAAc,iBAAM,CAAA,aAAa,qBAAsB,KAAI,CAAC,WAA3B,CAAnB,EAAd,CACA,KAAA,kBAAA,CAAqB,sCAArB,CACA,KAAA,aAAA,CAAgB,iBAAiB,SAAjB,EAAhB,CALH,KAAK,WAAL,CAAmB,WAAnB,CACH,CALL,CAeA,GAAM,CAAA,4BAA4B,CAAG,QAA/B,CAAA,4BAA+B,CAAC,SAAD,CAAoD,CACrF,MAAO,IAAI,CAAA,yBAAJ,CAA8B,SAAS,CAAC,cAAV,CAAyB,WAAvD,CAAP,CACH,CAFD,CAOA,eAAsB,CAAA,iBAAtB,2D,yGAAO,kBACH,KADG,CAEH,GAFG,sIAIE,GAJF,+BAKO,IAAI,CAAA,KAAJ,+DALP,QAQC,QARD,CAQ+B,EAR/B,yCAWkB,CAAA,WAAW,GAAG,GAAH,CAX7B,QAWC,QAXD,+JAgBI,CAAE,iBAAiB,CAAE,QAArB,CAhBJ,wE,oDAmBP,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,0DADkC,CAEtC,MAAM,CAA6B,iBAFG,CAGtC,KAAK,CAAE,4BAH+B,CAAD,CAAzC","sourcesContent":["import { buildCacheKey } from '@msdyn365-commerce-modules/retail-actions';\nimport {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    IAny,\n    ICommerceApiSettings,\n    ICreateActionContext,\n    IGeneric\n} from '@msdyn365-commerce/core';\nimport { ChannelIdentity } from '@msdyn365-commerce/retail-proxy';\nimport { getChannelsAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/StoreOperationsDataActions.g';\n\ninterface IChannelIdentity {\n    channelIdentities: ChannelIdentity[];\n}\n\n/**\n * Calls the Retail API and returns the channels\n */\nconst getChannels = () => async (ctx: IActionContext): Promise<ChannelIdentity[]> => {\n    return getChannelsAsync(\n        {\n            callerContext: ctx\n        }\n    );\n};\n\n/**\n *  Action input\n */\nexport class GetChannelIdentitiesInput implements IActionInput {\n    private apiSettings: ICommerceApiSettings;\n\n    constructor(apiSettings: ICommerceApiSettings) {\n        this.apiSettings = apiSettings;\n    }\n\n    public getCacheKey = () => buildCacheKey(`ChannelIdentities`, this.apiSettings);\n    public getCacheObjectType = () => `ChannelIdentities`;\n    public dataCacheType = (): CacheType => 'request';\n}\n\n/**\n * Creates the input required to make the retail api call\n */\nconst createChannelIdentitiesInput = (inputData: ICreateActionContext<IGeneric<IAny>>) => {\n    return new GetChannelIdentitiesInput(inputData.requestContext.apiSettings);\n};\n\n/**\n * Get channels action\n */\nexport async function getChannelsAction(\n    input: GetChannelIdentitiesInput,\n    ctx: IActionContext\n): Promise<IChannelIdentity> {\n    if (!ctx) {\n        throw new Error(`getChannelsAction - Action context cannot be null/undefined`);\n    }\n\n    let channels: ChannelIdentity[] = [];\n\n    try {\n        channels = await getChannels()(ctx);\n    } catch (error) {\n        throw error;\n    }\n\n    return { channelIdentities: channels };\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/order-management/get-channels',\n    action: <IAction<IChannelIdentity>>getChannelsAction,\n    input: createChannelIdentitiesInput\n});\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}