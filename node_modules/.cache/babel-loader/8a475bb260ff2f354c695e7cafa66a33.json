{"ast":null,"code":"import{createObservableDataAction}from'@msdyn365-commerce/core';import{retailAction}from'@msdyn365-commerce/retail-proxy/dist';import{createSearchByTextInput}from'@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';import{QueryResultSettingsProxy}from'./utilities/QueryResultSettingsProxy';/**\r\n * createInput method for the searchByText data action\r\n */export function createSearchByTextInputFunc(inputData){const{requestContext:{query,apiSettings:{channelId}}}=inputData;const search=query&&query.q;if(!search){throw new Error('Unable to preform search without search text. Query string ?q={searchText} must be present or should be configued in module data.');}const querySettingsProxy=QueryResultSettingsProxy.fromInputData(inputData);return createSearchByTextInput(querySettingsProxy.QueryResultSettings,Number(channelId),0,search);}/**\r\n * The searchByText data action\r\n * Queries RetailServers product searchByText API using a\r\n * query string parameter and returns a list of ProductSearchResults\r\n */export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/search-by-text',action:retailAction,input:createSearchByTextInputFunc});","map":{"version":3,"sources":["../../src/search-by-text.ts"],"names":[],"mappings":"AACA,OAAS,0BAAT,KAAiF,yBAAjF,CACA,OAA8B,YAA9B,KAAkD,sCAAlD,CACA,OAAS,uBAAT,KAAwC,wEAAxC,CAEA,OAAS,wBAAT,KAAyC,sCAAzC,CAEA;;AAEG,GACH,MAAM,SAAU,CAAA,2BAAV,CAAuC,SAAvC,CAAsG,CACxG,KAAM,CAAE,cAAc,CAAE,CAAC,KAAD,CAAQ,WAAW,CAAE,CAAC,SAAD,CAArB,CAAlB,EAAuD,SAA7D,CAEA,KAAM,CAAA,MAAM,CAAG,KAAK,EAAI,KAAK,CAAC,CAA9B,CAEA,GAAI,CAAC,MAAL,CAAa,CACT,KAAM,IAAI,CAAA,KAAJ,CAAU,mIAAV,CAAN,CACH,CAED,KAAM,CAAA,kBAAkB,CAAG,wBAAwB,CAAC,aAAzB,CAAuC,SAAvC,CAA3B,CACA,MAAO,CAAA,uBAAuB,CAAC,kBAAkB,CAAC,mBAApB,CAAyC,MAAM,CAAC,SAAD,CAA/C,CAA4D,CAA5D,CAA+D,MAA/D,CAA9B,CACH,CAED;;;;AAIG,GACH,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,0DADkC,CAEtC,MAAM,CAAkC,YAFF,CAGtC,KAAK,CAAE,2BAH+B,CAAD,CAAzC","sourcesContent":["import { IAction } from '@msdyn365-commerce/core';\nimport { createObservableDataAction, IAny, ICreateActionContext, IGeneric } from '@msdyn365-commerce/core';\nimport { IDataServiceRequest, retailAction } from '@msdyn365-commerce/retail-proxy/dist';\nimport { createSearchByTextInput } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';\nimport { ProductSearchResult } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport { QueryResultSettingsProxy } from './utilities/QueryResultSettingsProxy';\n\n/**\n * createInput method for the searchByText data action\n */\nexport function createSearchByTextInputFunc (inputData: ICreateActionContext<IGeneric<IAny>, IGeneric<IAny>>): IDataServiceRequest {\n    const { requestContext: {query, apiSettings: {channelId}}} = inputData;\n\n    const search = query && query.q;\n\n    if (!search) {\n        throw new Error('Unable to preform search without search text. Query string ?q={searchText} must be present or should be configued in module data.');\n    }\n\n    const querySettingsProxy = QueryResultSettingsProxy.fromInputData(inputData);\n    return createSearchByTextInput(querySettingsProxy.QueryResultSettings, Number(channelId), 0, search);\n}\n\n/**\n * The searchByText data action\n * Queries RetailServers product searchByText API using a\n * query string parameter and returns a list of ProductSearchResults\n */\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/retail-actions/search-by-text',\n    action: <IAction<ProductSearchResult[]>>retailAction,\n    input: createSearchByTextInputFunc\n});\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}