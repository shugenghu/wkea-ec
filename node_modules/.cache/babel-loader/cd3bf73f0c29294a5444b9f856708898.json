{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import{Alert,Button}from'@msdyn365-commerce-modules/utilities';import classnames from'classnames';import*as React from'react';export var getForm=function getForm(options){var errorMessage=options.errorMessage,inputRef=options.inputRef,inputPinRef=options.inputPinRef,inputExpRef=options.inputExpRef,giftCardNumber=options.giftCardNumber,giftCardPin=options.giftCardPin,giftCardExp=options.giftCardExp,onEnterGiftCardNumber=options.onEnterGiftCardNumber,onEnterGiftCardPin=options.onEnterGiftCardPin,onEnterGiftCardExp=options.onEnterGiftCardExp,onApplyGiftCard=options.onApplyGiftCard,supportExternalGiftCard=options.supportExternalGiftCard,additionalFields=options.additionalFields,_options$resources=options.resources,applyGiftCardButton=_options$resources.applyGiftCardButton,giftCardFormLabel=_options$resources.giftCardFormLabel,giftCardNumberLabel=_options$resources.giftCardNumberLabel,giftCardPinLabel=_options$resources.giftCardPinLabel,giftCardExpLabel=_options$resources.giftCardExpLabel,giftCardAlertLabel=_options$resources.giftCardAlertLabel,giftCardPinPlaceholderText=_options$resources.giftCardPinPlaceholderText,giftCardExpPlaceholderText=_options$resources.giftCardExpPlaceholderText;var onApply=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return onApplyGiftCard();case 3:case\"end\":return _context.stop();}}},_callee);}));return function onApply(_x){return _ref.apply(this,arguments);};}();var onChangeNumber=function onChangeNumber(e){var value=(e.target.value||'').replace(new RegExp('[<>]','gi'),'');onEnterGiftCardNumber(value);};var onChangePin=function onChangePin(e){var value=(e.target.value||'').replace(new RegExp('[<>]','gi'),'');onEnterGiftCardPin(value);};var onChangeExp=function onChangeExp(e){var value=(e.target.value||'').replace(new RegExp('[<>]','gi'),'');onEnterGiftCardExp(value);};var formProps={className:classnames('ms-checkout-gift-card__form',{'is-invalid':!!errorMessage}),onSubmit:onApply,tag:'form'};var label=/*#__PURE__*/React.createElement(\"label\",{id:'ms-checkout-gift-card__label',className:'ms-checkout-gift-card__input-label'},giftCardFormLabel);var inputPinLabel=/*#__PURE__*/React.createElement(\"label\",{id:'ms-checkout-gift-card__input-pin-label',className:'ms-checkout-gift-card__input-pin-label'},giftCardPinLabel);var inputExpLabel=/*#__PURE__*/React.createElement(\"label\",{id:'ms-checkout-gift-card__input-exp-label',className:'ms-checkout-gift-card__input-exp-label'},giftCardExpLabel);var alertFieldLabel=/*#__PURE__*/React.createElement(\"label\",{id:'ms-checkout-gift-card__input-alert',className:'ms-checkout-gift-card__input-alert-label'},giftCardAlertLabel);var alert=/*#__PURE__*/React.createElement(Alert,{tag:'span',id:'ms-checkout-gift-card__error',className:'ms-checkout-gift-card__input-error',role:'alert',assertive:false,fade:false,includeAlertClass:false,isOpen:!!errorMessage},errorMessage);var inputProps={className:'ms-checkout-gift-card__input-fields'};var inputNumProps={className:'ms-checkout-gift-card__input-num-fields'};var inputPinProps={className:'ms-checkout-gift-card__input-pin-fields'};var inputExpProps={className:'ms-checkout-gift-card__input-exp-fields'};var inputNumber=/*#__PURE__*/React.createElement(\"input\",{ref:inputRef,type:'text',className:'ms-checkout-gift-card__input-text form-control',\"aria-label\":giftCardNumberLabel,onChange:onChangeNumber,value:giftCardNumber,\"aria-labelledby\":'ms-checkout-gift-card__label ms-checkout-gift-card__error'});var inputPin=/*#__PURE__*/React.createElement(\"input\",{ref:inputPinRef,type:'text',className:'ms-checkout-gift-card__input-pin-text form-contol',\"aria-label\":giftCardPinLabel,placeholder:giftCardPinPlaceholderText,onChange:onChangePin,value:giftCardPin,\"aria-labelledby\":'ms-checkout-gift-card__label ms-checkout-gift-card__error'});var inputExp=/*#__PURE__*/React.createElement(\"input\",{ref:inputExpRef,type:'text',className:'ms-checkout-gift-card__input-exp-text form-contol',\"aria-label\":giftCardExpLabel,placeholder:giftCardExpPlaceholderText,onChange:onChangeExp,value:giftCardExp,\"aria-labelledby\":'ms-checkout-gift-card__label ms-checkout-gift-card__error'});var applyButton=/*#__PURE__*/React.createElement(Button,{className:'ms-checkout-gift-card__btn-apply',onClick:onApply,\"aria-label\":applyGiftCardButton,disabled:!giftCardNumber},applyGiftCardButton);var showGiftCardPinInput=false;var showGiftCardExpInput=false;switch(additionalFields){case\"pin\":showGiftCardPinInput=true;break;case\"expirationDate\":showGiftCardExpInput=true;break;case\"pinAndExpirationDate\":showGiftCardPinInput=true;showGiftCardExpInput=true;break;default:}return{formProps:formProps,label:label,inputPinLabel:inputPinLabel,inputExpLabel:inputExpLabel,alert:alert,inputProps:inputProps,inputNumProps:inputNumProps,inputPinProps:inputPinProps,inputExpProps:inputExpProps,inputNumber:inputNumber,inputPin:inputPin,inputExp:inputExp,applyButton:applyButton,supportExternalGiftCard:supportExternalGiftCard,showGiftCardPinInput:showGiftCardPinInput,showGiftCardExpInput:showGiftCardExpInput,alertFieldLabel:alertFieldLabel};};","map":{"version":3,"sources":["modules/checkout-gift-card/components/get-form.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Alert, Button, INodeProps, NodeTag } from '@msdyn365-commerce-modules/utilities';\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport { showAdditionalFields } from '../checkout-gift-card.props.autogenerated';\n\nexport interface IGetFormInput {\n    errorMessage: string;\n    giftCardNumber: string;\n    giftCardPin: string;\n    giftCardExp: string;\n    inputRef?: React.RefObject<HTMLInputElement>;\n    inputPinRef?: React.RefObject<HTMLInputElement>;\n    inputExpRef?: React.RefObject<HTMLInputElement>;\n    supportExternalGiftCard?: boolean;\n    additionalFields?: showAdditionalFields;\n    resources: {\n        applyGiftCardButton: string;\n        giftCardFormLabel: string;\n        giftCardNumberLabel: string;\n        giftCardPinLabel: string;\n        giftCardExpLabel: string;\n        giftCardAlertLabel: string;\n        giftCardPinPlaceholderText: string;\n        giftCardExpPlaceholderText: string;\n    };\n    onEnterGiftCardNumber(giftCardNumber: string): void;\n    onEnterGiftCardPin(giftCardPin: string): void;\n    onEnterGiftCardExp(giftCardExp: string): void;\n    onApplyGiftCard(): Promise<void>;\n}\n\nexport interface IForm {\n    formProps: INodeProps;\n    label: React.ReactNode;\n    inputPinLabel: React.ReactNode;\n    inputExpLabel: React.ReactNode;\n    alert: React.ReactNode;\n    inputProps: INodeProps;\n    inputNumProps: INodeProps;\n    inputPinProps: INodeProps;\n    inputExpProps: INodeProps;\n    inputNumber: React.ReactNode;\n    inputPin: React.ReactNode;\n    inputExp: React.ReactNode;\n    applyButton: React.ReactNode;\n    supportExternalGiftCard: boolean | undefined;\n    showGiftCardPinInput: boolean | undefined;\n    showGiftCardExpInput: boolean | undefined;\n    alertFieldLabel: React.ReactNode;\n}\n\n// tslint:disable-next-line:max-func-body-length\nexport const getForm = (options: IGetFormInput): IForm => {\n    const {\n        errorMessage,\n        inputRef,\n        inputPinRef,\n        inputExpRef,\n        giftCardNumber,\n        giftCardPin,\n        giftCardExp,\n        onEnterGiftCardNumber,\n        onEnterGiftCardPin,\n        onEnterGiftCardExp,\n        onApplyGiftCard,\n        supportExternalGiftCard,\n        additionalFields,\n        resources: { applyGiftCardButton, giftCardFormLabel, giftCardNumberLabel, giftCardPinLabel, giftCardExpLabel,\n            giftCardAlertLabel, giftCardPinPlaceholderText, giftCardExpPlaceholderText }\n    } = options;\n\n    const onApply = async (e: React.SyntheticEvent): Promise<void> => {\n        e.preventDefault();\n        await onApplyGiftCard();\n    };\n\n    const onChangeNumber = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const value = (e.target.value || '').replace(new RegExp('[<>]', 'gi'), '');\n        onEnterGiftCardNumber(value);\n    };\n\n    const onChangePin = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const value = (e.target.value || '').replace(new RegExp('[<>]', 'gi'), '');\n        onEnterGiftCardPin(value);\n    };\n\n    // need to filter out the month and year\n    const onChangeExp = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const value = (e.target.value || '').replace(new RegExp('[<>]', 'gi'), '');\n        onEnterGiftCardExp(value);\n    };\n\n    const formProps = {\n        className: classnames('ms-checkout-gift-card__form', { 'is-invalid': !!errorMessage }),\n        onSubmit: onApply,\n        tag: 'form' as NodeTag\n    };\n\n    const label = (\n        <label id='ms-checkout-gift-card__label' className='ms-checkout-gift-card__input-label'>\n            {giftCardFormLabel}\n        </label>\n    );\n\n    const inputPinLabel = (\n        <label id='ms-checkout-gift-card__input-pin-label' className='ms-checkout-gift-card__input-pin-label'>\n            {giftCardPinLabel}\n        </label>\n    );\n\n    const inputExpLabel = (\n        <label id='ms-checkout-gift-card__input-exp-label' className='ms-checkout-gift-card__input-exp-label'>\n            {giftCardExpLabel}\n        </label>\n    );\n\n    const alertFieldLabel = (\n        <label id='ms-checkout-gift-card__input-alert' className='ms-checkout-gift-card__input-alert-label'>\n            {giftCardAlertLabel}\n        </label>\n    );\n\n    const alert = (\n        <Alert\n            tag='span'\n            id='ms-checkout-gift-card__error'\n            className='ms-checkout-gift-card__input-error'\n            role='alert'\n            assertive={false}\n            fade={false}\n            includeAlertClass={false}\n            isOpen={!!errorMessage}\n        >\n            {errorMessage}\n        </Alert>\n    );\n\n    const inputProps = {\n        className: 'ms-checkout-gift-card__input-fields'\n    };\n\n    const inputNumProps = {\n        className: 'ms-checkout-gift-card__input-num-fields'\n    };\n\n    const inputPinProps = {\n        className: 'ms-checkout-gift-card__input-pin-fields'\n    };\n\n    const inputExpProps = {\n        className: 'ms-checkout-gift-card__input-exp-fields'\n    };\n\n    const inputNumber = (\n        <input\n            ref={inputRef}\n            type='text'\n            className='ms-checkout-gift-card__input-text form-control'\n            aria-label={giftCardNumberLabel}\n            onChange={onChangeNumber}\n            value={giftCardNumber}\n            aria-labelledby='ms-checkout-gift-card__label ms-checkout-gift-card__error'\n        />\n    );\n\n    const inputPin = (\n        <input\n            ref={inputPinRef}\n            type='text'\n            className='ms-checkout-gift-card__input-pin-text form-contol'\n            aria-label={giftCardPinLabel}\n            placeholder={giftCardPinPlaceholderText}\n            onChange={onChangePin}\n            value={giftCardPin}\n            aria-labelledby='ms-checkout-gift-card__label ms-checkout-gift-card__error'\n        />\n    );\n\n    const inputExp = (\n        <input\n            ref={inputExpRef}\n            type='text'\n            className='ms-checkout-gift-card__input-exp-text form-contol'\n            aria-label={giftCardExpLabel}\n            placeholder={giftCardExpPlaceholderText}\n            onChange={onChangeExp}\n            value={giftCardExp}\n            aria-labelledby='ms-checkout-gift-card__label ms-checkout-gift-card__error'\n        />\n    );\n\n    const applyButton = (\n        <Button\n            className='ms-checkout-gift-card__btn-apply'\n            onClick={onApply}\n            aria-label={applyGiftCardButton}\n            disabled={!giftCardNumber}\n        >\n            {applyGiftCardButton}\n        </Button>\n    );\n\n    let showGiftCardPinInput = false;\n    let showGiftCardExpInput = false;\n\n    switch(additionalFields) {\n        case showAdditionalFields.pin:\n            showGiftCardPinInput = true;\n            break;\n        case showAdditionalFields.expirationDate:\n            showGiftCardExpInput = true;\n            break;\n        case showAdditionalFields.pinAndExpirationDate:\n            showGiftCardPinInput = true;\n            showGiftCardExpInput = true;\n            break;\n        default:\n    }\n\n    return {\n        formProps,\n        label,\n        inputPinLabel,\n        inputExpLabel,\n        alert,\n        inputProps,\n        inputNumProps,\n        inputPinProps,\n        inputExpProps,\n        inputNumber,\n        inputPin,\n        inputExp,\n        applyButton,\n        supportExternalGiftCard,\n        showGiftCardPinInput,\n        showGiftCardExpInput,\n        alertFieldLabel\n    };\n};\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}