{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import{__decorate}from\"tslib\";import{computed,observable}from'mobx';/**\r\n * Base global state that handles common global state behavior that other state can extend from\r\n */export var GlobalState=/*#__PURE__*/function(){function GlobalState(actionContext){_classCallCheck(this,GlobalState);this.isInitialized=false;this.actionContext=actionContext;this._status='UPDATING';}_createClass(GlobalState,[{key:\"initialize\",value:function(){var _initialize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.isInitialized=true;this._status='READY';return _context.abrupt(\"return\");case 3:case\"end\":return _context.stop();}}},_callee,this);}));function initialize(){return _initialize.apply(this,arguments);}return initialize;}()},{key:\"_doAsyncAction\",value:function(){var _doAsyncAction2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(lambda){var _this=this;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this._status='UPDATING';return _context2.abrupt(\"return\",lambda().then(function(result){_this._status='READY';return result;})[\"catch\"](function(error){console.log(error);_this._status='ERROR';return Promise.reject(error);}));case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function _doAsyncAction(_x){return _doAsyncAction2.apply(this,arguments);}return _doAsyncAction;}()},{key:\"status\",get:function get(){return this._status;}}]);return GlobalState;}();__decorate([observable],GlobalState.prototype,\"_status\",void 0);__decorate([computed],GlobalState.prototype,\"status\",null);","map":{"version":3,"sources":["global-state/global-state.ts"],"names":[],"mappings":"6SACA,OAAS,QAAT,CAAmB,UAAnB,KAAqC,MAArC,CAIA;;AAEG,GACH,UAAa,CAAA,WAAb,yBASI,qBAAY,aAAZ,CAAyC,mCAR/B,KAAA,aAAA,CAAyB,KAAzB,CASN,KAAK,aAAL,CAAqB,aAArB,CACA,KAAK,OAAL,CAAe,UAAf,CACH,CAZL,wQAeQ,KAAK,aAAL,CAAqB,IAArB,CACA,KAAK,OAAL,CAAe,OAAf,CAhBR,2TAqByC,MArBzC,qIAsBQ,KAAK,OAAL,CAAe,UAAf,CAtBR,iCAwBe,MAAM,GAAG,IAAT,CAAc,SAAA,MAAM,CAAG,CAC1B,KAAI,CAAC,OAAL,CAAe,OAAf,CACA,MAAO,CAAA,MAAP,CACH,CAHM,WAGE,SAAA,KAAK,CAAG,CACb,OAAO,CAAC,GAAR,CAAY,KAAZ,EACA,KAAI,CAAC,OAAL,CAAe,OAAf,CAEA,MAAO,CAAA,OAAO,CAAC,MAAR,CAAe,KAAf,CAAP,CACH,CARM,CAxBf,uMAK+B,CACvB,MAAO,MAAK,OAAZ,CACH,CAPL,2BAIgB,UAAA,CAAA,CAAX,UAAW,CAAA,C,qBAAA,C,SAAA,C,IAAqC,EAArC,CAAA,CACF,UAAA,CAAA,CAAT,QAAS,CAAA,C,qBAAA,C,QAAA,CAET,IAFS,CAAA","sourcesContent":["import { IActionContext } from '@msdyn365-commerce/core';\nimport { computed, observable } from 'mobx';\n\nimport { GlobalStateStatus, IGlobalState } from './i-global-state';\n\n/**\n * Base global state that handles common global state behavior that other state can extend from\n */\nexport class GlobalState implements IGlobalState {\n    protected isInitialized: boolean = false;\n    protected actionContext: IActionContext;\n\n    @observable protected _status: GlobalStateStatus;\n    @computed public get status(): Readonly<GlobalStateStatus> {\n        return this._status;\n    }\n\n    constructor(actionContext: IActionContext) {\n        this.actionContext = actionContext;\n        this._status = 'UPDATING';\n    }\n\n    public async initialize(): Promise<void> {\n        this.isInitialized = true;\n        this._status = 'READY';\n\n        return;\n    }\n\n    protected async _doAsyncAction<TOut>(lambda: () => Promise<TOut>): Promise<TOut> {\n        this._status = 'UPDATING';\n\n        return lambda().then(result => {\n            this._status = 'READY';\n            return result;\n        }).catch(error => {\n            console.log(error);\n            this._status = 'ERROR';\n\n            return Promise.reject(error);\n        });\n    }\n}\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}