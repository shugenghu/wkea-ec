{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var tslib_1=require(\"tslib\");var retail_actions_1=require(\"@msdyn365-commerce-modules/retail-actions\");var core_1=require(\"@msdyn365-commerce/core\");var React=tslib_1.__importStar(require(\"react\"));var __1=require(\"..\");var modal_1=require(\"../modal\");exports.Popup=function(popupProps){var dialogStrings=popupProps.dialogStrings,className=popupProps.className,imageSettings=popupProps.imageSettings,gridSettings=popupProps.gridSettings,_a=popupProps.data,product=_a.product,price=_a.price,productQuantity=popupProps.productQuantity,priceComponent=popupProps.priceComponent,navigationUrl=popupProps.navigationUrl,modalOpen=popupProps.modalOpen,telemetryContent=popupProps.telemetryContent,setModalOpen=popupProps.setModalOpen,context=popupProps.context;if(!dialogStrings||!product){return null;}var payLoad=__1.getPayloadObject('click',telemetryContent,__1.TelemetryConstant.ContinueShopping);var continueShoppingAttribute=__1.getTelemetryAttributes(telemetryContent,payLoad);payLoad.contentAction.etext=__1.TelemetryConstant.ViewBagAndCheckout;var viewBagAttribute=__1.getTelemetryAttributes(telemetryContent,payLoad);var closeModal=function closeModal(){setModalOpen(false);};var fallbackImageUrl=retail_actions_1.getFallbackImageUrl(product.ItemId,context.actionContext.requestContext.apiSettings);var quantity=productQuantity!==undefined?productQuantity:1;var itemsString=quantity===1?dialogStrings.headerItemOneText:dialogStrings.headerItemFormatText.replace('{0}',quantity.toString());var reducedDimensions=product.Dimensions?product.Dimensions.reduce(function(str,productDimension){if(productDimension.DimensionValue&&productDimension.DimensionValue.Value){if(str){return str+\", \"+productDimension.DimensionValue.Value;}return\"\"+productDimension.DimensionValue.Value;}return str;},''):'';return React.createElement(modal_1.Modal,{isOpen:modalOpen,onClosed:closeModal,className:className+\"__dialog\"},React.createElement(modal_1.ModalHeader,{toggle:closeModal,className:className+\"__dialog__header\"},React.createElement(\"span\",null,itemsString),React.createElement(\"span\",null,dialogStrings.headerMessageText)),React.createElement(modal_1.ModalBody,{className:className+\"__dialog__body\"},React.createElement(core_1.Image,{className:className+\"__dialog__image\",src:product.PrimaryImageUrl||'',fallBackSrc:fallbackImageUrl,altText:product.Name,gridSettings:gridSettings||{},imageSettings:imageSettings,loadFailureBehavior:'empty'}),React.createElement(\"span\",{className:className+\"__dialog__product-title\"},product.Name),reducedDimensions!==''?React.createElement(\"div\",{className:className+\"__dialog__product-variants\"},reducedDimensions):'',price?React.createElement(\"div\",{className:className+\"__dialog__product-price\"},priceComponent):'',React.createElement(__1.Button,tslib_1.__assign({className:className+\"__dialog__go-to-cart\",href:navigationUrl,title:dialogStrings.goToCartText},viewBagAttribute),dialogStrings.goToCartText),React.createElement(__1.Button,tslib_1.__assign({className:className+\"__dialog__back-to-shopping\",onClick:closeModal,title:dialogStrings.continueShoppingText},continueShoppingAttribute),dialogStrings.continueShoppingText)));};exports[\"default\"]=exports.Popup;","map":{"version":3,"sources":["/Users/User/Documents/wkea-ec/Msdyn365.Commerce.Online/node_modules/@msdyn365-commerce-modules/utilities/src/popup/Popup.tsx"],"names":[],"mappings":"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","sourcesContent":["import { getFallbackImageUrl } from '@msdyn365-commerce-modules/retail-actions';\nimport { IComponentProps, IGridSettings, IImageSettings, Image } from '@msdyn365-commerce/core';\nimport { ProductPrice, SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport * as React from 'react';\nimport { Button, getPayloadObject, getTelemetryAttributes, ITelemetryContent, TelemetryConstant } from '..';\nimport { Modal, ModalBody, ModalHeader } from '../modal';\n\nexport interface IPopupProps extends IComponentProps<{product: SimpleProduct | undefined; price: ProductPrice | undefined}> {\n    dialogStrings?: {\n        goToCartText: string;\n        continueShoppingText: string;\n        headerItemOneText: string;\n        headerItemFormatText: string;\n        headerMessageText: string;\n        freePriceText: string;\n        originalPriceText: string;\n        currentPriceText: string;\n    };\n\n    className: string;\n    imageSettings?: IImageSettings;\n    gridSettings: IGridSettings | undefined;\n    productQuantity: number;\n    priceComponent: React.ReactNode;\n    navigationUrl?: string;\n    modalOpen: boolean | undefined;\n    telemetryContent?: ITelemetryContent;\n    setModalOpen(newValue: boolean): void;\n}\n\nexport const Popup = (popupProps: IPopupProps) => {\n    const {dialogStrings, className, imageSettings, gridSettings, data: {product, price}, productQuantity, priceComponent, navigationUrl, modalOpen, telemetryContent, setModalOpen, context } = popupProps;\n\n    if (!dialogStrings || !product) {\n        return null;\n    }\n    const payLoad = getPayloadObject('click', telemetryContent!, TelemetryConstant.ContinueShopping);\n    const continueShoppingAttribute = getTelemetryAttributes(telemetryContent!, payLoad);\n    payLoad.contentAction.etext = TelemetryConstant.ViewBagAndCheckout;\n    const viewBagAttribute = getTelemetryAttributes(telemetryContent!, payLoad);\n    const closeModal = () => { setModalOpen(false); };\n    const fallbackImageUrl = getFallbackImageUrl(product.ItemId, context.actionContext.requestContext.apiSettings);\n    const quantity = productQuantity !== undefined ? productQuantity : 1;\n    const itemsString = quantity === 1 ? dialogStrings.headerItemOneText : dialogStrings.headerItemFormatText.replace('{0}', quantity.toString());\n\n    const reducedDimensions: string = product.Dimensions ? product.Dimensions.reduce<string>(\n        (str, productDimension) => {\n            if (productDimension.DimensionValue && productDimension.DimensionValue.Value) {\n                if (str) {\n                    return `${str}, ${productDimension.DimensionValue.Value}`;\n                }\n\n                return `${productDimension.DimensionValue.Value}`;\n            }\n\n            return str;\n        },\n        '') : '';\n\n    return (\n        <Modal\n            isOpen={modalOpen}\n            onClosed={closeModal}\n            className={`${className}__dialog`}\n        >\n            <ModalHeader toggle={closeModal} className={`${className}__dialog__header`}>\n                <span>{itemsString}</span><span>{dialogStrings.headerMessageText}</span>\n            </ModalHeader>\n            <ModalBody className={`${className}__dialog__body`}>\n                <Image\n                    className={`${className}__dialog__image`}\n                    src={ product.PrimaryImageUrl || ''}\n                    fallBackSrc = {fallbackImageUrl}\n                    altText={product.Name}\n                    gridSettings={gridSettings || {}}\n                    imageSettings={imageSettings}\n                    loadFailureBehavior='empty'\n                />\n                <span className={`${className}__dialog__product-title`}>{product.Name}</span>\n                {reducedDimensions !== '' ?\n                    <div className={`${className}__dialog__product-variants`}>{reducedDimensions}</div> :\n                    ''\n                }\n                {price ? (\n                    <div className={`${className}__dialog__product-price`}>\n                        {priceComponent}\n                    </div>\n                ) : ''}\n                <Button className={`${className}__dialog__go-to-cart`} href={navigationUrl} title={dialogStrings.goToCartText} {...viewBagAttribute}>{dialogStrings.goToCartText}</Button>\n                <Button className={`${className}__dialog__back-to-shopping`} onClick={closeModal} title={dialogStrings.continueShoppingText} {...continueShoppingAttribute}>{dialogStrings.continueShoppingText}</Button>\n            </ModalBody>\n        </Modal>\n    );\n};\n\nexport default Popup;"]},"metadata":{},"sourceType":"script"}