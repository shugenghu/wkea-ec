{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import{getPayloadObject,getTelemetryAttributes,TelemetryConstant}from'@msdyn365-commerce-modules/utilities';import*as React from'react';export var StoreSelectorSearchForm=/*#__PURE__*/function(_React$PureComponent){_inherits(StoreSelectorSearchForm,_React$PureComponent);var _super=_createSuper(StoreSelectorSearchForm);function StoreSelectorSearchForm(props){var _this;_classCallCheck(this,StoreSelectorSearchForm);_this=_super.call(this,props);_this.searchBoxRef=/*#__PURE__*/React.createRef();_this._searchTextChanged=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var inputValue;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inputValue=e.target.value;_context.next=3;return _this.props.searchTermChanged(inputValue);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this._onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _this$searchBoxRef$cu;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();(_this$searchBoxRef$cu=_this.searchBoxRef.current)===null||_this$searchBoxRef$cu===void 0?void 0:_this$searchBoxRef$cu.blur();_context2.next=4;return _this.props.performSearch(_this.props.value);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.state={value:''};var payLoad=getPayloadObject('click',props.telemetryContent,TelemetryConstant.SearchStore);_this.storeSearchAttributes=getTelemetryAttributes(props.telemetryContent,payLoad);payLoad.contentAction.etext=TelemetryConstant.ShowAllStore;_this.showAllStoreAttributes=getTelemetryAttributes(props.telemetryContent,payLoad);payLoad.contentAction.etext=TelemetryConstant.ToggleMapView;_this.toggleMapViewAttributes=getTelemetryAttributes(props.telemetryContent,payLoad);return _this;}_createClass(StoreSelectorSearchForm,[{key:\"render\",value:function render(){var _this$props=this.props,_this$props$resources=_this$props.resources,searchButtonAriaLabel=_this$props$resources.searchButtonAriaLabel,searchPlaceholderText=_this$props$resources.searchPlaceholderText,seeAllStoresText=_this$props$resources.seeAllStoresText,viewListText=_this$props$resources.viewListText,viewMapText=_this$props$resources.viewMapText,value=_this$props.value,isMapDisabled=_this$props.isMapDisabled,showAllStores=_this$props.showAllStores,displayList=_this$props.displayList,locatorView=_this$props.locatorView,onShowAllStores=_this$props.onShowAllStores,onToggleListMapViewState=_this$props.onToggleListMapViewState;var toggleButtonText=displayList?viewMapText:viewListText;return/*#__PURE__*/React.createElement(\"div\",{className:'ms-store-select__search'},/*#__PURE__*/React.createElement(\"form\",{className:'ms-store-select__search-form',\"aria-label\":searchButtonAriaLabel,name:'storeSelectorSearchForm',role:'form',autoComplete:'off',onSubmit:this._onSubmit,id:'ms-store-select__search-box-container'},/*#__PURE__*/React.createElement(\"input\",{type:'text',\"aria-label\":this.props.resources.searchInputAriaLabel,className:'msc-form-control ms-store-select__search-input',placeholder:searchPlaceholderText,value:value,onChange:this._searchTextChanged,id:'ms-store-select__search-box',ref:this.searchBoxRef,role:'combobox',\"aria-expanded\":'false',\"aria-controls\":'as_containerSearch'}),/*#__PURE__*/React.createElement(\"button\",Object.assign({className:\"ms-store-select__search-button\".concat(isMapDisabled?\" search-btn-disabled\":\"\"),\"aria-label\":searchButtonAriaLabel,color:'primary'},this.storeSearchAttributes))),showAllStores&&/*#__PURE__*/React.createElement(\"div\",Object.assign({className:'ms-store-select__search-see-all-stores',role:'none',onClick:onShowAllStores},this.showAllStoreAttributes),seeAllStoresText),locatorView&&/*#__PURE__*/React.createElement(\"button\",Object.assign({className:'ms-store-select__toggle-view',onClick:onToggleListMapViewState},this.toggleMapViewAttributes),toggleButtonText));}}]);return StoreSelectorSearchForm;}(React.PureComponent);","map":{"version":3,"sources":["modules/store-selector/components/store-selector-search-form.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getPayloadObject, getTelemetryAttributes, IPayLoad, ITelemetryContent, TelemetryConstant } from '@msdyn365-commerce-modules/utilities';\nimport * as Msdyn365 from '@msdyn365-commerce/core';\nimport * as React from 'react';\n\nexport interface IStoreSelectorSearchFormProps {\n    resources: {\n        searchInputAriaLabel: string;\n        searchButtonAriaLabel: string;\n        searchPlaceholderText: string;\n        seeAllStoresText: string;\n        viewListText: string;\n        viewMapText: string;\n    };\n\n    value: string;\n    isMapDisabled?: boolean;\n    showAllStores?: boolean;\n    displayList?: boolean;\n    locatorView?: boolean;\n    /** The telemetry content */\n    telemetryContent?: ITelemetryContent;\n    onShowAllStores(): void;\n    onToggleListMapViewState(): void;\n    performSearch(searchTerm: string): Promise<void>;\n    searchTermChanged(searchTerm: string): Promise<void>;\n}\n\n/**\n * Simple search form consisting of search text and a search button\n */\nexport class StoreSelectorSearchForm extends React.PureComponent<IStoreSelectorSearchFormProps> {\n    private searchBoxRef: React.RefObject<HTMLInputElement> = React.createRef<HTMLInputElement>();\n    private storeSearchAttributes: Msdyn365.IDictionary<string> | undefined;\n    private showAllStoreAttributes: Msdyn365.IDictionary<string> | undefined;\n    private toggleMapViewAttributes: Msdyn365.IDictionary<string> | undefined;\n\n    constructor(props: IStoreSelectorSearchFormProps) {\n        super(props);\n        this.state = { value: '' };\n        const payLoad: IPayLoad = getPayloadObject('click', props.telemetryContent!, TelemetryConstant.SearchStore);\n        this.storeSearchAttributes = getTelemetryAttributes(props.telemetryContent!, payLoad);\n        payLoad.contentAction.etext = TelemetryConstant.ShowAllStore;\n        this.showAllStoreAttributes = getTelemetryAttributes(props.telemetryContent!, payLoad);\n        payLoad.contentAction.etext = TelemetryConstant.ToggleMapView;\n        this.toggleMapViewAttributes = getTelemetryAttributes(props.telemetryContent!, payLoad);\n    }\n\n    public render(): JSX.Element {\n        const {\n            resources: { searchButtonAriaLabel, searchPlaceholderText, seeAllStoresText, viewListText, viewMapText },\n            value,\n            isMapDisabled,\n            showAllStores,\n            displayList,\n            locatorView,\n            onShowAllStores,\n            onToggleListMapViewState\n        } = this.props;\n\n        const toggleButtonText = displayList ? viewMapText : viewListText;\n\n        return (\n            <div className='ms-store-select__search'>\n                <form\n                    className='ms-store-select__search-form'\n                    aria-label={searchButtonAriaLabel}\n                    name='storeSelectorSearchForm'\n                    role='form'\n                    autoComplete='off'\n                    onSubmit={this._onSubmit}\n                    id='ms-store-select__search-box-container'\n                >\n                    <input\n                        type='text'\n                        aria-label={this.props.resources.searchInputAriaLabel}\n                        className='msc-form-control ms-store-select__search-input'\n                        placeholder={searchPlaceholderText}\n                        value={value}\n                        onChange={this._searchTextChanged}\n                        id='ms-store-select__search-box'\n                        ref={this.searchBoxRef}\n                        role='combobox'\n                        aria-expanded='false'\n                        aria-controls='as_containerSearch'\n                    />\n                    <button\n                        className={`ms-store-select__search-button${isMapDisabled ? ` search-btn-disabled` : ``}`}\n                        aria-label={searchButtonAriaLabel}\n                        color={'primary'}\n                        {...this.storeSearchAttributes}\n                    />\n                </form>\n                {showAllStores && <div className='ms-store-select__search-see-all-stores' role='none' onClick={onShowAllStores} {...this.showAllStoreAttributes}>{seeAllStoresText}</div>}\n                {locatorView && <button className='ms-store-select__toggle-view' onClick={onToggleListMapViewState} {...this.toggleMapViewAttributes} >{toggleButtonText}</button>}\n            </div>\n        );\n    }\n\n    private _searchTextChanged = async (e: React.ChangeEvent<HTMLInputElement>): Promise<void> => {\n        const inputValue: string = e.target.value;\n\n        await this.props.searchTermChanged(inputValue);\n    };\n\n    private _onSubmit = async (e: React.SyntheticEvent): Promise<void> => {\n        e.preventDefault(); // Prevents form submission\n        this.searchBoxRef.current?.blur();\n        await this.props.performSearch(this.props.value);\n    }\n}"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}