{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import{__decorate}from\"tslib\";import{getPayloadObject,getTelemetryAttributes,getTelemetryObject,TelemetryConstant}from'@msdyn365-commerce-modules/utilities';import*as Msdyn365 from'@msdyn365-commerce/core';import classnames from'classnames';import{observer}from'mobx-react';import*as React from'react';import{createAccordionStateInput}from'../../data-actions/accordion-state-data-action';var Accordion=/*#__PURE__*/function(_React$Component){_inherits(Accordion,_React$Component);var _super=_createSuper(Accordion);function Accordion(props){var _this;_classCallCheck(this,Accordion);_this=_super.call(this,props);_this.handleHeadingChange=function(event){return _this.props.config.heading.text=event.target.value;};_this._onExpandAll=_this._onExpandAll.bind(_assertThisInitialized(_this));_this._onCollapseAll=_this._onCollapseAll.bind(_assertThisInitialized(_this));_this.telemetryContent=getTelemetryObject(_this.props.context.request.telemetryPageName,_this.props.friendlyName,_this.props.telemetry);_this.payLoad=getPayloadObject('click',_this.telemetryContent,'');return _this;}_createClass(Accordion,[{key:\"render\",value:function render(){var _this2=this;var slots=this.props.slots;var _this$props$config=this.props.config,heading=_this$props$config.heading,className=_this$props$config.className;var headingComponent=heading&&heading.text&&/*#__PURE__*/React.createElement(Msdyn365.Text,{className:'ms-accordion-header-section__heading',tag:heading.tag||'h1',text:heading.text,editProps:{onEdit:this.handleHeadingChange,requestContext:this.props.context.request}});var accordionViewProps=_objectSpread(_objectSpread({},this.props),{},{AccordionContainer:{moduleProps:this.props,className:classnames('ms-accordion',className)},HeaderSection:{className:'ms-accordion-header-section'},HeadingWrapper:{className:'ms-accordion-header-section-container'},heading:headingComponent,config:this.props&&this.props.config,accordianButtonsContainer:{tag:'div',className:'ms-accordion-header-section-toggle-button-container'},accordionButtons:this._renderAccordionButton(),accordionItemContainer:{tag:'div',className:'ms-accordion-item-section'},accordionItems:slots&&slots.accordionItems&&slots.accordionItems.length>0&&slots.accordionItems.map(function(item,index){return _this2._getAccordionItem(item,index);})});return this.props.renderView(accordionViewProps);}},{key:\"_renderAccordionButton\",value:function _renderAccordionButton(){var _this$props=this.props,config=_this$props.config,resources=_this$props.resources;this.payLoad.contentAction.etext=TelemetryConstant.ExpandAll;var attributeExpandAll=getTelemetryAttributes(this.telemetryContent,this.payLoad);this.payLoad.contentAction.etext=TelemetryConstant.CollapseAll;var attributeCollapseAll=getTelemetryAttributes(this.telemetryContent,this.payLoad);if(!config.showToggleAll){this.props.context.telemetry.error('Accordian button content is empty, module wont render');return null;}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",Object.assign({className:'ms-accordion_ExpandAll',onClick:this._onExpandAll},attributeExpandAll),resources.expandAllText),\"\\xA0\",resources.toggleAllSeparator,\"\\xA0\",/*#__PURE__*/React.createElement(\"button\",Object.assign({className:'ms-accordion_CollapseAll',onClick:this._onCollapseAll},attributeCollapseAll),resources.collapseAllText));}},{key:\"_onExpandAll\",value:function _onExpandAll(){var accordionState={isAllExpanded:true};this.props.context.actionContext.update(createAccordionStateInput(accordionState),accordionState);}},{key:\"_onCollapseAll\",value:function _onCollapseAll(){var accordionState={isAllExpanded:false};this.props.context.actionContext.update(createAccordionStateInput(accordionState),accordionState);}},{key:\"_getAccordionItem\",value:function _getAccordionItem(item,index){return/*#__PURE__*/React.createElement(React.Fragment,{key:index},/*#__PURE__*/React.cloneElement(item,{interactionStyle:this.props.config.interactionStyle}));}}]);return Accordion;}(React.Component);Accordion=__decorate([observer],Accordion);export default Accordion;","map":{"version":3,"sources":["modules/accordion/accordion.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getPayloadObject, getTelemetryAttributes, getTelemetryObject, IModuleProps, INodeProps, IPayLoad, ITelemetryContent, NodeTag, TelemetryConstant } from '@msdyn365-commerce-modules/utilities';\nimport * as Msdyn365 from '@msdyn365-commerce/core';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react';\nimport * as React from 'react';\nimport { createAccordionStateInput } from '../../data-actions/accordion-state-data-action';\nimport { IAccordionData } from './accordion.data';\nimport { IAccordionProps } from './accordion.props.autogenerated';\n\n/**\n *\n * Accordion component\n * @extends {React.PureComponent<IAccordionProps<IAccordionData>>}\n */\n\nexport interface ICallToActionProps {\n  link: INodeProps[];\n}\n\nexport interface IAccordionViewProps extends IAccordionProps<{}> {\n  heading?: React.ReactNode;\n  AccordionContainer: IModuleProps;\n  HeaderSection: INodeProps;\n  HeadingWrapper: INodeProps;\n  accordianButtonsContainer: INodeProps;\n  accordionButtons: React.ReactNode;\n  accordionItemContainer: INodeProps;\n  accordionItems: React.ReactNode;\n}\n\n/**\n *\n * Accordion component\n * @extends {React.Component<IAccordionProps<IAccordionData>>}\n */\n@observer\nclass Accordion extends React.Component<IAccordionProps<IAccordionData>> {\n\n  private telemetryContent?: ITelemetryContent;\n  private payLoad: IPayLoad;\n\n  constructor(props: IAccordionProps<IAccordionData>) {\n    super(props);\n    this._onExpandAll = this._onExpandAll.bind(this);\n    this._onCollapseAll = this._onCollapseAll.bind(this);\n    this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!, this.props.friendlyName, this.props.telemetry);\n    this.payLoad = getPayloadObject('click', this.telemetryContent, '');\n  }\n  public render(): JSX.Element {\n\n    const { slots } = this.props;\n    const { heading, className } = this.props.config;\n    const headingComponent = heading && heading.text && (\n      <Msdyn365.Text\n        className='ms-accordion-header-section__heading'\n        tag={heading.tag || 'h1'}\n        text={heading.text}\n        editProps={{ onEdit: this.handleHeadingChange, requestContext: this.props.context.request }}\n      />\n    );\n\n    const accordionViewProps = {\n      ...this.props,\n      AccordionContainer: {\n        moduleProps: this.props,\n        className: classnames('ms-accordion', className)\n      },\n      HeaderSection: { className: 'ms-accordion-header-section' },\n      HeadingWrapper: { className: 'ms-accordion-header-section-container' },\n      heading: headingComponent,\n      config: this.props && this.props.config,\n      accordianButtonsContainer: {\n        tag: 'div' as NodeTag,\n        className: 'ms-accordion-header-section-toggle-button-container',\n      },\n      accordionButtons: this._renderAccordionButton(),\n      accordionItemContainer: {\n        tag: 'div' as NodeTag,\n        className: 'ms-accordion-item-section',\n      },\n      accordionItems: slots && slots.accordionItems && slots.accordionItems.length > 0 && slots.accordionItems.map((item: React.ReactNode, index: number) => this._getAccordionItem(item, index))\n    };\n    return this.props.renderView(accordionViewProps) as React.ReactElement;\n  }\n\n  public handleHeadingChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.heading!.text = event.target.value;\n\n  private _renderAccordionButton(): React.ReactNode | null {\n    const { config, resources } = this.props;\n    this.payLoad.contentAction.etext = TelemetryConstant.ExpandAll;\n    const attributeExpandAll = getTelemetryAttributes(this.telemetryContent!, this.payLoad);\n    this.payLoad.contentAction.etext = TelemetryConstant.CollapseAll;\n    const attributeCollapseAll = getTelemetryAttributes(this.telemetryContent!, this.payLoad);\n    if (!config.showToggleAll) {\n      this.props.context.telemetry.error('Accordian button content is empty, module wont render');\n      return null;\n    }\n    return (\n      <>\n        <button className='ms-accordion_ExpandAll' onClick={this._onExpandAll} {...attributeExpandAll}>\n          {resources.expandAllText}\n        </button>\n        &nbsp;{ resources.toggleAllSeparator}&nbsp;\n        <button className='ms-accordion_CollapseAll' onClick={this._onCollapseAll} {...attributeCollapseAll}>\n          {resources.collapseAllText}\n        </button>\n      </>\n    );\n  }\n\n  private _onExpandAll(): void {\n    const accordionState = { isAllExpanded: true };\n    this.props.context.actionContext.update(createAccordionStateInput(accordionState), accordionState);\n  }\n\n  private _onCollapseAll(): void {\n    const accordionState = { isAllExpanded: false };\n    this.props.context.actionContext.update(createAccordionStateInput(accordionState), accordionState);\n  }\n\n  private _getAccordionItem(item: React.ReactNode, index: number): React.ReactNode {\n    return (\n      <React.Fragment key={index}>\n        {React.cloneElement(item as React.ReactElement, { interactionStyle: this.props.config.interactionStyle })}\n      </React.Fragment>\n    );\n  }\n\n}\n\nexport default Accordion;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}