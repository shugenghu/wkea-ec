{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{searchAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';/**\r\n *  Input class for the GetOrderTemplates data action\r\n */export var GetOrderTemplatesInput=function GetOrderTemplatesInput(productListId,queryResultSettings){var _this=this;_classCallCheck(this,GetOrderTemplatesInput);this.getCacheKey=function(){var _this$queryResultSett,_this$queryResultSett2,_this$queryResultSett3,_this$queryResultSett4;return\"\".concat(_this.productListId,\"|\").concat((_this$queryResultSett=_this.queryResultSettings)===null||_this$queryResultSett===void 0?void 0:(_this$queryResultSett2=_this$queryResultSett.Paging)===null||_this$queryResultSett2===void 0?void 0:_this$queryResultSett2.Top,\"|\").concat((_this$queryResultSett3=_this.queryResultSettings)===null||_this$queryResultSett3===void 0?void 0:(_this$queryResultSett4=_this$queryResultSett3.Paging)===null||_this$queryResultSett4===void 0?void 0:_this$queryResultSett4.Skip);};this.getCacheObjectType=function(){return'ProductList';};this.dataCacheType=function(){return'instance';};this.shouldCacheOutput=function(){return false;};this.productListId=productListId||'';this.queryResultSettings=queryResultSettings;};/**\r\n * createInput method for the GetOrderTemplate method\r\n * @param inputData The input data passed to the createInput method.\r\n * @param productListId? The product list identifier.\r\n * @param queryResultSettings? The query result setting required for pagination/ordering.\r\n */export var createGetOrderTemplatesInput=function createGetOrderTemplatesInput(inputData,productListId,queryResultSettings){var requestContext=inputData.requestContext;if(!requestContext.user.isAuthenticated){throw new Error('Unable to create get order template. User is not authenticated.');}return new GetOrderTemplatesInput(productListId||'',queryResultSettings);};/**\r\n * The action method for the GetOrderTemplates data action\r\n * @param input The action input\r\n * @param ctx The action context\r\n */export function getOrderTemplatesAction(_x,_x2){return _getOrderTemplatesAction.apply(this,arguments);}/**\r\n * The GetOrderTemplates Data Action\r\n * Returns order templates\r\n */function _getOrderTemplatesAction(){_getOrderTemplatesAction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input,ctx){var productListSearchCriteria;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;productListSearchCriteria={ProductListId:input.productListId,CustomerId:ctx.requestContext.user.customerAccountNumber};return _context.abrupt(\"return\",searchAsync({callerContext:ctx,queryResultSettings:input.queryResultSettings},productListSearchCriteria));case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);ctx.telemetry.error('Not able to get order template(s)',_context.t0);throw _context.t0;case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return _getOrderTemplatesAction.apply(this,arguments);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/order-templates/get-order-templates',action:getOrderTemplatesAction,input:createGetOrderTemplatesInput});","map":{"version":3,"sources":["../../../src/order-templates/get-order-templates.ts"],"names":[],"mappings":"8MAAA,OACI,0BADJ,KAKgC,yBALhC,CAOA,OAAS,WAAT,KAA4B,4EAA5B,CAGA;;AAEG,GACH,UAAa,CAAA,sBAAb,CAII,gCAAY,aAAZ,CAAoC,mBAApC,CAA6E,6DAKtE,KAAA,WAAA,CAAc,0HAAiB,KAAI,CAAC,aAAtB,oCAAuC,KAAI,CAAC,mBAA5C,wEAAuC,sBAA0B,MAAjE,iDAAuC,uBAAkC,GAAzE,qCAAgF,KAAI,CAAC,mBAArF,yEAAgF,uBAA0B,MAA1G,iDAAgF,uBAAkC,IAAlH,GAAd,CACA,KAAA,kBAAA,CAAqB,iBAAM,aAAN,EAArB,CACA,KAAA,aAAA,CAAgB,iBAAiB,UAAjB,EAAhB,CACA,KAAA,iBAAA,CAAoB,iBAAM,MAAN,EAApB,CAPH,KAAK,aAAL,CAAqB,aAAa,EAAI,EAAtC,CACA,KAAK,mBAAL,CAA2B,mBAA3B,CACH,CAPL,CAeA;;;;;AAKG,GACH,MAAO,IAAM,CAAA,4BAA4B,CAAG,QAA/B,CAAA,4BAA+B,CAAC,SAAD,CAAkC,aAAlC,CAA0D,mBAA1D,CAA+H,IAC/J,CAAA,cAD+J,CAC5I,SAD4I,CAC/J,cAD+J,CAEvK,GAAI,CAAC,cAAc,CAAC,IAAf,CAAoB,eAAzB,CAA0C,CACtC,KAAM,IAAI,CAAA,KAAJ,CAAU,iEAAV,CAAN,CACH,CAED,MAAO,IAAI,CAAA,sBAAJ,CAA2B,aAAa,EAAI,EAA5C,CAAgD,mBAAhD,CAAP,CACH,CAPM,CASP;;;;AAIG,GACH,eAAsB,CAAA,uBAAtB,gEAoBA;;;AAGG,G,qHAvBI,iBAAuC,KAAvC,CAAsE,GAAtE,gKAGO,yBAHP,CAG8D,CACzD,aAAa,CAAE,KAAK,CAAC,aADoC,CAEzD,UAAU,CAAE,GAAG,CAAC,cAAJ,CAAmB,IAAnB,CAAwB,qBAFqB,CAH9D,iCAOQ,WAAW,CACd,CACI,aAAa,CAAE,GADnB,CAEI,mBAAmB,CAAE,KAAK,CAAC,mBAF/B,CADc,CAKd,yBALc,CAPnB,0DAeC,GAAG,CAAC,SAAJ,CAAc,KAAd,CAAoB,mCAApB,cAfD,qF,0DAwBP,cAAe,CAAA,0BAA0B,CAAgB,CACrD,EAAE,CAAE,+EADiD,CAErD,MAAM,CAA0B,uBAFqB,CAGrD,KAAK,CAAE,4BAH8C,CAAhB,CAAzC","sourcesContent":["import { CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext } from '@msdyn365-commerce/core';\nimport { QueryResultSettings } from '@msdyn365-commerce/retail-proxy';\nimport { searchAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';\nimport { ProductList, ProductListSearchCriteria } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\n\n/**\n *  Input class for the GetOrderTemplates data action\n */\nexport class GetOrderTemplatesInput implements IActionInput {\n    public readonly productListId: string;\n    public readonly queryResultSettings?: QueryResultSettings;\n\n    constructor(productListId?: string, queryResultSettings?: QueryResultSettings) {\n        this.productListId = productListId || '';\n        this.queryResultSettings = queryResultSettings;\n    }\n\n    public getCacheKey = (): string => `${this.productListId}|${this.queryResultSettings?.Paging?.Top}|${this.queryResultSettings?.Paging?.Skip}`;\n    public getCacheObjectType = () => 'ProductList';\n    public dataCacheType = (): CacheType => 'instance';\n    public shouldCacheOutput = () => false;\n}\n\n/**\n * createInput method for the GetOrderTemplate method\n * @param inputData The input data passed to the createInput method.\n * @param productListId? The product list identifier.\n * @param queryResultSettings? The query result setting required for pagination/ordering.\n */\nexport const createGetOrderTemplatesInput = (inputData: ICreateActionContext, productListId?: string, queryResultSettings?: QueryResultSettings): GetOrderTemplatesInput => {\n    const { requestContext } = inputData;\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('Unable to create get order template. User is not authenticated.');\n    }\n\n    return new GetOrderTemplatesInput(productListId || '', queryResultSettings);\n};\n\n/**\n * The action method for the GetOrderTemplates data action\n * @param input The action input\n * @param ctx The action context\n */\nexport async function getOrderTemplatesAction(input: GetOrderTemplatesInput, ctx: IActionContext): Promise<ProductList[]> {\n    try {\n\n        const productListSearchCriteria: ProductListSearchCriteria = {\n            ProductListId: input.productListId,\n            CustomerId: ctx.requestContext.user.customerAccountNumber\n        };\n        return searchAsync(\n            {\n                callerContext: ctx,\n                queryResultSettings: input.queryResultSettings\n            },\n            productListSearchCriteria\n        );\n    } catch (error) {\n        ctx.telemetry.error('Not able to get order template(s)', error);\n        throw error;\n    }\n}\n\n/**\n * The GetOrderTemplates Data Action\n * Returns order templates\n */\nexport default createObservableDataAction<ProductList[]>({\n    id: '@msdyn365-commerce-modules/retail-actions/order-templates/get-order-templates',\n    action: <IAction<ProductList[]>>getOrderTemplatesAction,\n    input: createGetOrderTemplatesInput\n});"],"sourceRoot":""},"metadata":{},"sourceType":"module"}