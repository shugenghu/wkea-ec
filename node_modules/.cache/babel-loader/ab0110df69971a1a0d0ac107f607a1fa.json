{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{updateAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';/**\r\n *  Input class for the UpdateOrderTemplate data action.\r\n */export class UpdateOrderTemplateHeaderInput{constructor(orderTemplate){this.getCacheKey=()=>'UpdateOrderTemplateHeaderInput';this.getCacheObjectType=()=>'UpdateOrderTemplateHeaderInput';this.dataCacheType=()=>'none';this.orderTemplate=orderTemplate;}}/**\r\n * createInput method for the UpdateOrderTemplateHeader method.\r\n * @param {ICreateActionContext} inputData The input data passed to the createInput method.\r\n * @param {ProductList} orderTemplate The template header.\r\n */export const updateOrderTemplateHeaderInput=(inputData,orderTemplate)=>{const{requestContext}=inputData;if(!requestContext.user.isAuthenticated){throw new Error('Unable to update order template. User is not authenticated.');}return new UpdateOrderTemplateHeaderInput(orderTemplate);};/**\r\n * The action method for the UpdateOrderTemplate data action.\r\n * @param {UpdateOrderTemplateHeaderInput} input The action input.\r\n * @param {IActionContext} ctx The action context.\r\n */export async function updateOrderTemplateHeaderAction(input,ctx){try{const{orderTemplate}=input;const updatedProductList=await updateAsync({callerContext:ctx},orderTemplate);if(updatedProductList){return updatedProductList;}else{ctx.telemetry.error(\"Updated product list \".concat(orderTemplate.Id,\" came back as null.\"));throw Error('Updated product list was null.');}}catch(error){ctx.telemetry.error('Not able to update order template',error);throw error;}}/**\r\n * The UpdateOrderTemplate Data Action.\r\n * Returns updated order template.\r\n */export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/order-templates/update-order-template-header',action:updateOrderTemplateHeaderAction,input:updateOrderTemplateHeaderInput});","map":{"version":3,"sources":["../../../src/order-templates/update-order-template-header.ts"],"names":[],"mappings":"sCAAA,OACI,0BADJ,KAKgC,yBALhC,CAMA,OAAS,WAAT,KAA4B,4EAA5B,CAGA;;AAEG,GACH,MAAM,MAAO,CAAA,8BAA8B,CAGvC,WAAA,CAAY,aAAZ,CAAsC,CAI/B,KAAA,WAAA,CAAc,IAAM,gCAApB,CACA,KAAA,kBAAA,CAAqB,IAAM,gCAA3B,CACA,KAAA,aAAA,CAAgB,IAAiB,MAAjC,CALH,KAAK,aAAL,CAAqB,aAArB,CACH,CALsC,CAY3C;;;;AAIG,GACH,MAAO,MAAM,CAAA,8BAA8B,CAAG,CAAC,SAAD,CAAkC,aAAlC,GAAgG,CAC1I,KAAM,CAAE,cAAF,EAAqB,SAA3B,CACA,GAAI,CAAC,cAAc,CAAC,IAAf,CAAoB,eAAzB,CAA0C,CACtC,KAAM,IAAI,CAAA,KAAJ,CAAU,6DAAV,CAAN,CACH,CACD,MAAO,IAAI,CAAA,8BAAJ,CAAmC,aAAnC,CAAP,CACH,CANM,CAQP;;;;AAIG,GACH,MAAO,eAAe,CAAA,+BAAf,CAA+C,KAA/C,CAAsF,GAAtF,CAAyG,CAC5G,GAAI,CACA,KAAM,CAAE,aAAF,EAAoB,KAA1B,CACA,KAAM,CAAA,kBAAkB,CAAG,KAAM,CAAA,WAAW,CAAC,CACzC,aAAa,CAAE,GAD0B,CAAD,CAEzC,aAFyC,CAA5C,CAGA,GAAI,kBAAJ,CAAwB,CACpB,MAAO,CAAA,kBAAP,CACH,CAFD,IAEO,CACH,GAAG,CAAC,SAAJ,CAAc,KAAd,gCAA4C,aAAa,CAAC,EAA1D,yBACA,KAAM,CAAA,KAAK,CAAC,gCAAD,CAAX,CACH,CACJ,CAAC,MAAO,KAAP,CAAc,CACZ,GAAG,CAAC,SAAJ,CAAc,KAAd,CAAoB,mCAApB,CAAyD,KAAzD,EACA,KAAM,CAAA,KAAN,CACH,CACJ,CAED;;;AAGG,GACH,cAAe,CAAA,0BAA0B,CAAc,CACnD,EAAE,CAAE,wFAD+C,CAEnD,MAAM,CAAwB,+BAFqB,CAGnD,KAAK,CAAE,8BAH4C,CAAd,CAAzC","sourcesContent":["import { CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext } from '@msdyn365-commerce/core';\nimport { updateAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';\nimport { ProductList } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\n\n/**\n *  Input class for the UpdateOrderTemplate data action.\n */\nexport class UpdateOrderTemplateHeaderInput implements IActionInput {\n    public readonly orderTemplate: ProductList;\n\n    constructor(orderTemplate: ProductList) {\n        this.orderTemplate = orderTemplate;\n    }\n\n    public getCacheKey = () => 'UpdateOrderTemplateHeaderInput';\n    public getCacheObjectType = () => 'UpdateOrderTemplateHeaderInput';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * createInput method for the UpdateOrderTemplateHeader method.\n * @param {ICreateActionContext} inputData The input data passed to the createInput method.\n * @param {ProductList} orderTemplate The template header.\n */\nexport const updateOrderTemplateHeaderInput = (inputData: ICreateActionContext, orderTemplate: ProductList): UpdateOrderTemplateHeaderInput => {\n    const { requestContext } = inputData;\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('Unable to update order template. User is not authenticated.');\n    }\n    return new UpdateOrderTemplateHeaderInput(orderTemplate);\n};\n\n/**\n * The action method for the UpdateOrderTemplate data action.\n * @param {UpdateOrderTemplateHeaderInput} input The action input.\n * @param {IActionContext} ctx The action context.\n */\nexport async function updateOrderTemplateHeaderAction(input: UpdateOrderTemplateHeaderInput, ctx: IActionContext): Promise<ProductList> {\n    try {\n        const { orderTemplate } = input;\n        const updatedProductList = await updateAsync({\n            callerContext: ctx\n        }, orderTemplate);\n        if (updatedProductList) {\n            return updatedProductList;\n        } else {\n            ctx.telemetry.error(`Updated product list ${orderTemplate.Id} came back as null.`);\n            throw Error('Updated product list was null.');\n        }\n    } catch (error) {\n        ctx.telemetry.error('Not able to update order template', error);\n        throw error;\n    }\n}\n\n/**\n * The UpdateOrderTemplate Data Action.\n * Returns updated order template.\n */\nexport default createObservableDataAction<ProductList>({\n    id: '@msdyn365-commerce-modules/retail-actions/order-templates/update-order-template-header',\n    action: <IAction<ProductList>>updateOrderTemplateHeaderAction,\n    input: updateOrderTemplateHeaderInput\n});"],"sourceRoot":""},"metadata":{},"sourceType":"module"}