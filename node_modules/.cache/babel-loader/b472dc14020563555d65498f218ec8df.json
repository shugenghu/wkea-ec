{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{updateAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/BusinessPartnerUsersDataActions.g';/**\r\n * Input class for edit organization user data action\r\n */export var EditOrganizationUserInput=function EditOrganizationUserInput(newUser){_classCallCheck(this,EditOrganizationUserInput);this.getCacheKey=function(){return\"EditOrganizationUser\";};this.getCacheObjectType=function(){return'EditOrganizationUser';};this.dataCacheType=function(){return'none';};this.user=newUser;};/**\r\n * Input class for edit organization user data action\r\n */export var createEditOrganizationUserInput=function createEditOrganizationUserInput(inputData,newUser){var requestContext=inputData.requestContext;// Check if the user is authenticated.\nif(!requestContext.user.isAuthenticated){throw new Error('User is not logged in.');}return new EditOrganizationUserInput(newUser);};export function editOrganizationUser(_x,_x2){return _editOrganizationUser.apply(this,arguments);}/**\r\n * The EditOrganizationUser data action\r\n * Takes in an instance of a BusinessPartnerUser and updates the\r\n * same user with the new information.\r\n */function _editOrganizationUser(){_editOrganizationUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input,ctx){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=input.user;return _context.abrupt(\"return\",updateAsync({callerContext:ctx},user).then(function(updatedUser){return updatedUser;})[\"catch\"](function(){ctx.telemetry.debug('[Edit-organization-user] Unable to update BusinessPartnerUser account');throw new Error('[Edit-organization-user] Unable to update BusinessPartnerUser account');}));case 2:case\"end\":return _context.stop();}}},_callee);}));return _editOrganizationUser.apply(this,arguments);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/Edit-organization-user',action:editOrganizationUser,input:createEditOrganizationUserInput});","map":{"version":3,"sources":["../../src/edit-organization-user.ts"],"names":[],"mappings":"8MAAA,OAAoB,0BAApB,KAAmI,yBAAnI,CAEA,OAAS,WAAT,KAA4B,oFAA5B,CACA;;AAEG,GACH,UAAa,CAAA,yBAAb,CAGI,mCAAY,OAAZ,CAAwC,iDAIjC,KAAA,WAAA,CAAc,yCAAd,CACA,KAAA,kBAAA,CAAqB,iBAAM,sBAAN,EAArB,CACA,KAAA,aAAA,CAAgB,iBAAiB,MAAjB,EAAhB,CALH,KAAK,IAAL,CAAY,OAAZ,CACH,CALL,CAYA;;AAEG,GACH,MAAO,IAAM,CAAA,+BAA+B,CAAG,QAAlC,CAAA,+BAAkC,CAAC,SAAD,CAAkD,OAAlD,CAAgG,IACnI,CAAA,cADmI,CAChH,SADgH,CACnI,cADmI,CAG3I;AACA,GAAI,CAAC,cAAc,CAAC,IAAf,CAAoB,eAAzB,CAA0C,CACtC,KAAM,IAAI,CAAA,KAAJ,CAAU,wBAAV,CAAN,CACH,CAED,MAAO,IAAI,CAAA,yBAAJ,CAA8B,OAA9B,CAAP,CACH,CATM,CAWP,eAAsB,CAAA,oBAAtB,6DAaA;;;;AAIG,G,+GAjBI,iBAAoC,KAApC,CAAsE,GAAtE,2HACK,IADL,CACc,KADd,CACK,IADL,iCAGI,WAAW,CAAC,CAAE,aAAa,CAAE,GAAjB,CAAD,CAAwB,IAAxB,CAAX,CACF,IADE,CACG,SAAA,WAAW,CAAG,CAChB,MAAO,CAAA,WAAP,CACH,CAHE,WAII,UAAK,CACR,GAAG,CAAC,SAAJ,CAAc,KAAd,CAAoB,uEAApB,EACA,KAAM,IAAI,CAAA,KAAJ,CAAU,uEAAV,CAAN,CACH,CAPE,CAHJ,wD,uDAkBP,cAAe,CAAA,0BAA0B,CAAsB,CAC3D,EAAE,CAAE,kEADuD,CAE3D,MAAM,CAAgC,oBAFqB,CAG3D,KAAK,CAAuD,+BAHD,CAAtB,CAAzC","sourcesContent":["import { CacheType, createObservableDataAction, IAction, IActionContext, IActionInput, IAny, ICreateActionContext, IGeneric } from '@msdyn365-commerce/core';\nimport { BusinessPartnerUser } from '@msdyn365-commerce/retail-proxy';\nimport { updateAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/BusinessPartnerUsersDataActions.g';\n/**\n * Input class for edit organization user data action\n */\nexport class EditOrganizationUserInput implements IActionInput {\n    public user: BusinessPartnerUser;\n\n    constructor(newUser: BusinessPartnerUser) {\n        this.user = newUser;\n    }\n\n    public getCacheKey = () => `EditOrganizationUser`;\n    public getCacheObjectType = () => 'EditOrganizationUser';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * Input class for edit organization user data action\n */\nexport const createEditOrganizationUserInput = (inputData: ICreateActionContext<IGeneric<IAny>>, newUser: BusinessPartnerUser): IActionInput => {\n    const { requestContext } = inputData;\n    \n    // Check if the user is authenticated.\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('User is not logged in.');\n    }\n\n    return new EditOrganizationUserInput(newUser);\n};\n\nexport async function editOrganizationUser(input: EditOrganizationUserInput, ctx: IActionContext): Promise<BusinessPartnerUser> {\n    const { user } = input;\n\n    return updateAsync({ callerContext: ctx}, user)\n        .then(updatedUser => {\n            return updatedUser;\n        })\n        .catch(() => {\n            ctx.telemetry.debug('[Edit-organization-user] Unable to update BusinessPartnerUser account');\n            throw new Error('[Edit-organization-user] Unable to update BusinessPartnerUser account');\n        });\n}\n\n/**\n * The EditOrganizationUser data action\n * Takes in an instance of a BusinessPartnerUser and updates the\n * same user with the new information.\n */\nexport default createObservableDataAction<BusinessPartnerUser>({\n    id: '@msdyn365-commerce-modules/retail-actions/Edit-organization-user',\n    action: <IAction<BusinessPartnerUser>>editOrganizationUser,\n    input: <(args: ICreateActionContext) => IActionInput>(<IAny>createEditOrganizationUserInput),\n});"],"sourceRoot":""},"metadata":{},"sourceType":"module"}