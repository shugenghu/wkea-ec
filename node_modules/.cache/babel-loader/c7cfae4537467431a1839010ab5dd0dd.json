{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{getFeatureStatesAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/StoreOperationsDataActions.g';/**\r\n *  Input class for the getFeatureState data action\r\n */export var FeatureStateInput=function FeatureStateInput(featureName){var _this=this;_classCallCheck(this,FeatureStateInput);this.getCacheKey=function(){return\"\".concat(_this.featureName);};this.getCacheObjectType=function(){return'FeatureState';};this.dataCacheType=function(){return'instance';};this.featureName=featureName;};/**\r\n * createInput method for the getFeatureState method\r\n * @param inputData The input data passed to the createInput method\r\n */export var createGetFeatureStateInput=function createGetFeatureStateInput(inputData){// Ensure your module has a config property 'featureName'\nif(inputData.config&&inputData.config.featureName){// Create and return an input for the data action using the module configuration data.\nreturn new FeatureStateInput(inputData.config.featureName);}else{throw new Error(\"Default data definition for a feature check must also include config parameter \\\"featureName\\\" in your module.\");}};/**\r\n * The action method for the getFeatureState data action\r\n * @param input The action input\r\n * @param ctx The action context\r\n */export function getFeatureStateAction(_x,_x2){return _getFeatureStateAction.apply(this,arguments);}/**\r\n * The getFeatureState data action\r\n * Gets the feature state via the read RetailServer API\r\n * Returns address information associated with the retrieved customer\r\n */function _getFeatureStateAction(){_getFeatureStateAction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input,ctx){var featureNames,featureState;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:featureNames=input.featureName?input.featureName.split(\",\").map(function(featureName){return featureName.trim();}):['Dynamics.AX.Application.RetailB2BEcommerceFeature'];_context.next=3;return getFeatureStatesAsync({callerContext:ctx},featureNames);case 3:featureState=_context.sent;return _context.abrupt(\"return\",featureState);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getFeatureStateAction.apply(this,arguments);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/get-feature-state',action:getFeatureStateAction,input:createGetFeatureStateInput});","map":{"version":3,"sources":["../../src/get-feature-state.ts"],"names":[],"mappings":"8MAAA,OAAoB,0BAApB,KAAmI,yBAAnI,CAGA,OAAS,qBAAT,KAAsC,+EAAtC,CAEA;;AAEG,GACH,UAAa,CAAA,iBAAb,CAGI,2BAAY,WAAZ,CAAgC,wDAIzB,KAAA,WAAA,CAAc,2BAAS,KAAI,CAAC,WAAd,GAAd,CACA,KAAA,kBAAA,CAAqB,iBAAM,cAAN,EAArB,CACA,KAAA,aAAA,CAAgB,iBAAiB,UAAjB,EAAhB,CALH,KAAK,WAAL,CAAmB,WAAnB,CACH,CALL,CAYA;;;AAGG,GACH,MAAO,IAAM,CAAA,0BAA0B,CAAG,QAA7B,CAAA,0BAA6B,CAAC,SAAD,CAAkE,CACxG;AACA,GAAG,SAAS,CAAC,MAAV,EAAoB,SAAS,CAAC,MAAV,CAAiB,WAAxC,CAAqD,CACjD;AACA,MAAO,IAAI,CAAA,iBAAJ,CAAsB,SAAS,CAAC,MAAV,CAAiB,WAAvC,CAAP,CACH,CAHD,IAGO,CACH,KAAM,IAAI,CAAA,KAAJ,kHAAN,CACH,CACJ,CARM,CAUP;;;;AAIG,GACH,eAAsB,CAAA,qBAAtB,8DAQA;;;;AAIG,G,iHAZI,iBAAqC,KAArC,CAA+D,GAA/D,gJACG,YADH,CAC4B,KAAK,CAAC,WAAN,CAAoB,KAAK,CAAC,WAAN,CAAkB,KAAlB,CAAwB,GAAxB,EAA6B,GAA7B,CAAiC,SAAA,WAAW,QAAI,CAAA,WAAW,CAAC,IAAZ,EAAJ,EAA5C,CAApB,CACzB,CAAC,mDAAD,CAFH,uBAIwB,CAAA,qBAAqB,CAAC,CAAE,aAAa,CAAE,GAAjB,CAAD,CAAyB,YAAzB,CAJ7C,QAIG,YAJH,+CAKI,YALJ,wD,wDAaP,cAAe,CAAA,0BAA0B,CAAiB,CACtD,EAAE,CAAE,6DADkD,CAEtD,MAAM,CAA2B,qBAFqB,CAGtD,KAAK,CAAE,0BAH+C,CAAjB,CAAzC","sourcesContent":["import { CacheType, createObservableDataAction, IAction, IActionContext, IActionInput, IAny, ICreateActionContext, IGeneric } from '@msdyn365-commerce/core';\nimport { FeatureState } from '@msdyn365-commerce/retail-proxy';\n\nimport { getFeatureStatesAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/StoreOperationsDataActions.g';\n\n/**\n *  Input class for the getFeatureState data action\n */\nexport class FeatureStateInput implements IActionInput {\n    public featureName?: string;\n\n    constructor(featureName?: string) {\n        this.featureName = featureName;\n    }\n\n    public getCacheKey = () => `${this.featureName}`;\n    public getCacheObjectType = () => 'FeatureState';\n    public dataCacheType = (): CacheType => 'instance';\n}\n\n/**\n * createInput method for the getFeatureState method\n * @param inputData The input data passed to the createInput method\n */\nexport const createGetFeatureStateInput = (inputData: ICreateActionContext<IGeneric<IAny>>): IActionInput => {\n    // Ensure your module has a config property 'featureName'\n    if(inputData.config && inputData.config.featureName) {\n        // Create and return an input for the data action using the module configuration data.\n        return new FeatureStateInput(inputData.config.featureName);\n    } else {\n        throw new Error(`Default data definition for a feature check must also include config parameter \"featureName\" in your module.`);\n    }\n};\n\n/**\n * The action method for the getFeatureState data action\n * @param input The action input\n * @param ctx The action context\n */\nexport async function getFeatureStateAction(input: FeatureStateInput, ctx: IActionContext): Promise<FeatureState[]> {\n    const featureNames: string[] = input.featureName ? input.featureName.split(\",\").map(featureName => featureName.trim())\n        : ['Dynamics.AX.Application.RetailB2BEcommerceFeature'];\n\n    const featureState = await getFeatureStatesAsync({ callerContext: ctx }, featureNames);\n    return featureState;\n}\n\n/**\n * The getFeatureState data action\n * Gets the feature state via the read RetailServer API\n * Returns address information associated with the retrieved customer\n */\nexport default createObservableDataAction<FeatureState[]>({\n    id: '@msdyn365-commerce-modules/retail-actions/get-feature-state',\n    action: <IAction<FeatureState[]>>getFeatureStateAction,\n    input: createGetFeatureStateInput\n});\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}