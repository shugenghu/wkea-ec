{"ast":null,"code":"import\"core-js/modules/es.object.assign.js\";import*as React from'react';import{Button,getPayloadObject,getTelemetryAttributes,Node,TelemetryConstant}from'@msdyn365-commerce-modules/utilities';const CartView=props=>/*#__PURE__*/React.createElement(\"div\",Object.assign({className:props.className,id:props.id},props.renderModuleAttributes(props)),props.title,/*#__PURE__*/React.createElement(Node,Object.assign({},props.CartlinesWrapper),_renderCartlines(props.cartlines,props.resources,props.storeSelector,props.backToShoppingButton,props.waitingComponent,props.cartLoadingStatus,props.cartDataResult,props.telemetryContent)),props.orderSummaryHeading&&/*#__PURE__*/React.createElement(Node,Object.assign({},props.OrderSummaryWrapper),props.orderSummaryHeading,_renderOrderSummarylines(props.orderSummaryLineitems,props.OrderSummaryItems,props),_renderErrorBlock(props.OrderSummaryErrors),props.checkoutAsSignInUserButton,props.checkoutAsGuestButton,props.backToShoppingButton,props.createTemplateFromCartButton),props.storeSelector);const _renderCartlines=(cartLines,resources,storeSelector,backToShoppingButton,waitingComponent,cartLoadingStatus,cartDataResult,telemetryContent)=>{const{emptyCartText}=resources;if(cartLoadingStatus){return/*#__PURE__*/React.createElement(React.Fragment,null,cartLoadingStatus);}if(cartLines){return cartLines.map((cartLine,index)=>{return/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-lines-item',key:index},cartLine.cartline,_renderBOPISBlock(cartLine,resources,storeSelector,telemetryContent),cartLine.addToOrderTemplate?/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__extra-actions'},cartLine.addToOrderTemplate,cartLine.addToWishlist,cartLine.remove):/*#__PURE__*/React.createElement(React.Fragment,null,cartLine.addToWishlist,cartLine.remove));});}else{return cartDataResult?/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart__empty-cart'},/*#__PURE__*/React.createElement(\"p\",{className:'msc-cart-line'},emptyCartText),backToShoppingButton):/*#__PURE__*/React.createElement(React.Fragment,null,waitingComponent);}};const _renderBOPISBlock=(cartLine,resources,storeSelector,telemetryContent)=>{if(!cartLine.pickUpInStore||!storeSelector){return null;}const{shipInsteadDisplayText,shipToAddressDisplayText,pickItUpDisplayText,pickUpAtStoreWithLocationText,changeStoreDisplayText}=resources;const isBopisSelected=cartLine.pickUpInStore.isBopisSelected;const toggleBopis=event=>{return cartLine.pickUpInStore&&cartLine.pickUpInStore.callbacks.toggleBopis(!isBopisSelected);};const changeStore=event=>{return cartLine.pickUpInStore&&cartLine.pickUpInStore.callbacks.toggleBopis(true);};const payLoad=getPayloadObject('click',telemetryContent,TelemetryConstant.PickupInStore);const puckUpinStoreAttribute=getTelemetryAttributes(telemetryContent,payLoad);return/*#__PURE__*/React.createElement(Node,Object.assign({},cartLine.pickUpInStore.ContainerProps),/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__bopis-method'},isBopisSelected?/*#__PURE__*/React.createElement(\"span\",{className:'pick-up'},pickUpAtStoreWithLocationText):/*#__PURE__*/React.createElement(\"span\",{className:'ship'},shipToAddressDisplayText)),isBopisSelected&&/*#__PURE__*/React.createElement(\"div\",{className:'msc-cart-line__bopis-fullfilment'},/*#__PURE__*/React.createElement(\"span\",{className:'msc-cart-line__bopis-fullfilment-store'},cartLine.pickUpInStore.orgUnitName),/*#__PURE__*/React.createElement(Button,{className:'msc-cart-line__bopis-changestore',onClick:changeStore},changeStoreDisplayText)),/*#__PURE__*/React.createElement(Button,Object.assign({className:'msc-cart-line__bopis-btn'},puckUpinStoreAttribute,{onClick:toggleBopis}),isBopisSelected?shipInsteadDisplayText:pickItUpDisplayText));};const _renderErrorBlock=errorData=>{if(!errorData||errorData.errors.length===0){return null;}return/*#__PURE__*/React.createElement(Node,Object.assign({},errorData.Wrapper),errorData.header,errorData.errors);};const _renderOrderSummarylines=(orderSummaryLines,OrderSummaryItems,props)=>{if(!orderSummaryLines){return null;}return/*#__PURE__*/React.createElement(Node,Object.assign({},OrderSummaryItems),props.promoCode,orderSummaryLines.subtotal,orderSummaryLines.shipping,orderSummaryLines.otherCharge,orderSummaryLines.tax,orderSummaryLines.totalDiscounts?orderSummaryLines.totalDiscounts:null,orderSummaryLines.orderTotal);};export default CartView;","map":{"version":3,"sources":["modules/fabrikam/views/cart.view.tsx"],"names":[],"mappings":"4CAIA,MAAO,GAAK,CAAA,KAAZ,KAAuB,OAAvB,CAUA,OAAS,MAAT,CAAiB,gBAAjB,CAAmC,sBAAnC,CAA0F,IAA1F,CAAgG,iBAAhG,KAAyH,sCAAzH,CAEA,KAAM,CAAA,QAAQ,CAA8B,KAAD,eACvC,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAK,SAAS,CAAE,KAAK,CAAC,SAAtB,CAAiC,EAAE,CAAE,KAAK,CAAC,EAA3C,CAAA,CAAmD,KAAK,CAAC,sBAAN,CAA6B,KAA7B,CAAnD,CAAA,CACK,KAAK,CAAC,KADX,cAEI,KAAA,CAAA,aAAA,CAAC,IAAD,CAAK,MAAA,CAAA,MAAA,CAAA,EAAA,CAAK,KAAK,CAAC,gBAAX,CAAL,CACK,gBAAgB,CAAC,KAAK,CAAC,SAAP,CAAkB,KAAK,CAAC,SAAxB,CAAmC,KAAK,CAAC,aAAzC,CAAwD,KAAK,CAAC,oBAA9D,CAAoF,KAAK,CAAC,gBAA1F,CAA4G,KAAK,CAAC,iBAAlH,CAAqI,KAAK,CAAC,cAA3I,CAA2J,KAAK,CAAC,gBAAjK,CADrB,CAFJ,CAKK,KAAK,CAAC,mBAAN,eACG,KAAA,CAAA,aAAA,CAAE,IAAF,CAAM,MAAA,CAAA,MAAA,CAAA,EAAA,CAAK,KAAK,CAAC,mBAAX,CAAN,CACK,KAAK,CAAC,mBADX,CAEK,wBAAwB,CAAC,KAAK,CAAC,qBAAP,CAA8B,KAAK,CAAC,iBAApC,CAAuD,KAAvD,CAF7B,CAGK,iBAAiB,CAAC,KAAK,CAAC,kBAAP,CAHtB,CAIK,KAAK,CAAC,0BAJX,CAKK,KAAK,CAAC,qBALX,CAMK,KAAK,CAAC,oBANX,CAOK,KAAK,CAAC,4BAPX,CANR,CAgBK,KAAK,CAAC,aAhBX,CADJ,CAqBA,KAAM,CAAA,gBAAgB,CAAG,CAAC,SAAD,CAA+C,SAA/C,CAA0E,aAA1E,CACC,oBADD,CACwC,gBADxC,CAC2E,iBAD3E,CACsG,cADtG,CAC+H,gBAD/H,GACoM,CAEzN,KAAM,CAAE,aAAF,EAAoB,SAA1B,CAEA,GAAI,iBAAJ,CAAuB,CACnB,mBAAO,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAG,iBAAH,CAAP,CACH,CACD,GAAI,SAAJ,CAAe,CACX,MAAO,CAAA,SAAS,CAAC,GAAV,CAAc,CAAC,QAAD,CAAW,KAAX,GAAoB,CACrC,mBACI,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,qBAAf,CAAqC,GAAG,CAAE,KAA1C,CAAA,CACK,QAAQ,CAAC,QADd,CAEK,iBAAiB,CAAC,QAAD,CAAW,SAAX,CAAsB,aAAtB,CAAqC,gBAArC,CAFtB,CAIQ,QAAQ,CAAC,kBAAT,cACI,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,8BAAf,CAAA,CACK,QAAQ,CAAC,kBADd,CAEK,QAAQ,CAAC,aAFd,CAGK,QAAQ,CAAC,MAHd,CADJ,cAOI,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CACK,QAAQ,CAAC,aADd,CAEK,QAAQ,CAAC,MAFd,CAXZ,CADJ,CAoBH,CArBM,CAAP,CAsBH,CAvBD,IAuBO,CACH,MAAQ,CAAA,cAAc,cAEd,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,sBAAf,CAAA,cACI,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAG,SAAS,CAAC,eAAb,CAAA,CAA8B,aAA9B,CADJ,CAEK,oBAFL,CAFc,cAMd,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAG,gBAAH,CANR,CAQH,CACJ,CAzCD,CA2CA,KAAM,CAAA,iBAAiB,CAAG,CAAC,QAAD,CAAgC,SAAhC,CAA2D,aAA3D,CAAuG,gBAAvG,GAAmK,CACzL,GAAI,CAAC,QAAQ,CAAC,aAAV,EAA2B,CAAC,aAAhC,CAA+C,CAC3C,MAAO,KAAP,CACH,CAED,KAAM,CAAE,sBAAF,CAA0B,wBAA1B,CAAoD,mBAApD,CAAyE,6BAAzE,CAAwG,sBAAxG,EAAmI,SAAzI,CAEA,KAAM,CAAA,eAAe,CAAG,QAAQ,CAAC,aAAT,CAAuB,eAA/C,CACA,KAAM,CAAA,WAAW,CAAI,KAAD,EAAyC,CAAG,MAAO,CAAA,QAAQ,CAAC,aAAT,EAA0B,QAAQ,CAAC,aAAT,CAAuB,SAAvB,CAAiC,WAAjC,CAA6C,CAAC,eAA9C,CAAjC,CAAkG,CAAlK,CACA,KAAM,CAAA,WAAW,CAAI,KAAD,EAAyC,CAAG,MAAO,CAAA,QAAQ,CAAC,aAAT,EAA0B,QAAQ,CAAC,aAAT,CAAuB,SAAvB,CAAiC,WAAjC,CAA6C,IAA7C,CAAjC,CAAsF,CAAtJ,CACA,KAAM,CAAA,OAAO,CAAG,gBAAgB,CAAC,OAAD,CAAS,gBAAT,CAA4B,iBAAiB,CAAC,aAA9C,CAAhC,CACA,KAAM,CAAA,sBAAsB,CAAG,sBAAsB,CAAC,gBAAD,CAAoB,OAApB,CAArD,CAEA,mBACI,KAAA,CAAA,aAAA,CAAC,IAAD,CAAK,MAAA,CAAA,MAAA,CAAA,EAAA,CAAK,QAAQ,CAAC,aAAT,CAAuB,cAA5B,CAAL,cACI,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,6BAAf,CAAA,CACK,eAAe,cAAG,KAAA,CAAA,aAAA,CAAA,MAAA,CAAA,CAAM,SAAS,CAAC,SAAhB,CAAA,CAA2B,6BAA3B,CAAH,cAAsE,KAAA,CAAA,aAAA,CAAA,MAAA,CAAA,CAAM,SAAS,CAAC,MAAhB,CAAA,CAAwB,wBAAxB,CAD1F,CADJ,CAKQ,eAAe,eACf,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAK,SAAS,CAAC,kCAAf,CAAA,cACI,KAAA,CAAA,aAAA,CAAA,MAAA,CAAA,CAAM,SAAS,CAAC,wCAAhB,CAAA,CAA0D,QAAQ,CAAC,aAAT,CAAuB,WAAjF,CADJ,cAEI,KAAA,CAAA,aAAA,CAAC,MAAD,CAAO,CAAC,SAAS,CAAC,kCAAX,CAA8C,OAAO,CAAE,WAAvD,CAAP,CAA4E,sBAA5E,CAFJ,CANR,cAWI,KAAA,CAAA,aAAA,CAAC,MAAD,CAAO,MAAA,CAAA,MAAA,CAAA,CAAC,SAAS,CAAC,0BAAX,CAAA,CAA0C,sBAA1C,CAAgE,CAAE,OAAO,CAAE,WAAX,CAAhE,CAAP,CAAgG,eAAe,CAAG,sBAAH,CAA4B,mBAA3I,CAXJ,CADJ,CAeH,CA5BD,CA8BA,KAAM,CAAA,iBAAiB,CAAI,SAAD,EAAmE,CACzF,GAAI,CAAC,SAAD,EAAc,SAAS,CAAC,MAAV,CAAiB,MAAjB,GAA4B,CAA9C,CAAiD,CAC7C,MAAO,KAAP,CACH,CACD,mBACI,KAAA,CAAA,aAAA,CAAC,IAAD,CAAK,MAAA,CAAA,MAAA,CAAA,EAAA,CAAK,SAAS,CAAC,OAAf,CAAL,CACK,SAAS,CAAC,MADf,CAEK,SAAS,CAAC,MAFf,CADJ,CAMH,CAVD,CAYA,KAAM,CAAA,wBAAwB,CAAG,CAAC,iBAAD,CAAoD,iBAApD,CAAmF,KAAnF,GAAgI,CAC7J,GAAI,CAAC,iBAAL,CAAwB,CACpB,MAAO,KAAP,CACH,CACD,mBACI,KAAA,CAAA,aAAA,CAAC,IAAD,CAAK,MAAA,CAAA,MAAA,CAAA,EAAA,CAAK,iBAAL,CAAL,CACK,KAAK,CAAC,SADX,CAEK,iBAAiB,CAAC,QAFvB,CAGK,iBAAiB,CAAC,QAHvB,CAIK,iBAAiB,CAAC,WAJvB,CAKK,iBAAiB,CAAC,GALvB,CAMK,iBAAiB,CAAC,cAAlB,CAAmC,iBAAiB,CAAC,cAArD,CAAsE,IAN3E,CAOK,iBAAiB,CAAC,UAPvB,CADJ,CAWH,CAfD,CAgBA,cAAe,CAAA,QAAf","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as React from 'react';\n\nimport {\n    ICartlinesViewProps,\n    ICartResources,\n    ICartViewProps,\n    IOrderSummaryErrors\n} from '@msdyn365-commerce-modules/cart';\n\nimport { IOrderSummaryLines } from '@msdyn365-commerce-modules/order-summary-utilities';\nimport { Button, getPayloadObject, getTelemetryAttributes, INodeProps, ITelemetryContent, Node, TelemetryConstant } from '@msdyn365-commerce-modules/utilities';\n\nconst CartView: React.FC<ICartViewProps> = (props: ICartViewProps) => (\n    <div className={props.className} id={props.id} {...props.renderModuleAttributes(props)}>\n        {props.title}\n        <Node {...props.CartlinesWrapper}>\n            {_renderCartlines(props.cartlines, props.resources, props.storeSelector, props.backToShoppingButton, props.waitingComponent, props.cartLoadingStatus, props.cartDataResult, props.telemetryContent)}\n        </Node>\n        {props.orderSummaryHeading &&\n            < Node {...props.OrderSummaryWrapper}>\n                {props.orderSummaryHeading}\n                {_renderOrderSummarylines(props.orderSummaryLineitems, props.OrderSummaryItems, props)}\n                {_renderErrorBlock(props.OrderSummaryErrors)}\n                {props.checkoutAsSignInUserButton}\n                {props.checkoutAsGuestButton}\n                {props.backToShoppingButton}\n                {props.createTemplateFromCartButton}\n            </Node>\n        }\n        {props.storeSelector}\n    </div>\n);\n\nconst _renderCartlines = (cartLines: ICartlinesViewProps[] | undefined, resources: ICartResources, storeSelector: React.ReactNode | undefined,\n                          backToShoppingButton: React.ReactNode, waitingComponent: React.ReactNode, cartLoadingStatus: string, cartDataResult: boolean, telemetryContent?: ITelemetryContent): JSX.Element[] | JSX.Element => {\n\n    const { emptyCartText } = resources;\n\n    if (cartLoadingStatus) {\n        return <>{cartLoadingStatus}</>;\n    }\n    if (cartLines) {\n        return cartLines.map((cartLine, index) => {\n            return (\n                <div className='msc-cart-lines-item' key={index}>\n                    {cartLine.cartline}\n                    {_renderBOPISBlock(cartLine, resources, storeSelector, telemetryContent)}\n                    {\n                        cartLine.addToOrderTemplate ? (\n                            <div className='msc-cart-line__extra-actions'>\n                                {cartLine.addToOrderTemplate}\n                                {cartLine.addToWishlist}\n                                {cartLine.remove}\n                            </div>\n                        ) : (\n                            <>\n                                {cartLine.addToWishlist}\n                                {cartLine.remove}\n                            </>\n                        )\n                    }\n                </div>\n            );\n        });\n    } else {\n        return (cartDataResult ?\n            (\n                <div className='msc-cart__empty-cart'>\n                    <p className='msc-cart-line'>{emptyCartText}</p>\n                    {backToShoppingButton}\n                </div>\n            ) : <>{waitingComponent}</>\n        );\n    }\n};\n\nconst _renderBOPISBlock = (cartLine: ICartlinesViewProps, resources: ICartResources, storeSelector: React.ReactNode | undefined, telemetryContent?: ITelemetryContent): JSX.Element | null => {\n    if (!cartLine.pickUpInStore || !storeSelector) {\n        return null;\n    }\n\n    const { shipInsteadDisplayText, shipToAddressDisplayText, pickItUpDisplayText, pickUpAtStoreWithLocationText, changeStoreDisplayText } = resources;\n\n    const isBopisSelected = cartLine.pickUpInStore.isBopisSelected;\n    const toggleBopis = (event: React.MouseEvent<HTMLElement>) => { return cartLine.pickUpInStore && cartLine.pickUpInStore.callbacks.toggleBopis(!isBopisSelected); };\n    const changeStore = (event: React.MouseEvent<HTMLElement>) => { return cartLine.pickUpInStore && cartLine.pickUpInStore.callbacks.toggleBopis(true); };\n    const payLoad = getPayloadObject('click',telemetryContent!, TelemetryConstant.PickupInStore);\n    const puckUpinStoreAttribute = getTelemetryAttributes(telemetryContent!, payLoad);\n\n    return (\n        <Node {...cartLine.pickUpInStore.ContainerProps}>\n            <div className='msc-cart-line__bopis-method'>\n                {isBopisSelected ? <span className='pick-up'>{pickUpAtStoreWithLocationText}</span> : <span className='ship'>{shipToAddressDisplayText}</span>}\n            </div>\n            {\n                isBopisSelected &&\n                <div className='msc-cart-line__bopis-fullfilment'>\n                    <span className='msc-cart-line__bopis-fullfilment-store'>{cartLine.pickUpInStore.orgUnitName}</span>\n                    <Button className='msc-cart-line__bopis-changestore' onClick={changeStore}>{changeStoreDisplayText}</Button>\n                </div>\n            }\n            <Button className='msc-cart-line__bopis-btn' {...puckUpinStoreAttribute} onClick={toggleBopis}>{isBopisSelected ? shipInsteadDisplayText : pickItUpDisplayText}</Button>\n        </Node>\n    );\n};\n\nconst _renderErrorBlock = (errorData: IOrderSummaryErrors | undefined): JSX.Element | null => {\n    if (!errorData || errorData.errors.length === 0) {\n        return null;\n    }\n    return (\n        <Node {...errorData.Wrapper}>\n            {errorData.header}\n            {errorData.errors}\n        </Node>\n    );\n};\n\nconst _renderOrderSummarylines = (orderSummaryLines: IOrderSummaryLines | undefined, OrderSummaryItems: INodeProps, props: ICartViewProps): JSX.Element | null => {\n    if (!orderSummaryLines) {\n        return null;\n    }\n    return (\n        <Node {...OrderSummaryItems}>\n            {props.promoCode}\n            {orderSummaryLines.subtotal}\n            {orderSummaryLines.shipping}\n            {orderSummaryLines.otherCharge}\n            {orderSummaryLines.tax}\n            {orderSummaryLines.totalDiscounts ? orderSummaryLines.totalDiscounts : null}\n            {orderSummaryLines.orderTotal}\n        </Node>\n    );\n};\nexport default CartView;"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}