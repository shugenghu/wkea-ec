{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{createProductListAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';/**\r\n *  Input class for the CreateOrderTemplate data action.\r\n */export var CreateOrderTemplateInput=function CreateOrderTemplateInput(templateName){_classCallCheck(this,CreateOrderTemplateInput);this.getCacheKey=function(){return'CreateOrderTemplateInput';};this.getCacheObjectType=function(){return'CreateOrderTemplateInput';};this.dataCacheType=function(){return'none';};this.templateName=templateName;};/**\r\n * createInput method for the CreateOrderTemplate method.\r\n * @param {ICreateActionContext} inputData The input data passed to the createInput method.\r\n * @param {string} templateName The name of template.\r\n */export var createOrderTemplateInput=function createOrderTemplateInput(inputData,templateName){var requestContext=inputData.requestContext;if(!requestContext.user.isAuthenticated){throw new Error('Unable to create order template. User is not authenticated.');}return new CreateOrderTemplateInput(templateName);};/**\r\n * The action method for the CreateOrderTemplate data action.\r\n * @param {CreateOrderTemplateInput} input The action input.\r\n * @param {IActionContext} ctx The action context.\r\n */export function createOrderTemplateAction(_x,_x2){return _createOrderTemplateAction.apply(this,arguments);}/**\r\n * The CreateOrderTemplate Data Action.\r\n * Returns created order template.\r\n */function _createOrderTemplateAction(){_createOrderTemplateAction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input,ctx){var orderTemplate,createdProductList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;orderTemplate={Id:'',Name:input.templateName,ProductListTypeValue:1/* OrderTemplate */};_context.next=4;return createProductListAsync({callerContext:ctx},orderTemplate);case 4:createdProductList=_context.sent;if(!(createdProductList&&createdProductList.Id!=='')){_context.next=9;break;}return _context.abrupt(\"return\",createdProductList);case 9:ctx.telemetry.error('Created product list was null');throw Error('Created product list was null');case 11:_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);ctx.telemetry.error('Not able to create order template',_context.t0);throw _context.t0;case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return _createOrderTemplateAction.apply(this,arguments);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/order-templates/create-order-template',action:createOrderTemplateAction,input:createOrderTemplateInput});","map":{"version":3,"sources":["../../../src/order-templates/create-order-template.ts"],"names":[],"mappings":"8MAAA,OAEI,0BAFJ,KAOO,yBAPP,CASA,OAAS,sBAAT,KAAuC,4EAAvC,CAEA;;AAEG,GACH,UAAa,CAAA,wBAAb,CAGI,kCAAY,YAAZ,CAAgC,gDAIzB,KAAA,WAAA,CAAc,iBAAM,0BAAN,EAAd,CACA,KAAA,kBAAA,CAAqB,iBAAM,0BAAN,EAArB,CACA,KAAA,aAAA,CAAgB,iBAAiB,MAAjB,EAAhB,CALH,KAAK,YAAL,CAAoB,YAApB,CACH,CALL,CAYA;;;;AAIG,GACH,MAAO,IAAM,CAAA,wBAAwB,CAAG,QAA3B,CAAA,wBAA2B,CAAC,SAAD,CAAkC,YAAlC,CAAoF,IAChH,CAAA,cADgH,CAC7F,SAD6F,CAChH,cADgH,CAExH,GAAI,CAAC,cAAc,CAAC,IAAf,CAAoB,eAAzB,CAA0C,CACtC,KAAM,IAAI,CAAA,KAAJ,CAAU,6DAAV,CAAN,CACH,CACD,MAAO,IAAI,CAAA,wBAAJ,CAA6B,YAA7B,CAAP,CACH,CANM,CAQP;;;;AAIG,GACH,eAAsB,CAAA,yBAAtB,kEAsBA;;;AAGG,G,yHAzBI,iBAAyC,KAAzC,CAA0E,GAA1E,uKAEO,aAFP,CAEoC,CAC/B,EAAE,CAAE,EAD2B,CAE/B,IAAI,CAAE,KAAK,CAAC,YAFmB,CAG/B,oBAAoB,CAAA,CAAA,mBAHW,CAFpC,uBAOkC,CAAA,sBAAsB,CAAC,CACpD,aAAa,CAAE,GADqC,CAAD,CAEpD,aAFoD,CAPxD,QAOO,kBAPP,oBAUK,kBAAkB,EAAI,kBAAkB,CAAC,EAAnB,GAA0B,EAVrD,0DAWY,kBAXZ,SAaK,GAAG,CAAC,SAAJ,CAAc,KAAd,CAAoB,+BAApB,EAbL,KAcW,CAAA,KAAK,CAAC,+BAAD,CAdhB,0FAiBC,GAAG,CAAC,SAAJ,CAAc,KAAd,CAAoB,mCAApB,cAjBD,uF,4DA0BP,cAAe,CAAA,0BAA0B,CAAc,CACnD,EAAE,CAAE,iFAD+C,CAEnD,MAAM,CAAwB,yBAFqB,CAGnD,KAAK,CAAE,wBAH4C,CAAd,CAAzC","sourcesContent":["import {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext\n} from '@msdyn365-commerce/core';\nimport { ProductList, ProductListType } from '@msdyn365-commerce/retail-proxy';\nimport { createProductListAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';\n\n/**\n *  Input class for the CreateOrderTemplate data action.\n */\nexport class CreateOrderTemplateInput implements IActionInput {\n    public readonly templateName: string;\n\n    constructor(templateName: string) {\n        this.templateName = templateName;\n    }\n\n    public getCacheKey = () => 'CreateOrderTemplateInput';\n    public getCacheObjectType = () => 'CreateOrderTemplateInput';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * createInput method for the CreateOrderTemplate method.\n * @param {ICreateActionContext} inputData The input data passed to the createInput method.\n * @param {string} templateName The name of template.\n */\nexport const createOrderTemplateInput = (inputData: ICreateActionContext, templateName: string): CreateOrderTemplateInput => {\n    const { requestContext } = inputData;\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('Unable to create order template. User is not authenticated.');\n    }\n    return new CreateOrderTemplateInput(templateName);\n};\n\n/**\n * The action method for the CreateOrderTemplate data action.\n * @param {CreateOrderTemplateInput} input The action input.\n * @param {IActionContext} ctx The action context.\n */\nexport async function createOrderTemplateAction(input: CreateOrderTemplateInput, ctx: IActionContext): Promise<ProductList> {\n    try {\n        const orderTemplate: ProductList = {\n            Id: '',\n            Name: input.templateName,\n            ProductListTypeValue: ProductListType.OrderTemplate\n        };\n        const createdProductList = await createProductListAsync({\n            callerContext: ctx\n        }, orderTemplate);\n        if (createdProductList && createdProductList.Id !== '') {\n            return createdProductList;\n        } else {\n            ctx.telemetry.error('Created product list was null');\n            throw Error('Created product list was null');\n        }\n    } catch (error) {\n        ctx.telemetry.error('Not able to create order template', error);\n        throw error;\n    }\n}\n\n/**\n * The CreateOrderTemplate Data Action.\n * Returns created order template.\n */\nexport default createObservableDataAction<ProductList>({\n    id: '@msdyn365-commerce-modules/retail-actions/order-templates/create-order-template',\n    action: <IAction<ProductList>>createOrderTemplateAction,\n    input: createOrderTemplateInput\n});"],"sourceRoot":""},"metadata":{},"sourceType":"module"}