{"ast":null,"code":"/*!\r\n * Copyright (c) Microsoft Corporation.\r\n * All rights reserved. See LICENSE in the project root for license information.\r\n */ // External Scripts Declarations\nvar BootstrapCSSVersion=\"4.2.1\";// Can also be moved to registration if we need to\nvar ReactScript={src:{debug:\"static/js/react/react.development.js\",production:\"static/js/react/react.production.min.js\"},scriptType:0/* Script */,mapBaseUrl:true,required:true};var ReactDOMScript={src:{debug:\"static/js/react-dom/react-dom.development.js\",production:\"static/js/react-dom/react-dom.production.min.js\"},scriptType:0/* Script */,mapBaseUrl:true,required:true};var BootstrapStyle={src:{debug:\"https://stackpath.bootstrapcdn.com/bootstrap/\".concat(BootstrapCSSVersion,\"/css/bootstrap.css\"),production:\"https://stackpath.bootstrapcdn.com/bootstrap/\".concat(BootstrapCSSVersion,\"/css/bootstrap.min.css\")},scriptType:1/* Style */,attributes:{crossOrigin:'anonymous'}};/**\r\n * Static per app lifetime of the platform external scripts\r\n */export var platformExternalScripts=[ReactScript,ReactDOMScript,BootstrapStyle];/**\r\n * Private helper for mapping a dictionary of key/value pairs to HTML attributes\r\n * @param attributes attributes dictionary\r\n */var attributeToHtmlAttribute=function attributeToHtmlAttribute(){var attributes=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return Object.keys(attributes).map(function(key){return attributes[key]!==undefined?\"\".concat(key,\"=\\\"\").concat(attributes[key],\"\\\"\"):key;}).join(' ');};/**\r\n * Private helper to add preload attribute for required script\r\n * @param externalScripts external script object\r\n * @param preloadRequiredScripts add preload data attribute\r\n */var addPreLoadAttributeToRequiredScripts=function addPreLoadAttributeToRequiredScripts(externalScripts){var preloadRequiredScripts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(externalScripts){for(var i=0;i<externalScripts.length;i++){var script=externalScripts[i];if(preloadRequiredScripts&&script.required){if(!script.attributes){script.attributes={};}script.attributes['data-preload']='true';}else if(script.attributes&&script.attributes['data-preload']){delete script.attributes['data-preload'];}}}};/**\r\n * Convert external script object to HTML tag string.\r\n *\r\n * @param externalScript external script object\r\n * @param isDebug Use debug URL for script if available\r\n */export var externalStaticToHtmlTag=function externalStaticToHtmlTag(baseUrl,externalScript){var isDebug=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var result=\"\";var scriptSource=isDebug&&externalScript.src.debug?externalScript.src.debug:externalScript.src.production;switch(externalScript.scriptType){case 0/* Script */:result=\"<script type=\\\"text/javascript\\\" src=\\\"\".concat(externalScript.mapBaseUrl?baseUrl:'').concat(scriptSource,\"\\\" \").concat(attributeToHtmlAttribute(externalScript.attributes),\" crossOrigin=\\\"anonymous\\\"></script>\");break;default:// ExternalScriptType.Style\nresult=\"<link rel=\\\"stylesheet\\\" href=\\\"\".concat(externalScript.mapBaseUrl?baseUrl:'').concat(scriptSource,\"\\\" \").concat(attributeToHtmlAttribute(externalScript.attributes),\"/>\");}return result;};var _staticsCache={};/**\r\n * Pre-processed strings\r\n */export var getPlatformExternalStaticsAsStrings=function getPlatformExternalStaticsAsStrings(baseUrl){var preloadRequiredScripts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var cacheKey=\"\".concat(baseUrl,\"-preloadrequiredscripts-\").concat(preloadRequiredScripts);if(_staticsCache[cacheKey]){return _staticsCache[cacheKey];}var externals={scripts:platformExternalScripts.filter(function(script){return script.scriptType===0;}/* Script */),styles:platformExternalScripts.filter(function(script){return script.scriptType===1;}/* Style */)};addPreLoadAttributeToRequiredScripts(externals.scripts,preloadRequiredScripts);var result={debugScriptHtmlString:externals.scripts.map(function(kvp){return externalStaticToHtmlTag(baseUrl,kvp,true);}).join(''),productionScriptHtmlString:externals.scripts.map(function(kvp){return externalStaticToHtmlTag(baseUrl,kvp,false);}).join(''),debugStyleHtmlString:externals.styles.map(function(kvp){return externalStaticToHtmlTag(baseUrl,kvp,true);}).join(''),productionStyleHtmlString:externals.styles.map(function(kvp){return externalStaticToHtmlTag(baseUrl,kvp,false);}).join('')};_staticsCache[cacheKey]=result;return result;};","map":{"version":3,"sources":["../../../src/_server/platformExternalStatics.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nexport const enum ExternalStaticType {\n    Script,\n    Style\n}\n\nexport interface IExternalStatic {\n    /**\n     * Is this script is required on page ?.\n     */\n    required?: boolean;\n    /**\n     * The script type\n     */\n    scriptType: ExternalStaticType;\n    /**\n     * Where the script lives - both a default (minified) & debug script sources\n     */\n    src: {\n        debug?: string;\n        production: string;\n    };\n    attributes?: {\n        [key: string]: string | undefined;\n    };\n    /**\n     * Should the base URL be mapped to this?\n     */\n    mapBaseUrl?: boolean;\n}\n// External Scripts Declarations\nconst BootstrapCSSVersion = `4.2.1`;\n\n// Can also be moved to registration if we need to\nconst ReactScript: IExternalStatic = {\n    src: {\n        debug: `static/js/react/react.development.js`,\n        production: `static/js/react/react.production.min.js`\n    },\n    scriptType: ExternalStaticType.Script,\n    mapBaseUrl: true,\n    required: true\n};\n\nconst ReactDOMScript: IExternalStatic = {\n    src: {\n        debug: `static/js/react-dom/react-dom.development.js`,\n        production: `static/js/react-dom/react-dom.production.min.js`\n    },\n    scriptType: ExternalStaticType.Script,\n    mapBaseUrl: true,\n    required: true\n};\n\nconst BootstrapStyle: IExternalStatic = {\n    src: {\n        debug: `https://stackpath.bootstrapcdn.com/bootstrap/${BootstrapCSSVersion}/css/bootstrap.css`,\n        production: `https://stackpath.bootstrapcdn.com/bootstrap/${BootstrapCSSVersion}/css/bootstrap.min.css`\n    },\n    scriptType: ExternalStaticType.Style,\n    attributes: {\n        crossOrigin: 'anonymous'\n    }\n};\n\n/**\n * Static per app lifetime of the platform external scripts\n */\nexport const platformExternalScripts: IExternalStatic[] = [ReactScript, ReactDOMScript, BootstrapStyle];\n\n/**\n * Private helper for mapping a dictionary of key/value pairs to HTML attributes\n * @param attributes attributes dictionary\n */\nconst attributeToHtmlAttribute = (attributes: { [key: string]: string | undefined } = {}) => {\n    return Object.keys(attributes)\n        .map((key: string) => {\n            return attributes[key] !== undefined ? `${key}=\"${attributes[key]}\"` : key;\n        })\n        .join(' ');\n};\n\n/**\n * Private helper to add preload attribute for required script\n * @param externalScripts external script object\n * @param preloadRequiredScripts add preload data attribute\n */\nconst addPreLoadAttributeToRequiredScripts = (externalScripts: IExternalStatic[], preloadRequiredScripts: boolean = false) => {\n    if (externalScripts) {\n        for (let i = 0; i < externalScripts.length; i++) {\n            const script = externalScripts[i];\n            if (preloadRequiredScripts && script.required) {\n                if (!script.attributes) {\n                    script.attributes = {};\n                }\n                script.attributes['data-preload'] = 'true';\n            } else if (script.attributes && script.attributes['data-preload']) {\n                delete script.attributes['data-preload'];\n            }\n        }\n    }\n};\n\n/**\n * Convert external script object to HTML tag string.\n *\n * @param externalScript external script object\n * @param isDebug Use debug URL for script if available\n */\nexport const externalStaticToHtmlTag = (baseUrl: string, externalScript: IExternalStatic, isDebug: boolean = false) => {\n    let result = ``;\n    const scriptSource = isDebug && externalScript.src.debug ? externalScript.src.debug : externalScript.src.production;\n\n    switch (externalScript.scriptType) {\n        case ExternalStaticType.Script:\n            result = `<script type=\"text/javascript\" src=\"${\n                externalScript.mapBaseUrl ? baseUrl : ''\n            }${scriptSource}\" ${attributeToHtmlAttribute(externalScript.attributes)} crossOrigin=\"anonymous\"></script>`;\n            break;\n        default:\n            // ExternalScriptType.Style\n            result = `<link rel=\"stylesheet\" href=\"${externalScript.mapBaseUrl ? baseUrl : ''}${scriptSource}\" ${attributeToHtmlAttribute(\n                externalScript.attributes\n            )}/>`;\n    }\n\n    return result;\n};\n\nconst _staticsCache = {};\n/**\n * Pre-processed strings\n */\nexport const getPlatformExternalStaticsAsStrings = (baseUrl: string, preloadRequiredScripts = false) => {\n    const cacheKey = `${baseUrl}-preloadrequiredscripts-${preloadRequiredScripts}`;\n    if (_staticsCache[cacheKey]) {\n        return _staticsCache[cacheKey];\n    }\n    const externals = {\n        scripts: platformExternalScripts.filter((script: IExternalStatic) => script.scriptType === ExternalStaticType.Script),\n        styles: platformExternalScripts.filter((script: IExternalStatic) => script.scriptType === ExternalStaticType.Style)\n    };\n\n    addPreLoadAttributeToRequiredScripts(externals.scripts, preloadRequiredScripts);\n\n    const result = {\n        debugScriptHtmlString: externals.scripts.map((kvp: IExternalStatic) => externalStaticToHtmlTag(baseUrl, kvp, true)).join(''),\n        productionScriptHtmlString: externals.scripts.map((kvp: IExternalStatic) => externalStaticToHtmlTag(baseUrl, kvp, false)).join(''),\n        debugStyleHtmlString: externals.styles.map((kvp: IExternalStatic) => externalStaticToHtmlTag(baseUrl, kvp, true)).join(''),\n        productionStyleHtmlString: externals.styles.map((kvp: IExternalStatic) => externalStaticToHtmlTag(baseUrl, kvp, false)).join('')\n    };\n    _staticsCache[cacheKey] = result;\n\n    return result;\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}