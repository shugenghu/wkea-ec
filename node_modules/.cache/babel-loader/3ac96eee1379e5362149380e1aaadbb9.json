{"ast":null,"code":"import\"core-js/modules/es.object.assign.js\";import\"core-js/modules/es.string.includes.js\";import\"core-js/modules/es.string.replace.js\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{Button,getPayloadObject,getTelemetryAttributes,TelemetryConstant}from'@msdyn365-commerce-modules/utilities';import{getUrlSync}from'@msdyn365-commerce/core';import*as React from'react';import{getGroups}from'../../../common/get-groups';import{getOrderInfomationInput,getOrderInformation}from'../../../common/get-order-information';import{getSalesLines,getSalesLinesInput}from'../../../common/get-sales-lines';export const getSalesOrder=input=>{const{id,typeName,context,telemetry,products,salesOrder,showChannelInfo,channelIdentities,orgUnitLocations,telemetryContent,resources:{freePriceText,detailsAriaLabel,detailsLabel,orderItemLabel,orderItemsLabel},context:{actionContext}}=input;const moduleName='ms-order-history';const priceContext={id,typeName,context,telemetry,freePriceText};const _getorderDetailsPageUrl=()=>{const url=getUrlSync('orderDetails',actionContext)||'';const separator=url.includes('?')?'&':'?';if(salesOrder.SalesId){return\"\".concat(url).concat(separator,\"salesId=\").concat(salesOrder.SalesId);}else{return\"\".concat(url).concat(separator,\"transactionId=\").concat(salesOrder.TransactionId);}};const salesOrderProps={className:'ms-order-history__sales-order',key:salesOrder.SalesId||salesOrder.TransactionId};const orderInfomationInput=getOrderInfomationInput(input,moduleName,salesOrder,priceContext,channelIdentities,orgUnitLocations,showChannelInfo);const orderInfomation=getOrderInformation(orderInfomationInput);const salesLinesInput=products&&getSalesLinesInput(input,moduleName,salesOrder,products,priceContext);const salesLines=salesLinesInput&&getSalesLines(_objectSpread(_objectSpread({},salesLinesInput),{},{imageOnly:true}));const payLoad=getPayloadObject('click',telemetryContent,TelemetryConstant.OrderDetails);const orderDetailsAttributes=getTelemetryAttributes(telemetryContent,payLoad);const groups=salesLines&&getGroups({moduleName,salesLines,resources:{orderItemLabel,orderItemsLabel}});const orderDetailsLink=/*#__PURE__*/React.createElement(Button,Object.assign({href:_getorderDetailsPageUrl(),\"aria-label\":salesOrder.ChannelReferenceId&&detailsAriaLabel?detailsAriaLabel.replace('{orderId}',salesOrder.ChannelReferenceId):'',className:'ms-order-history__btn-order-details'},orderDetailsAttributes),detailsLabel);return{salesOrderProps,orderInfomation,groups,orderDetailsLink};};","map":{"version":3,"sources":["modules/order-history/components/get-sales-order.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Button, getPayloadObject, getTelemetryAttributes, INodeProps, ITelemetryContent, TelemetryConstant } from '@msdyn365-commerce-modules/utilities';\nimport { getUrlSync } from '@msdyn365-commerce/core';\nimport { ChannelIdentity, OrderShipments, OrgUnitLocation, SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport * as React from 'react';\nimport { getGroups, IGroups } from '../../../common/get-groups';\nimport { getOrderInfomationInput, getOrderInformation, IOrderInformation } from '../../../common/get-order-information';\nimport { getSalesLines, getSalesLinesInput } from '../../../common/get-sales-lines';\nimport { IOrderHistoryData } from '../order-history.data';\nimport { IOrderHistoryProps } from '../order-history.props.autogenerated';\n\nexport interface ISalesOrderProps extends IOrderHistoryProps<IOrderHistoryData> {\n    salesOrder: OrderShipments;\n    products: SimpleProduct[];\n    channelIdentities?: ChannelIdentity[];\n    orgUnitLocations?: OrgUnitLocation[];\n    showChannelInfo?: boolean;\n    telemetryContent?: ITelemetryContent;\n}\n\nexport interface ISalesOrder {\n    salesOrderProps: INodeProps;\n    orderInfomation: IOrderInformation;\n    groups?: IGroups;\n    orderDetailsLink: React.ReactNode;\n}\n\nexport const getSalesOrder = (input: ISalesOrderProps): ISalesOrder => {\n    const {\n        id,\n        typeName,\n        context,\n        telemetry,\n        products,\n        salesOrder,\n        showChannelInfo,\n        channelIdentities,\n        orgUnitLocations,\n        telemetryContent,\n        resources: { freePriceText, detailsAriaLabel, detailsLabel, orderItemLabel, orderItemsLabel },\n        context: { actionContext }\n    } = input;\n\n    const moduleName = 'ms-order-history';\n\n    const priceContext = {\n        id,\n        typeName,\n        context,\n        telemetry,\n        freePriceText\n    };\n\n    const _getorderDetailsPageUrl = (): string => {\n        const url = getUrlSync('orderDetails', actionContext) || '';\n        const separator = url.includes('?') ? '&' : '?';\n        if (salesOrder.SalesId) {\n            // Redirect with sales order sales id\n            return `${url}${separator}salesId=${salesOrder.SalesId}`;\n        } else {\n            // Redirect with sales order transaction id\n            return `${url}${separator}transactionId=${salesOrder.TransactionId}`;\n        }\n    };\n\n    const salesOrderProps = { className: 'ms-order-history__sales-order', key: salesOrder.SalesId || salesOrder.TransactionId };\n\n    const orderInfomationInput = getOrderInfomationInput(input, moduleName, salesOrder, priceContext, channelIdentities, orgUnitLocations, showChannelInfo);\n    const orderInfomation = getOrderInformation(orderInfomationInput);\n\n    const salesLinesInput = products && getSalesLinesInput(input, moduleName, salesOrder, products, priceContext);\n    const salesLines = salesLinesInput && getSalesLines({ ...salesLinesInput, imageOnly: true });\n    const payLoad = getPayloadObject('click', telemetryContent!, TelemetryConstant.OrderDetails);\n    const orderDetailsAttributes = getTelemetryAttributes(telemetryContent!, payLoad);\n\n    const groups =\n        salesLines &&\n        getGroups({\n            moduleName,\n            salesLines,\n            resources: { orderItemLabel, orderItemsLabel }\n        });\n\n    const orderDetailsLink = (\n        <Button\n            href={_getorderDetailsPageUrl()}\n            aria-label={\n                salesOrder.ChannelReferenceId && detailsAriaLabel\n                    ? detailsAriaLabel.replace('{orderId}', salesOrder.ChannelReferenceId)\n                    : ''\n            }\n            className='ms-order-history__btn-order-details'\n            {...orderDetailsAttributes}\n        >\n            {detailsLabel}\n        </Button>\n    );\n\n    return {\n        salesOrderProps,\n        orderInfomation,\n        groups,\n        orderDetailsLink\n    };\n};\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}