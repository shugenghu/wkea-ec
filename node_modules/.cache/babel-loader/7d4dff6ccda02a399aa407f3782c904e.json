{"ast":null,"code":"import\"core-js/modules/es.symbol.description.js\";import\"core-js/modules/es.object.assign.js\";import*as React from'react';import{Module,Node}from'@msdyn365-commerce-modules/utilities';import{Quantity}from'../utilities/quantity';const BuyboxView=props=>{var _props$slots;const{ModuleProps,MediaGalleryContainerProps,ProductInfoContainerProps,addToCart,addToOrderTemplate,addToWishlist,telemetryContent,configure,description,findInStore,quantity,price,title,rating,callbacks,state,resources,inventoryLabel,shopSimilarLook}=props;return/*#__PURE__*/React.createElement(Module,Object.assign({},ModuleProps),/*#__PURE__*/React.createElement(Node,Object.assign({},MediaGalleryContainerProps),props.mediaGallery),/*#__PURE__*/React.createElement(Node,Object.assign({},ProductInfoContainerProps),title,price,description,_renderTextBlock(props.slots.textBlocks),rating,configure&&_renderConfigure(configure),quantity&&_renderQuantity(quantity,callbacks,props,state,resources,telemetryContent),inventoryLabel,_renderCartAndActions(addToCart,addToOrderTemplate,addToWishlist),findInStore&&_renderFindInStore(findInStore),_renderSocialShare(props.slots&&((_props$slots=props.slots)===null||_props$slots===void 0?void 0:_props$slots.socialShare)),shopSimilarLook&&_renderShopSimilarLook(shopSimilarLook)));};const _renderTextBlock=textBlocks=>{if(!textBlocks||textBlocks.length===0){return undefined;}return/*#__PURE__*/React.createElement(React.Fragment,null,textBlocks[0]);};const _renderSocialShare=socialShare=>{if(!socialShare||socialShare.length===0){return undefined;}return/*#__PURE__*/React.createElement(React.Fragment,null,socialShare[0]);};const _renderCartAndActions=(addToCart,addToOrderTemplate,addToWishlist)=>{if(!addToCart&&!addToWishlist){return undefined;}return/*#__PURE__*/React.createElement(\"div\",{className:'product-add-to-cart'},addToCart&&addToCart.errorBlock,addToOrderTemplate&&addToOrderTemplate.errorBlock,addToWishlist&&addToWishlist.errorBlock,/*#__PURE__*/React.createElement(\"div\",{className:'buttons'},addToCart&&addToCart.button,addToOrderTemplate&&addToOrderTemplate.button,addToWishlist&&addToWishlist.button));};const _renderConfigure=configure=>{const{ContainerProps,dropdowns}=configure;return/*#__PURE__*/React.createElement(Node,Object.assign({},ContainerProps),dropdowns.map(_renderConfigureDropdown));};const _renderConfigureDropdown=dropdown=>{const{ContainerProps,LabelContainerProps,heading,errors,select}=dropdown;return/*#__PURE__*/React.createElement(Node,Object.assign({},ContainerProps),/*#__PURE__*/React.createElement(Node,Object.assign({},LabelContainerProps),heading,errors),select);};const _renderFindInStore=findInStore=>{const{ContainerProps,storeSelector,heading,description,errors,button,modal}=findInStore;return/*#__PURE__*/React.createElement(Node,Object.assign({},ContainerProps),storeSelector,heading,description,errors,button,modal);};const _renderQuantity=(quantityComponent,callbacks,props,state,extentionResources,telemetryContent)=>{const{ContainerProps,LabelContainerProps,heading,errors}=quantityComponent;const{resources,context:{app:{config:{maxQuantityForCartLineItem}}}}=props;const{quantity}=state;const onChange=newValue=>{if(callbacks.updateQuantity){callbacks.updateQuantity(newValue);}};return/*#__PURE__*/React.createElement(Node,Object.assign({},ContainerProps),/*#__PURE__*/React.createElement(Node,Object.assign({},LabelContainerProps),heading,errors),/*#__PURE__*/React.createElement(Quantity,{id:'ms-buybox__product-quantity-input',max:maxQuantityForCartLineItem||10,currentCount:quantity,onChange:onChange,inputQuantityAriaLabel:resources.inputQuantityAriaLabel,decrementButtonAriaLabel:extentionResources.decrementButtonAriaLabel,incrementButtonAriaLabel:extentionResources.incrementButtonAriaLabel,telemetryContent:telemetryContent}));};const _renderShopSimilarLook=shopSimilarItem=>{const{ContainerProps,errors,input}=shopSimilarItem;return/*#__PURE__*/React.createElement(Node,Object.assign({},ContainerProps),errors,input);};export default BuyboxView;","map":{"version":3,"sources":["modules/fabrikam/views/buybox.view.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as React from 'react';\n\nimport {\n    IBuyboxAddToCartViewProps,\n    IBuyboxAddToOrderTemplateViewProps,\n    IBuyboxAddToWishlistViewProps,\n    IBuyboxCallbacks,\n    IBuyboxData,\n    IBuyboxFindInStoreViewProps,\n    IBuyboxProductConfigureDropdownViewProps,\n    IBuyboxProductConfigureViewProps,\n    IBuyboxProductQuantityViewProps,\n    IBuyboxProps,\n    IBuyboxShopSimilarLookViewProps,\n    IBuyboxState,\n    IBuyboxViewProps\n } from '@msdyn365-commerce-modules/buybox';\n\nimport { ITelemetryContent, Module, Node } from '@msdyn365-commerce-modules/utilities';\n\nimport { IBuyboxProps as IBuyboxExtentionProps, IBuyboxResources as IBuyboxExtentionResources } from '../definition-extensions/buybox.ext.props.autogenerated';\nimport { Quantity } from '../utilities/quantity';\n\nconst BuyboxView: React.FC<IBuyboxViewProps & IBuyboxExtentionProps<IBuyboxData>> = props => {\n    const { ModuleProps, MediaGalleryContainerProps, ProductInfoContainerProps,\n        addToCart, addToOrderTemplate, addToWishlist,\n        telemetryContent, configure, description, findInStore,\n        quantity, price, title, rating, callbacks, state, resources, inventoryLabel, shopSimilarLook } = props;\n\n    return (\n        <Module {...ModuleProps}>\n            <Node {...MediaGalleryContainerProps}>\n                {props.mediaGallery}\n            </Node>\n            <Node {...ProductInfoContainerProps}>\n                {title}\n                {price}\n                {description}\n                { _renderTextBlock(props.slots.textBlocks)}\n                {rating}\n                {configure && _renderConfigure(configure)}\n                {quantity && _renderQuantity(quantity, callbacks, props, state, resources, telemetryContent)}\n                {inventoryLabel}\n                { _renderCartAndActions(addToCart, addToOrderTemplate, addToWishlist)}\n                {findInStore && _renderFindInStore(findInStore)}\n                { _renderSocialShare(props.slots && props.slots?.socialShare)}\n                {shopSimilarLook && _renderShopSimilarLook(shopSimilarLook)}\n            </Node>\n        </Module>\n    );\n};\n\nconst _renderTextBlock = (textBlocks: React.ReactNode[]): JSX.Element | undefined => {\n    if (!textBlocks || textBlocks.length === 0) {\n        return undefined;\n    }\n\n    return (\n        <>\n            {textBlocks[0]}\n        </>\n    );\n};\n\nconst _renderSocialShare = (socialShare: React.ReactNode[]): JSX.Element | undefined => {\n    if (!socialShare || socialShare.length === 0) {\n        return undefined;\n    }\n\n    return (\n        <>\n            {socialShare[0]}\n        </>\n    );\n};\n\nconst _renderCartAndActions = (\n    addToCart?: IBuyboxAddToCartViewProps,\n    addToOrderTemplate?: IBuyboxAddToOrderTemplateViewProps,\n    addToWishlist?: IBuyboxAddToWishlistViewProps): JSX.Element | undefined => {\n    if (!addToCart && !addToWishlist) {\n        return undefined;\n    }\n\n    return (\n        <div className='product-add-to-cart'>\n            {addToCart && addToCart.errorBlock}\n            {addToOrderTemplate && addToOrderTemplate.errorBlock}\n            {addToWishlist && addToWishlist.errorBlock}\n            <div className='buttons'>\n                {addToCart && addToCart.button}\n                {addToOrderTemplate && addToOrderTemplate.button}\n                {addToWishlist && addToWishlist.button}\n            </div>\n        </div>\n    );\n};\n\nconst _renderConfigure = (configure: IBuyboxProductConfigureViewProps): JSX.Element => {\n    const { ContainerProps, dropdowns } = configure;\n\n    return (\n        <Node {...ContainerProps}>\n            {dropdowns.map(_renderConfigureDropdown)}\n        </Node>\n    );\n};\n\nconst _renderConfigureDropdown = (dropdown: IBuyboxProductConfigureDropdownViewProps): JSX.Element => {\n    const { ContainerProps, LabelContainerProps, heading, errors, select } = dropdown;\n\n    return (\n        <Node {...ContainerProps}>\n            <Node {...LabelContainerProps}>\n                {heading}\n                {errors}\n            </Node>\n            {select}\n        </Node>\n    );\n};\n\nconst _renderFindInStore = (findInStore: IBuyboxFindInStoreViewProps): JSX.Element => {\n    const { ContainerProps, storeSelector, heading, description, errors, button, modal } = findInStore;\n\n    return (\n        <Node {...ContainerProps}>\n            {storeSelector}\n            {heading}\n            {description}\n            {errors}\n            {button}\n            {modal}\n        </Node>\n    );\n};\n\nconst _renderQuantity = (quantityComponent: IBuyboxProductQuantityViewProps, callbacks: IBuyboxCallbacks, props: IBuyboxProps<IBuyboxData>, state: IBuyboxState, extentionResources: IBuyboxExtentionResources,\n                         telemetryContent?: ITelemetryContent): JSX.Element => {\n    const { ContainerProps, LabelContainerProps, heading, errors } = quantityComponent;\n\n    const {\n        resources,\n        context: {\n            app: {\n                config: {\n                    maxQuantityForCartLineItem\n                }\n            }\n        }\n    } = props;\n\n    const\n    {\n        quantity,\n    } = state;\n\n    const onChange = (newValue: number) => {\n        if (callbacks.updateQuantity) {\n            callbacks.updateQuantity(newValue);\n        }\n    };\n\n    return (\n        <Node {...ContainerProps}>\n            <Node {...LabelContainerProps}>\n                {heading}\n                {errors}\n            </Node>\n\n            <Quantity\n                id='ms-buybox__product-quantity-input'\n                max={maxQuantityForCartLineItem || 10}\n                currentCount={quantity}\n                onChange={onChange}\n                inputQuantityAriaLabel={resources.inputQuantityAriaLabel}\n                decrementButtonAriaLabel={extentionResources.decrementButtonAriaLabel}\n                incrementButtonAriaLabel={extentionResources.incrementButtonAriaLabel}\n                telemetryContent={telemetryContent}\n            />\n        </Node>\n    );\n};\n\nconst _renderShopSimilarLook = (shopSimilarItem: IBuyboxShopSimilarLookViewProps): JSX.Element => {\n    const { ContainerProps, errors, input } = shopSimilarItem;\n\n    return (\n        <Node {...ContainerProps}>\n            {errors}\n            {input}\n        </Node>\n    );\n};\n\nexport default BuyboxView;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}