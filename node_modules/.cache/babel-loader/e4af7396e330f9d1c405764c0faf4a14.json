{"ast":null,"code":"import _typeof from\"@babel/runtime/helpers/esm/typeof\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";/*!\r\n * Copyright (c) Microsoft Corporation.\r\n * All rights reserved. See LICENSE in the project root for license information.\r\n */ // tslint:disable:no-any\nimport{EventEmitter}from'events';/**\r\n * Custom isomorphic event emitter implementation\r\n *\r\n * @export\r\n * @class CustomEventEmitter\r\n */var CustomEventEmitter=/*#__PURE__*/function(){function CustomEventEmitter(){_classCallCheck(this,CustomEventEmitter);this.listeners=new Map();this.eventEmitter=(typeof window===\"undefined\"?\"undefined\":_typeof(window))!==undefined?null:new EventEmitter();}_createClass(CustomEventEmitter,[{key:\"on\",value:function on(event,callback){if(!!this.eventEmitter){this.eventEmitter.on(event,callback);}else{var listeners=this.listeners.get(event);if(!!!listeners){listeners=[];this.listeners.set(event,listeners);}listeners.push(callback);}}},{key:\"emit\",value:function emit(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}if(!!this.eventEmitter){return this.eventEmitter.emit(event,args);}var listeners=this.listeners.get(event);if(listeners&&listeners.length){listeners.forEach(function(listener){listener.apply(void 0,args);});return true;}return false;}},{key:\"removeAllListeners\",value:function removeAllListeners(event){if(!!this.eventEmitter){this.eventEmitter.removeAllListeners(event);}else{this.listeners[\"delete\"](event);}}}]);return CustomEventEmitter;}();export default new CustomEventEmitter();","map":{"version":3,"sources":["../../src/event-emitter.ts"],"names":[],"mappings":"+LAAA;;;AAGG,G,CAEH;AACA,OAAS,YAAT,KAA6B,QAA7B,CAiBA;;;;;AAKG,G,GACG,CAAA,kB,yBAAN,6BAAA,0CACY,KAAA,SAAA,CAA6C,GAAI,CAAA,GAAJ,EAA7C,CACA,KAAA,YAAA,CAAoC,OAAO,CAAA,MAAP,mCAAO,MAAP,KAAkB,SAAlB,CAA8B,IAA9B,CAAqC,GAAI,CAAA,YAAJ,EAAzE,CAwCX,C,6DAtC8C,K,CAAe,Q,CAA6B,CACnF,GAAI,CAAC,CAAC,KAAK,YAAX,CAAyB,CACrB,KAAK,YAAL,CAAkB,EAAlB,CAAqB,KAArB,CAA6C,QAA7C,EACH,CAFD,IAEO,CACH,GAAI,CAAA,SAAS,CAAG,KAAK,SAAL,CAAe,GAAf,CAAmB,KAAnB,CAAhB,CACA,GAAI,CAAC,CAAC,CAAC,SAAP,CAAkB,CACd,SAAS,CAAG,EAAZ,CACA,KAAK,SAAL,CAAe,GAAf,CAAmB,KAAnB,CAA0B,SAA1B,EACH,CAED,SAAS,CAAC,IAAV,CAAiC,QAAjC,EACH,CACJ,C,kCAEqC,K,CAAyB,+BAAP,IAAO,qDAAP,IAAO,0BAC3D,GAAI,CAAC,CAAC,KAAK,YAAX,CAAyB,CACrB,MAAO,MAAK,YAAL,CAAkB,IAAlB,CAAuB,KAAvB,CAA8B,IAA9B,CAAP,CACH,CAED,GAAM,CAAA,SAAS,CAAG,KAAK,SAAL,CAAe,GAAf,CAAmB,KAAnB,CAAlB,CAEA,GAAI,SAAS,EAAI,SAAS,CAAC,MAA3B,CAAmC,CAC/B,SAAS,CAAC,OAAV,CAAkB,SAAA,QAAQ,CAAG,CACzB,QAAQ,MAAR,QAAY,IAAZ,EACH,CAFD,EAGA,MAAO,KAAP,CACH,CAED,MAAO,MAAP,CACH,C,8DAEyB,K,CAAa,CACnC,GAAI,CAAC,CAAC,KAAK,YAAX,CAAyB,CACrB,KAAK,YAAL,CAAkB,kBAAlB,CAAqC,KAArC,EACH,CAFD,IAEO,CACH,KAAK,SAAL,WAAsB,KAAtB,EACH,CACJ,C,kCAGL,cAAe,IAAI,CAAA,kBAAJ,EAAf","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\n// tslint:disable:no-any\nimport { EventEmitter } from 'events';\n\n/** EventEmitter is available in node, but not on the browser,\n * this class attempts to polyfill that so the action context can remain Isomorphic\n */\n/*@internal*/\n\n/**\n * Type for event emitter listener callback\n */\nexport type ListenerCallback<T extends unknown[] = unknown[]> = (...args0: T) => void;\n\n/**\n * Generic cast type\n */\nexport type GenericCallback = (...args: any) => void;\n\n/**\n * Custom isomorphic event emitter implementation\n *\n * @export\n * @class CustomEventEmitter\n */\nclass CustomEventEmitter {\n    private listeners: Map<string, ListenerCallback[]> = new Map<string, ListenerCallback[]>();\n    private eventEmitter: EventEmitter | null = typeof window !== undefined ? null : new EventEmitter();\n\n    public on<T extends unknown[] = unknown[]>(event: string, callback: ListenerCallback<T>): void {\n        if (!!this.eventEmitter) {\n            this.eventEmitter.on(event, <GenericCallback>callback);\n        } else {\n            let listeners = this.listeners.get(event);\n            if (!!!listeners) {\n                listeners = [];\n                this.listeners.set(event, listeners);\n            }\n\n            listeners.push(<ListenerCallback>callback);\n        }\n    }\n\n    public emit<T extends unknown[] = []>(event: string, ...args: T): boolean {\n        if (!!this.eventEmitter) {\n            return this.eventEmitter.emit(event, args);\n        }\n\n        const listeners = this.listeners.get(event);\n\n        if (listeners && listeners.length) {\n            listeners.forEach(listener => {\n                listener(...args);\n            });\n            return true;\n        }\n\n        return false;\n    }\n\n    public removeAllListeners(event: string): void {\n        if (!!this.eventEmitter) {\n            this.eventEmitter.removeAllListeners(event);\n        } else {\n            this.listeners.delete(event);\n        }\n    }\n}\n\nexport default new CustomEventEmitter();\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}