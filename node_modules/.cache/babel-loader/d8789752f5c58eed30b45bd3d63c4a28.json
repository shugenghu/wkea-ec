{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{buildCacheKeyWithUrlTokens,getFullOrderTemplate,GetFullOrderTemplateInput,QueryResultSettingsProxy}from'@msdyn365-commerce-modules/retail-actions';import{createObservableDataAction}from'@msdyn365-commerce/core';export class ActiveOrderTemplateLinesInput{constructor(requestContext,config){var _requestContext$query;this.getCacheKey=()=>buildCacheKeyWithUrlTokens('ActiveOrderTemplateLines',this.requestContext);this.getCacheObjectType=()=>'ActiveOrderTemplateLines';this.dataCacheType=()=>'instance';this.shouldCacheOutput=()=>false;if(!((_requestContext$query=requestContext.query)!==null&&_requestContext$query!==void 0&&_requestContext$query.id)){throw new Error('Failed to get order template id from the query.');}if(!config){throw new Error('Failed to get order template module configuration');}this.orderTemplateId=requestContext.query.id;this.queryResultSettings=QueryResultSettingsProxy.fromModuleData(requestContext,config).QueryResultSettings;this.queryResultSettings.count=true;this.requestContext=requestContext;}}export async function getActiveOrderTemplateLines(input,context){return getFullOrderTemplate(new GetFullOrderTemplateInput(input.orderTemplateId,input.queryResultSettings),context);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/order-template/order-template/get-order-template-lines',action:getActiveOrderTemplateLines,input:context=>{if(!context.config){throw new Error('Failed to get order template module configuration');}return new ActiveOrderTemplateLinesInput(context.requestContext,context.config);}});","map":{"version":3,"sources":["modules/order-template/actions/get-order-template.ts"],"names":[],"mappings":"sCAAA,OACI,0BADJ,CAEI,oBAFJ,CAGI,yBAHJ,CAMI,wBANJ,KAOO,2CAPP,CAQA,OAEI,0BAFJ,KAQO,yBARP,CAcA,MAAM,MAAO,CAAA,6BAA6B,CAKtC,WAAA,CAAY,cAAZ,CAA6C,MAA7C,CAAqF,2BAc9E,KAAA,WAAA,CAAc,IAAe,0BAA0B,CAAC,0BAAD,CAA6B,KAAK,cAAlC,CAAvD,CACA,KAAA,kBAAA,CAAqB,IAAc,0BAAnC,CACA,KAAA,aAAA,CAAgB,IAAiB,UAAjC,CACA,KAAA,iBAAA,CAAoB,IAAM,KAA1B,CAhBH,GAAI,yBAAC,cAAc,CAAC,KAAhB,0CAAC,sBAAsB,EAAvB,CAAJ,CAA+B,CAC3B,KAAM,IAAI,CAAA,KAAJ,CAAU,iDAAV,CAAN,CACH,CACD,GAAI,CAAC,MAAL,CAAa,CACT,KAAM,IAAI,CAAA,KAAJ,CAAU,mDAAV,CAAN,CACH,CACD,KAAK,eAAL,CAAuB,cAAc,CAAC,KAAf,CAAqB,EAA5C,CACA,KAAK,mBAAL,CAA2B,wBAAwB,CAAC,cAAzB,CAAwC,cAAxC,CAAwD,MAAxD,EAAgE,mBAA3F,CAEA,KAAK,mBAAL,CAAyB,KAAzB,CAAiC,IAAjC,CACA,KAAK,cAAL,CAAsB,cAAtB,CACH,CAjBqC,CA4B1C,MAAO,eAAe,CAAA,2BAAf,CAA2C,KAA3C,CAAiF,OAAjF,CAAwG,CAC3G,MAAO,CAAA,oBAAoB,CAAC,GAAI,CAAA,yBAAJ,CAA8B,KAAK,CAAC,eAApC,CAAqD,KAAK,CAAC,mBAA3D,CAAD,CAAkF,OAAlF,CAA3B,CACH,CAED,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,mFADkC,CAEtC,MAAM,CAA0B,2BAFM,CAGtC,KAAK,CAAG,OAAD,EAAkC,CACrC,GAAI,CAAC,OAAO,CAAC,MAAb,CAAqB,CACjB,KAAM,IAAI,CAAA,KAAJ,CAAU,mDAAV,CAAN,CACH,CACD,MAAO,IAAI,CAAA,6BAAJ,CAAkC,OAAO,CAAC,cAA1C,CAA0D,OAAO,CAAC,MAAlE,CAAP,CACH,CARqC,CAAD,CAAzC","sourcesContent":["import {\n    buildCacheKeyWithUrlTokens,\n    getFullOrderTemplate,\n    GetFullOrderTemplateInput,\n    IQueryResultSettingsModuleConfig,\n    OrderTemplate,\n    QueryResultSettingsProxy\n} from '@msdyn365-commerce-modules/retail-actions';\nimport {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext,\n    IRequestContext\n} from '@msdyn365-commerce/core';\nimport { IQueryResultSettings } from '@msdyn365-commerce/retail-proxy';\n\n/**\n * Input class for getActiveOrderTemplateLines data action\n */\nexport class ActiveOrderTemplateLinesInput implements IActionInput {\n    public requestContext: IRequestContext;\n    public orderTemplateId: string;\n    public queryResultSettings: IQueryResultSettings;\n\n    constructor(requestContext: IRequestContext, config: IQueryResultSettingsModuleConfig) {\n        if (!requestContext.query?.id) {\n            throw new Error('Failed to get order template id from the query.');\n        }\n        if (!config) {\n            throw new Error('Failed to get order template module configuration');\n        }\n        this.orderTemplateId = requestContext.query.id;\n        this.queryResultSettings = QueryResultSettingsProxy.fromModuleData(requestContext, config).QueryResultSettings;\n\n        this.queryResultSettings.count = true;\n        this.requestContext = requestContext;\n    }\n\n    public getCacheKey = (): string =>  buildCacheKeyWithUrlTokens('ActiveOrderTemplateLines', this.requestContext);\n    public getCacheObjectType = (): string => 'ActiveOrderTemplateLines';\n    public dataCacheType = (): CacheType => 'instance';\n    public shouldCacheOutput = () => false;\n}\n\n/**\n * Calls the Retail API and returns a ProductList object based on the passed GetCartInput\n */\nexport async function getActiveOrderTemplateLines(input: ActiveOrderTemplateLinesInput, context: IActionContext): Promise<OrderTemplate> {\n    return getFullOrderTemplate(new GetFullOrderTemplateInput(input.orderTemplateId, input.queryResultSettings), context);\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/order-template/order-template/get-order-template-lines',\n    action: <IAction<OrderTemplate>>getActiveOrderTemplateLines,\n    input: (context: ICreateActionContext) => {\n        if (!context.config) {\n            throw new Error('Failed to get order template module configuration');\n        }\n        return new ActiveOrderTemplateLinesInput(context.requestContext, context.config);\n    }\n});\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}