{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{getTelemetryObject}from'@msdyn365-commerce-modules/utilities';import classnames from'classnames';import*as React from'react';class CarouselModule extends React.PureComponent{constructor(props,state){super(props);this._handleDismissCarousel=()=>{if(this.props.context&&this.props.context.request&&this.props.context.request.cookies){this.props.context.request.cookies.set(\"CarouselDismiss_\".concat(this.props.id),'true');this.setState({dismissCarousel:true});}};this._next=()=>{const{slots}=this.props;const nextIndex=this.state.activeIndex===(slots&&slots.content&&slots.content.length-1)?0:this.state.activeIndex+1;if(this.animating){this.setState({closeNow:true,activeIndex:nextIndex});}else{this.setState({activeIndex:nextIndex});}};this._previous=()=>{const slots=this.props.slots&&this.props.slots.content;const nextIndex=this.state.activeIndex===0?slots?slots.length-1:0:this.state.activeIndex-1;if(this.animating){this.setState({closeNow:true,activeIndex:nextIndex});}else{this.setState({activeIndex:nextIndex});}};this._onExiting=()=>{this.animating=true;};this._onExited=()=>{this.animating=false;this.setState({closeNow:false});};this._goToIndex=newIndex=>{if(this.animating){return;}this.setState({activeIndex:newIndex});};this.state={activeIndex:0,closeNow:false,dismissCarousel:false};this.animating=false;this.telemetryContent=getTelemetryObject(this.props.context.request.telemetryPageName,this.props.friendlyName,this.props.telemetry);}componentDidMount(){if(this.props.context&&this.props.context.request&&this.props.context.request.cookies){if(this.props.context.request.cookies.get(\"CarouselDismiss_\".concat(this.props.id))===undefined){this.props.context.request.cookies.set(\"CarouselDismiss_\".concat(this.props.id),'false');this.setState({dismissCarousel:false});}}}render(){if(this.state.dismissCarousel){return null;}const{className}=this.props.config;const viewProps=_objectSpread(_objectSpread(_objectSpread({},this.props),this.state),{},{telemetryContent:this.telemetryContent,carouselContainer:{moduleProps:this.props,className:classnames('ms-carousel',className)},closeAnimation:this.state.closeNow?'close-now':'',next:this._next,previous:this._previous,onIndicatorsClickHandler:this._goToIndex,handleDismissCarousel:this._handleDismissCarousel,handleOnExited:this._onExited,handleOnExiting:this._onExiting});return this.props.renderView(viewProps);}}export default CarouselModule;","map":{"version":3,"sources":["modules/carousel/carousel.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getTelemetryObject, IModuleProps, ITelemetryContent } from '@msdyn365-commerce-modules/utilities';\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport { ICarouselData } from './carousel.data';\nimport { ICarouselProps  } from './carousel.props.autogenerated';\nimport { ICarouselState } from './carousel.state';\n\nexport interface ICarouselViewProps extends ICarouselProps<{}>, ICarouselState {\n    closeAnimation: string;\n    carouselContainer: IModuleProps;\n    telemetryContent: ITelemetryContent;\n    next(): void;\n    previous(): void;\n    onIndicatorsClickHandler():void;\n    handleDismissCarousel(): void;\n    handleOnExited(): void;\n    handleOnExiting(): void;\n}\n\n/**\n *\n * CarouselModule component\n * @extends {React.PureComponent<ICarouselProps<ICarouselData>>}\n */\nclass CarouselModule extends React.PureComponent<ICarouselProps<ICarouselData>, ICarouselState> {\n    private animating: boolean;\n    private telemetryContent: ITelemetryContent;\n\n    constructor(props: ICarouselProps<ICarouselData>, state: ICarouselState) {\n        super(props);\n        this.state = { activeIndex: 0, closeNow: false, dismissCarousel: false };\n        this.animating = false;\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!,\n                                                   this.props.friendlyName,\n                                                   this.props.telemetry);\n    }\n\n    public componentDidMount(): void {\n        if(this.props.context && this.props.context.request && this.props.context.request.cookies) {\n            if (this.props.context.request.cookies.get(`CarouselDismiss_${this.props.id}`) === undefined) {\n                this.props.context.request.cookies.set(`CarouselDismiss_${this.props.id}`, 'false');\n                this.setState({ dismissCarousel: false });\n            }\n        }\n    }\n\n    public render(): JSX.Element | null {\n        if (this.state.dismissCarousel) {\n            return null;\n        }\n\n        const { className } = this.props.config;\n\n        const viewProps = {\n            // Context for telemetry and raw data for C1 to do customization\n            // Including computed data, state data and methods\n            ...this.props,\n            ...this.state,\n            telemetryContent: this.telemetryContent,\n            carouselContainer: {\n                moduleProps: this.props,\n                className:  classnames('ms-carousel', className)\n            },\n            closeAnimation: this.state.closeNow ? 'close-now' : '',\n            next: this._next,\n            previous: this._previous,\n            onIndicatorsClickHandler: this._goToIndex,\n            handleDismissCarousel: this._handleDismissCarousel,\n            handleOnExited: this._onExited,\n            handleOnExiting: this._onExiting};\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    /**\n     * function implementation to dismiss the Carousel\n     */\n    private _handleDismissCarousel = (): void => {\n        if(this.props.context && this.props.context.request && this.props.context.request.cookies) {\n            this.props.context.request.cookies.set(`CarouselDismiss_${this.props.id}`, 'true');\n            this.setState({ dismissCarousel: true });\n        }\n    }\n\n    /**\n     * function implementation to move to next slide\n     */\n    private _next = (): void => {\n        const { slots } = this.props;\n        const nextIndex = this.state.activeIndex === (slots && slots.content && slots.content.length - 1) ? 0 : this.state.activeIndex + 1;\n\n        if (this.animating) {\n            this.setState({ closeNow: true,  activeIndex: nextIndex });\n        } else {\n            this.setState({ activeIndex: nextIndex });\n        }\n    }\n\n    /**\n     * function implementation to move to previous slide\n     */\n    private _previous = (): void => {\n        const slots = this.props.slots && this.props.slots.content;\n        const nextIndex = this.state.activeIndex === 0 ? (slots ? slots.length - 1 : 0) : this.state.activeIndex - 1;\n\n        if (this.animating) {\n            this.setState({ closeNow: true,  activeIndex: nextIndex });\n        } else {\n            this.setState({ activeIndex: nextIndex });\n        }\n    }\n\n    private _onExiting = (): void => {\n        this.animating = true;\n    }\n\n    private _onExited = (): void => {\n        this.animating = false;\n        this.setState({ closeNow: false });\n    }\n\n    /**\n     * function implementation to move to a given slide\n     */\n    private _goToIndex = (newIndex: number): void => {\n        if (this.animating) { return; }\n        this.setState({ activeIndex: newIndex });\n    }\n}\n\nexport default CarouselModule;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}