{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{createObservableDataAction,sendRequest}from'@msdyn365-commerce/core';async function reportReviewConcern(input,ctx){if(!inputIsValid(input)){throw new Error(\"[SubmitHelpfulnessVote] Invalid input. ReviewId=\".concat(input.reviewId,\",tenantId=\").concat(input.tenantId,\",locale= \").concat(input.locale,\",\"));}const requestUrl=\"\".concat(input.serviceEndpoint,\"/v2.0/concerns/review/\").concat(input.reviewId)+\"?tenantId=\".concat(input.tenantId)+\"&locale=\".concat(input.locale);const requestBody={concernCategory:input.concernCategory};const requestHeader={headers:{Authorization:\"id_token \".concat(input.authToken)}};return sendRequest(requestUrl,'post',requestBody,requestHeader).then(response=>{return response.status===200||response.status===201;}).catch(error=>{ctx.trace(\"[ReportReviewConcernInput] Failed to report a concern\");ctx.telemetry.exception(error);ctx.telemetry.debug(\"[ReportReviewConcernInput] Failed to report a concern\");return false;});}function inputIsValid(input){return input&&input.reviewId.length>0&&input.tenantId.length>0&&input.locale.length>0&&input.authToken.length>0;}export default createObservableDataAction({id:'@msdyn365-commerce-modules/ratings-reviews/report-review-concern',action:reportReviewConcern});","map":{"version":3,"sources":["actions/report-review-concern.ts"],"names":[],"mappings":"sCAAA,OAAS,0BAAT,CAA8D,WAA9D,KAAiF,yBAAjF,CAGA,cAAe,CAAA,mBAAf,CAAmC,KAAnC,CAAoE,GAApE,CAAuF,CACnF,GAAI,CAAC,YAAY,CAAC,KAAD,CAAjB,CAA0B,CACtB,KAAM,IAAI,CAAA,KAAJ,2DACiD,KAAK,CAAC,QADvD,sBAC4E,KAAK,CAAC,QADlF,qBAEE,KAAK,CAAC,MAFR,MAAN,CAKH,CAED,KAAM,CAAA,UAAU,CACZ,UAAG,KAAK,CAAC,eAAT,kCAAiD,KAAK,CAAC,QAAvD,sBACa,KAAK,CAAC,QADnB,oBAEW,KAAK,CAAC,MAFjB,CADJ,CAKA,KAAM,CAAA,WAAW,CAAG,CAChB,eAAe,CAAE,KAAK,CAAC,eADP,CAApB,CAIA,KAAM,CAAA,aAAa,CAAG,CAClB,OAAO,CAAE,CACL,aAAa,oBAAc,KAAK,CAAC,SAApB,CADR,CADS,CAAtB,CAMA,MAAO,CAAA,WAAW,CAAU,UAAV,CAAsB,MAAtB,CAA8B,WAA9B,CAA2C,aAA3C,CAAX,CACF,IADE,CACG,QAAQ,EAAG,CACb,MAAO,CAAA,QAAQ,CAAC,MAAT,GAAoB,GAApB,EAA2B,QAAQ,CAAC,MAAT,GAAoB,GAAtD,CACH,CAHE,EAIF,KAJE,CAIK,KAAD,EAAU,CACb,GAAG,CAAC,KAAJ,0DACA,GAAG,CAAC,SAAJ,CAAc,SAAd,CAAwB,KAAxB,EACA,GAAG,CAAC,SAAJ,CAAc,KAAd,0DACA,MAAO,MAAP,CACH,CATE,CAAP,CAUH,CAED,QAAS,CAAA,YAAT,CAAsB,KAAtB,CAAqD,CACjD,MACI,CAAA,KAAK,EACL,KAAK,CAAC,QAAN,CAAe,MAAf,CAAwB,CADxB,EAEA,KAAK,CAAC,QAAN,CAAe,MAAf,CAAwB,CAFxB,EAGA,KAAK,CAAC,MAAN,CAAa,MAAb,CAAsB,CAHtB,EAIA,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAyB,CAL7B,CAOH,CAED,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,kEADkC,CAEtC,MAAM,CAAoB,mBAFY,CAAD,CAAzC","sourcesContent":["import { createObservableDataAction, IAction, IActionContext, sendRequest } from '@msdyn365-commerce/core';\nimport { ReportReviewConcernInput } from './inputs/report-review-concern-input';\n\nasync function reportReviewConcern(input: ReportReviewConcernInput, ctx: IActionContext): Promise<boolean> {\n    if (!inputIsValid(input)) {\n        throw new Error(\n            `[SubmitHelpfulnessVote] Invalid input. ReviewId=${input.reviewId},tenantId=${input.tenantId},locale= ${\n                input.locale\n            },`\n        );\n    }\n\n    const requestUrl =\n        `${input.serviceEndpoint}/v2.0/concerns/review/${input.reviewId}` +\n        `?tenantId=${input.tenantId}` +\n        `&locale=${input.locale}`;\n\n    const requestBody = {\n        concernCategory: input.concernCategory\n    };\n\n    const requestHeader = {\n        headers: {\n            Authorization: `id_token ${input.authToken}`\n        }\n    };\n\n    return sendRequest<boolean>(requestUrl, 'post', requestBody, requestHeader)\n        .then(response => {\n            return response.status === 200 || response.status === 201;\n        })\n        .catch((error) => {\n            ctx.trace(`[ReportReviewConcernInput] Failed to report a concern`);\n            ctx.telemetry.exception(error);\n            ctx.telemetry.debug(`[ReportReviewConcernInput] Failed to report a concern`);\n            return false;\n        });\n}\n\nfunction inputIsValid(input: ReportReviewConcernInput): boolean {\n    return (\n        input &&\n        input.reviewId.length > 0 &&\n        input.tenantId.length > 0 &&\n        input.locale.length > 0 &&\n        input.authToken.length > 0\n    );\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/ratings-reviews/report-review-concern',\n    action: <IAction<boolean>>reportReviewConcern\n});\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}