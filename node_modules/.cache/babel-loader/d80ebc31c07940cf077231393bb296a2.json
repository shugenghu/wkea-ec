{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var tslib_1=require(\"tslib\");var classnames_1=tslib_1.__importDefault(require(\"classnames\"));var React=tslib_1.__importStar(require(\"react\"));var Transition_1=tslib_1.__importDefault(require(\"react-transition-group/Transition\"));var utilities_1=require(\"../common/utilities\");var Collapse=function(_super){tslib_1.__extends(Collapse,_super);function Collapse(props){var _this=_super.call(this,props)||this;_this._transitionStatusToClassHash={entering:'collapsing',entered:'collapse show',exiting:'collapsing',exited:'collapse'};_this._tagRef=React.createRef();_this.props=props;_this.state={height:0};_this._onEntering=_this._onEntering.bind(_this);_this._onExit=_this._onExit.bind(_this);_this._onExited=_this._onExited.bind(_this);_this._onExiting=_this._onExiting.bind(_this);_this._reevaluateHeight=_this._reevaluateHeight.bind(_this);return _this;}Collapse.prototype.componentDidMount=function(){window&&window.addEventListener('resize',this._reevaluateHeight);this._reevaluateHeight();};Collapse.prototype.componentWillUnmount=function(){window&&window.removeEventListener('resize',this._reevaluateHeight);};Collapse.prototype.render=function(){var _this=this;var _a=this.props,tag=_a.tag,isOpen=_a.isOpen,className=_a.className,children=_a.children,navbar=_a.navbar,cssModule=_a.cssModule,collapseIn=_a.in,mountOnEnter=_a.mountOnEnter,unmountOnExit=_a.unmountOnExit,appear=_a.appear,enter=_a.enter,exit=_a.exit,timeout=_a.timeout,onEnter=_a.onEnter,onEntering=_a.onEntering,onEntered=_a.onEntered,onExit=_a.onExit,onExiting=_a.onExiting,onExited=_a.onExited,otherProps=tslib_1.__rest(_a,[\"tag\",\"isOpen\",\"className\",\"children\",\"navbar\",\"cssModule\",\"in\",\"mountOnEnter\",\"unmountOnExit\",\"appear\",\"enter\",\"exit\",\"timeout\",\"onEnter\",\"onEntering\",\"onEntered\",\"onExit\",\"onExiting\",\"onExited\"]);var Tag=tag||'div';var transitionProps={in:collapseIn,mountOnEnter:mountOnEnter,unmountOnExit:unmountOnExit,appear:appear,enter:enter,exit:exit,onEnter:onEnter,onEntering:onEntering,onEntered:onEntered,onExit:onExit,onExiting:onExiting,onExited:onExited};var height=this.state.height;var style=height===null||height===0?null:{height:height};return React.createElement(Transition_1.default,tslib_1.__assign({},transitionProps,{in:isOpen,timeout:timeout||utilities_1.TransitionTimeouts.Collapse,onEntering:this._onEntering,onExit:this._onExit,onExiting:this._onExiting,onExited:this._onExited}),function(status){var collapseClass=_this._getTransitionClass(status);var classes=utilities_1.mapToCssModules(classnames_1.default(className,collapseClass,navbar&&'navbar-collapse'),cssModule);return React.createElement(Tag,tslib_1.__assign({},otherProps,{className:classes,ref:_this._tagRef,style:tslib_1.__assign({},style)}),children);});};Collapse.prototype._reevaluateHeight=function(){var node=this._tagRef.current;if(node!==null&&node.firstElementChild&&node.firstElementChild.scrollHeight>0){this.setState({height:node.firstElementChild.scrollHeight});}};Collapse.prototype._getTransitionClass=function(status){return this._transitionStatusToClassHash[status]||'collapse';};Collapse.prototype._onEntering=function(node,isAppearing){this.setState({height:node.scrollHeight});if(this.props.onEntering){this.props.onEntering(node,isAppearing);}};Collapse.prototype._onExit=function(node){this.setState({height:node.scrollHeight});if(this.props.onExit){this.props.onExit(node);}};Collapse.prototype._onExiting=function(node){this.setState({height:0});if(this.props.onExiting){this.props.onExiting(node);}};Collapse.prototype._onExited=function(node){this.setState({height:null});if(this.props.onExited){this.props.onExited(node);}};Collapse.defaultProps={isOpen:false,tag:'div',timeout:utilities_1.TransitionTimeouts.Collapse};return Collapse;}(React.Component);exports.default=Collapse;","map":{"version":3,"sources":["/Users/User/Documents/wkea-ec/Msdyn365.Commerce.Online/node_modules/@msdyn365-commerce-modules/utilities/src/collapse/Collapse.tsx"],"names":[],"mappings":"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","sourcesContent":["import classNames from 'classnames';\nimport * as React from 'react';\nimport Transition from 'react-transition-group/Transition';\nimport { mapToCssModules, TransitionStatuses, TransitionTimeouts } from '../common/utilities';\nimport { ICollapseProps } from './Collapse.props';\n\nexport interface ICollapseState {\n    height: number | null;\n}\n\ntype IHash = {\n    [key in TransitionStatuses]: string;\n};\n\n/**\n * This is the controlled version of a Collapse component, and as such the toggle behavior is expected to be handled in a parent component.\n * @see See [Uncontrolled Components - React](https://reactjs.org/docs/uncontrolled-components.html) to learn more.\n * @visibleName Collapse (controlled)\n */\nexport default class Collapse extends React.Component<ICollapseProps, ICollapseState> {\n    public static defaultProps: Partial<ICollapseProps> = {\n        isOpen: false,\n        tag: 'div',\n        timeout: TransitionTimeouts.Collapse\n    };\n\n    public props: ICollapseProps;\n    public state: ICollapseState;\n    private _transitionStatusToClassHash: IHash = {\n        entering: 'collapsing',\n        entered: 'collapse show',\n        exiting: 'collapsing',\n        exited: 'collapse'\n    };\n    private _tagRef: React.RefObject<HTMLElement> = React.createRef<HTMLElement>();\n\n    constructor(props: ICollapseProps) {\n        super(props);\n        this.props = props;\n\n        this.state = {\n            height: 0\n        };\n\n        this._onEntering = this._onEntering.bind(this);\n        this._onExit = this._onExit.bind(this);\n        this._onExited = this._onExited.bind(this);\n        this._onExiting = this._onExiting.bind(this);\n        this._reevaluateHeight = this._reevaluateHeight.bind(this);\n    }\n\n    public componentDidMount(): void {\n        window && window.addEventListener('resize', this._reevaluateHeight);\n        this._reevaluateHeight();\n    }\n\n    public componentWillUnmount(): void {\n        window && window.removeEventListener('resize', this._reevaluateHeight);\n    }\n\n    public render(): JSX.Element | null {\n        const {\n            tag,\n            isOpen,\n            className,\n            children,\n            navbar,\n            cssModule,\n\n            in: collapseIn,\n            mountOnEnter,\n            unmountOnExit,\n            appear,\n            enter,\n            exit,\n            timeout,\n            onEnter,\n            onEntering,\n            onEntered,\n            onExit,\n            onExiting,\n            onExited,\n\n            ...otherProps\n        } = this.props;\n\n        const Tag = tag || 'div';\n        const transitionProps = {\n            in: collapseIn,\n            mountOnEnter,\n            unmountOnExit,\n            appear,\n            enter,\n            exit,\n            onEnter,\n            onEntering,\n            onEntered,\n            onExit,\n            onExiting,\n            onExited\n        };\n\n        const { height } = this.state;\n        const style = height === null || height === 0 ? null : { height };\n\n        return (\n            <Transition\n                {...transitionProps}\n                in={isOpen}\n                timeout={timeout || TransitionTimeouts.Collapse}\n                onEntering={this._onEntering}\n                onExit={this._onExit}\n                onExiting={this._onExiting}\n                onExited={this._onExited}\n            >\n                {(status: TransitionStatuses) => {\n                    const collapseClass = this._getTransitionClass(status);\n                    const classes = mapToCssModules(classNames(className, collapseClass, navbar && 'navbar-collapse'), cssModule);\n\n                    return (\n                        <Tag {...otherProps} className={classes} ref={this._tagRef} style={{ ...style }}>\n                            {children}\n                        </Tag>\n                    );\n                }}\n            </Transition>\n        );\n    }\n\n    private _reevaluateHeight(): void {\n        const node = this._tagRef.current;\n        if(node !== null && node.firstElementChild && node.firstElementChild.scrollHeight > 0) {\n            this.setState({ height: node.firstElementChild.scrollHeight });\n        }\n    }\n\n    private _getTransitionClass(status: TransitionStatuses): string {\n        return this._transitionStatusToClassHash[status] || 'collapse';\n    }\n\n    private _onEntering(node: HTMLElement, isAppearing: boolean): void {\n        this.setState({ height: node.scrollHeight });\n\n        if (this.props.onEntering) {\n            this.props.onEntering(node, isAppearing);\n        }\n    }\n\n    private _onExit(node: HTMLElement): void {\n        this.setState({ height: node.scrollHeight });\n\n        if (this.props.onExit) {\n            this.props.onExit(node);\n        }\n    }\n\n    private _onExiting(node: HTMLElement): void {\n        this.setState({ height: 0 });\n\n        if (this.props.onExiting) {\n            this.props.onExiting(node);\n        }\n    }\n\n    private _onExited(node: HTMLElement): void {\n        this.setState({ height: null });\n\n        if (this.props.onExited) {\n            this.props.onExited(node);\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"script"}