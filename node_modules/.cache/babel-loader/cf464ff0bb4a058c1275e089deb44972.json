{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import{buildCacheKey}from'@msdyn365-commerce-modules/retail-actions';import{createObservableDataAction}from'@msdyn365-commerce/core';import{getOrgUnitLocationsByAreaAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/OrgUnitsDataActions.g';var searchArea={Radius:Math.max(),DistanceUnitValue:0};var getOrgUnitLocations=function getOrgUnitLocations(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",getOrgUnitLocationsByAreaAsync({callerContext:ctx,queryResultSettings:{}},searchArea));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var GetOrgUnitLocationsInput=function GetOrgUnitLocationsInput(apiSettings){var _this=this;_classCallCheck(this,GetOrgUnitLocationsInput);this.getCacheKey=function(){return buildCacheKey(\"OrgUnitLocations\",_this.apiSettings);};this.getCacheObjectType=function(){return\"OrgUnitLocations\";};this.dataCacheType=function(){return'request';};this.apiSettings=apiSettings;};var createOrgUnitLocationsInput=function createOrgUnitLocationsInput(inputData){return new GetOrgUnitLocationsInput(inputData.requestContext.apiSettings);};export function getOrgUnitLocationsAction(_x2,_x3){return _getOrgUnitLocationsAction.apply(this,arguments);}function _getOrgUnitLocationsAction(){_getOrgUnitLocationsAction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(input,ctx){var orgUnitLocations;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(ctx){_context2.next=2;break;}throw new Error(\"getOrgUnitLocationsAction - Action context cannot be null/undefined\");case 2:orgUnitLocations=[];_context2.prev=3;_context2.next=6;return getOrgUnitLocations()(ctx);case 6:orgUnitLocations=_context2.sent;_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](3);throw _context2.t0;case 12:return _context2.abrupt(\"return\",{orgUnitLocations:orgUnitLocations});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[3,9]]);}));return _getOrgUnitLocationsAction.apply(this,arguments);}export default createObservableDataAction({id:'@msdyn365-commerce-modules/order-management/get-org-unit-locations',action:getOrgUnitLocationsAction,input:createOrgUnitLocationsInput});","map":{"version":3,"sources":["actions/get-org-unit-locations.ts"],"names":[],"mappings":"8MAAA,OAAS,aAAT,KAA8B,2CAA9B,CACA,OAEI,0BAFJ,KAUO,yBAVP,CAYA,OAAS,8BAAT,KAA+C,wEAA/C,CAMA,GAAM,CAAA,UAAU,CAAe,CAC3B,MAAM,CAAE,IAAI,CAAC,GAAL,EADmB,CAE3B,iBAAiB,CAAE,CAFQ,CAA/B,CAQA,GAAM,CAAA,mBAAmB,CAAG,QAAtB,CAAA,mBAAsB,kGAAM,iBAAO,GAAP,kJACvB,8BAA8B,CACjC,CACI,aAAa,CAAE,GADnB,CAEI,mBAAmB,CAAE,EAFzB,CADiC,CAKjC,UALiC,CADP,wDAAN,gEAA5B,CAaA,UAAa,CAAA,wBAAb,CAGI,kCAAY,WAAZ,CAA6C,+DAItC,KAAA,WAAA,CAAc,iBAAM,CAAA,aAAa,oBAAqB,KAAI,CAAC,WAA1B,CAAnB,EAAd,CACA,KAAA,kBAAA,CAAqB,qCAArB,CACA,KAAA,aAAA,CAAgB,iBAAiB,SAAjB,EAAhB,CALH,KAAK,WAAL,CAAmB,WAAnB,CACH,CALL,CAeA,GAAM,CAAA,2BAA2B,CAAG,QAA9B,CAAA,2BAA8B,CAAC,SAAD,CAAoD,CACpF,MAAO,IAAI,CAAA,wBAAJ,CAA6B,SAAS,CAAC,cAAV,CAAyB,WAAtD,CAAP,CACH,CAFD,CAOA,eAAsB,CAAA,yBAAtB,mE,yHAAO,kBACH,KADG,CAEH,GAFG,8IAIE,GAJF,+BAKO,IAAI,CAAA,KAAJ,uEALP,QAQC,gBARD,CAQuC,EARvC,yCAW0B,CAAA,mBAAmB,GAAG,GAAH,CAX7C,QAWC,gBAXD,+JAgBI,CAAE,gBAAgB,CAAE,gBAApB,CAhBJ,wE,4DAmBP,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,oEADkC,CAEtC,MAAM,CAA8B,yBAFE,CAGtC,KAAK,CAAE,2BAH+B,CAAD,CAAzC","sourcesContent":["import { buildCacheKey } from '@msdyn365-commerce-modules/retail-actions';\nimport {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    IAny,\n    ICommerceApiSettings,\n    ICreateActionContext,\n    IGeneric\n} from '@msdyn365-commerce/core';\nimport { OrgUnitLocation, SearchArea } from '@msdyn365-commerce/retail-proxy';\nimport { getOrgUnitLocationsByAreaAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/OrgUnitsDataActions.g';\n\ninterface IOrgUnitLocations {\n    orgUnitLocations: OrgUnitLocation[];\n}\n\nconst searchArea: SearchArea = {\n    Radius: Math.max(),\n    DistanceUnitValue: 0 // 0 is miles\n};\n\n/**\n * Calls the Retail API and returns the orgUnitLocations\n */\nconst getOrgUnitLocations = () => async (ctx: IActionContext): Promise<OrgUnitLocation[]> => {\n    return getOrgUnitLocationsByAreaAsync(\n        {\n            callerContext: ctx,\n            queryResultSettings: {}\n        },\n        searchArea\n    );\n};\n\n/**\n *  Action input\n */\nexport class GetOrgUnitLocationsInput implements IActionInput {\n    private apiSettings: ICommerceApiSettings;\n\n    constructor(apiSettings: ICommerceApiSettings) {\n        this.apiSettings = apiSettings;\n    }\n\n    public getCacheKey = () => buildCacheKey(`OrgUnitLocations`, this.apiSettings);\n    public getCacheObjectType = () => `OrgUnitLocations`;\n    public dataCacheType = (): CacheType => 'request';\n}\n\n/**\n * Creates the input required to make the retail api call\n */\nconst createOrgUnitLocationsInput = (inputData: ICreateActionContext<IGeneric<IAny>>) => {\n    return new GetOrgUnitLocationsInput(inputData.requestContext.apiSettings);\n};\n\n/**\n * Get orgUnitLocations action\n */\nexport async function getOrgUnitLocationsAction(\n    input: GetOrgUnitLocationsInput,\n    ctx: IActionContext\n): Promise<IOrgUnitLocations> {\n    if (!ctx) {\n        throw new Error(`getOrgUnitLocationsAction - Action context cannot be null/undefined`);\n    }\n\n    let orgUnitLocations: OrgUnitLocation[] = [];\n\n    try {\n        orgUnitLocations = await getOrgUnitLocations()(ctx);\n    } catch (error) {\n        throw error;\n    }\n\n    return { orgUnitLocations: orgUnitLocations };\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/order-management/get-org-unit-locations',\n    action: <IAction<IOrgUnitLocations>>getOrgUnitLocationsAction,\n    input: createOrgUnitLocationsInput\n});\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}