{"ast":null,"code":"import\"core-js/modules/es.object.assign.js\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";import{mapToCssModules,TransitionTimeouts}from'@msdyn365-commerce-modules/utilities';import classNames from'classnames';import*as React from'react';import Transition from'react-transition-group/Transition';import CarouselContext from'./CarouselContext';export default class CarouselItem extends React.Component{constructor(props){super(props);this.onEnter=(node,isAppearing)=>{this.setState({startAnimation:false});if(this.props.onEnter){this.props.onEnter(node,isAppearing);}};this.onEntering=(node,isAppearing)=>{const offsetHeight=node.offsetHeight;this.setState({startAnimation:true});if(this.props.onEntering){this.props.onEntering(node,isAppearing);}return offsetHeight;};this.onExit=node=>{this.setState({startAnimation:false});if(this.props.onExit){this.props.onExit(node);}};this.onExiting=node=>{this.setState({startAnimation:true});node.dispatchEvent(new CustomEvent('slide.bs.carousel'));if(this.props.onExiting){this.props.onExiting(node);}};this.onExited=node=>{node.dispatchEvent(new CustomEvent('slid.bs.carousel'));if(this.props.onExited){this.props.onExited(node);}};this.props=props;this.state={startAnimation:false};this.onEnter=this.onEnter.bind(this);this.onEntering=this.onEntering.bind(this);this.onExit=this.onExit.bind(this);this.onExiting=this.onExiting.bind(this);this.onExited=this.onExited.bind(this);}render(){const _this$props=this.props,{children,cssModule,slide,tag,className,in:collapseIn,mountOnEnter,unmountOnExit,appear,enter,exit,timeout,onEnter,onEntering,onEntered,onExit,onExiting,onExited}=_this$props,otherProps=_objectWithoutProperties(_this$props,[\"children\",\"cssModule\",\"slide\",\"tag\",\"className\",\"in\",\"mountOnEnter\",\"unmountOnExit\",\"appear\",\"enter\",\"exit\",\"timeout\",\"onEnter\",\"onEntering\",\"onEntered\",\"onExit\",\"onExiting\",\"onExited\"]);const timeoutOrDefault=timeout||TransitionTimeouts.Carousel;const Tag=tag||'div';const transitionProps={in:collapseIn,mountOnEnter,unmountOnExit,appear,enter,exit,timeout:timeoutOrDefault};return/*#__PURE__*/React.createElement(CarouselContext.Consumer,null,(_ref)=>{let{direction}=_ref;return/*#__PURE__*/React.createElement(Transition,Object.assign({},transitionProps,{enter:slide,exit:slide,in:collapseIn,onEnter:this.onEnter,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),status=>{const isActive=status==='entered'||status==='exiting';const directionClassName=(status==='entering'||status==='exiting')&&this.state.startAnimation&&(direction==='right'?'msc-carousel__item__left':'msc-carousel__item__right');const orderClassName=status==='entering'&&(direction==='right'?'msc-carousel__item__next':'msc-carousel__item__prev');const itemClasses=mapToCssModules(classNames(className,'msc-carousel__item',isActive&&'active',directionClassName,orderClassName),cssModule);return/*#__PURE__*/React.createElement(Tag,Object.assign({className:itemClasses},otherProps),children);});});}}CarouselItem.defaultProps={tag:'div',timeout:TransitionTimeouts.Carousel,slide:true};","map":{"version":3,"sources":["carousel/CarouselItem.tsx"],"names":[],"mappings":"qIAAA,OAAS,eAAT,CAA8C,kBAA9C,KAAwE,sCAAxE,CACA,MAAO,CAAA,UAAP,KAAuB,YAAvB,CACA,MAAO,GAAK,CAAA,KAAZ,KAAuB,OAAvB,CACA,MAAO,CAAA,UAAP,KAAuB,mCAAvB,CACA,MAAO,CAAA,eAAP,KAA4B,mBAA5B,CAUA,cAAc,MAAO,CAAA,YAAP,QAA4B,CAAA,KAAK,CAAC,SAAiD,CAU7F,WAAA,CAAY,KAAZ,CAAqC,CACjC,MAAM,KAAN,EAcG,KAAA,OAAA,CAAU,CAAC,IAAD,CAAoB,WAApB,GAA4C,CACzD,KAAK,QAAL,CAAc,CAAE,cAAc,CAAE,KAAlB,CAAd,EACA,GAAI,KAAK,KAAL,CAAW,OAAf,CAAwB,CACpB,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAyB,WAAzB,EACH,CACJ,CALM,CAOA,KAAA,UAAA,CAAa,CAAC,IAAD,CAAoB,WAApB,GAA4C,CAG5D,KAAM,CAAA,YAAY,CAAG,IAAI,CAAC,YAA1B,CACA,KAAK,QAAL,CAAc,CAAE,cAAc,CAAE,IAAlB,CAAd,EACA,GAAI,KAAK,KAAL,CAAW,UAAf,CAA2B,CACvB,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA4B,WAA5B,EACH,CAED,MAAO,CAAA,YAAP,CACH,CAVM,CAYA,KAAA,MAAA,CAAU,IAAD,EAAsB,CAClC,KAAK,QAAL,CAAc,CAAE,cAAc,CAAE,KAAlB,CAAd,EACA,GAAI,KAAK,KAAL,CAAW,MAAf,CAAuB,CACnB,KAAK,KAAL,CAAW,MAAX,CAAkB,IAAlB,EACH,CACJ,CALM,CAOA,KAAA,SAAA,CAAc,IAAD,EAAsB,CACtC,KAAK,QAAL,CAAc,CAAE,cAAc,CAAE,IAAlB,CAAd,EACA,IAAI,CAAC,aAAL,CAAmB,GAAI,CAAA,WAAJ,CAAgB,mBAAhB,CAAnB,EACA,GAAI,KAAK,KAAL,CAAW,SAAf,CAA0B,CACtB,KAAK,KAAL,CAAW,SAAX,CAAqB,IAArB,EACH,CACJ,CANM,CAQA,KAAA,QAAA,CAAY,IAAD,EAAsB,CACpC,IAAI,CAAC,aAAL,CAAmB,GAAI,CAAA,WAAJ,CAAgB,kBAAhB,CAAnB,EACA,GAAI,KAAK,KAAL,CAAW,QAAf,CAAyB,CACrB,KAAK,KAAL,CAAW,QAAX,CAAoB,IAApB,EACH,CACJ,CALM,CA/CH,KAAK,KAAL,CAAa,KAAb,CAEA,KAAK,KAAL,CAAa,CACT,cAAc,CAAE,KADP,CAAb,CAIA,KAAK,OAAL,CAAe,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAf,CACA,KAAK,UAAL,CAAkB,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAlB,CACA,KAAK,MAAL,CAAc,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAd,CACA,KAAK,SAAL,CAAiB,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAjB,CACA,KAAK,QAAL,CAAgB,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAhB,CACH,CA2CM,MAAM,EAAA,CAET,kBAYI,KAAK,KAZT,CAAM,CACF,QADE,CAEF,SAFE,CAES,KAFT,CAGF,GAHE,CAIF,SAJE,CAMF,EAAE,CAAG,UANH,CAOF,YAPE,CAOY,aAPZ,CAQF,MARE,CAQM,KARN,CAQa,IARb,CAQmB,OARnB,CASF,OATE,CASO,UATP,CASmB,SATnB,CAS8B,MAT9B,CASsC,SATtC,CASiD,QATjD,CAAN,aAWO,UAXP,mOAcA,KAAM,CAAA,gBAAgB,CAAG,OAAO,EAAI,kBAAkB,CAAC,QAAvD,CACA,KAAM,CAAA,GAAG,CAAG,GAAG,EAAI,KAAnB,CACA,KAAM,CAAA,eAAe,CAAG,CACpB,EAAE,CAAG,UADe,CAEpB,YAFoB,CAEN,aAFM,CAGpB,MAHoB,CAGZ,KAHY,CAGL,IAHK,CAIpB,OAAO,CAAE,gBAJW,CAAxB,CAOA,mBACI,KAAA,CAAA,aAAA,CAAC,eAAe,CAAC,QAAjB,CAAyB,IAAzB,CACK,YAEG,CAAE,SAAF,CAFH,yBAIG,KAAA,CAAA,aAAA,CAAC,UAAD,CAAW,MAAA,CAAA,MAAA,CAAA,EAAA,CACH,eADG,CACY,CACnB,KAAK,CAAE,KADY,CAEnB,IAAI,CAAE,KAFa,CAGnB,EAAE,CAAE,UAHe,CAInB,OAAO,CAAE,KAAK,OAJK,CAKnB,UAAU,CAAE,KAAK,UALE,CAMnB,MAAM,CAAE,KAAK,MANM,CAOnB,SAAS,CAAE,KAAK,SAPG,CAQnB,QAAQ,CAAE,KAAK,QARI,CADZ,CAAX,CAWM,MAAD,EAA+B,CAC5B,KAAM,CAAA,QAAQ,CAAI,MAAM,GAAK,SAAZ,EAA2B,MAAM,GAAK,SAAvD,CACA,KAAM,CAAA,kBAAkB,CAAG,CAAC,MAAM,GAAK,UAAX,EAAyB,MAAM,GAAK,SAArC,GACvB,KAAK,KAAL,CAAW,cADY,GAEtB,SAAS,GAAK,OAAd,CAAyB,0BAAzB,CAAwD,2BAFlC,CAA3B,CAGA,KAAM,CAAA,cAAc,CAAI,MAAM,GAAK,UAAZ,GAClB,SAAS,GAAK,OAAd,CAAyB,0BAAzB,CAAwD,0BADtC,CAAvB,CAEA,KAAM,CAAA,WAAW,CAAG,eAAe,CAC/B,UAAU,CACN,SADM,CAEN,oBAFM,CAGN,QAAQ,EAAI,QAHN,CAIN,kBAJM,CAKN,cALM,CADqB,CAQ/B,SAR+B,CAAnC,CAWA,mBACI,KAAA,CAAA,aAAA,CAAC,GAAD,CAAI,MAAA,CAAA,MAAA,CAAA,CAAC,SAAS,CAAE,WAAZ,CAAA,CAA6B,UAA7B,CAAJ,CACK,QADL,CADJ,CAKH,CAlCL,CAJH,EADL,CADJ,CA6CH,CAxI4F,CAE/E,YAAA,CAAA,YAAA,CAA4C,CACtD,GAAG,CAAE,KADiD,CAEtD,OAAO,CAAE,kBAAkB,CAAC,QAF0B,CAGtD,KAAK,CAAE,IAH+C,CAA5C","sourcesContent":["import { mapToCssModules, TransitionStatuses, TransitionTimeouts } from '@msdyn365-commerce-modules/utilities';\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Transition from 'react-transition-group/Transition';\nimport CarouselContext from './CarouselContext';\nimport { ICarouselItemProps } from './CarouselItem.props';\n\nexport interface ICarouselItemState {\n    startAnimation: boolean;\n}\n\n/**\n * CarouselItem component\n */\nexport default class CarouselItem extends React.Component<ICarouselItemProps, ICarouselItemState> {\n\n    public static defaultProps: Partial<ICarouselItemProps> = {\n        tag: 'div',\n        timeout: TransitionTimeouts.Carousel,\n        slide: true,\n    };\n    public props: ICarouselItemProps;\n    public state: ICarouselItemState;\n\n    constructor(props: ICarouselItemProps) {\n        super(props);\n        this.props = props;\n\n        this.state = {\n            startAnimation: false,\n        };\n\n        this.onEnter = this.onEnter.bind(this);\n        this.onEntering = this.onEntering.bind(this);\n        this.onExit = this.onExit.bind(this);\n        this.onExiting = this.onExiting.bind(this);\n        this.onExited = this.onExited.bind(this);\n    }\n\n    public onEnter = (node: HTMLElement, isAppearing: boolean) =>  {\n        this.setState({ startAnimation: false });\n        if (this.props.onEnter) {\n            this.props.onEnter(node, isAppearing);\n        }\n    }\n\n    public onEntering = (node: HTMLElement, isAppearing: boolean) => {\n\n        // getting this variable triggers a reflow\n        const offsetHeight = node.offsetHeight;\n        this.setState({ startAnimation: true });\n        if (this.props.onEntering) {\n            this.props.onEntering(node, isAppearing);\n        }\n\n        return offsetHeight;\n    }\n\n    public onExit = (node: HTMLElement) => {\n        this.setState({ startAnimation: false });\n        if (this.props.onExit) {\n            this.props.onExit(node);\n        }\n    }\n\n    public onExiting =  (node: HTMLElement) => {\n        this.setState({ startAnimation: true });\n        node.dispatchEvent(new CustomEvent('slide.bs.carousel'));\n        if (this.props.onExiting) {\n            this.props.onExiting(node);\n        }\n    }\n\n    public onExited = (node: HTMLElement) => {\n        node.dispatchEvent(new CustomEvent('slid.bs.carousel'));\n        if (this.props.onExited) {\n            this.props.onExited(node);\n        }\n    }\n\n    public render(): JSX.Element | null {\n\n        const {\n            children,\n            cssModule, slide,\n            tag,\n            className,\n\n            in : collapseIn,\n            mountOnEnter, unmountOnExit,\n            appear, enter, exit, timeout,\n            onEnter, onEntering, onEntered, onExit, onExiting, onExited,\n\n            ...otherProps\n        } = this.props;\n\n        const timeoutOrDefault = timeout || TransitionTimeouts.Carousel;\n        const Tag = tag || 'div';\n        const transitionProps = {\n            in : collapseIn,\n            mountOnEnter, unmountOnExit,\n            appear, enter, exit,\n            timeout: timeoutOrDefault\n        };\n\n        return(\n            <CarouselContext.Consumer >\n                {(\n                    // tslint:disable-next-line:typedef\n                    { direction}\n                ) => (\n                    <Transition\n                        {...transitionProps}\n                        enter={slide}\n                        exit={slide}\n                        in={collapseIn}\n                        onEnter={this.onEnter}\n                        onEntering={this.onEntering}\n                        onExit={this.onExit}\n                        onExiting={this.onExiting}\n                        onExited={this.onExited}\n                    >\n                        {(status: TransitionStatuses) => {\n                            const isActive = (status === 'entered') || (status === 'exiting');\n                            const directionClassName = (status === 'entering' || status === 'exiting') &&\n                                this.state.startAnimation &&\n                                (direction === 'right' ? ('msc-carousel__item__left') : ('msc-carousel__item__right'));\n                            const orderClassName = (status === 'entering') &&\n                                (direction === 'right' ? ('msc-carousel__item__next') : ('msc-carousel__item__prev'));\n                            const itemClasses = mapToCssModules(\n                                classNames(\n                                    className,\n                                    'msc-carousel__item',\n                                    isActive && 'active',\n                                    directionClassName,\n                                    orderClassName,\n                                ),\n                                cssModule\n                            );\n\n                            return (\n                                <Tag className={itemClasses} {...otherProps}>\n                                    {children}\n                                </Tag>\n                            );\n                        }}\n                    </Transition>\n                )}\n            </CarouselContext.Consumer>\n        );\n    }\n\n}\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}