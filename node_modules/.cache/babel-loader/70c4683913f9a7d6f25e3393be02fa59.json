{"ast":null,"code":"import\"core-js/modules/web.dom-collections.for-each.js\";/*!\r\n * Copyright (c) Microsoft Corporation.\r\n * All rights reserved. See LICENSE in the project root for license information.\r\n */function getFlattenedListOfChildren(slot,fragmentId){if(!slot){return[];}let slotArr=[slot];slot.modules&&Object.values(slot.modules).forEach(current=>{if(current){current.forEach(m=>{if(fragmentId){m.id=\"\".concat(fragmentId,\"__\").concat(m.id);}slotArr=slotArr.concat(getFlattenedListOfChildren(m,fragmentId));});}});return slotArr;}export function getFlattenedListOfModulesForFragment(fragment,fragmentId){if(!fragment){return[];}return getFlattenedListOfChildren(fragment,fragmentId);}export function getFlattenedListOfModules(pageResponse){if(!pageResponse){return[];}const response=pageResponse;const propValue=response.slots;if(propValue){return propValue;}const modulesFromLegacy=response.modules&&Object.values(response.modules);if(modulesFromLegacy&&modulesFromLegacy.length){return modulesFromLegacy.map(m=>m);}else{return getFlattenedListOfChildren(pageResponse.pageRoot);}}","map":{"version":3,"sources":["../../../src/utils/get-modules-flat-list.ts"],"names":[],"mappings":"wDAAA;;;AAGG,GAQH,QAAS,CAAA,0BAAT,CAAoC,IAApC,CAA2D,UAA3D,CAA8E,CAC1E,GAAI,CAAC,IAAL,CAAW,CACP,MAAO,EAAP,CACH,CAED,GAAI,CAAA,OAAO,CAAsB,CAAC,IAAD,CAAjC,CACA,IAAI,CAAC,OAAL,EACI,MAAM,CAAC,MAAP,CAAc,IAAI,CAAC,OAAnB,EAA4B,OAA5B,CAAqC,OAAD,EAA+B,CAC/D,GAAI,OAAJ,CAAa,CACT,OAAO,CAAC,OAAR,CAAgB,CAAC,EAAG,CAChB,GAAI,UAAJ,CAAgB,CACZ,CAAC,CAAC,EAAF,WAAU,UAAV,cAAyB,CAAC,CAAC,EAA3B,EACH,CACD,OAAO,CAAG,OAAO,CAAC,MAAR,CAAe,0BAA0B,CAAC,CAAD,CAAI,UAAJ,CAAzC,CAAV,CACH,CALD,EAMH,CACJ,CATD,CADJ,CAWA,MAAO,CAAA,OAAP,CACH,CAED,MAAM,SAAU,CAAA,oCAAV,CAA+C,QAA/C,CAA0E,UAA1E,CAA4F,CAC9F,GAAI,CAAC,QAAL,CAAe,CACX,MAAO,EAAP,CACH,CACD,MAAO,CAAA,0BAA0B,CAAC,QAAD,CAAW,UAAX,CAAjC,CACH,CAED,MAAM,SAAU,CAAA,yBAAV,CAAoC,YAApC,CAA+D,CACjE,GAAI,CAAC,YAAL,CAAmB,CACf,MAAO,EAAP,CACH,CACD,KAAM,CAAA,QAAQ,CAA6B,YAA3C,CACA,KAAM,CAAA,SAAS,CAAG,QAAQ,CAAC,KAA3B,CACA,GAAI,SAAJ,CAAe,CACX,MAAO,CAAA,SAAP,CACH,CAED,KAAM,CAAA,iBAAiB,CAAG,QAAQ,CAAC,OAAT,EAAoB,MAAM,CAAC,MAAP,CAAc,QAAQ,CAAC,OAAvB,CAA9C,CACA,GAAI,iBAAiB,EAAI,iBAAiB,CAAC,MAA3C,CAAmD,CAC/C,MAAO,CAAA,iBAAiB,CAAC,GAAlB,CAAuB,CAAD,EAAwB,CAA9C,CAAP,CACH,CAFD,IAEO,CACH,MAAO,CAAA,0BAA0B,CAAC,YAAY,CAAC,QAAd,CAAjC,CACH,CACJ","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { IDictionary, IModuleContract, IPageResponse } from '@msdyn365-commerce/core-internal';\n\ninterface IPageResponseWithModules extends IPageResponse {\n    modules: IDictionary<IModuleContract>;\n}\n\nfunction getFlattenedListOfChildren(slot: IModuleContract, fragmentId?: string): IModuleContract[] {\n    if (!slot) {\n        return [];\n    }\n\n    let slotArr: IModuleContract[] = [slot];\n    slot.modules &&\n        Object.values(slot.modules).forEach((current: IModuleContract[]) => {\n            if (current) {\n                current.forEach(m => {\n                    if (fragmentId) {\n                        m.id = `${fragmentId}__${m.id}`;\n                    }\n                    slotArr = slotArr.concat(getFlattenedListOfChildren(m, fragmentId));\n                });\n            }\n        });\n    return slotArr;\n}\n\nexport function getFlattenedListOfModulesForFragment(fragment: IModuleContract, fragmentId: string): IModuleContract[] {\n    if (!fragment) {\n        return [];\n    }\n    return getFlattenedListOfChildren(fragment, fragmentId);\n}\n\nexport function getFlattenedListOfModules(pageResponse: IPageResponse): IModuleContract[] {\n    if (!pageResponse) {\n        return [];\n    }\n    const response = <IPageResponseWithModules>pageResponse;\n    const propValue = response.slots;\n    if (propValue) {\n        return propValue;\n    }\n\n    const modulesFromLegacy = response.modules && Object.values(response.modules);\n    if (modulesFromLegacy && modulesFromLegacy.length) {\n        return modulesFromLegacy.map((m: IModuleContract) => m);\n    } else {\n        return getFlattenedListOfChildren(pageResponse.pageRoot);\n    }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}