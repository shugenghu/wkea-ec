{"ast":null,"code":"import\"core-js/modules/es.regexp.to-string.js\";import\"core-js/modules/es.string.replace.js\";import{getFallbackImageUrl}from'@msdyn365-commerce-modules/retail-actions';import{Button,Modal,ModalBody,ModalFooter,ModalHeader}from'@msdyn365-commerce-modules/utilities';import{getUrlSync,Image}from'@msdyn365-commerce/core';import React from'react';import{PriceComponent}from'../../price/price.components';const renderImage=(context,className,product,imageSettings)=>{const fallbackImageUrl=getFallbackImageUrl(product.ItemId,context.actionContext.requestContext.apiSettings);const defaultImageSettings={viewports:{xs:{q:\"w=140&h=140&m=6\",w:0,h:0},lg:{q:\"w=140&h=140&m=6\",w:0,h:0},xl:{q:\"w=140&h=140&m=6\",w:0,h:0}},lazyload:true};return/*#__PURE__*/React.createElement(Image,{className:\"\".concat(className,\"__image-props\"),src:product.PrimaryImageUrl||'',altText:product.Name,fallBackSrc:fallbackImageUrl,gridSettings:context.request.gridSettings,imageSettings:imageSettings||defaultImageSettings,loadFailureBehavior:'empty'});};export const ItemAddedToCartDialog=dialogProps=>{const{dialogStrings,className,context,modalOpen,data:{product,productPrice,quantity}}=dialogProps;const getCartPageUrl=()=>{return getUrlSync('cart',context.actionContext)||'';};const close=()=>{dialogProps.onClose();};const itemsString=quantity===1?dialogStrings.itemAddedToCartHeaderItemOneText:dialogStrings.itemAddedToCartHeaderItemFormatText.replace('{0}',quantity.toString());return/*#__PURE__*/React.createElement(Modal,{isOpen:modalOpen,className:\"\".concat(className)},/*#__PURE__*/React.createElement(ModalHeader,{className:\"\".concat(className,\"__dialog__header\"),toggle:close},/*#__PURE__*/React.createElement(\"b\",null,itemsString),/*#__PURE__*/React.createElement(\"span\",null,dialogStrings.itemAddedToCartHeaderMessageText)),/*#__PURE__*/React.createElement(ModalBody,{className:\"\".concat(className,\"__dialog__body\")},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__content\")},renderImage(context,\"\".concat(className,\"__dialog\"),product),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__description\")},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__product-name\")},product.Name),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__product-price\")},productPrice&&/*#__PURE__*/React.createElement(PriceComponent,{data:{price:productPrice},context:dialogProps.context,id:dialogProps.id,typeName:dialogProps.typeName,freePriceText:dialogProps.dialogStrings.freePriceText,originalPriceText:dialogProps.dialogStrings.originalPriceText,currentPriceText:dialogProps.dialogStrings.currentPriceText})),product.Dimensions&&/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(className,\"__dialog__product-dimensions\")},product.Dimensions.map(dimension=>{var _dimension$DimensionV;return(_dimension$DimensionV=dimension.DimensionValue)===null||_dimension$DimensionV===void 0?void 0:_dimension$DimensionV.Value;}).filter(value=>value).join(', '))))),/*#__PURE__*/React.createElement(ModalFooter,{className:\"\".concat(className,\"__dialog__footer\")},/*#__PURE__*/React.createElement(Button,{className:\"\".concat(className,\"__dialog__view-cart-button\"),title:dialogStrings.viewCartButtonText,href:getCartPageUrl()},dialogStrings.viewCartButtonText),/*#__PURE__*/React.createElement(Button,{className:\"\".concat(className,\"__dialog__continue-shopping\"),title:dialogStrings.orderTemplateCloseButtonText,onClick:close},dialogStrings.orderTemplateCloseButtonText)));};","map":{"version":3,"sources":["order-template/item-added-to-cart-dialog/item-added-to-cart-dialog.component.tsx"],"names":[],"mappings":"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","sourcesContent":["import { getFallbackImageUrl } from '@msdyn365-commerce-modules/retail-actions';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from '@msdyn365-commerce-modules/utilities';\nimport { getUrlSync, IComponentProps, ICoreContext, IImageSettings, Image } from '@msdyn365-commerce/core';\nimport { ProductPrice, SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport React from 'react';\nimport { PriceComponent } from '../../price/price.components';\n\nexport interface IItemAddedToCartDialogResources {\n    viewCartButtonText: string;\n    orderTemplateCloseButtonText: string;\n    itemAddedToCartHeaderItemOneText: string;\n    itemAddedToCartHeaderItemFormatText: string;\n    itemAddedToCartHeaderMessageText: string;\n\n    freePriceText: string;\n    originalPriceText: string;\n    currentPriceText: string;\n}\n\nexport interface IItemAddedToCartDialogData {\n    product: SimpleProduct;\n    productPrice: ProductPrice;\n    quantity: number;\n}\n\nexport interface IItemAddedToCartDialogProps extends IComponentProps<IItemAddedToCartDialogData> {\n    className: string;\n\n    dialogStrings: IItemAddedToCartDialogResources;\n\n    modalOpen: boolean | undefined;\n    onClose(): void;\n}\n\nconst renderImage = (\n    context: ICoreContext, className: string, product: SimpleProduct, imageSettings?: IImageSettings) => {\n    const fallbackImageUrl = getFallbackImageUrl(product.ItemId, context.actionContext.requestContext.apiSettings);\n    const defaultImageSettings: IImageSettings = {\n        viewports: {\n            xs: { q: `w=140&h=140&m=6`, w: 0, h: 0 },\n            lg: { q: `w=140&h=140&m=6`, w: 0, h: 0 },\n            xl: { q: `w=140&h=140&m=6`, w: 0, h: 0 }\n        },\n        lazyload: true\n    };\n    return (\n        <Image\n            className={`${className}__image-props`}\n            src={product.PrimaryImageUrl || ''}\n            altText={product.Name}\n            fallBackSrc = {fallbackImageUrl}\n            gridSettings={context.request.gridSettings!}\n            imageSettings={imageSettings || defaultImageSettings}\n            loadFailureBehavior='empty'\n        />\n    );\n};\n\nexport const ItemAddedToCartDialog = (dialogProps: IItemAddedToCartDialogProps) => {\n    const {\n        dialogStrings,\n        className,\n        context,\n        modalOpen,\n        data: {\n            product,\n            productPrice,\n            quantity\n        }\n    } = dialogProps;\n\n    const getCartPageUrl = (): string => {\n        return getUrlSync('cart', context.actionContext) || '';\n    };\n\n    const close: () => void = () => {\n        dialogProps.onClose();\n    };\n\n    const itemsString = quantity === 1 ? dialogStrings.itemAddedToCartHeaderItemOneText : dialogStrings.itemAddedToCartHeaderItemFormatText.replace('{0}', quantity.toString());\n\n    return (\n        <Modal isOpen={modalOpen} className={`${className}`}>\n            <ModalHeader className={`${className}__dialog__header`} toggle={close}>\n                <b>{itemsString}</b><span>{dialogStrings.itemAddedToCartHeaderMessageText}</span>\n            </ModalHeader>\n            <ModalBody className={`${className}__dialog__body`}>\n                <div className={`${className}__dialog__content`}>\n                    {renderImage(context, `${className}__dialog`, product)}\n                    <div className={`${className}__dialog__description`}>\n                        <div className={`${className}__dialog__product-name`}>\n                            {product.Name}\n                        </div>\n                        <div className={`${className}__dialog__product-price`}>\n                            {\n                                productPrice && <PriceComponent\n                                    data={{price: productPrice}}\n                                    context={dialogProps.context}\n                                    id={dialogProps.id}\n                                    typeName={dialogProps.typeName}\n                                    freePriceText={dialogProps.dialogStrings.freePriceText}\n                                    originalPriceText={dialogProps.dialogStrings.originalPriceText}\n                                    currentPriceText={dialogProps.dialogStrings.currentPriceText}\n                                />\n                            }\n                        </div>\n                        {\n                            product.Dimensions &&\n                                <div className={`${className}__dialog__product-dimensions`}>\n                                    {product.Dimensions.map(dimension => dimension.DimensionValue?.Value).filter(value => value).join(', ')}\n                                </div>\n                        }\n                    </div>\n                </div>\n            </ModalBody>\n            <ModalFooter\n                className={`${className}__dialog__footer`}\n            >\n                <Button\n                    className={`${className}__dialog__view-cart-button`}\n                    title={dialogStrings.viewCartButtonText}\n                    href={getCartPageUrl()}\n                >\n                    {dialogStrings.viewCartButtonText}\n                </Button>\n                <Button\n                    className={`${className}__dialog__continue-shopping`}\n                    title={dialogStrings.orderTemplateCloseButtonText}\n                    onClick={close}\n                >\n                    {dialogStrings.orderTemplateCloseButtonText}\n                </Button>\n            </ModalFooter>\n        </Modal>\n    );\n};"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}