{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import{__decorate}from\"tslib\";import{action,computed,observable}from'mobx';/**\r\n * Abstract instance of IStoreSelectorStateManager with base implementation\r\n * of everything except the geoLocate function\r\n */export var BaseStoreSelectorStateManager=/*#__PURE__*/function(){function BaseStoreSelectorStateManager(){_classCallCheck(this,BaseStoreSelectorStateManager);this.listMapViewState={displayList:true,displayMap:false};}_createClass(BaseStoreSelectorStateManager,[{key:\"toggleListMapViewState\",value:function(){var _toggleListMapViewState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.listMapViewState={displayList:!this.listMapViewState.displayList,displayMap:!this.listMapViewState.displayMap};case 1:case\"end\":return _context.stop();}}},_callee,this);}));function toggleListMapViewState(){return _toggleListMapViewState.apply(this,arguments);}return toggleListMapViewState;}()},{key:\"setOrgUnitStoreInformation\",value:function(){var _setOrgUnitStoreInformation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(input){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this._context=input;case 1:case\"end\":return _context2.stop();}}},_callee2,this);}));function setOrgUnitStoreInformation(_x){return _setOrgUnitStoreInformation.apply(this,arguments);}return setOrgUnitStoreInformation;}()},{key:\"setSelectedStoreLocationId\",value:function(){var _setSelectedStoreLocationId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(storeId){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.selectedStoreLocationId=storeId;case 1:case\"end\":return _context3.stop();}}},_callee3,this);}));function setSelectedStoreLocationId(_x2){return _setSelectedStoreLocationId.apply(this,arguments);}return setSelectedStoreLocationId;}()},{key:\"setPreferredStoreLocationId\",value:function(){var _setPreferredStoreLocationId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(storeId){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.preferredStoreLocationId=storeId;case 1:case\"end\":return _context4.stop();}}},_callee4,this);}));function setPreferredStoreLocationId(_x3){return _setPreferredStoreLocationId.apply(this,arguments);}return setPreferredStoreLocationId;}()},{key:\"openDialog\",value:function(){var _openDialog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(input){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!this._context){_context5.next=2;break;}throw new Error('Dialog is already opened');case 2:this._context=input;case 3:case\"end\":return _context5.stop();}}},_callee5,this);}));function openDialog(_x4){return _openDialog.apply(this,arguments);}return openDialog;}()},{key:\"closeDialog\",value:function(){var _closeDialog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:this._context=undefined;case 1:case\"end\":return _context6.stop();}}},_callee6,this);}));function closeDialog(){return _closeDialog.apply(this,arguments);}return closeDialog;}()},{key:\"isDialogOpen\",get:function get(){return this._context!==undefined;}},{key:\"context\",get:function get(){return this._context;}}]);return BaseStoreSelectorStateManager;}();__decorate([computed],BaseStoreSelectorStateManager.prototype,\"isDialogOpen\",null);__decorate([observable],BaseStoreSelectorStateManager.prototype,\"isMapApiLoaded\",void 0);__decorate([observable],BaseStoreSelectorStateManager.prototype,\"selectedStoreLocationId\",void 0);__decorate([observable],BaseStoreSelectorStateManager.prototype,\"preferredStoreLocationId\",void 0);__decorate([observable],BaseStoreSelectorStateManager.prototype,\"listMapViewState\",void 0);__decorate([observable],BaseStoreSelectorStateManager.prototype,\"_context\",void 0);__decorate([computed],BaseStoreSelectorStateManager.prototype,\"context\",null);__decorate([action],BaseStoreSelectorStateManager.prototype,\"toggleListMapViewState\",null);__decorate([action],BaseStoreSelectorStateManager.prototype,\"setOrgUnitStoreInformation\",null);__decorate([action],BaseStoreSelectorStateManager.prototype,\"setSelectedStoreLocationId\",null);__decorate([action],BaseStoreSelectorStateManager.prototype,\"setPreferredStoreLocationId\",null);__decorate([action],BaseStoreSelectorStateManager.prototype,\"openDialog\",null);__decorate([action],BaseStoreSelectorStateManager.prototype,\"closeDialog\",null);","map":{"version":3,"sources":["store-selector-state-manager/base-store-selector-state-manager.ts"],"names":[],"mappings":"6SAAA,OAAS,MAAT,CAAiB,QAAjB,CAA2B,UAA3B,KAA6C,MAA7C,CAKA;;;AAGG,GACH,UAAsB,CAAA,6BAAtB,yBAAA,wCAAA,qDAQuB,KAAA,gBAAA,CAAsC,CAAE,WAAW,CAAE,IAAf,CAAqB,UAAU,CAAE,KAAjC,CAAtC,CA+CtB,CAvDD,kTAqBQ,KAAK,gBAAL,CAAwB,CACpB,WAAW,CAAE,CAAC,KAAK,gBAAL,CAAsB,WADhB,CAEpB,UAAU,CAAE,CAAC,KAAK,gBAAL,CAAsB,UAFf,CAAxB,CArBR,sVA4B4C,KA5B5C,sHA6BQ,KAAK,QAAL,CAAgB,KAAhB,CA7BR,sWAiC4C,OAjC5C,sHAkCQ,KAAK,uBAAL,CAA+B,OAA/B,CAlCR,yWAsC6C,OAtC7C,sHAuCQ,KAAK,wBAAL,CAAgC,OAAhC,CAvCR,0UA2C4B,KA3C5B,0HA4CY,KAAK,QA5CjB,+BA6CkB,IAAI,CAAA,KAAJ,CAAU,0BAAV,CA7ClB,QAgDQ,KAAK,QAAL,CAAgB,KAAhB,CAhDR,+YAqDQ,KAAK,QAAL,CAAgB,SAAhB,CArDR,gMACqC,CAC7B,MAAO,MAAK,QAAL,GAAkB,SAAzB,CACH,CAHL,mCAWgC,CACxB,MAAO,MAAK,QAAZ,CACH,CAbL,6CACc,UAAA,CAAA,CAAT,QAAS,CAAA,C,uCAAA,C,cAAA,CAET,IAFS,CAAA,CAIE,UAAA,CAAA,CAAX,UAAW,CAAA,C,uCAAA,C,gBAAA,C,IAAgC,EAAhC,CAAA,CACA,UAAA,CAAA,CAAX,UAAW,CAAA,C,uCAAA,C,yBAAA,C,IAAwC,EAAxC,CAAA,CACA,UAAA,CAAA,CAAX,UAAW,CAAA,C,uCAAA,C,0BAAA,C,IAAyC,EAAzC,CAAA,CACA,UAAA,CAAA,CAAX,UAAW,CAAA,C,uCAAA,C,kBAAA,C,IAAsF,EAAtF,CAAA,CACA,UAAA,CAAA,CAAX,UAAW,CAAA,C,uCAAA,C,UAAA,C,IAAiD,EAAjD,CAAA,CAEF,UAAA,CAAA,CAAT,QAAS,CAAA,C,uCAAA,C,SAAA,CAET,IAFS,CAAA,CASV,UAAA,CAAA,CADC,MACD,CAAA,C,uCAAA,C,wBAAA,CAKC,IALD,CAAA,CAQA,UAAA,CAAA,CADC,MACD,CAAA,C,uCAAA,C,4BAAA,CAEC,IAFD,CAAA,CAKA,UAAA,CAAA,CADC,MACD,CAAA,C,uCAAA,C,4BAAA,CAEC,IAFD,CAAA,CAKA,UAAA,CAAA,CADC,MACD,CAAA,C,uCAAA,C,6BAAA,CAEC,IAFD,CAAA,CAKA,UAAA,CAAA,CADC,MACD,CAAA,C,uCAAA,C,YAAA,CAMC,IAND,CAAA,CASA,UAAA,CAAA,CADC,MACD,CAAA,C,uCAAA,C,aAAA,CAEC,IAFD,CAAA","sourcesContent":["import { action, computed, observable } from 'mobx';\n\nimport { IActionContext } from '@msdyn365-commerce/core';\nimport { IListMapViewState, ILoadMapApiInput, IStoreSelectionStateContext, IStoreSelectorLocation, IStoreSelectorStateManager } from './i-store-selection-state-manager';\n\n/**\n * Abstract instance of IStoreSelectorStateManager with base implementation\n * of everything except the geoLocate function\n */\nexport abstract class BaseStoreSelectorStateManager implements IStoreSelectorStateManager {\n    @computed public get isDialogOpen(): Readonly<boolean> {\n        return this._context !== undefined;\n    }\n\n    @observable public isMapApiLoaded?: boolean;\n    @observable public selectedStoreLocationId?: string;\n    @observable public preferredStoreLocationId?: string;\n    @observable public listMapViewState: IListMapViewState = { displayList: true, displayMap: false };\n    @observable protected _context?: IStoreSelectionStateContext;\n\n    @computed public get context(): Readonly<IStoreSelectionStateContext | undefined> {\n        return this._context;\n    }\n\n    public abstract geoLocate(searchTerm: string, actionContext: IActionContext): Promise<IStoreSelectorLocation | undefined>;\n\n    public abstract loadMapApi(input: ILoadMapApiInput): Promise<void>;\n\n    @action\n    public async toggleListMapViewState(): Promise<void> {\n        this.listMapViewState = {\n            displayList: !this.listMapViewState.displayList,\n            displayMap: !this.listMapViewState.displayMap\n        };\n    }\n\n    @action\n    public async setOrgUnitStoreInformation(input: IStoreSelectionStateContext): Promise<void> {\n        this._context = input;\n    }\n\n    @action\n    public async setSelectedStoreLocationId(storeId: string | undefined): Promise<void> {\n        this.selectedStoreLocationId = storeId;\n    }\n\n    @action\n    public async setPreferredStoreLocationId(storeId: string | undefined): Promise<void> {\n        this.preferredStoreLocationId = storeId;\n    }\n\n    @action\n    public async openDialog(input: IStoreSelectionStateContext): Promise<void> {\n        if (this._context) {\n            throw new Error('Dialog is already opened');\n        }\n\n        this._context = input;\n    }\n\n    @action\n    public async closeDialog(): Promise<void> {\n        this._context = undefined;\n    }\n}"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}