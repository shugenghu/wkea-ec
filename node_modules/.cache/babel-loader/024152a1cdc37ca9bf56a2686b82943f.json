{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{createObservableDataAction}from'@msdyn365-commerce/core';import{deleteAsync}from'@msdyn365-commerce/retail-proxy/dist/DataActions/BusinessPartnerUsersDataActions.g';/**\r\n * Input class for DeleteOrganizationUser data action\r\n */export class DeleteOrganizationUserInput{constructor(newUser){this.getCacheKey=()=>\"DeleteOrganizationUser\";this.getCacheObjectType=()=>'DeleteOrganizationUser';this.dataCacheType=()=>'none';this.user=newUser;}}/**\r\n * Input class for DeleteOrganizationUser data action\r\n */export const createDeleteOrganizationUserInput=(inputData,newUser)=>{const{requestContext}=inputData;// Check if the user is authenticated.\nif(!requestContext.user.isAuthenticated){throw new Error('User is not logged in.');}return new DeleteOrganizationUserInput(newUser);};/**\r\n * The DeleteOrganizationUser data action\r\n * Calls getCurrent() to get a businessPartnerId from the user requesting the action.\r\n * It then maps the newUsers' businessPartnerId to the same as the above user.\r\n * Calls the createBusinessPartner to then create a new entitiy in the database with the\r\n * information passed into through newUser\r\n */export async function deleteOrganizationUser(input,ctx){const{user}=input;return deleteAsync({callerContext:ctx},user).catch(error=>{console.log(error);ctx.telemetry.debug('[Delete-organization-user] Unable to delete BusinessPartnerUser account');throw new Error('[Delete-organization-user] Unable to delete BusinessPartnerUser account');});}/**\r\n * The DeleteOrganizationUser data action\r\n * Calls the read RetailServer API to get the BusinessPartnerId from the admin\r\n * account and Deletes that businessPartner to the recieved input (new User)/\r\n * We then send this new User through the RetailServer API so that the database\r\n * is updated.\r\n */export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/delete-organization-user',action:deleteOrganizationUser,input:createDeleteOrganizationUserInput});","map":{"version":3,"sources":["../../src/delete-organization-user.ts"],"names":[],"mappings":"sCAAA,OAAoB,0BAApB,KAAmI,yBAAnI,CAEA,OAAS,WAAT,KAA4B,oFAA5B,CACA;;AAEG,GACH,MAAM,MAAO,CAAA,2BAA2B,CAGpC,WAAA,CAAY,OAAZ,CAAwC,CAIjC,KAAA,WAAA,CAAc,4BAAd,CACA,KAAA,kBAAA,CAAqB,IAAM,wBAA3B,CACA,KAAA,aAAA,CAAgB,IAAiB,MAAjC,CALH,KAAK,IAAL,CAAY,OAAZ,CACH,CALmC,CAYxC;;AAEG,GACH,MAAO,MAAM,CAAA,iCAAiC,CAAG,CAAC,SAAD,CAAkD,OAAlD,GAAgG,CAC7I,KAAM,CAAE,cAAF,EAAqB,SAA3B,CAEA;AACA,GAAI,CAAC,cAAc,CAAC,IAAf,CAAoB,eAAzB,CAA0C,CACtC,KAAM,IAAI,CAAA,KAAJ,CAAU,wBAAV,CAAN,CACH,CAED,MAAO,IAAI,CAAA,2BAAJ,CAAgC,OAAhC,CAAP,CACH,CATM,CAWP;;;;;;AAMG,GACH,MAAO,eAAe,CAAA,sBAAf,CAAsC,KAAtC,CAA0E,GAA1E,CAA6F,CAChG,KAAM,CAAE,IAAF,EAAW,KAAjB,CAEA,MAAO,CAAA,WAAW,CAAC,CAAE,aAAa,CAAE,GAAjB,CAAD,CAAwB,IAAxB,CAAX,CACF,KADE,CACI,KAAK,EAAG,CACX,OAAO,CAAC,GAAR,CAAY,KAAZ,EACA,GAAG,CAAC,SAAJ,CAAc,KAAd,CAAoB,yEAApB,EACA,KAAM,IAAI,CAAA,KAAJ,CAAU,yEAAV,CAAN,CACH,CALE,CAAP,CAMH,CAED;;;;;;AAMG,GACH,cAAe,CAAA,0BAA0B,CAAsB,CAC3D,EAAE,CAAE,oEADuD,CAE3D,MAAM,CAAgC,sBAFqB,CAG3D,KAAK,CAAuD,iCAHD,CAAtB,CAAzC","sourcesContent":["import { CacheType, createObservableDataAction, IAction, IActionContext, IActionInput, IAny, ICreateActionContext, IGeneric } from '@msdyn365-commerce/core';\nimport { BusinessPartnerUser, NullResult } from '@msdyn365-commerce/retail-proxy';\nimport { deleteAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/BusinessPartnerUsersDataActions.g';\n/**\n * Input class for DeleteOrganizationUser data action\n */\nexport class DeleteOrganizationUserInput implements IActionInput {\n    public user: BusinessPartnerUser;\n\n    constructor(newUser: BusinessPartnerUser) {\n        this.user = newUser;\n    }\n\n    public getCacheKey = () => `DeleteOrganizationUser`;\n    public getCacheObjectType = () => 'DeleteOrganizationUser';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * Input class for DeleteOrganizationUser data action\n */\nexport const createDeleteOrganizationUserInput = (inputData: ICreateActionContext<IGeneric<IAny>>, newUser: BusinessPartnerUser): IActionInput => {\n    const { requestContext } = inputData;\n\n    // Check if the user is authenticated.\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('User is not logged in.');\n    }\n\n    return new DeleteOrganizationUserInput(newUser);\n};\n\n/**\n * The DeleteOrganizationUser data action\n * Calls getCurrent() to get a businessPartnerId from the user requesting the action.\n * It then maps the newUsers' businessPartnerId to the same as the above user.\n * Calls the createBusinessPartner to then create a new entitiy in the database with the\n * information passed into through newUser\n */\nexport async function deleteOrganizationUser(input: DeleteOrganizationUserInput, ctx: IActionContext): Promise<NullResult> {\n    const { user } = input;\n\n    return deleteAsync({ callerContext: ctx}, user)\n        .catch(error => {\n            console.log(error);\n            ctx.telemetry.debug('[Delete-organization-user] Unable to delete BusinessPartnerUser account');\n            throw new Error('[Delete-organization-user] Unable to delete BusinessPartnerUser account');\n        });\n}\n\n/**\n * The DeleteOrganizationUser data action\n * Calls the read RetailServer API to get the BusinessPartnerId from the admin\n * account and Deletes that businessPartner to the recieved input (new User)/\n * We then send this new User through the RetailServer API so that the database\n * is updated.\n */\nexport default createObservableDataAction<BusinessPartnerUser>({\n    id: '@msdyn365-commerce-modules/retail-actions/delete-organization-user',\n    action: <IAction<BusinessPartnerUser>>deleteOrganizationUser,\n    input: <(args: ICreateActionContext) => IActionInput>(<IAny>createDeleteOrganizationUserInput),\n});"],"sourceRoot":""},"metadata":{},"sourceType":"module"}