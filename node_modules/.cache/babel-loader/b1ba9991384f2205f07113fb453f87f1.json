{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";import{createObservableDataAction,sendRequest}from'@msdyn365-commerce/core';function reportReviewConcern(_x,_x2){return _reportReviewConcern.apply(this,arguments);}function _reportReviewConcern(){_reportReviewConcern=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input,ctx){var requestUrl,requestBody,requestHeader;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(inputIsValid(input)){_context.next=2;break;}throw new Error(\"[SubmitHelpfulnessVote] Invalid input. ReviewId=\".concat(input.reviewId,\",tenantId=\").concat(input.tenantId,\",locale= \").concat(input.locale,\",\"));case 2:requestUrl=\"\".concat(input.serviceEndpoint,\"/v2.0/concerns/review/\").concat(input.reviewId)+\"?tenantId=\".concat(input.tenantId)+\"&locale=\".concat(input.locale);requestBody={concernCategory:input.concernCategory};requestHeader={headers:{Authorization:\"id_token \".concat(input.authToken)}};return _context.abrupt(\"return\",sendRequest(requestUrl,'post',requestBody,requestHeader).then(function(response){return response.status===200||response.status===201;})[\"catch\"](function(error){ctx.trace(\"[ReportReviewConcernInput] Failed to report a concern\");ctx.telemetry.exception(error);ctx.telemetry.debug(\"[ReportReviewConcernInput] Failed to report a concern\");return false;}));case 6:case\"end\":return _context.stop();}}},_callee);}));return _reportReviewConcern.apply(this,arguments);}function inputIsValid(input){return input&&input.reviewId.length>0&&input.tenantId.length>0&&input.locale.length>0&&input.authToken.length>0;}export default createObservableDataAction({id:'@msdyn365-commerce-modules/ratings-reviews/report-review-concern',action:reportReviewConcern});","map":{"version":3,"sources":["actions/report-review-concern.ts"],"names":[],"mappings":"uIAAA,OAAS,0BAAT,CAA8D,WAA9D,KAAiF,yBAAjF,C,QAGe,CAAA,mB,yKAAf,iBAAmC,KAAnC,CAAoE,GAApE,8JACS,YAAY,CAAC,KAAD,CADrB,8BAEc,IAAI,CAAA,KAAJ,2DACiD,KAAK,CAAC,QADvD,sBAC4E,KAAK,CAAC,QADlF,qBAEE,KAAK,CAAC,MAFR,MAFd,QASU,UATV,CAUQ,UAAG,KAAK,CAAC,eAAT,kCAAiD,KAAK,CAAC,QAAvD,sBACa,KAAK,CAAC,QADnB,oBAEW,KAAK,CAAC,MAFjB,CAVR,CAcU,WAdV,CAcwB,CAChB,eAAe,CAAE,KAAK,CAAC,eADP,CAdxB,CAkBU,aAlBV,CAkB0B,CAClB,OAAO,CAAE,CACL,aAAa,oBAAc,KAAK,CAAC,SAApB,CADR,CADS,CAlB1B,iCAwBW,WAAW,CAAU,UAAV,CAAsB,MAAtB,CAA8B,WAA9B,CAA2C,aAA3C,CAAX,CACF,IADE,CACG,SAAA,QAAQ,CAAG,CACb,MAAO,CAAA,QAAQ,CAAC,MAAT,GAAoB,GAApB,EAA2B,QAAQ,CAAC,MAAT,GAAoB,GAAtD,CACH,CAHE,WAII,SAAC,KAAD,CAAU,CACb,GAAG,CAAC,KAAJ,0DACA,GAAG,CAAC,SAAJ,CAAc,SAAd,CAAwB,KAAxB,EACA,GAAG,CAAC,SAAJ,CAAc,KAAd,0DACA,MAAO,MAAP,CACH,CATE,CAxBX,wD,sDAoCA,QAAS,CAAA,YAAT,CAAsB,KAAtB,CAAqD,CACjD,MACI,CAAA,KAAK,EACL,KAAK,CAAC,QAAN,CAAe,MAAf,CAAwB,CADxB,EAEA,KAAK,CAAC,QAAN,CAAe,MAAf,CAAwB,CAFxB,EAGA,KAAK,CAAC,MAAN,CAAa,MAAb,CAAsB,CAHtB,EAIA,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAyB,CAL7B,CAOH,CAED,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,kEADkC,CAEtC,MAAM,CAAoB,mBAFY,CAAD,CAAzC","sourcesContent":["import { createObservableDataAction, IAction, IActionContext, sendRequest } from '@msdyn365-commerce/core';\nimport { ReportReviewConcernInput } from './inputs/report-review-concern-input';\n\nasync function reportReviewConcern(input: ReportReviewConcernInput, ctx: IActionContext): Promise<boolean> {\n    if (!inputIsValid(input)) {\n        throw new Error(\n            `[SubmitHelpfulnessVote] Invalid input. ReviewId=${input.reviewId},tenantId=${input.tenantId},locale= ${\n                input.locale\n            },`\n        );\n    }\n\n    const requestUrl =\n        `${input.serviceEndpoint}/v2.0/concerns/review/${input.reviewId}` +\n        `?tenantId=${input.tenantId}` +\n        `&locale=${input.locale}`;\n\n    const requestBody = {\n        concernCategory: input.concernCategory\n    };\n\n    const requestHeader = {\n        headers: {\n            Authorization: `id_token ${input.authToken}`\n        }\n    };\n\n    return sendRequest<boolean>(requestUrl, 'post', requestBody, requestHeader)\n        .then(response => {\n            return response.status === 200 || response.status === 201;\n        })\n        .catch((error) => {\n            ctx.trace(`[ReportReviewConcernInput] Failed to report a concern`);\n            ctx.telemetry.exception(error);\n            ctx.telemetry.debug(`[ReportReviewConcernInput] Failed to report a concern`);\n            return false;\n        });\n}\n\nfunction inputIsValid(input: ReportReviewConcernInput): boolean {\n    return (\n        input &&\n        input.reviewId.length > 0 &&\n        input.tenantId.length > 0 &&\n        input.locale.length > 0 &&\n        input.authToken.length > 0\n    );\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/ratings-reviews/report-review-concern',\n    action: <IAction<boolean>>reportReviewConcern\n});\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}