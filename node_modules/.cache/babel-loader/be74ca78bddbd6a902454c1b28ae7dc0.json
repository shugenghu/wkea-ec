{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/esm/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import{getTelemetryObject}from'@msdyn365-commerce-modules/utilities';import*as Msdyn365 from'@msdyn365-commerce/core';import classnames from'classnames';import React from'react';import{ReviewModal,submitReview}from'../../common/review-modal';import{TOGGLE_REVIEW_MODAL_BUTTON_ID}from'../../common/rnrInterface';import{ModalToggle,SignInButton,SignInMessage}from'./components/components';var WriteReview=/*#__PURE__*/function(_React$PureComponent){_inherits(WriteReview,_React$PureComponent);var _super=_createSuper(WriteReview);function WriteReview(props){var _this;_classCallCheck(this,WriteReview);_this=_super.call(this,props);_this.handleHeadingChange=function(event){return _this.props.config.heading.text=event.target.value;};_this._onTitleChange=function(event){_this.writeReviewCallbacks.updateReviewTitle(event.target.value);};_this._onTextChange=function(event){_this.writeReviewCallbacks.updateReviewText(event.target.value);};_this._onRatingChange=function(value){_this.writeReviewCallbacks.updateRating(value);};_this._toggleReviewModal=function(){var userReview=_this.props.data.userReview.result;if(_this.state.isReviewModalOpen){_this.setState({isReviewModalOpen:false,hasReviewError:false});}else{if(userReview){_this.setState({isReviewModalOpen:true,reviewText:userReview.reviewText,reviewTitle:userReview.title,rating:userReview.rating});}else{_this.setState({isReviewModalOpen:true,reviewText:'',reviewTitle:'',rating:0});}}};_this.writeReviewCallbacks={toggleModal:_this._toggleReviewModal,updateReviewTitle:function updateReviewTitle(title){_this.setState({reviewTitle:title});},updateReviewText:function updateReviewText(text){_this.setState({reviewText:text});},updateRating:function updateRating(rating){_this.setState({rating:rating});},onReviewSubmitted:function onReviewSubmitted(isSuccessful){if(isSuccessful){_this.setState({isReviewModalOpen:false,hasReviewError:false});}else{_this.setState({hasReviewError:true});}},submitReview:submitReview};var userReview=_this.props.data.userReview.result;_this._toggleReviewModal=_this._toggleReviewModal.bind(_assertThisInitialized(_this));_this._modalToggleRef=/*#__PURE__*/React.createRef();var rating=userReview?userReview.rating:0;var reviewTitle=userReview?userReview.title:'';var reviewText=userReview?userReview.reviewText:'';_this.state={isReviewModalOpen:false,rating:rating,reviewTitle:reviewTitle,reviewText:reviewText,hasReviewError:false};_this.telemetryContent=getTelemetryObject(_this.props.context.request.telemetryPageName,_this.props.friendlyName,_this.props.telemetry);return _this;}_createClass(WriteReview,[{key:\"render\",value:function render(){var resources=this.props.resources;var _this$props$config=this.props.config,className=_this$props$config.className,heading=_this$props$config.heading;var _this$props$data=this.props.data,product=_this$props$data.product.result,userReview=_this$props$data.userReview.result;var userInfo=this.props.context&&this.props.context.request&&this.props.context.request.user;var completeClass=classnames('ms-write-review',className);var viewProps=_objectSpread(_objectSpread({},this.props),{},{state:this.state,className:completeClass,moduleProps:{moduleProps:this.props,className:completeClass,id:null},callbacks:this.writeReviewCallbacks,signInMessage:/*#__PURE__*/React.createElement(SignInMessage,{text:resources.signInMessage}),signInButton:/*#__PURE__*/React.createElement(SignInButton,{text:resources.signInLabel,ariaLabel:resources.signInAriaLabel,href:userInfo.signInUrl,telemetryContent:this.telemetryContent}),modalToggle:product&&/*#__PURE__*/React.createElement(ModalToggle,{text:userReview?resources.editReviewButtonText:resources.reviewButtonLabel,ariaLabel:resources.reviewButtonLabel,innerRef:this._modalToggleRef,onClick:this._toggleReviewModal,id:TOGGLE_REVIEW_MODAL_BUTTON_ID,telemetryContent:this.telemetryContent}),reviewModal:this._buildUserReviewModal(),heading:heading&&heading.text&&/*#__PURE__*/React.createElement(Msdyn365.Text,{className:'ms-write-review__heading',tag:heading.tag||'h2',text:heading.text,editProps:{onEdit:this.handleHeadingChange,requestContext:this.props.context.request}})});return this.props.renderView(viewProps);}},{key:\"_buildUserReviewModal\",value:function _buildUserReviewModal(){return ReviewModal({userReview:this.props.data.userReview.result,product:this.props.data.product.result,resources:_objectSpread({},this.props.resources),context:this.props.context,parentId:this.props.id,parentType:this.props.typeName,isOpen:this.state.isReviewModalOpen,rating:this.state.rating,reviewTitle:this.state.reviewTitle,reviewText:this.state.reviewText,onModalToggle:this._toggleReviewModal,onTitleChange:this._onTitleChange,onTextChange:this._onTextChange,onRatingChange:this._onRatingChange,onReviewComplete:this.writeReviewCallbacks.onReviewSubmitted,renderContextId:'writeReview',returnRef:this._modalToggleRef,hasError:this.state.hasReviewError,telemetryContent:this.telemetryContent});}}]);return WriteReview;}(React.PureComponent);export default WriteReview;","map":{"version":3,"sources":["modules/write-review/write-review.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getTelemetryObject, IModuleProps, ITelemetryContent } from '@msdyn365-commerce-modules/utilities';\nimport { Review } from '@msdyn365-commerce/commerce-entities';\nimport * as Msdyn365 from '@msdyn365-commerce/core';\nimport { SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport classnames from 'classnames';\nimport React from 'react';\nimport { IReviewModalViewProps, ReviewModal, submitReview } from '../../common/review-modal';\nimport { TOGGLE_REVIEW_MODAL_BUTTON_ID } from '../../common/rnrInterface';\nimport { ModalToggle, SignInButton, SignInMessage } from './components/components';\nimport { IWriteReviewData } from './write-review.data';\nimport { IWriteReviewProps } from './write-review.props.autogenerated';\n\nexport interface IWriteReviewCallbacks {\n    toggleModal(): void;\n    updateReviewTitle(title: string): void;\n    updateReviewText(text: string): void;\n    updateRating(rating: number): void;\n    onReviewSubmitted(isSuccessful: boolean): void;\n    submitReview(product: SimpleProduct, title: string, text: string, rating: number, context: Msdyn365.ICoreContext, userReview?: Review, onReviewSubmission?: (isSuccessful: boolean) => void): void;\n}\n\nexport interface IWriteReviewState {\n    rating: number;\n    reviewTitle: string;\n    reviewText: string;\n    isReviewModalOpen: boolean;\n    hasReviewError: boolean;\n}\n\nexport interface IWriteReviewViewProps extends IWriteReviewProps<IWriteReviewData> {\n    state: IWriteReviewState;\n    className: string;\n    callbacks: IWriteReviewCallbacks;\n    signInMessage: React.ReactNode;\n    signInButton: React.ReactNode;\n    modalToggle: React.ReactNode;\n    reviewModal: IReviewModalViewProps;\n    moduleProps: IModuleProps;\n    heading: React.ReactNode;\n}\n\n/**\n * This module is enables user's to leave ratings and reviews on a specific product\n * WriteReview module\n * @extends {React.PureComponent<IWriteReviewProps<IWriteReviewData>>}\n */\nclass WriteReview extends React.PureComponent<IWriteReviewProps<IWriteReviewData>, IWriteReviewState> {\n    private _modalToggleRef: React.RefObject<HTMLButtonElement> | undefined;\n    private telemetryContent: ITelemetryContent;\n\n    public constructor(props: IWriteReviewProps<IWriteReviewData>) {\n        super(props);\n        const {userReview: {result: userReview}} = this.props.data;\n        this._toggleReviewModal = this._toggleReviewModal.bind(this);\n        this._modalToggleRef = React.createRef<HTMLButtonElement>();\n        const rating = userReview ? userReview.rating : 0;\n        const reviewTitle = userReview ? userReview.title : '';\n        const reviewText = userReview ? userReview.reviewText : '';\n\n        this.state = {\n            isReviewModalOpen: false,\n            rating: rating,\n            reviewTitle: reviewTitle,\n            reviewText: reviewText,\n            hasReviewError: false\n        };\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!, this.props.friendlyName, this.props.telemetry);\n    }\n\n    public render(): JSX.Element {\n        const { resources } = this.props;\n        const { className, heading } = this.props.config;\n        const {product: {result: product}, userReview: {result: userReview}} = this.props.data;\n\n        const userInfo = this.props.context && this.props.context.request && this.props.context.request.user;\n        const completeClass = classnames('ms-write-review', className);\n        const viewProps = {\n            ...this.props,\n            state: this.state,\n            className: completeClass,\n            moduleProps: {\n                moduleProps: this.props,\n                className: completeClass,\n                id: null\n            },\n            callbacks: this.writeReviewCallbacks,\n            signInMessage: <SignInMessage text={resources.signInMessage}/>,\n            signInButton: <SignInButton text={resources.signInLabel} ariaLabel={resources.signInAriaLabel} href={userInfo.signInUrl!} telemetryContent={this.telemetryContent}/>,\n            modalToggle: product && (\n                        <ModalToggle\n                            text={userReview? resources.editReviewButtonText : resources.reviewButtonLabel}\n                            ariaLabel={resources.reviewButtonLabel}\n                            innerRef={this._modalToggleRef}\n                            onClick={this._toggleReviewModal}\n                            id={TOGGLE_REVIEW_MODAL_BUTTON_ID}\n                            telemetryContent={this.telemetryContent}\n                        />\n            ),\n            reviewModal: this._buildUserReviewModal(),\n            heading: heading && heading.text && (\n                <Msdyn365.Text\n                    className='ms-write-review__heading'\n                    tag={heading.tag || 'h2'}\n                    text={heading.text}\n                    editProps={{onEdit:this.handleHeadingChange, requestContext: this.props.context.request}}\n                />\n            )\n        } as IWriteReviewViewProps;\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n    public handleHeadingChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.heading!.text = event.target.value;\n\n    private _onTitleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n        this.writeReviewCallbacks.updateReviewTitle(event.target.value);\n    }\n\n    private _onTextChange = (event: React.ChangeEvent<HTMLTextAreaElement>): void => {\n        this.writeReviewCallbacks.updateReviewText(event.target.value);\n    }\n\n    private _onRatingChange = (value: number): void => {\n        this.writeReviewCallbacks.updateRating(value);\n    }\n\n    private _toggleReviewModal  = (): void => {\n        const userReview = this.props.data.userReview.result;\n        if (this.state.isReviewModalOpen) {\n            this.setState({isReviewModalOpen: false, hasReviewError: false});\n        } else {\n            if(userReview) {\n                this.setState({\n                    isReviewModalOpen: true,\n                    reviewText: userReview.reviewText,\n                    reviewTitle: userReview.title,\n                    rating: userReview.rating\n                });\n            } else {\n                this.setState({\n                    isReviewModalOpen: true,\n                    reviewText:  '',\n                    reviewTitle:  '',\n                    rating:  0\n                });\n            }\n        }\n    }\n\n    /**\n     * This method builds the user review modal\n     * @param config The module config\n     */\n    private _buildUserReviewModal(): IReviewModalViewProps {\n        return ReviewModal({\n            userReview: this.props.data.userReview.result,\n            product: this.props.data.product.result,\n            resources: {...this.props.resources},\n            context: this.props.context,\n            parentId: this.props.id,\n            parentType: this.props.typeName,\n            isOpen: this.state.isReviewModalOpen,\n            rating: this.state.rating,\n            reviewTitle: this.state.reviewTitle,\n            reviewText: this.state.reviewText,\n            onModalToggle: this._toggleReviewModal,\n            onTitleChange: this._onTitleChange,\n            onTextChange: this._onTextChange,\n            onRatingChange: this._onRatingChange,\n            onReviewComplete: this.writeReviewCallbacks.onReviewSubmitted,\n            renderContextId: 'writeReview',\n            returnRef: this._modalToggleRef,\n            hasError: this.state.hasReviewError,\n            telemetryContent: this.telemetryContent\n        });\n    }\n\n    // tslint:disable-next-line\n    private writeReviewCallbacks: IWriteReviewCallbacks = {\n        toggleModal: this._toggleReviewModal,\n        updateReviewTitle: (title: string): void => {\n            this.setState({reviewTitle: title});\n        },\n        updateReviewText: (text: string): void => {\n            this.setState({reviewText: text});\n        },\n        updateRating: (rating: number): void => {\n            this.setState({rating: rating});\n        },\n        onReviewSubmitted: (isSuccessful: boolean): void => {\n            if (isSuccessful) {\n                this.setState({isReviewModalOpen: false, hasReviewError: false});\n            } else {\n                this.setState({hasReviewError: true});\n            }\n        },\n        submitReview: submitReview\n    };\n}\n\nexport default WriteReview;\n"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}