{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var tslib_1=require(\"tslib\");var React=tslib_1.__importStar(require(\"react\"));var utilities_1=require(\"../common/utilities\");var Flipper_1=tslib_1.__importDefault(require(\"../flipper/Flipper\"));var SingleSlideCarousel=function(_super){tslib_1.__extends(SingleSlideCarousel,_super);function SingleSlideCarousel(props){var _this=_super.call(this,props)||this;_this.carouselSize=0;_this.slideSize=0;_this.itemSize=0;_this.flipperNextLabel='next';_this.flipperPrevLabel='prev';_this._onResized=function(){_this._onCarouselResized();};_this._nextSlide=_this._nextSlide.bind(_this);_this._previousSlide=_this._previousSlide.bind(_this);_this._handleTouchStart=_this._handleTouchStart.bind(_this);_this._handleTouchEnd=_this._handleTouchEnd.bind(_this);_this._onFocus=_this._onFocus.bind(_this);_this._onResized=_this._onResized.bind(_this);_this.state={showPrevious:false,showNext:false,offset:0};_this.ref=React.createRef();_this.slideRef=React.createRef();_this.itemRef=React.createRef();_this.direction='left';_this.id=props.parentId||'';_this.scrollThreshold=_this.props.touchScrollThreshold!==undefined?_this.props.touchScrollThreshold:100;return _this;}SingleSlideCarousel.prototype.componentDidUpdate=function(){this.carousel=this.ref.current;this.slide=this.slideRef.current;this.item=this.itemRef.current;this._setSizes();this._updateFlippers(this.state.offset);};SingleSlideCarousel.prototype.componentDidMount=function(){this.direction=this.props.vertical?'top':'left';this.carousel=this.ref.current;this.slide=this.slideRef.current;this.item=this.itemRef.current;this._setSizes();this.resizeThrottledEventHandler=window&&utilities_1.addThrottledEvent(window,'resize',this._onResized);this._updateFlippers(0);};SingleSlideCarousel.prototype.componentWillUnmount=function(){window&&window.removeEventListener('resize',this.resizeThrottledEventHandler,false);};SingleSlideCarousel.prototype.render=function(){var isVert=this.props.vertical===true;var slidePositionStyle={};var modifiedChildren=this._getClonedChildren(isVert);slidePositionStyle[this.direction]=this.state.offset+\"px\";var carouselClass=isVert?'msc-ss-carousel-vert':'msc-ss-carousel';var carouselSlideClass=isVert?'msc-ss-carousel-vert-slide':'msc-ss-carousel-slide';var overflowClass=isVert?'msc-ss-carousel-vert-strip':'msc-ss-carousel-strip';var previousFlipperGlyph=isVert?'msi-chevron-up':'msi-chevron-left';var nextFlipperGlyph=isVert?'msi-chevron-down':'msi-chevron-right';var previousFlipperClassName=isVert?'msc-ss-carousel-vert__flipper':'msc-ss-carousel__flipper';var nextFlipperClassName=isVert?'msc-ss-carousel-vert__flipper msc-ss-carousel-vert__flipper--next':'msc-ss-carousel__flipper msc-ss-carousel__flipper--next';var disableClassName=!this.state.showPrevious||!this.state.showNext?'disabled':null;return React.createElement(\"div\",{className:carouselClass,onTouchStart:this._handleTouchStart,onTouchEnd:this._handleTouchEnd},React.createElement(Flipper_1[\"default\"],{id:\"flipperPreviousButton_\"+this.id,glyphProps:{className:previousFlipperGlyph},onClick:this._previousSlide,className:!this.state.showPrevious?previousFlipperClassName+\" \"+disableClassName:\"\"+previousFlipperClassName,\"aria-hidden\":!this.state.showPrevious,\"aria-label\":this.props.flipperPrevLabel,disabled:!this.state.showPrevious?true:false,displayTooltip:this.props.flipperPrevLabel&&this.props.flipperPrevLabel.length>0?true:false,telemetryContent:this.props.telemetryContent,telemetryLabel:this.flipperPrevLabel}),React.createElement(Flipper_1[\"default\"],{id:\"flipperNextButton_\"+this.id,glyphProps:{className:nextFlipperGlyph},onClick:this._nextSlide,className:!this.state.showNext?nextFlipperClassName+\" \"+disableClassName:\"\"+nextFlipperClassName,\"aria-hidden\":!this.state.showNext,\"aria-label\":this.props.flipperNextLabel,disabled:!this.state.showNext?true:false,displayTooltip:this.props.flipperNextLabel&&this.props.flipperNextLabel.length>0?true:false,telemetryContent:this.props.telemetryContent,telemetryLabel:this.flipperNextLabel}),React.createElement(\"div\",{ref:this.ref,className:\"\"+overflowClass},React.createElement(\"ul\",{className:carouselSlideClass,style:slidePositionStyle,ref:this.slideRef,role:this.props.useTabList?'tablist':'list'},modifiedChildren)));};SingleSlideCarousel.prototype._getClonedChildren=function(isVert){var _this=this;return React.Children.map(this.props.children,function(child,index){var castChild=child;if(index===1){return React.cloneElement(castChild,{className:(isVert?SingleSlideCarousel.verticalItemsSelector:SingleSlideCarousel.itemsSelector)+\" \"+castChild.props.className,ref:_this.itemRef,onFocus:_this._onFocus});}return React.cloneElement(castChild,{className:(isVert?SingleSlideCarousel.verticalItemsSelector:SingleSlideCarousel.itemsSelector)+\" \"+castChild.props.className,onFocus:_this._onFocus});});};SingleSlideCarousel.prototype._nextSlide=function(){this._moveSingleSlide(true);};SingleSlideCarousel.prototype._previousSlide=function(){this._moveSingleSlide(false);};SingleSlideCarousel.prototype._handleTouchStart=function(evt){if(evt.touches.length===0){this.scrollStart=undefined;}else{this.scrollStart=this.props.vertical===true?evt.touches[0].screenY:evt.touches[0].screenX;}};SingleSlideCarousel.prototype._handleTouchEnd=function(evt){if(evt.changedTouches.length>0&&this.scrollStart!==undefined){var newTarget=this.props.vertical===true?evt.changedTouches[0].screenY:evt.changedTouches[0].screenX;var delta=newTarget-this.scrollStart;if(delta>this.scrollThreshold){this._previousSlide();}if(delta<-this.scrollThreshold){this._nextSlide();}}this.scrollStart=undefined;return;};SingleSlideCarousel.prototype._moveSingleSlide=function(next){var currentOffset=parseInt(utilities_1.getCSS(this.slide,this.direction),10);var carouselSize=this.carouselSize;var maxScrollCount=Math.floor(carouselSize/this.itemSize);var directionModifier=next?-1:1;currentOffset=!isNaN(currentOffset)&&typeof currentOffset==='number'?currentOffset:0;if(maxScrollCount===0){maxScrollCount=1;}maxScrollCount=carouselSize%this.itemSize===0?maxScrollCount-1:maxScrollCount;maxScrollCount=Math.max(maxScrollCount,1);var maxScrollDistance=maxScrollCount*this.itemSize;var distanceToEdge=next?this.slideSize-carouselSize+currentOffset:Math.abs(currentOffset);distanceToEdge=Math.max(0,distanceToEdge);var offset=maxScrollDistance<=distanceToEdge?maxScrollDistance*directionModifier+currentOffset:distanceToEdge*directionModifier+currentOffset;this._updateFlippers(offset);};SingleSlideCarousel.prototype._setSizes=function(){var item=this.item;if(!!item){this.itemSize=this.props.vertical?item.scrollHeight:item.scrollWidth;}else{this.itemSize=0;}this.carouselSize=this._calculateCarouselSize();this.slideSize=this.slide?this.props.vertical?this.slide.scrollHeight:this.slide.scrollWidth:0;};SingleSlideCarousel.prototype._calculateCarouselSize=function(){if(!this.carousel){return 0;}var carouselStyle=getComputedStyle(this.carousel);var padding=this.props.vertical?parseFloat(carouselStyle.paddingTop||'')+parseFloat(carouselStyle.paddingBottom||''):parseFloat(carouselStyle.paddingLeft||'')+parseFloat(carouselStyle.paddingRight||'');return this.props.vertical?this.carousel.clientHeight-padding:this.carousel.clientWidth-padding;};SingleSlideCarousel.prototype._canScrollPrevious=function(offset){return!isNaN(offset)&&offset!==0;};SingleSlideCarousel.prototype._canScrollNext=function(offset){if(this.carouselSize+Math.abs(offset)>=this.slideSize){return false;}return true;};SingleSlideCarousel.prototype._updateFlippers=function(offset){this.setState({showPrevious:this._canScrollPrevious(offset),showNext:this._canScrollNext(offset),offset:offset});};SingleSlideCarousel.prototype._scrollItemIntoView=function(item){var _this=this;var carouselSize=this.carouselSize;var offset=this.props.vertical?item.offsetTop:item.offsetLeft;var updateOffset=false;var left=parseInt(utilities_1.getCSS(this.slide,'left'),10)||0;var top=parseInt(utilities_1.getCSS(this.slide,'top'),10)||0;if(this.props.vertical){if(top<0&&-top>offset){if(offset!==0){offset=-offset+1;}updateOffset=true;}else if(top+offset>carouselSize-this.itemSize){offset=carouselSize-this.itemSize-offset-1;updateOffset=true;}}else if(this.direction==='left'){if(left<0&&-left>offset){if(offset!==0){offset=-offset+1;}updateOffset=true;}else if(left+offset>carouselSize-this.itemSize){offset=carouselSize-this.itemSize-offset+19;updateOffset=true;}}if(updateOffset){this._updateFlippers(offset);if(this.props.vertical){setTimeout(function(){_this.slide.parentElement.scrollTop=0;},0);}else{setTimeout(function(){_this.slide.parentElement.scrollLeft=0;},0);}}};SingleSlideCarousel.prototype._onFocus=function(event){var target=event.currentTarget;this._scrollItemIntoView(target);};SingleSlideCarousel.prototype._onCarouselResized=function(){this._setSizes();var offset=parseInt(utilities_1.getCSS(this.slide,this.direction),10);if(!isNaN(offset)&&offset<0&&this.slideSize+offset<this.carouselSize){offset=Math.min(0,this.carouselSize-this.slideSize);}this._updateFlippers(offset);};SingleSlideCarousel.itemsSelector='msc-ss-carousel-item';SingleSlideCarousel.verticalItemsSelector='msc-ss-carousel-vert-item';return SingleSlideCarousel;}(React.PureComponent);exports[\"default\"]=SingleSlideCarousel;","map":{"version":3,"sources":["/Users/User/Documents/wkea-ec/Msdyn365.Commerce.Online/node_modules/@msdyn365-commerce-modules/utilities/src/single-slide-carousel/SingleSlideCarousel.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { addThrottledEvent, getCSS } from '../common/utilities';\nimport Flipper from '../flipper/Flipper';\nimport {ISingleSlideCarouselProps} from './SingleSlideCarousel.props';\n\ninterface ISingleSlideCarouselState {\n    showPrevious: boolean;\n    showNext: boolean;\n    offset: number;\n}\n\n/**\n * SingleSlideCarousel - yup\n */\nexport default class SingleSlideCarousel extends React.PureComponent<ISingleSlideCarouselProps, ISingleSlideCarouselState> {\n    private static itemsSelector: string = 'msc-ss-carousel-item';\n    private static verticalItemsSelector: string = 'msc-ss-carousel-vert-item';\n    private direction: string;\n    private item: HTMLElement | undefined;\n    private slide: HTMLElement | undefined;\n    private carousel: HTMLElement | undefined;\n    private carouselSize: number = 0;\n    private slideSize: number = 0;\n    private itemSize: number = 0;\n    private resizeThrottledEventHandler?: (event: Event) => void;\n    private ref: React.RefObject<HTMLDivElement>;\n    private slideRef: React.RefObject<HTMLUListElement>;\n    private itemRef: React.RefObject<HTMLLIElement>;\n    private id: string;\n    private scrollStart: number | undefined;\n    private scrollThreshold: number;\n    private flipperNextLabel: string = 'next';\n    private flipperPrevLabel: string = 'prev';\n\n    constructor (props: ISingleSlideCarouselProps) {\n        super(props);\n        this._nextSlide = this._nextSlide.bind(this);\n        this._previousSlide = this._previousSlide.bind(this);\n        this._handleTouchStart = this._handleTouchStart.bind(this);\n        this._handleTouchEnd = this._handleTouchEnd.bind(this);\n        this._onFocus = this._onFocus.bind(this);\n        this._onResized = this._onResized.bind(this);\n        this.state = { showPrevious: false, showNext: false, offset: 0 };\n        this.ref = React.createRef();\n        this.slideRef = React.createRef();\n        this.itemRef = React.createRef();\n        this.direction = 'left';\n        this.id = props.parentId || '';\n        this.scrollThreshold = this.props.touchScrollThreshold !== undefined ? this.props.touchScrollThreshold : 100;\n    }\n\n    public componentDidUpdate (): void {\n        this.carousel = this.ref.current!;\n        this.slide = this.slideRef.current!;\n        this.item = this.itemRef.current!;\n        this._setSizes();\n        this._updateFlippers(this.state.offset);\n    }\n\n    public componentDidMount (): void {\n        this.direction = this.props.vertical ? 'top' : 'left';\n        this.carousel = this.ref.current!;\n        this.slide = this.slideRef.current!;\n        this.item = this.itemRef.current!;\n        this._setSizes();\n        this.resizeThrottledEventHandler =\n            window && addThrottledEvent(window, 'resize', this._onResized as EventListener);\n        this._updateFlippers(0);\n    }\n\n    public componentWillUnmount (): void {\n        window && window.removeEventListener('resize', this.resizeThrottledEventHandler!, false);\n    }\n\n    public render (): JSX.Element {\n        const isVert: boolean = this.props.vertical === true;\n        const slidePositionStyle = {} as React.CSSProperties;\n        const modifiedChildren = this._getClonedChildren(isVert);\n        slidePositionStyle[this.direction] = `${this.state.offset}px`;\n        const carouselClass = (isVert) ? 'msc-ss-carousel-vert' : 'msc-ss-carousel';\n        const carouselSlideClass = (isVert) ? 'msc-ss-carousel-vert-slide' : 'msc-ss-carousel-slide';\n        const overflowClass = (isVert) ? 'msc-ss-carousel-vert-strip' : 'msc-ss-carousel-strip';\n        const previousFlipperGlyph = (isVert) ? 'msi-chevron-up' : 'msi-chevron-left';\n        const nextFlipperGlyph = (isVert) ? 'msi-chevron-down' : 'msi-chevron-right';\n        const previousFlipperClassName = (isVert) ? 'msc-ss-carousel-vert__flipper' : 'msc-ss-carousel__flipper';\n        const nextFlipperClassName = (isVert) ? 'msc-ss-carousel-vert__flipper msc-ss-carousel-vert__flipper--next' : 'msc-ss-carousel__flipper msc-ss-carousel__flipper--next';\n        const disableClassName = !this.state.showPrevious || !this.state.showNext ? 'disabled' : null;\n        return (\n            <div\n                className={carouselClass}\n                onTouchStart={this._handleTouchStart}\n                onTouchEnd={this._handleTouchEnd}\n            >\n                    <Flipper\n                        id= {`flipperPreviousButton_${this.id}`}\n                        glyphProps={{ className: previousFlipperGlyph }}\n                        onClick={this._previousSlide}\n                        className={!this.state.showPrevious ? `${previousFlipperClassName} ${disableClassName}`: `${previousFlipperClassName}`}\n                        aria-hidden={!this.state.showPrevious}\n                        aria-label={this.props.flipperPrevLabel}\n                        disabled={!this.state.showPrevious ? true : false}\n                        displayTooltip={this.props.flipperPrevLabel && this.props.flipperPrevLabel.length > 0 ? true : false}\n                        telemetryContent={this.props.telemetryContent}\n                        telemetryLabel={this.flipperPrevLabel}\n                    />\n                    <Flipper\n                        id= {`flipperNextButton_${this.id}`}\n                        glyphProps={{ className: nextFlipperGlyph }}\n                        onClick={this._nextSlide}\n                        className={!this.state.showNext ? `${nextFlipperClassName} ${disableClassName}`: `${nextFlipperClassName}`}\n                        aria-hidden={!this.state.showNext}\n                        aria-label={this.props.flipperNextLabel}\n                        disabled={!this.state.showNext? true : false}\n                        displayTooltip={this.props.flipperNextLabel && this.props.flipperNextLabel.length > 0 ? true : false}\n                        telemetryContent={this.props.telemetryContent}\n                        telemetryLabel={this.flipperNextLabel}\n                    />\n                    <div ref={this.ref} className={`${overflowClass}`}>\n                    <ul className={carouselSlideClass} style={slidePositionStyle} ref={this.slideRef} role={this.props.useTabList ? 'tablist' : 'list'}>\n                        {modifiedChildren}\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n\n    private _getClonedChildren (isVert: boolean): React.ReactElement<HTMLLIElement>[] {\n        return React.Children.map(this.props.children, (child: React.ReactNode, index: number) => {\n            const castChild = (child as React.ReactChild) as React.ReactElement<HTMLLIElement>;\n            if (index === 1) {\n                return React.cloneElement(castChild, {\n                    className: `${isVert ? SingleSlideCarousel.verticalItemsSelector : SingleSlideCarousel.itemsSelector} ${castChild.props.className}`,\n                    // @ts-ignore\n                    ref: this.itemRef,\n                    onFocus: this._onFocus\n                });\n            }\n            return React.cloneElement(castChild, {\n                className: `${isVert ? SingleSlideCarousel.verticalItemsSelector : SingleSlideCarousel.itemsSelector} ${castChild.props.className}`,\n                // @ts-ignore\n                onFocus: this._onFocus\n            });\n        });\n    }\n\n    private _nextSlide (): void {\n        this._moveSingleSlide(true);\n    }\n\n    private _previousSlide (): void {\n        this._moveSingleSlide(false);\n    }\n\n    private _handleTouchStart(evt: React.TouchEvent<HTMLDivElement>): void {\n        if (evt.touches.length === 0) {\n            this.scrollStart = undefined;\n        } else {\n            this.scrollStart = this.props.vertical === true ? evt.touches[0].screenY : evt.touches[0].screenX;\n        }\n    }\n\n    private _handleTouchEnd(evt: React.TouchEvent<HTMLDivElement>): void {\n        if (evt.changedTouches.length > 0 && this.scrollStart !== undefined) {\n            const newTarget: number = this.props.vertical === true ? evt.changedTouches[0].screenY : evt.changedTouches[0].screenX;\n\n            const delta = newTarget - this.scrollStart;\n\n            if (delta > this.scrollThreshold) {\n                this._previousSlide();\n            }\n\n            if (delta < -this.scrollThreshold) {\n                this._nextSlide();\n            }\n        }\n\n        this.scrollStart = undefined;\n\n        return;\n    }\n\n    private _moveSingleSlide (next: boolean): void {\n        let currentOffset = parseInt(getCSS(this.slide!, this.direction), 10);\n        const carouselSize = this.carouselSize;\n        let maxScrollCount = Math.floor(carouselSize / (this.itemSize));\n        const directionModifier = next ? -1 : 1;\n        currentOffset = !isNaN(currentOffset) && typeof currentOffset === 'number' ? currentOffset : 0;\n\n        if (maxScrollCount === 0) {\n            maxScrollCount = 1;\n        }\n\n        maxScrollCount = carouselSize % (this.itemSize) === 0 ? maxScrollCount - 1 : maxScrollCount;\n        maxScrollCount = Math.max(maxScrollCount, 1);\n        const maxScrollDistance = maxScrollCount * (this.itemSize);\n        let distanceToEdge = next ? this.slideSize - carouselSize + currentOffset : Math.abs(currentOffset);\n        distanceToEdge = Math.max(0, distanceToEdge);\n\n        const offset =\n            maxScrollDistance <= distanceToEdge\n                ? maxScrollDistance * directionModifier + currentOffset\n                : distanceToEdge * directionModifier + currentOffset;\n\n        this._updateFlippers(offset);\n    }\n\n    private _setSizes (): void {\n        const item = this.item;\n        if (!!item) {\n            this.itemSize = this.props.vertical ? item.scrollHeight : item.scrollWidth;\n        } else {\n            this.itemSize = 0;\n        }\n\n        this.carouselSize = this._calculateCarouselSize();\n        this.slideSize = this.slide ? (this.props.vertical ? this.slide.scrollHeight : this.slide.scrollWidth) : 0;\n    }\n\n    private _calculateCarouselSize (): number {\n        if (!this.carousel) {\n            return 0;\n        }\n\n        const carouselStyle = getComputedStyle(this.carousel);\n\n        const padding = this.props.vertical ? parseFloat(carouselStyle.paddingTop || '')  + parseFloat(carouselStyle.paddingBottom || '')\n            : parseFloat(carouselStyle.paddingLeft || '')  + parseFloat(carouselStyle.paddingRight || '');\n\n        return this.props.vertical ? this.carousel.clientHeight - padding : this.carousel.clientWidth - padding;\n    }\n\n    private _canScrollPrevious (offset: number): boolean {\n        return !isNaN(offset) && offset !== 0;\n    }\n\n    private _canScrollNext (offset: number): boolean {\n        if (this.carouselSize + Math.abs(offset) >= this.slideSize) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private _updateFlippers (offset: number): void {\n        this.setState({\n            showPrevious: this._canScrollPrevious(offset),\n            showNext: this._canScrollNext(offset),\n            offset: offset\n        });\n    }\n\n    private _scrollItemIntoView (item: HTMLElement): void {\n        const carouselSize = this.carouselSize;\n        let offset = (this.props.vertical) ? item.offsetTop : item.offsetLeft;\n        let updateOffset = false;\n\n        const left = parseInt(getCSS(this.slide!, 'left'), 10) || 0;\n        const top = parseInt(getCSS(this.slide!, 'top'), 10) || 0;\n\n        if (this.props.vertical) {\n            if (top < 0 && -top > offset) {\n                if (offset !== 0) {\n                    offset = -offset + 1;\n                }\n                updateOffset = true;\n            } else if (top + offset > carouselSize - this.itemSize) {\n                offset = carouselSize - this.itemSize - offset - 1;\n                updateOffset = true;\n            }\n        } else if (this.direction === 'left') {\n            if (left < 0 && -left > offset) {\n                if (offset !== 0) {\n                    offset = -offset + 1;\n                }\n                updateOffset = true;\n            } else if (left + offset > carouselSize - this.itemSize) {\n                offset = carouselSize - this.itemSize - offset + 19;\n                updateOffset = true;\n            }\n        }\n\n        if (updateOffset) {\n            this._updateFlippers(offset);\n\n            if (this.props.vertical) {\n                setTimeout(() => {\n                    (this.slide as Node).parentElement!.scrollTop = 0;\n                },         0);\n            } else  {\n                setTimeout(() => {\n                    (this.slide as Node).parentElement!.scrollLeft = 0;\n                },         0);\n            }\n        }\n    }\n\n    private _onFocus (event: React.FocusEvent): void {\n        const target = event.currentTarget as HTMLElement;\n        this._scrollItemIntoView(target);\n    }\n\n    private _onCarouselResized (): void {\n        this._setSizes();\n        let offset = parseInt(getCSS(this.slide!, this.direction), 10);\n\n        // Ensure the carousel slide fits across the entire alotted space\n        if (!isNaN(offset) && offset < 0 && this.slideSize + offset < this.carouselSize) {\n            offset = Math.min(0, this.carouselSize - this.slideSize);\n        }\n\n        this._updateFlippers(offset);\n    }\n\n    private _onResized = (): void => {\n        this._onCarouselResized();\n    };\n}\n"]},"metadata":{},"sourceType":"script"}