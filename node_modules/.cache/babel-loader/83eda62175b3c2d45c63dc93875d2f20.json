{"ast":null,"code":"import\"core-js/modules/es.promise.js\";import{Alert,Button}from'@msdyn365-commerce-modules/utilities';import*as React from'react';export const getAccountPaymentFormEditMode=options=>{const{resources,onAddPayment,amount,onChangePaymentAmount,maxAmount,customer,customerCreatedDate,availableCredit,showCreditLimit,errorMessage,onToggleCreditSection,creditSectionIsExpanded,orderTotal,excessCredit,onRemovePayment,appliedAmount}=options;const{addPaymentButtonLabel,inputAmountLabel,inputAmountAriaLabel,customerSinceLabel,accountCreditLabel,creditDetailsSectionLabel,orderTotalLabel,availableCreditLabel,creditExcessLabel,appliedCustomerAccountPaymentLabel,removeCustomerAccountPaymentLabel}=resources;const inputLabel=/*#__PURE__*/React.createElement(\"span\",{id:'ms-checkout-customer-account__label',className:'ms-checkout-customer-account__input-label'},inputAmountLabel);const onAddAccountPayment=async e=>{e.preventDefault();await onAddPayment();};const formProps={className:'ms-checkout-customer-account__form-edit',onSubmit:onAddAccountPayment,tag:'form'};const addPaymentButton=/*#__PURE__*/React.createElement(Button,{className:'ms-checkout-customer-account__btn-pay',onClick:onAddAccountPayment,disabled:amount>maxAmount||amount<0},addPaymentButtonLabel);const onChangeAmount=e=>{const value=parseFloat(e.target.value||'0');onChangePaymentAmount(value);};const inputAmount=/*#__PURE__*/React.createElement(\"input\",{type:'number',className:'ms-checkout-customer-account__input-amount form-control',value:amount,onInput:onChangeAmount,\"aria-label\":inputAmountAriaLabel,\"aria-valuemin\":0,\"aria-valuemax\":maxAmount,\"aria-valuenow\":amount,min:0,max:maxAmount});const customerName=/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__account-name'},customer===null||customer===void 0?void 0:customer.Name);const customerAccountNumber=/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__account-number'},'#',customer===null||customer===void 0?void 0:customer.AccountNumber);const customerSince=/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__customer-since'},customerSinceLabel,customerCreatedDate);const accountCredit=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__account-credit-label'},accountCreditLabel),showCreditLimit&&/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__account-credit'},availableCredit),/*#__PURE__*/React.createElement(\"span\",{className:creditSectionIsExpanded?'ms-checkout-customer-account__account-credit-toggle-up':'ms-checkout-customer-account__account-credit-toggle-down',onClick:onToggleCreditSection,role:'button'}));const accountDetails=creditSectionIsExpanded?/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__credit-details-section'},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__account-credit-current-order-preview'},/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__account-credit-current-order-icon'}),/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__account-credit-current-order-preview-label'},creditDetailsSectionLabel))),/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__available-credit-section'},/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__available-credit-label'},availableCreditLabel),/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__available-credit'},availableCredit)),/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__order-total-section'},/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__order-total-label'},orderTotalLabel),/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__order-total'},orderTotal)),/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__excess-credit-section'},/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__excess-credit-label'},creditExcessLabel),/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__excess-credit'},excessCredit))):undefined;const alert=/*#__PURE__*/React.createElement(Alert,{tag:'span',id:'ms-checkout-customer-account__error',className:'ms-checkout-customer-account__input-error',role:'alert',assertive:false,fade:false,includeAlertClass:false,isOpen:!!errorMessage},errorMessage);const appliedLine=appliedAmount?/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__applied-line'},/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__applied-label'},appliedCustomerAccountPaymentLabel),/*#__PURE__*/React.createElement(\"span\",{className:'ms-checkout-customer-account__applied-amount'},appliedAmount),/*#__PURE__*/React.createElement(\"a\",{className:'ms-checkout-customer-account__remove',onClick:onRemovePayment,role:'button'},removeCustomerAccountPaymentLabel)):undefined;const bottomBorder=/*#__PURE__*/React.createElement(\"div\",{className:'ms-checkout-customer-account__bottom-border'});return{formProps,inputLabel,inputAmount,addPaymentButton,customerName,customerAccountNumber,customerSince,accountCredit,alert,accountDetails,appliedLine,bottomBorder};};","map":{"version":3,"sources":["modules/checkout-customer-account-payment/components/get-account-payment-form-edit-mode.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Alert, Button, INodeProps, NodeTag } from '@msdyn365-commerce-modules/utilities';\nimport { Customer } from '@msdyn365-commerce/retail-proxy';\nimport * as React from 'react';\nimport { ICheckoutCustomerAccountPaymentResources } from '../checkout-customer-account-payment.props.autogenerated';\n\nexport interface IGetAccountPaymentEditViewFormInput {\n    resources: ICheckoutCustomerAccountPaymentResources;\n    amount: number;\n    maxAmount: number;\n    customer: Customer | undefined;\n    customerCreatedDate: string;\n    availableCredit: string;\n    showCreditLimit: boolean;\n    errorMessage: string | undefined;\n    creditSectionIsExpanded: boolean;\n    orderTotal: string;\n    excessCredit: string | undefined;\n    appliedAmount: string | undefined;\n    onAddPayment(): Promise<void>;\n    onChangePaymentAmount(newAmount: number): void;\n    onToggleCreditSection(): void;\n    onRemovePayment(): Promise<void>;\n}\n\nexport interface IAccountPaymentEditViewForm {\n    formProps: INodeProps;\n    inputLabel: React.ReactNode;\n    inputAmount: React.ReactNode;\n    addPaymentButton: React.ReactNode;\n    customerName: React.ReactNode;\n    customerAccountNumber: React.ReactNode;\n    customerSince: React.ReactNode;\n    accountCredit: React.ReactNode;\n    alert: React.ReactNode;\n    accountDetails: React.ReactNode;\n    appliedLine: React.ReactNode;\n    bottomBorder: React.ReactNode;\n}\n\n// tslint:disable-next-line:max-func-body-length\nexport const getAccountPaymentFormEditMode = (options: IGetAccountPaymentEditViewFormInput): IAccountPaymentEditViewForm => {\n    const {\n        resources,\n        onAddPayment,\n        amount,\n        onChangePaymentAmount,\n        maxAmount,\n        customer,\n        customerCreatedDate,\n        availableCredit,\n        showCreditLimit,\n        errorMessage,\n        onToggleCreditSection,\n        creditSectionIsExpanded,\n        orderTotal,\n        excessCredit,\n        onRemovePayment,\n        appliedAmount\n    } = options;\n\n    const { addPaymentButtonLabel, inputAmountLabel, inputAmountAriaLabel, customerSinceLabel, accountCreditLabel, creditDetailsSectionLabel, orderTotalLabel, availableCreditLabel, creditExcessLabel, appliedCustomerAccountPaymentLabel,\n    removeCustomerAccountPaymentLabel } = resources;\n\n    const inputLabel = (\n        <span id='ms-checkout-customer-account__label' className='ms-checkout-customer-account__input-label'>\n            {inputAmountLabel}\n        </span>\n    );\n\n    const onAddAccountPayment = async (e: React.SyntheticEvent): Promise<void> => {\n        e.preventDefault();\n        await onAddPayment();\n    };\n\n    const formProps = {\n        className: 'ms-checkout-customer-account__form-edit',\n        onSubmit: onAddAccountPayment,\n        tag: 'form' as NodeTag\n    };\n\n    const addPaymentButton = (\n        <Button\n            className='ms-checkout-customer-account__btn-pay'\n            onClick={onAddAccountPayment}\n            disabled={(amount > maxAmount) || (amount < 0) }\n        >\n            {addPaymentButtonLabel}\n        </Button>\n    );\n\n    const onChangeAmount = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const value = parseFloat(e.target.value || '0');\n        onChangePaymentAmount(value);\n    };\n\n    const inputAmount = (\n        <input\n            type='number'\n            className='ms-checkout-customer-account__input-amount form-control'\n            value= {amount}\n            onInput= {onChangeAmount}\n            aria-label= {inputAmountAriaLabel}\n            aria-valuemin= {0}\n            aria-valuemax={maxAmount}\n            aria-valuenow={amount}\n            min = {0}\n            max ={maxAmount}\n        />\n    );\n\n    const customerName = (\n        <div\n            className='ms-checkout-customer-account__account-name'\n        >\n            {customer?.Name}\n        </div>\n    );\n\n    const customerAccountNumber = (\n        <div\n            className='ms-checkout-customer-account__account-number'\n        >\n            {'#'}{customer?.AccountNumber}\n        </div>\n    );\n\n    const customerSince = (\n        <div\n            className='ms-checkout-customer-account__customer-since'\n        >\n            {customerSinceLabel}{customerCreatedDate}\n        </div>\n    );\n\n    const accountCredit = (\n            <>\n                <span\n                    className='ms-checkout-customer-account__account-credit-label'\n                >\n                    {accountCreditLabel}\n                </span>\n                {showCreditLimit && <span\n                    className='ms-checkout-customer-account__account-credit'\n                >\n                    {availableCredit}\n                </span>}\n                <span\n                    className= {creditSectionIsExpanded ? 'ms-checkout-customer-account__account-credit-toggle-up' : 'ms-checkout-customer-account__account-credit-toggle-down'}\n                    onClick={onToggleCreditSection}\n                    role='button'\n                />\n            </>\n    );\n\n    const accountDetails = (\n        creditSectionIsExpanded ?\n        (\n        <div\n            className='ms-checkout-customer-account__credit-details-section'\n        >\n            <>\n                <div\n                    className='ms-checkout-customer-account__account-credit-current-order-preview'\n                >\n                    <span\n                        className='ms-checkout-customer-account__account-credit-current-order-icon'\n                    />\n                    <span\n                        className='ms-checkout-customer-account__account-credit-current-order-preview-label'\n                    >\n                        {creditDetailsSectionLabel}\n                    </span>\n                </div>\n            </>\n            <div\n                className='ms-checkout-customer-account__available-credit-section'\n            >\n                <span\n                    className='ms-checkout-customer-account__available-credit-label'\n                >\n                    {availableCreditLabel}\n                </span>\n                <span\n                    className='ms-checkout-customer-account__available-credit'\n                >\n                    {availableCredit}\n                </span>\n            </div>\n            <div\n                className='ms-checkout-customer-account__order-total-section'\n            >\n                <span\n                    className='ms-checkout-customer-account__order-total-label'\n                >\n                    {orderTotalLabel}\n                </span>\n                <span\n                    className='ms-checkout-customer-account__order-total'\n                >\n                    {orderTotal}\n                </span>\n            </div>\n            <div\n                className='ms-checkout-customer-account__excess-credit-section'\n            >\n                <span\n                    className='ms-checkout-customer-account__excess-credit-label'\n                >\n                    {creditExcessLabel}\n                </span>\n                <span\n                    className='ms-checkout-customer-account__excess-credit'\n                >\n                    {excessCredit}\n                </span>\n            </div>\n        </div>\n\n        ): undefined\n    );\n\n    const alert = (\n        <Alert\n            tag='span'\n            id='ms-checkout-customer-account__error'\n            className='ms-checkout-customer-account__input-error'\n            role='alert'\n            assertive={false}\n            fade={false}\n            includeAlertClass={false}\n            isOpen={!!errorMessage}\n        >\n            {errorMessage}\n        </Alert>\n    );\n\n    const appliedLine = (\n        appliedAmount ?\n        (\n            <div\n                className='ms-checkout-customer-account__applied-line'\n            >\n                <span\n                    className='ms-checkout-customer-account__applied-label'\n                >\n                    {appliedCustomerAccountPaymentLabel}\n                </span>\n                <span\n                    className='ms-checkout-customer-account__applied-amount'\n                >\n                    {appliedAmount}\n                </span>\n                <a\n                    className='ms-checkout-customer-account__remove'\n                    onClick={onRemovePayment}\n                    role='button'\n                >\n                    {removeCustomerAccountPaymentLabel}\n                </a>\n            </div>\n        ) : undefined\n    );\n\n    const bottomBorder = (\n        <div className = 'ms-checkout-customer-account__bottom-border' />\n    );\n\n    return {\n        formProps,\n        inputLabel,\n        inputAmount,\n        addPaymentButton,\n        customerName,\n        customerAccountNumber,\n        customerSince,\n        accountCredit,\n        alert,\n        accountDetails,\n        appliedLine,\n        bottomBorder\n    };\n};"],"sourceRoot":"./src/"},"metadata":{},"sourceType":"module"}