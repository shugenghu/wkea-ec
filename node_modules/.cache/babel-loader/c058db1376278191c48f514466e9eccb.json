{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _asyncToGenerator from\"@babel/runtime/helpers/esm/asyncToGenerator\";/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/import{createObservableDataAction,sendRequest}from'@msdyn365-commerce/core';import{GetRatingsSummaryInput,getSelectedProductIdFromActionInput}from'./index';import{getRnrEndpointId,getRnrPartnerId}from'./utilities/getRnrKeys';export var createInput=function createInput(input){var productId=getSelectedProductIdFromActionInput(input);if(productId){return new GetRatingsSummaryInput(productId,getRnrPartnerId(input),getRnrEndpointId(input));}throw new Error('[GetRatingsSummary] Not all necessary parameters found while creating Input for getRatingsSummaryApi');};/**\r\n * This function gets the ratings summary\r\n */function getRatingsSummary(_x,_x2){return _getRatingsSummary.apply(this,arguments);}function _getRatingsSummary(){_getRatingsSummary=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input,ctx){var requestUrl;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(inputIsValid(input)){_context.next=3;break;}ctx.trace(\"[GetRatingsSummary] Failed to get ratings summary for product\");return _context.abrupt(\"return\",{});case 3:requestUrl=\"\".concat(input.serviceEndpoint,\"/v2.0/ratings/product/\").concat(input.productId,\"/summary?\")+\"tenantId=\".concat(input.tenantId);return _context.abrupt(\"return\",sendRequest(requestUrl,'get').then(function(response){return response.data;})[\"catch\"](function(error){ctx.trace(\"[GetRatingsSummary] Failed to get ratings summary for product\");throw error;}));case 5:case\"end\":return _context.stop();}}},_callee);}));return _getRatingsSummary.apply(this,arguments);}function inputIsValid(input){return input&&input.productId.length>0&&input.tenantId.length>0;}export default createObservableDataAction({id:'@msdyn365-commerce-modules/retail-actions/get-ratings-summary',action:getRatingsSummary,input:createInput});","map":{"version":3,"sources":["../../src/get-ratings-summary.ts"],"names":[],"mappings":"uIAAA;;;AAGgG,gGAGhG,OAAS,0BAAT,CAAkH,WAAlH,KAAqI,yBAArI,CACA,OAAS,sBAAT,CAAiC,mCAAjC,KAA4E,SAA5E,CACA,OAAS,gBAAT,CAA2B,eAA3B,KAAkD,wBAAlD,CAEA,MAAO,IAAM,CAAA,WAAW,CAAG,QAAd,CAAA,WAAc,CAAC,KAAD,CAA8D,CACrF,GAAM,CAAA,SAAS,CAAG,mCAAmC,CAAC,KAAD,CAArD,CACA,GAAI,SAAJ,CAAe,CACX,MAAO,IAAI,CAAA,sBAAJ,CAA2B,SAA3B,CAAsC,eAAe,CAAC,KAAD,CAArD,CAA8D,gBAAgB,CAAC,KAAD,CAA9E,CAAP,CACH,CACD,KAAM,IAAI,CAAA,KAAJ,CAAU,sGAAV,CAAN,CACH,CANM,CAQP;;AAEG,G,QACY,CAAA,iB,mKAAf,iBAAiC,KAAjC,CAAgE,GAAhE,oIACS,YAAY,CAAC,KAAD,CADrB,yBAEQ,GAAG,CAAC,KAAJ,kEAFR,gCAGe,EAHf,SAMU,UANV,CAMuB,UAAG,KAAK,CAAC,eAAT,kCAAiD,KAAK,CAAC,SAAvD,iCACH,KAAK,CAAC,QADH,CANvB,iCAQW,WAAW,CAAiB,UAAjB,CAA6B,KAA7B,CAAX,CAA+C,IAA/C,CAAoD,SAAC,QAAD,CAAa,CACpE,MAAO,CAAA,QAAQ,CAAC,IAAhB,CACH,CAFM,WAEE,SAAC,KAAD,CAAU,CACf,GAAG,CAAC,KAAJ,kEACA,KAAM,CAAA,KAAN,CACH,CALM,CARX,wD,oDAgBA,QAAS,CAAA,YAAT,CAAsB,KAAtB,CAAmD,CAC/C,MAAO,CAAA,KAAK,EAAI,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAyB,CAAlC,EAAuC,KAAK,CAAC,QAAN,CAAe,MAAf,CAAwB,CAAtE,CACH,CAED,cAAe,CAAA,0BAA0B,CAAC,CACtC,EAAE,CAAE,+DADkC,CAEtC,MAAM,CAA2B,iBAFK,CAGtC,KAAK,CAAE,WAH+B,CAAD,CAAzC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { RatingsSummary } from '@msdyn365-commerce/commerce-entities';\nimport { createObservableDataAction, IAction, IActionContext, IActionInput, IAny, ICreateActionContext, IGeneric, sendRequest } from '@msdyn365-commerce/core';\nimport { GetRatingsSummaryInput, getSelectedProductIdFromActionInput } from './index';\nimport { getRnrEndpointId, getRnrPartnerId } from './utilities/getRnrKeys';\n\nexport const createInput = (input: ICreateActionContext<IGeneric<IAny>>): IActionInput => {\n    const productId = getSelectedProductIdFromActionInput(input);\n    if (productId) {\n        return new GetRatingsSummaryInput(productId, getRnrPartnerId(input), getRnrEndpointId(input));\n    }\n    throw new Error('[GetRatingsSummary] Not all necessary parameters found while creating Input for getRatingsSummaryApi');\n};\n\n/**\n * This function gets the ratings summary\n */\nasync function getRatingsSummary(input: GetRatingsSummaryInput, ctx: IActionContext): Promise<RatingsSummary> {\n    if (!inputIsValid(input)) {\n        ctx.trace(`[GetRatingsSummary] Failed to get ratings summary for product`);\n        return {};\n    }\n\n    const requestUrl = `${input.serviceEndpoint}/v2.0/ratings/product/${input.productId}/summary?` +\n        `tenantId=${input.tenantId}`;\n    return sendRequest<RatingsSummary>(requestUrl, 'get').then((response) => {\n        return response.data;\n    }).catch((error) => {\n        ctx.trace(`[GetRatingsSummary] Failed to get ratings summary for product`);\n        throw error;\n    });\n}\n\nfunction inputIsValid(input: GetRatingsSummaryInput): boolean {\n    return input && input.productId.length > 0 && input.tenantId.length > 0;\n}\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/retail-actions/get-ratings-summary',\n    action: <IAction<RatingsSummary>>getRatingsSummary,\n    input: createInput\n});"],"sourceRoot":""},"metadata":{},"sourceType":"module"}