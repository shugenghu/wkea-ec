{"version":3,"file":"cart.view.js","sourceRoot":"./src/","sources":["modules/cart/cart.view.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IOrderSummaryLines } from '@msdyn365-commerce-modules/order-summary-utilities';\nimport { INodeProps, Node } from '@msdyn365-commerce-modules/utilities';\nimport * as React from 'react';\nimport { ICartViewProps, IOrderSummaryErrors } from './cart';\nimport { ICartlinesViewProps } from './components/cart-line-items';\n\nconst _renderCartlines = (cartLines: ICartlinesViewProps[] | undefined, cartEmptyText: string, CartlinesWrapper: INodeProps, storeSelector: React.ReactNode | undefined,\n                          backToShoppingButton: React.ReactNode, waitingComponent: React.ReactNode, cartLoadingStatus: string, cartDataResult: boolean): JSX.Element[] | JSX.Element => {\n\n    if (cartLoadingStatus) {\n        return <>{cartLoadingStatus}</>;\n    }\n    if (cartLines) {\n        return cartLines.map((cartLine, index) => {\n            return (\n                <div className='msc-cart-lines-item' key={index}>\n                    {cartLine.cartline}\n                    {\n                        storeSelector && cartLine.pickUpInStore ?\n                            <Node {...cartLine.pickUpInStore.ContainerProps}>\n                                {cartLine.pickUpInStore.defaultComponent}\n                            </Node> :\n                            null\n                    }\n                    {\n                        cartLine.addToOrderTemplate ? (\n                            <div className='msc-cart-line__extra-actions'>\n                            {cartLine.remove}\n                            {cartLine.addToWishlist}\n                            {cartLine.addToOrderTemplate}\n                            </div>\n                        ) : (\n                            <>\n                                {cartLine.remove}\n                                {cartLine.addToWishlist}\n                            </>\n                        )\n                    }\n                </div>\n            );\n        });\n    } else {\n        return (cartDataResult ?\n            (\n                <div className='msc-cart__empty-cart'>\n                    <p className='msc-cart-line'>{cartEmptyText}</p>\n                    {backToShoppingButton}\n                </div>\n            ) : <>{waitingComponent}</>\n        );\n    }\n};\n\nconst _renderErrorBlock = (errorData: IOrderSummaryErrors | undefined): JSX.Element | null => {\n    if (!errorData || errorData.errors.length === 0) {\n        return null;\n    }\n    return (\n        <Node {...errorData.Wrapper}>\n            {errorData.header}\n            {errorData.errors}\n        </Node>\n    );\n};\n\nconst _renderOrderSummarylines = (orderSummaryLines: IOrderSummaryLines | undefined, OrderSummaryItems: INodeProps, props: ICartViewProps): JSX.Element | null => {\n    if (!orderSummaryLines) {\n        props.context.telemetry.error('OrderSummary content is empty, module wont render');\n        return null;\n    }\n    return (\n        <Node {...OrderSummaryItems}>\n            {props.promoCode}\n            {orderSummaryLines.subtotal}\n            {orderSummaryLines.shipping}\n            {orderSummaryLines.otherCharge}\n            {orderSummaryLines.tax}\n            {orderSummaryLines.totalDiscounts ? orderSummaryLines.totalDiscounts : null}\n            {orderSummaryLines.orderTotal}\n        </Node>\n    );\n};\n\nconst CartView: React.FC<ICartViewProps> = (props: ICartViewProps) => (\n    <div className={props.className} id={props.id} {...props.renderModuleAttributes(props)}>\n        {props.title}\n        <Node {...props.CartlinesWrapper}>\n            {_renderCartlines(props.cartlines, props.resources.emptyCartText, props.CartlinesWrapper, props.storeSelector, props.backToShoppingButton, props.waitingComponent, props.cartLoadingStatus, props.cartDataResult)}\n        </Node>\n        {props.orderSummaryHeading &&\n            < Node {...props.OrderSummaryWrapper}>\n                {props.orderSummaryHeading}\n                {_renderOrderSummarylines(props.orderSummaryLineitems, props.OrderSummaryItems, props)}\n                {_renderErrorBlock(props.OrderSummaryErrors)}\n                {props.checkoutAsSignInUserButton}\n                {props.checkoutAsGuestButton}\n                {props.backToShoppingButton}\n                {props.createTemplateFromCartButton}\n            </Node>\n        }\n        {props.storeSelector}\n    </div>\n);\n\nexport default CartView;"]}