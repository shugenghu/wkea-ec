{"version":3,"file":"feature-search-result-item.js","sourceRoot":"./src/","sources":["modules/search-result-container/components/feature-search-result-item.tsx"],"names":[],"mappings":"AAIA,OAAO,EAAE,mBAAmB,EAAE,qBAAqB,EAAE,MAAM,2CAA2C,CAAC;AACvG,OAAO,EAAE,gBAAgB,EAAE,sBAAsB,EAAqB,gBAAgB,EAAE,MAAM,sCAAsC,CAAC;AACrI,OAAO,EAA2D,KAAK,EAAC,MAAM,yBAAyB,CAAC;AAExG,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAc/B,MAAM,CAAC,MAAM,uBAAuB,GAAuC,CAAC,EACxE,OAAO,EACP,OAAO,EACP,aAAa,EACb,SAAS,EACT,gBAAgB,EACnB,EAAE,EAAE;IACD,IAAG,OAAO,KAAK,IAAI,EAAE;QACjB,OAAO,IAAI,CAAC;KACf;IAED,MAAM,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC;IACjC,MAAM,eAAe,GAAG,OAAO,IAAI,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAA,CAAC,CAAC,CAAC,CAAC;IAC1E,MAAM,UAAU,GAAG,qBAAqB,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,EAAE,eAAe,EAAE,OAAO,IAAI,OAAO,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;IAC3H,MAAM,aAAa,GAAG,mBAAmB,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,aAAa,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;IAG5G,MAAM,OAAO,GAAG,gBAAgB,CAAC,OAAO,EAAE,gBAAiB,EAAE,WAAY,EAAE,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;IAEvG,MAAM,SAAS,GAAG,sBAAsB,CAAC,gBAAiB,EAAE,OAAO,CAAC,CAAC;IACrE,OAAO,CACC,6BAAK,SAAS,EAAC,gCAAgC;QAC3C,yCAAG,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,gBAAgB,CAAC,gBAAiB,EAAE,OAAO,EAAE,OAAO,CAAC,IAAK,CAAC,IAAK,SAAS,kBAAc,OAAO,CAAC,IAAI;YACjI,6BAAK,SAAS,EAAC,wCAAwC,IAClD,2BAA2B,CAAC,aAAa,EAAE,OAAO,CAAC,OAAO,CAAC,YAAY,EAAE,OAAO,CAAC,eAAe,EAAE,OAAO,CAAC,IAAI,EAAE,aAAa,CAAC,CAC7H,CACF;QACJ,6BAAK,SAAS,EAAC,yCAAyC;YACpD,2BAAG,SAAS,EAAC,0CAA0C,IAAE,SAAS,CAAC,wBAAwB,CAAK;YAC/F,kBAAkB,CAAC,OAAO,EAAE,IAAI,CAAC,CAChC,CACJ,CACb,CAAC;AAEN,CAAC,CAAC;AAEF,SAAS,2BAA2B,CAAC,aAA8B,EAAE,YAA4B,EAAE,QAAiB,EAAE,OAAgB,EAAE,aAAsB;IAC1J,IAAI,CAAC,QAAQ,IAAI,CAAC,YAAY,IAAI,CAAC,aAAa,EAAE;QAC9C,OAAO,IAAI,CAAC;KACf;IACD,MAAM,GAAG,GAAe;QACpB,GAAG,EAAE,QAAQ;QACb,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;KAClC,CAAC;IACF,MAAM,UAAU,GAAG;QACf,YAAY,EAAE,YAAY;QAC1B,aAAa,EAAE,aAAa;QAC5B,WAAW,EAAE,aAAa;KAC7B,CAAC;IACF,OAAO,CACH,oBAAC,KAAK,oBAAK,GAAG,EAAM,UAAU,IAAE,mBAAmB,EAAC,OAAO,IAAG,CACjE,CAAC;AACN,CAAC;AAED,SAAS,kBAAkB,CAAC,KAAc;IAC1C,OAAO,4BAAI,SAAS,EAAC,gDAAgD,IAAE,KAAK,CAAM,CAAC;AACnF,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getFallbackImageUrl, getProductPageUrlSync } from '@msdyn365-commerce-modules/retail-actions';\nimport { getPayloadObject, getTelemetryAttributes, ITelemetryContent ,onTelemetryClick } from '@msdyn365-commerce-modules/utilities';\nimport { ICoreContext, IGridSettings, IImageData, IImageSettings, Image} from '@msdyn365-commerce/core';\nimport { SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport * as React from 'react';\nimport { ISearchResultContainerResources } from '../search-result-container.props.autogenerated';\n// import { IComponent, IComponentProps, ICoreContext, IGridSettings, IImageData, IImageSettings, Image, msdyn365Commerce } from '@msdyn365-commerce/core';\n\ninterface IFeatureSearchResultItem {\n    product: SimpleProduct | null;\n    context: ICoreContext;\n    resources: ISearchResultContainerResources;\n    imageSettings?: IImageSettings;\n    moduleType: string;\n    moduleId: string;\n    telemetryContent?: ITelemetryContent;\n}\n\nexport const FeatureSearchResultItem: React.FC<IFeatureSearchResultItem> = ({\n    product,\n    context,\n    imageSettings,\n    resources,\n    telemetryContent\n}) => {\n    if(product === null) {\n        return null;\n    }\n\n    const productName = product.Name;\n    const productRecordId = product && product.RecordId ? product.RecordId: 0;\n    const productUrl = getProductPageUrlSync(product.Name || '', productRecordId, context && context.actionContext, undefined);\n    const fallbackImage = getFallbackImageUrl(product.ItemId, context.actionContext.requestContext.apiSettings);\n\n    // Construct telemetry attribute to render\n    const payLoad = getPayloadObject('click', telemetryContent!, productName!, productRecordId.toString());\n\n    const attribute = getTelemetryAttributes(telemetryContent!, payLoad);\n    return (\n            <div className='ms-feature-search-result__item'>\n                <a href={productUrl} onClick={onTelemetryClick(telemetryContent!, payLoad, product.Name!)}{...attribute} aria-label={product.Name}>\n                <div className='msc-feature-search-result__item__image'>\n                    {renderProductPlacementImage(imageSettings, context.request.gridSettings, product.PrimaryImageUrl, product.Name, fallbackImage)}\n                </div>\n                </a>\n                <div className='msc-feature-search-result__item__detail'>\n                    <p className='msc-feature-search-result__item__heading'>{resources.featureSimilarLooksTitle}</p>\n                    {renderProductTitle(product?.Name)}\n                </div>\n            </div>\n    );\n\n};\n\nfunction renderProductPlacementImage(imageSettings?: IImageSettings, gridSettings?: IGridSettings, imageUrl?: string, altText?: string, fallbackImage?: string,): JSX.Element | null {\n    if (!imageUrl || !gridSettings || !imageSettings) {\n        return null;\n    }\n    const img: IImageData = {\n        src: imageUrl,\n        altText: altText ? altText : ''\n    };\n    const imageProps = {\n        gridSettings: gridSettings,\n        imageSettings: imageSettings,\n        fallBackSrc: fallbackImage\n    };\n    return (\n        <Image {...img} {...imageProps} loadFailureBehavior='empty' />\n    );\n}\n\nfunction renderProductTitle(title?: string): JSX.Element | null {\nreturn <h1 className='msc-feature-search-result__item__product-title'>{title}</h1>;\n}"]}