{"version":3,"file":"get-product-refiner-hierarchy.js","sourceRoot":"./src/","sources":["modules/search-result-container/actions/get-product-refiner-hierarchy.ts"],"names":[],"mappings":"AAGA,OAAO,EAAE,6BAA6B,EAAE,MAAM,wEAAwE,CAAC;AAQvH,MAAM,CAAC,KAAK,UAAU,0BAA0B,CAAC,cAAqC,EAAE,mBAAyC,EAAE,GAAmB;IAClJ,OAAO,6BAA6B,CAAC,EAAE,aAAa,EAAE,GAAG,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,EAAE,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,eAAiC,EAAE,EAAE;QAC9J,IAAI,CAAC,eAAe,EAAE;YAClB,GAAG,CAAC,KAAK,CAAC,oDAAoD,CAAC,CAAC;YAChE,OAAmC,EAAE,CAAC;SACzC;QAED,MAAM,MAAM,GAAG,CAAC,eAAe,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,cAA8B,EAAE,EAAE,CAA2B,cAAc,CAAC,CAAC;QAEzH,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YAChB,GAAG,CAAC,KAAK,CAAC,4EAA4E,CAAC,CAAC;YACxF,OAAmC,EAAE,CAAC;SACzC;QAED,OAAO,MAAM,CAAC;IAClB,CAAC,CAAC,CAAC;AACP,CAAC","sourcesContent":["import { IProductRefinerHierarchy } from '@msdyn365-commerce/commerce-entities';\nimport { IActionContext } from '@msdyn365-commerce/core';\nimport { IQueryResultSettings, ProductRefiner, ProductSearchCriteria } from '@msdyn365-commerce/retail-proxy';\nimport { getProductSearchRefinersAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';\n\n/**\n * Uses Bulk refiner API to get refiners and child refiner values\n * @param searchCriteria product search criteria\n * @param maxItems max items\n * @param ctx action context\n */\nexport async function getProductRefinerHierarchy(searchCriteria: ProductSearchCriteria, queryResultSettings: IQueryResultSettings, ctx: IActionContext): Promise<IProductRefinerHierarchy[]> {\n    return getProductSearchRefinersAsync({ callerContext: ctx, queryResultSettings: queryResultSettings }, searchCriteria).then((productRefiners: ProductRefiner[]) => {\n        if (!productRefiners) {\n            ctx.trace('[getRefinersByCriteriaAction] returned no refiners');\n            return <IProductRefinerHierarchy[]>[];\n        }\n\n        const result = (productRefiners || []).map((productRefiner: ProductRefiner) => <IProductRefinerHierarchy>productRefiner);\n\n        if (!result.length) {\n            ctx.trace('[getRefinersByCriteriaAction] returned no IProductRefinerHierarchy objects');\n            return <IProductRefinerHierarchy[]>[];\n        }\n\n        return result;\n    });\n}"]}