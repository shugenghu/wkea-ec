{"version":3,"file":"media-gallery.js","sourceRoot":"./src/","sources":["modules/media-gallery/media-gallery.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport classnames from 'classnames';\nimport { reaction } from 'mobx';\nimport * as React from 'react';\n\nimport { Carousel, ICarouselProps } from '@msdyn365-commerce/components';\n\nimport {\n    IComponentNodeProps,\n    ImagefullView,\n    IModalViewProps,\n    IModuleProps,\n    inlineZoomImageOnHover,\n    inlineZoomImageOnMouseMove,\n    inlineZoomImageOnMouseOut,\n    inlineZoomInit,\n    INodeProps,\n    ISingleSlideCarouselProps,\n    KeyCodes,\n    NodeTag,\n    onContainerZoomInit,\n    onMouseMoveLensContainer,\n    onMouseOutLensContainer,\n    onMouseOverImageContainer,\n    removeInlineZoomStyle,\n    SingleSlideCarousel\n} from '@msdyn365-commerce-modules/utilities';\nimport { IImageData, IImageSettings, Image } from '@msdyn365-commerce/core';\nimport { SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport { imageSource, imageZoom, IMediaGalleryData, IMediaGalleryProps, thumbnailsOrientation } from '../..';\nimport { getValidProductImages, validateProductImages } from './utils';\n\nexport interface IMediaGalleryState {\n    animating: boolean;\n    activeIndex: number;\n    mediaGalleryItems: IImageData[] | undefined;\n    isImageZoomed: boolean;\n    modalIsOpen: boolean;\n}\n\nexport interface IMediaGalleryThumbnailsViewProps {\n    ThumbnailsContainerProps: INodeProps;\n    SingleSlideCarouselComponentProps: INodeProps;\n    items?: IMediaGalleryThumbnailItemViewProps[];\n}\n\nexport interface IMediaGalleryThumbnailItemViewProps {\n    ThumbnailItemContainerProps: INodeProps;\n    Picture: React.ReactElement;\n}\n\nexport interface IMediaGalleryViewProps extends IMediaGalleryProps<IMediaGalleryData> {\n    state: IMediaGalleryState;\n    MediaGallery: IModuleProps;\n    CarouselProps: INodeProps;\n    Thumbnails: IMediaGalleryThumbnailsViewProps;\n    Modal?:React.ReactElement|null;\n}\n\n/**\n * Media gallery component\n */\nclass MediaGallery extends React.Component<IMediaGalleryProps<IMediaGalleryData>, IMediaGalleryState> {\n    private _inlineZoomDivRef: Map<number, HTMLDivElement> = new Map();\n    private readonly defaultGalleryImageSettings: IImageSettings = {\n        viewports: {\n            xs: { q: 'w=767&h=767&m=8', w: 0, h: 0 },\n            sm: { q: 'w=600&h=600&m=8', w: 0, h: 0 },\n            md: { q: 'w=600&h=772&m=8', w: 0, h: 0 },\n            lg: { q: 'h=772&m=8', w: 0, h: 0 }\n        },\n        lazyload: true\n    };\n\n    private readonly defaultThumbnailImageSettings: IImageSettings = {\n        viewports: {\n            xs: { q: 'w=100&m=8', w: 100, h: 0 },\n            lg: { q: 'w=100&m=8', w: 100, h: 0 }\n        },\n        lazyload: true\n    };\n\n    constructor(props: IMediaGalleryProps<IMediaGalleryData>) {\n        super(props);\n        this._toggleModal = this._toggleModal.bind(this);\n        this.state = { activeIndex: 0, animating: false, mediaGalleryItems: undefined, isImageZoomed: false, modalIsOpen:false };\n\n        this._onImageMouseOut = this._onImageMouseOut.bind(this);\n        this._inlineZoomImageOnHover = this._inlineZoomImageOnHover.bind(this);\n        this._onInlineImageClick = this._onInlineImageClick.bind(this);\n        this._onContainerZoomImageClick = this._onContainerZoomImageClick.bind(this);\n        this._onMouseOutLensContainer = this._onMouseOutLensContainer.bind(this);\n    }\n\n    public async componentDidMount(): Promise<void> {\n        const source = this.props.config.imageSource || imageSource.pageContext;\n        const curatedImage = this.props.config.images || [];\n\n        if (source === imageSource.pageContext) {\n            reaction(\n                () => (this.props.data.product.result ? this.props.data.product.result.RecordId : null),\n                async () => {\n                    if (this.props.data.product.result) {\n                        const images = await getValidProductImages(\n                            this.props.data.product.result.RecordId,\n                            +this.props.context.request.apiSettings.channelId,\n                            this.props.context.actionContext,\n                            this.props.config.thumbnailImageSettings || this.defaultThumbnailImageSettings\n                        );\n                        this.setState({\n                            mediaGalleryItems: [...images, ...curatedImage]\n                        });\n                    } else {\n                        this.setState({\n                            mediaGalleryItems: [...curatedImage]\n                        });\n                    }\n                }\n            );\n        }\n\n        if (source === imageSource.productId && this.props.data.mediaLocations.result) {\n            const images = await validateProductImages(\n                this.props.data.mediaLocations.result,\n                this.props.context.actionContext,\n                this.props.config.thumbnailImageSettings || this.defaultThumbnailImageSettings\n            );\n            this.setState({\n                mediaGalleryItems: [...images, ...curatedImage]\n            });\n        } else if (source === imageSource.pageContext && this.props.data.product.result) {\n            const images = await getValidProductImages(\n                this.props.data.product.result.RecordId,\n                +this.props.context.request.apiSettings.channelId,\n                this.props.context.actionContext,\n                this.props.config.thumbnailImageSettings || this.defaultThumbnailImageSettings\n            );\n\n            this.setState({\n                mediaGalleryItems: [...images, ...curatedImage]\n            });\n        } else {\n            this.setState({\n                mediaGalleryItems: [...curatedImage]\n            });\n        }\n    }\n\n    public render(): JSX.Element {\n        const {\n            data: {\n                product: { result: product },\n            },\n            id,\n            config,\n            resources\n        } = this.props;\n\n        const mediaGalleryItems = this.state.mediaGalleryItems;\n        const { className, showPaginationTooltip } = config;\n        const imgSource = config.imageSource || imageSource.pageContext;\n\n        if (!mediaGalleryItems && imgSource === imageSource.pageContext && product) {\n            this.setState({ mediaGalleryItems: [this._mapProductToImageData(product), ...config.images || []] });\n        }\n\n        const isVertical: boolean = config.thumbnailsOrientation === thumbnailsOrientation.vertical;\n        const allowFullscreen:boolean = config.allowFullScreen || false;\n        const zoomViewMode: string =\n            config.imageZoom === imageZoom.inline\n                ? imageZoom.inline\n                : config.imageZoom === imageZoom.container\n                ? imageZoom.container\n                : '';\n        const zoomView = allowFullscreen ? 'fullscreen': zoomViewMode;\n\n        const viewProps: IMediaGalleryViewProps = {\n            ...(this.props as IMediaGalleryProps<IMediaGalleryData>),\n            state: this.state,\n            MediaGallery: {\n                moduleProps: this.props,\n                className: classnames(`ms-media-gallery ${isVertical ? 'vertical' : ''}`, className)\n            },\n            Modal: allowFullscreen ? this.imageModalSlider(zoomViewMode): null,\n            CarouselProps: {\n                tag: Carousel,\n                className: 'ms-media-gallery__carousel',\n                items:\n                    mediaGalleryItems &&\n                    mediaGalleryItems.map((item: IImageData, index: number) => this._renderCarouselItemImageView(zoomView, item, index)),\n                activeIndex: this.state.activeIndex,\n                next: this.next,\n                previous: this.previous,\n                interval: false,\n                directionTextPrev: resources.previousScreenshotFlipperText,\n                directionTextNext: resources.nextScreenshotFlipperText,\n                onIndicatorsClickHandler: this.goToIndex,\n                showPaginationTooltip: showPaginationTooltip === true,\n                handleOnExited: this.onExited,\n                handleOnExiting: this.onExiting\n            } as IComponentNodeProps<ICarouselProps>,\n            Thumbnails: {\n                ThumbnailsContainerProps: { className: 'ms-media-gallery__thumbnails-container' },\n                SingleSlideCarouselComponentProps: {\n                    tag: SingleSlideCarousel,\n                    className: 'ms-media-gallery__thumbnails',\n                    vertical: isVertical,\n                    flipperPrevLabel: resources.previousScreenshotFlipperText,\n                    flipperNextLabel: resources.nextScreenshotFlipperText,\n                    parentId: id,\n                    useTabList: true\n                } as IComponentNodeProps<ISingleSlideCarouselProps>,\n                items:\n                    mediaGalleryItems &&\n                    mediaGalleryItems.map((item: IImageData, index: number) => this._getThumbnailItem(item, index, this.state.activeIndex))\n            }\n        };\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    private onExiting = () => {\n        this.setState({ animating: true });\n    };\n\n    private onExited = () => {\n        this.setState({ animating: false });\n    };\n\n    private next = (): void => {\n        if (this.isLastItem() === undefined) {\n            return;\n        }\n\n        const nextIndex = this.isLastItem() ? 0 : this.state.activeIndex + 1;\n        this.goToIndex(nextIndex);\n    };\n\n    private previous = (): void => {\n        const nextIndex = this.isFirstItem()\n            ? this.state.mediaGalleryItems\n                ? this.state.mediaGalleryItems.length - 1\n                : 0\n            : this.state.activeIndex - 1;\n        this.goToIndex(nextIndex);\n    };\n\n    private goToIndex = (index: number): void => {\n        if (this.state.animating) {\n            return;\n        }\n        this.setState({ activeIndex: index });\n    };\n\n    private _renderCarouselItemImageView(zoomView: string, image: IImageData, index: number): React.ReactNode {\n        if (zoomView === 'container') {\n            return this._renderImageInContainerOnZoom(image, index);\n        } else if (zoomView === 'inline') {\n            return this._renderImageInlineOnZoom(image, index);\n        } else if (zoomView === 'fullscreen') {\n            return this._renderImageFullScreenOnZoom(image, index);\n        } else {\n            return <React.Fragment>{this._getCarouselItem(image, index)}</React.Fragment>;\n        }\n    }\n\n    private _getCarouselItem = (image: IImageData, index: number): React.ReactNode => (\n        <Image\n            className='ms-media-gallery__item'\n            {...image}\n            gridSettings={this.props.context.request.gridSettings!}\n            imageSettings={this.props.config.galleryImageSettings || this.defaultGalleryImageSettings}\n            loadFailureBehavior='default'\n            role='tabpanel'\n            id={`${this.props.id}__carousel-item__${index}`}\n        />\n    );\n\n    private _getThumbnailItem = (image: IImageData, index: number, modifiedActiveIndex: number): IMediaGalleryThumbnailItemViewProps => {\n        const classes = classnames(\n            'ms-media-gallery__thumbnail-item',\n            modifiedActiveIndex === index ? 'ms-media-gallery__thumbnail-item-active' : ''\n        );\n\n        return {\n            ThumbnailItemContainerProps: {\n                tag: 'li' as NodeTag,\n                className: classes,\n                role: 'tab',\n                tabIndex: 0,\n                key: index,\n                'aria-label': image.altText,\n                'aria-selected': modifiedActiveIndex === index,\n                'aria-controls': `${this.props.id}__carousel-item__${index}`,\n                onClick: this._generateOnThumbnailClick(index),\n                onKeyDown: this._generateOnThumbnailKeyDown(index)\n            },\n            Picture: (\n                <Image\n                    className='ms-media-gallery__thumbnail'\n                    {...image}\n                    gridSettings={this.props.context.request.gridSettings!}\n                    imageSettings={this.props.config.thumbnailImageSettings || this.defaultThumbnailImageSettings}\n                    loadFailureBehavior='default'\n                />\n            )\n        };\n    };\n\n    private _generateOnThumbnailKeyDown = (index: number) => {\n        return (event: React.KeyboardEvent) => {\n            if (event.which === KeyCodes.Enter || event.which === KeyCodes.Space) {\n                event.preventDefault();\n\n                this.goToIndex(index);\n            }\n        };\n    };\n\n    private _generateOnThumbnailClick = (index: number) => {\n        return (event: React.MouseEvent<HTMLLIElement>) => {\n            event.preventDefault();\n\n            this.goToIndex(index);\n        };\n    };\n\n    private _renderImageInlineOnZoom(image: IImageData, index: number): React.ReactNode {\n        return (\n            // tslint:disable-next-line: react-this-binding-issue\n            <div className={`ms-inline-zoom ${this.state.isImageZoomed ? 'zoomed' : ''}`} ref={divRef => this._inlineZoomDivRef.set(index, divRef!)} data-scale={this.props.config.dataScale}>\n                <Image\n                    className='ms-media-gallery__item'\n                    {...image}\n                    gridSettings={this.props.context.request.gridSettings!}\n                    imageSettings={this.props.config.galleryImageSettings || this.defaultGalleryImageSettings}\n                    loadFailureBehavior='default'\n                    role='tabpanel'\n                    onClick={this._onInlineImageClick}\n                    onMouseOver={this.state.isImageZoomed && this._inlineZoomImageOnHover || undefined}\n                    id={`${this.props.id}__carousel-item__${index}`}\n                />\n                <Image\n                    role='presentation'\n                    className='ms-inline-zoom__zoomedImg'\n                    {...image}\n                    onClick={this._onImageMouseOut}\n                    gridSettings={this.props.context.request.gridSettings!}\n                    imageSettings={this.props.config.galleryImageSettings || this.defaultGalleryImageSettings}\n                    loadFailureBehavior='default'\n                    id={`${this.props.id}__zoom__${index}`}\n                    onMouseMove={this.state.isImageZoomed && inlineZoomImageOnMouseMove || undefined}\n                />\n            </div>\n        );\n    }\n\n    private _inlineZoomImageOnHover(event: React.MouseEvent<HTMLImageElement>): void {\n        inlineZoomImageOnHover(event, this.props.config.dataScale);\n    }\n\n    private _onInlineImageClick(event: React.MouseEvent<HTMLImageElement>): void {\n        if (window.innerWidth <= 768) { // $msv-breakpoint-m\n            return;\n        }\n\n        inlineZoomInit(event, this.props.config.dataScale);\n        this.setState({\n            isImageZoomed: true\n        });\n    }\n\n    private _onImageMouseOut(event: React.MouseEvent<HTMLImageElement, MouseEvent>): void {\n        inlineZoomImageOnMouseOut(event);\n        this.setState({\n            isImageZoomed: false\n        });\n\n    }\n\n    private _onContainerZoomImageClick(event: React.MouseEvent<HTMLImageElement>): void {\n        if (window.innerWidth <= 768) { // $msv-breakpoint-m\n            return;\n        }\n\n        onContainerZoomInit(event);\n\n        this.setState({\n            isImageZoomed: true\n        });\n    }\n\n    private _onMouseOutLensContainer(event: React.MouseEvent<HTMLImageElement>): void {\n        onMouseOutLensContainer(event);\n\n        this.setState({\n            isImageZoomed: false\n        });\n    }\n\n    private _renderImageInContainerOnZoom(image: IImageData, index: number): React.ReactNode {\n        return (\n            <div className='ms-containerZoom__container'>\n                <div className='ms-containerZoom__zoom-lens' role='presentation' onMouseOut={this._onMouseOutLensContainer} onClick={this._onMouseOutLensContainer} onMouseMove={this.state.isImageZoomed && onMouseMoveLensContainer || undefined} />\n                <Image\n                    className='ms-media-gallery__item'\n                    {...image}\n                    gridSettings={this.props.context.request.gridSettings!}\n                    onClick={this._onContainerZoomImageClick}\n                    imageSettings={this.props.config.galleryImageSettings || this.defaultGalleryImageSettings}\n                    loadFailureBehavior='default'\n                    onMouseOver={this.state.isImageZoomed && onMouseOverImageContainer || undefined}\n                    id={`${this.props.id}__carousel-item__${index}`}\n                />\n            </div>\n        );\n    }\n\n    private _renderImageFullScreenOnZoom(image: IImageData, index: number): React.ReactNode {\n        return (\n            <div className='ms-fullscreen-section'>\n                <Image\n                    className='ms-media-gallery__item'\n                    {...image}\n                    gridSettings={this.props.context.request.gridSettings!}\n                    imageSettings={this.props.config.galleryImageSettings || this.defaultGalleryImageSettings}\n                    loadFailureBehavior='default'\n                    role='tabpanel'\n                />\n                <div className='ms-fullscreen-section__overlay'>\n                    <a href='javascript:void(0);' title={this.props.resources.fullScreenTitleText} role='button' onClick={this.openModalDialog} className='ms-fullscreen-section__magnifying-glass-icon'/>\n                </div>\n            </div>\n        );\n    }\n\n    private _mapProductToImageData(product: SimpleProduct): IImageData {\n        return {\n            src: product.PrimaryImageUrl || ''\n        };\n    }\n\n    private isFirstItem = () => this.state.activeIndex === 0;\n\n    private isLastItem = () => this.state.mediaGalleryItems && this.state.activeIndex === this.state.mediaGalleryItems.length - 1;\n\n    private openModalDialog = (): void => {\n        this._toggleModal();\n    }\n\n    private _toggleModal(): void {\n        if (this.state.modalIsOpen) {\n            const parentDiv = this._inlineZoomDivRef.get(this.state.activeIndex);\n            if (parentDiv && parentDiv.children && parentDiv.children.length >= 2) {\n                const image = parentDiv.children[1].querySelector('img');\n                if (image) {\n                    image.removeAttribute('style');\n                }\n            }\n            this.setState({\n                isImageZoomed: false\n            });\n        }\n        this.setState({\n            isImageZoomed: false,\n            modalIsOpen: !this.state.modalIsOpen\n        });\n        removeInlineZoomStyle();\n    }\n\n    private imageModalSlider=(ZoomView:string):React.ReactElement => {\n        const {\n            data: {\n                product: { result: product }\n            },\n            resources\n        } = this.props;\n        let mediaGalleryItems = this.state.mediaGalleryItems;\n\n        if (!mediaGalleryItems && product) {\n            mediaGalleryItems = [this._mapProductToImageData(product)];\n        }\n\n        const carouselprops = {\n            tag: Carousel,\n            className: 'ms-media-gallery__carousel',\n            items:\n                mediaGalleryItems &&\n                mediaGalleryItems.map((item: IImageData, index: number) => this._renderCarouselItemImageView(ZoomView, item, index)),\n            activeIndex: this.state.activeIndex,\n            next: this.next,\n            previous: this.previous,\n            interval: false,\n            directionTextPrev: resources.previousScreenshotFlipperText,\n            directionTextNext: resources.nextScreenshotFlipperText,\n            onIndicatorsClickHandler: this.goToIndex,\n            showPaginationTooltip: true,\n            hideIndicator: true,\n            handleOnExited: this.onExited,\n            handleOnExiting: this.onExiting,\n        } as IComponentNodeProps<ICarouselProps>;\n\n        const carousel = <Carousel  {...carouselprops} />;\n\n        const imageModalSliderProps:IModalViewProps = {\n            modalIsOpen:this.state.modalIsOpen,\n            ontoggle:this._toggleModal,\n            galleryCarousel: carousel\n       };\n        return ImagefullView(imageModalSliderProps) as React.ReactElement;\n    }\n}\n\nexport default MediaGallery;\n"]}