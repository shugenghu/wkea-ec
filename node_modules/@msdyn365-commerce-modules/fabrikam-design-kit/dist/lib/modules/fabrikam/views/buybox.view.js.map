{"version":3,"file":"buybox.view.js","sourceRoot":"./src/","sources":["modules/fabrikam/views/buybox.view.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as React from 'react';\n\nimport {\n    IBuyboxAddToCartViewProps,\n    IBuyboxAddToOrderTemplateViewProps,\n    IBuyboxAddToWishlistViewProps,\n    IBuyboxCallbacks,\n    IBuyboxData,\n    IBuyboxFindInStoreViewProps,\n    IBuyboxProductConfigureDropdownViewProps,\n    IBuyboxProductConfigureViewProps,\n    IBuyboxProductQuantityViewProps,\n    IBuyboxProps,\n    IBuyboxShopSimilarLookViewProps,\n    IBuyboxState,\n    IBuyboxViewProps\n } from '@msdyn365-commerce-modules/buybox';\n\nimport { ITelemetryContent, Module, Node } from '@msdyn365-commerce-modules/utilities';\n\nimport { IBuyboxProps as IBuyboxExtentionProps, IBuyboxResources as IBuyboxExtentionResources } from '../definition-extensions/buybox.ext.props.autogenerated';\nimport { Quantity } from '../utilities/quantity';\n\nconst BuyboxView: React.FC<IBuyboxViewProps & IBuyboxExtentionProps<IBuyboxData>> = props => {\n    const { ModuleProps, MediaGalleryContainerProps, ProductInfoContainerProps,\n        addToCart, addToOrderTemplate, addToWishlist,\n        telemetryContent, configure, description, findInStore,\n        quantity, price, title, rating, callbacks, state, resources, inventoryLabel, shopSimilarLook } = props;\n\n    return (\n        <Module {...ModuleProps}>\n            <Node {...MediaGalleryContainerProps}>\n                {props.mediaGallery}\n            </Node>\n            <Node {...ProductInfoContainerProps}>\n                {title}\n                {price}\n                {description}\n                { _renderTextBlock(props.slots.textBlocks)}\n                {rating}\n                {configure && _renderConfigure(configure)}\n                {quantity && _renderQuantity(quantity, callbacks, props, state, resources, telemetryContent)}\n                {inventoryLabel}\n                { _renderCartAndActions(addToCart, addToOrderTemplate, addToWishlist)}\n                {findInStore && _renderFindInStore(findInStore)}\n                { _renderSocialShare(props.slots && props.slots?.socialShare)}\n                {shopSimilarLook && _renderShopSimilarLook(shopSimilarLook)}\n            </Node>\n        </Module>\n    );\n};\n\nconst _renderTextBlock = (textBlocks: React.ReactNode[]): JSX.Element | undefined => {\n    if (!textBlocks || textBlocks.length === 0) {\n        return undefined;\n    }\n\n    return (\n        <>\n            {textBlocks[0]}\n        </>\n    );\n};\n\nconst _renderSocialShare = (socialShare: React.ReactNode[]): JSX.Element | undefined => {\n    if (!socialShare || socialShare.length === 0) {\n        return undefined;\n    }\n\n    return (\n        <>\n            {socialShare[0]}\n        </>\n    );\n};\n\nconst _renderCartAndActions = (\n    addToCart?: IBuyboxAddToCartViewProps,\n    addToOrderTemplate?: IBuyboxAddToOrderTemplateViewProps,\n    addToWishlist?: IBuyboxAddToWishlistViewProps): JSX.Element | undefined => {\n    if (!addToCart && !addToWishlist) {\n        return undefined;\n    }\n\n    return (\n        <div className='product-add-to-cart'>\n            {addToCart && addToCart.errorBlock}\n            {addToOrderTemplate && addToOrderTemplate.errorBlock}\n            {addToWishlist && addToWishlist.errorBlock}\n            <div className='buttons'>\n                {addToCart && addToCart.button}\n                {addToOrderTemplate && addToOrderTemplate.button}\n                {addToWishlist && addToWishlist.button}\n            </div>\n        </div>\n    );\n};\n\nconst _renderConfigure = (configure: IBuyboxProductConfigureViewProps): JSX.Element => {\n    const { ContainerProps, dropdowns } = configure;\n\n    return (\n        <Node {...ContainerProps}>\n            {dropdowns.map(_renderConfigureDropdown)}\n        </Node>\n    );\n};\n\nconst _renderConfigureDropdown = (dropdown: IBuyboxProductConfigureDropdownViewProps): JSX.Element => {\n    const { ContainerProps, LabelContainerProps, heading, errors, select } = dropdown;\n\n    return (\n        <Node {...ContainerProps}>\n            <Node {...LabelContainerProps}>\n                {heading}\n                {errors}\n            </Node>\n            {select}\n        </Node>\n    );\n};\n\nconst _renderFindInStore = (findInStore: IBuyboxFindInStoreViewProps): JSX.Element => {\n    const { ContainerProps, storeSelector, heading, description, errors, button, modal } = findInStore;\n\n    return (\n        <Node {...ContainerProps}>\n            {storeSelector}\n            {heading}\n            {description}\n            {errors}\n            {button}\n            {modal}\n        </Node>\n    );\n};\n\nconst _renderQuantity = (quantityComponent: IBuyboxProductQuantityViewProps, callbacks: IBuyboxCallbacks, props: IBuyboxProps<IBuyboxData>, state: IBuyboxState, extentionResources: IBuyboxExtentionResources,\n                         telemetryContent?: ITelemetryContent): JSX.Element => {\n    const { ContainerProps, LabelContainerProps, heading, errors } = quantityComponent;\n\n    const {\n        resources,\n        context: {\n            app: {\n                config: {\n                    maxQuantityForCartLineItem\n                }\n            }\n        }\n    } = props;\n\n    const\n    {\n        quantity,\n    } = state;\n\n    const onChange = (newValue: number) => {\n        if (callbacks.updateQuantity) {\n            callbacks.updateQuantity(newValue);\n        }\n    };\n\n    return (\n        <Node {...ContainerProps}>\n            <Node {...LabelContainerProps}>\n                {heading}\n                {errors}\n            </Node>\n\n            <Quantity\n                id='ms-buybox__product-quantity-input'\n                max={maxQuantityForCartLineItem || 10}\n                currentCount={quantity}\n                onChange={onChange}\n                inputQuantityAriaLabel={resources.inputQuantityAriaLabel}\n                decrementButtonAriaLabel={extentionResources.decrementButtonAriaLabel}\n                incrementButtonAriaLabel={extentionResources.incrementButtonAriaLabel}\n                telemetryContent={telemetryContent}\n            />\n        </Node>\n    );\n};\n\nconst _renderShopSimilarLook = (shopSimilarItem: IBuyboxShopSimilarLookViewProps): JSX.Element => {\n    const { ContainerProps, errors, input } = shopSimilarItem;\n\n    return (\n        <Node {...ContainerProps}>\n            {errors}\n            {input}\n        </Node>\n    );\n};\n\nexport default BuyboxView;\n"]}