/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import * as React from 'react';

import { Carousel } from '@msdyn365-commerce/components';
import { buildMockModuleProps } from '@msdyn365-commerce/core';
import { render } from 'enzyme';
import { PromoBannerLinks, PromoBannerText } from '../../components';
import { ILinksData, IPromoBannerProps } from '../../promo-banner.props.autogenerated';
import PromoBannerView from '../../promo-banner.view';

const mockLink1: ILinksData = {
    linkText: 'Mock link 1 title',
    linkUrl: {
        destinationUrl: 'Mock link 1 href'
    },
    ariaLabel: 'Mock link 1 alt text'
};

const mockLink2: ILinksData = {
    linkText: 'Mock link 2 title',
    linkUrl: {
        destinationUrl: 'Mock link 2 href'
    },
    ariaLabel: 'Mock link 2 alt text'
};

const mockLinks: ILinksData[] = [mockLink1, mockLink2];

const PromoBannerTextProps = {
    tag: PromoBannerText,
    className: 'ms-promo-banner__text'
};

const PromoBannerLinksProps = {
    tag: PromoBannerLinks,
    className: 'ms-promo-banner__links'
};

const CarouselProps = {
    tag: Carousel,
    className: 'ms-promo-banner__carousel',
    activeIndex: 0,
    next: jest.fn,
    previous: jest.fn,
    onIndicatorsClickHandler: jest.fn,
    hideIndicator: true,
    interval: 1000,
    hideFlipper: true,
    autoplay: true
};

describe('PromoBanner unit tests - View', () => {
    it('renders correctly', () => {
        const moduleProps: IPromoBannerProps<{}> = buildMockModuleProps({}, {}) as IPromoBannerProps<{}>;
        const promoBannerProps = { className: 'ms-promo-banner', moduleProps: moduleProps };
        const contentProps = { className: 'ms-promo-banner__content' };
        const mockProps = {
            ...moduleProps,
            animating: false,
            promoBannerProps,
            contentProps,
            bannerMessages: [{text: 'text', links: mockLinks}, {text: 'text', links: mockLinks}],
            PromoBannerTextProps: PromoBannerTextProps,
            PromoBannerLinksProps: PromoBannerLinksProps,
            CarouselProps: CarouselProps,
            activeIndex: 0,
            closeButton: '{CloseButonComponent}',
            className: 'custom-class',
            isVisible: true,
            onDismiss: jest.fn(),
            handleLinks: jest.fn(),
            handleText: jest.fn()
        };
        const component = render(<PromoBannerView {...mockProps} />);
        expect(component).toMatchSnapshot();
    });
});
