{"version":3,"file":"components.js","sourceRoot":"./src/","sources":["modules/ratings-histogram/component/components.tsx"],"names":[],"mappings":"AAAA,OAAO,EACH,MAAM,EAEN,QAAQ,EACX,MAAM,sCAAsC,CAAC;AAE9C,OAAO,KAAK,MAAM,OAAO,CAAC;AAwB1B,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,KAA2B,EAA8B,EAAE;IACtF,MAAM,EAAC,cAAc,EAAC,GAAG,KAAK,CAAC;IAC/B,MAAM,iBAAiB,GAAW,cAAc,CAAC,iBAAiB,IAAI,CAAC,CAAC;IACxE,OAAO;QACH,UAAU,CAAC,KAAK,EAAE,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,iBAAiB,CAAC;QAClE,UAAU,CAAC,KAAK,EAAE,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,iBAAiB,CAAC;QAClE,UAAU,CAAC,KAAK,EAAE,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,iBAAiB,CAAC;QAClE,UAAU,CAAC,KAAK,EAAE,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,iBAAiB,CAAC;QAClE,UAAU,CAAC,KAAK,EAAE,CAAC,EAAE,cAAc,CAAC,UAAU,EAAE,iBAAiB,CAAC;KACrE,CAAC;AACN,CAAC,CAAC;AAEF,MAAM,UAAU,GAAG,CAAC,KAA2B,EAAG,KAAa,EAAE,KAAc,EAAE,UAAmB,EAA2B,EAAE;IAC7H,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;IACnB,UAAU,GAAG,UAAU,IAAI,CAAC,CAAC;IAC7B,MAAM,UAAU,GAAG,UAAU,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,UAAU,CAAC;IAC7D,MAAM,gBAAgB,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;IACtG,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,gBAAgB,EAAE,KAAK,EAAE,gBAAgB,CAAC,CAAC;IAEpF,OAAO;QACH,SAAS,EAAE,8BAAM,SAAS,EAAC,4BAA4B,IAAE,KAAK,CAAQ;QACtE,UAAU,EAAE,8BAAM,SAAS,EAAC,kCAAkC,IAAE,gBAAgB,CAAQ;QACxF,GAAG,EAAE,oBAAC,QAAQ,IAAC,KAAK,EAAE,UAAU,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAC,2BAA2B,GAAE;QAC/G,WAAW,EAAE,EAAC,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,4BAA4B,EAAE,OAAO,EAAE,GAAG,EAAE,GAAE,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAA,CAAC,EAAC;KAChH,CAAC;AACN,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,mBAAmB,GAAwC,CAAC,KAAgC,EAAE,EAAE;IACzG,OAAO,2BAAG,SAAS,EAAC,+BAA+B;QAAE,KAAK,CAAC,OAAO,CAAC,aAAa;eAAS,CAAC;AAC9F,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,YAAY,GAAwC,CAAC,KAAgC,EAAE,EAAE;IAClG,OAAO,2BAAG,SAAS,EAAC,6BAA6B,IAAE,KAAK,CAAC,OAAO,CAAC,iBAAiB,CAAK,CAAC;AAC5F,CAAC,CAAC","sourcesContent":["import {\n    format,\n    INodeProps,\n    Progress\n} from '@msdyn365-commerce-modules/utilities';\nimport { RatingsSummary } from '@msdyn365-commerce/commerce-entities';\nimport React from 'react';\n\nexport interface IHistogramItemsProps {\n    ratingsSummary: RatingsSummary;\n    resources: IHistogramItemsResources;\n    locale: string;\n    onClick(stars: number): void;\n}\n\nexport interface IHistogramItemsResources {\n    barItemAriaLabel: string;\n}\n\nexport interface IHistogramItemViewProps {\n    starLabel: React.ReactElement;\n    bar: React.ReactElement;\n    percentage: React.ReactElement;\n    buttonProps: INodeProps;\n}\n\n/**\n * CartLineItems component\n */\n\nexport const HistogramItems = (props: IHistogramItemsProps): IHistogramItemViewProps[]  => {\n    const {ratingsSummary} = props;\n    const totalRatingsCount: number = ratingsSummary.totalRatingsCount || 0;\n    return [\n        renderItem(props, 5, ratingsSummary.star5Count, totalRatingsCount),\n        renderItem(props, 4, ratingsSummary.star4Count, totalRatingsCount),\n        renderItem(props, 3, ratingsSummary.star3Count, totalRatingsCount),\n        renderItem(props, 2, ratingsSummary.star2Count, totalRatingsCount),\n        renderItem(props, 1, ratingsSummary.star1Count, totalRatingsCount),\n    ];\n};\n\nconst renderItem = (props: IHistogramItemsProps,  stars: number, count?: number, totalCount?: number): IHistogramItemViewProps => {\n    count = count || 0;\n    totalCount = totalCount || 0;\n    const percentage = totalCount === 0 ? 0 : count / totalCount;\n    const formattedPercent = new Intl.NumberFormat(props.locale, { style: 'percent' }).format(percentage);\n    const ariaLabel = format(props.resources.barItemAriaLabel, stars, formattedPercent);\n\n    return {\n        starLabel: <span className='ms-ratings-histogram__star'>{stars}</span>,\n        percentage: <span className='ms-ratings-histogram__percentage'>{formattedPercent}</span>,\n        bar: <Progress value={percentage * 100} max={100} ariaLabel={ariaLabel} className='ms-ratings-histogram__bar'/>,\n        buttonProps: {tag: 'button', className: 'ms-ratings-histogram__item', onClick: () => {props.onClick(stars);}}\n    };\n};\n\nexport const AverageRatingNumber: React.FC<{summary: RatingsSummary}> = (props: {summary: RatingsSummary}) => {\n    return <p className='ms-ratings-histogram__average'>{props.summary.averageRating} / 5</p>;\n};\n\nexport const TotalReviews: React.FC<{summary: RatingsSummary}> = (props: {summary: RatingsSummary}) => {\n    return <p className='ms-ratings-histogram__total'>{props.summary.totalRatingsCount}</p>;\n};"]}