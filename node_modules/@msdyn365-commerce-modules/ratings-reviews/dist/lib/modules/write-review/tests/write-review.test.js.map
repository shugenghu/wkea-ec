{"version":3,"file":"write-review.test.js","sourceRoot":"./src/","sources":["modules/write-review/tests/write-review.test.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\njest.mock('../../../actions/submit-user-review', () => ({\n  __esModule: true, // this property makes it work\n  default: jest.fn().mockImplementation(() => Promise.resolve('myReviewId'))\n}));\nimport { buildMockActionContext, buildMockModuleProps, ICoreContext } from '@msdyn365-commerce/core';\nimport { mount } from 'enzyme';\nimport * as React from 'react';\nimport { IWriteReviewConfig, IWriteReviewData, IWriteReviewProps, IWriteReviewResources, IWriteReviewViewProps, WriteReview } from '..';\n\nimport {  SimpleProduct } from '@msdyn365-commerce/retail-proxy';\n\nimport { wrapInResolvedAsyncResult } from '@msdyn365-commerce-modules/retail-actions';\nimport { Review } from '@msdyn365-commerce/commerce-entities';\n\nconst mockActionContext = buildMockActionContext();\nmockActionContext.requestContext.apiSettings.rnr = {id: 'rnrId', url: 'rnrUrl', proxyUrl: ''};\nconst flushPromises = () => new Promise(setImmediate);\n\nconst emptyMockData: IWriteReviewData = {\n    product: wrapInResolvedAsyncResult<SimpleProduct>(undefined),\n    userReview: wrapInResolvedAsyncResult<Review>(undefined)\n};\n\nconst nopReviewMockData: IWriteReviewData = {\n    product: wrapInResolvedAsyncResult<SimpleProduct>({RecordId: 4444} as SimpleProduct),\n    userReview: wrapInResolvedAsyncResult<Review>(undefined)\n};\n\nconst updateReviewMockData: IWriteReviewData = {\n    product: wrapInResolvedAsyncResult<SimpleProduct>({RecordId: 4444} as SimpleProduct),\n    userReview: wrapInResolvedAsyncResult({\n      reviewId: 'Review-1',\n      productId: 'product1',\n      userName: 'user1',\n      rating: 3,\n      market: 'US',\n      locale: 'en',\n      thoughtfulnessScore: 0,\n      helpfulPositive: 50,\n      helpfulNegative: 10,\n      reviewText:\n          'Lorem ipsum dolor sit amet, cu fugit copiosae quo, nam illud docendi iudicabit ex. ' +\n          'Menandri expetendis dissentiunt ut per, mea cu error adipiscing. At solum causae bonorum vis, pri dictas praesent ut, inermis suavitate expetendis quo at. ' +\n          'Per ea eruditi indoctum omittantur, sea ad exerci salutandi laboramus. Dico noluisse maiestatis in vel.',\n      title: 'Some title to test reviews card layout',\n      submittedDateTime: new Date('2019-03-04T19:52:10.044Z'),\n      isTakenDown: true,\n      violationsFound: false,\n      isPublished: true,\n      isRevised: false,\n      updatedSinceResponse: false\n    } as Review)\n};\n\nconst mockConfig: IWriteReviewConfig = {\n};\n\nconst mockResources: IWriteReviewResources = {\n  signInAriaLabel: 'To Rate and review, sign in',\n  signInLabel: 'Sign In',\n  reviewButtonLabel: 'review this product',\n  privacyPolicyTextFormat: 'By clicking submit, you accept our {0}.',\n  privacyPolicyTitle: 'Privacy Policy',\n  reviewTextLabel: 'Review',\n  reviewTitleLabel: 'Title',\n  selectRatingAriaLabel: 'Set ratings as {0} out of {1} stars',\n  selectRatingLabel: 'Choose a rating',\n  writeReviewModalTitle: 'Write a review',\n  editReviewModalTitle: 'Edit your review',\n  discardReviewButtonText: 'Discard',\n  errorMessageText: 'Something went wrong, please try again',\n  submitReviewButtonText: 'Submit',\n  editReviewButtonText: 'Edit',\n  signInMessage: 'Please sign in to rate and review.',\n};\n\nconst mockActions = {};\n\n// @ts-ignore\n// tslint:disable-next-line:no-any\nconst mockAuthenticatedContext: ICoreContext<any> = {\n  // @ts-ignore\n  request: {\n    // @ts-ignore: optOutWebActivityTracking should not be required\n    user: {\n        token: 'Dummy token',\n        isAuthenticated: true\n    }\n  },\n  app: {\n    config:{\n   }\n  },\n  actionContext: mockActionContext\n};\n\n// @ts-ignore\n// tslint:disable-next-line:no-any\nconst mockUnauthenticatedContext: ICoreContext<any> = {\n  // @ts-ignore\n  request: {\n    user: {\n        token: '',\n        isAuthenticated: false,\n        optOutWebActivityTracking: false\n    }\n  },\n  app: {\n    config:{\n   }\n  },\n  actionContext: mockActionContext\n};\n\ndescribe('WriteReview', () => {\n  let moduleProps: IWriteReviewProps<IWriteReviewData>;\n  beforeAll(() => {\n    // @ts-ignore\n    moduleProps = {...buildMockModuleProps(updateReviewMockData, mockActions, mockConfig, mockAuthenticatedContext) as IWriteReviewProps<IWriteReviewData>,resources:mockResources, renderView: jest.fn(props => { return <div props={props} />;})};\n  });\n\n  it('renders correctly when product is not present', () => {\n    // @ts-ignore\n    moduleProps = {...buildMockModuleProps(emptyMockData, mockActions, mockConfig, mockAuthenticatedContext) as IWriteReviewProps<IWriteReviewData>,resources:mockResources, renderView: jest.fn(props => { return <div props={props} />;})};\n    const component = mount(<WriteReview {...moduleProps} />);\n    expect(moduleProps.renderView).toBeCalled();\n    const viewProps: IWriteReviewViewProps = component.childAt(0).props().props;\n    expect(viewProps).toBeDefined();\n\n    expect(viewProps.signInMessage).toBeTruthy();\n    expect(viewProps.signInButton).toBeTruthy();\n    expect(viewProps.modalToggle).not.toBeTruthy();\n    expect(viewProps.reviewModal).toBeTruthy();\n    component.unmount();\n  });\n\n  it('renders correctly when product is not present', () => {\n    // @ts-ignore\n    moduleProps = {...buildMockModuleProps(updateReviewMockData, mockActions, mockConfig, mockAuthenticatedContext) as IWriteReviewProps<IWriteReviewData>,resources:mockResources, renderView: jest.fn(props => { return <div props={props} />;})};\n    const component = mount(<WriteReview {...moduleProps} />);\n    expect(moduleProps.renderView).toBeCalled();\n    const viewProps: IWriteReviewViewProps = component.childAt(0).props().props;\n    expect(viewProps).toBeDefined();\n\n    expect(viewProps.signInMessage).toBeTruthy();\n    expect(viewProps.signInButton).toBeTruthy();\n    expect(viewProps.modalToggle).toBeTruthy();\n    expect(viewProps.reviewModal).toBeTruthy();\n    component.unmount();\n  });\n\n  it('Updates the review title state', () => {\n    // @ts-ignore\n    moduleProps = {...buildMockModuleProps(updateReviewMockData, mockActions, mockConfig, mockAuthenticatedContext) as IWriteReviewProps<IWriteReviewData>,resources:mockResources, renderView: jest.fn(props => { return <div props={props} />;})};\n    const component = mount(<WriteReview {...moduleProps} />);\n    expect(moduleProps.renderView).toBeCalled();\n    const viewProps: IWriteReviewViewProps = component.childAt(0).props().props;\n    const changeEvent = {\n      target: { value: 'foo' }\n    };\n    const input = mount(viewProps.reviewModal.titleInput);\n    input.simulate('change', changeEvent);\n    expect(component.state('reviewTitle')).toBe('foo');\n    input.unmount();\n    component.unmount();\n  });\n\n  it('Updates the review text state', () => {\n    const component = mount(<WriteReview {...moduleProps} />);\n    expect(moduleProps.renderView).toBeCalled();\n    const viewProps: IWriteReviewViewProps = component.childAt(0).props().props;\n    const changeEvent = {\n      target: { value: 'foo' }\n    };\n    const input = mount(viewProps.reviewModal.textInput);\n    input.simulate('change', changeEvent);\n    expect(component.state('reviewText')).toBe('foo');\n    input.unmount();\n    component.unmount();\n  });\n\n  it('Toggles the review modal', () => {\n    const component = mount(<WriteReview {...moduleProps} />);\n    expect(moduleProps.renderView).toBeCalled();\n    const viewProps: IWriteReviewViewProps = component.childAt(0).props().props;\n    const input = mount(viewProps.modalToggle as React.ReactElement);\n    input.simulate('click');\n    expect(component.state('isReviewModalOpen')).toBe(true);\n    input.simulate('click');\n    expect(component.state('isReviewModalOpen')).toBe(false);\n    input.unmount();\n    component.unmount();\n  });\n\n  it('Clears the data in state if there is no user review upon opening', () => {\n    // @ts-ignore\n    moduleProps = {...buildMockModuleProps(nopReviewMockData, mockActions, mockConfig, mockAuthenticatedContext) as IWriteReviewProps<IWriteReviewData>,resources:mockResources, renderView: jest.fn(props => { return <div props={props} />;})};\n    const component = mount(<WriteReview {...moduleProps} />);\n    expect(moduleProps.renderView).toBeCalled();\n    const viewProps: IWriteReviewViewProps = component.childAt(0).props().props;\n    // tslint:disable-next-line: no-any\n    const input = mount(viewProps.modalToggle as any as React.ReactElement);\n    input.simulate('click');\n    expect(component.state('isReviewModalOpen')).toBe(true);\n    expect(component.state('reviewText')).toBe('');\n    expect(component.state('reviewTitle')).toBe('');\n    expect(component.state('rating')).toBe(0);\n    input.unmount();\n    component.unmount();\n  });\n\n  it('Closes the modal upon submitting', async () => {\n    // @ts-ignore\n    moduleProps = {...buildMockModuleProps(updateReviewMockData, mockActions, mockConfig, mockAuthenticatedContext) as IWriteReviewProps<IWriteReviewData>,resources:mockResources, renderView: jest.fn(props => { return <div props={props} />;})};\n    const component = mount(<WriteReview {...moduleProps} />);\n    expect(moduleProps.renderView).toBeCalled();\n    const viewProps: IWriteReviewViewProps = component.childAt(0).props().props;\n    // tslint:disable-next-line: no-any\n    const input = mount(viewProps.reviewModal.submitButton);\n    input.simulate('click');\n    await flushPromises();\n    expect(component.state('isReviewModalOpen')).toBe(false);\n    input.unmount();\n  });\n});"]}