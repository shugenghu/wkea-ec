{"version":3,"file":"footer-item.js","sourceRoot":"./src/","sources":["modules/footer-item/footer-item.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getPayloadObject, getTelemetryAttributes, getTelemetryObject, IModuleProps, INodeProps, IPayLoad, ITelemetryContent, onTelemetryClick } from '@msdyn365-commerce-modules/utilities';\nimport * as Msdyn365 from '@msdyn365-commerce/core';\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport { IFooterItemConfig, IFooterItemProps, IHeadingData, ILinkData } from './footer-item.props.autogenerated';\n\nexport interface IFooterViewProps extends IFooterItemProps<IFooterItemConfig> {\n    heading: React.ReactNode;\n    image: React.ReactNode;\n    text: React.ReactNode;\n    linkText: React.ReactNode;\n    className?:string;\n    FooterItem: IModuleProps;\n    HeadingContainer: INodeProps;\n    ItemContainer: INodeProps;\n    Link: INodeProps;\n    EditableLink: React.ReactNode;\n}\n\n/**\n *\n * FooterItem component\n * @extends {React.PureComponent<IFooterItemProps<IFooterItemConfig>>}\n */\nexport class FooterItem extends React.PureComponent<IFooterItemProps<IFooterItemConfig>> {\n    private telemetryContent: ITelemetryContent;\n    private payLoad: IPayLoad;\n    private attributes: Msdyn365.IDictionary<string> | undefined;\n    constructor(props: IFooterItemProps<IFooterItemConfig>) {\n        super(props);\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!,\n                                                   this.props.friendlyName,\n                                                   this.props.telemetry);\n        // Construct telemetry attribute to render\n        this.payLoad = getPayloadObject('click', this.telemetryContent, '', '');\n    }\n\n    public render(): JSX.Element {\n        const {heading, image, link, text} = this.props.config;\n        const footerItemClassName = classnames('ms-footer__item', this.props.config.className);\n        const linkText = link && link.linkText ? link.linkText : '';\n        this.payLoad.contentAction.etext = linkText;\n        this.attributes = getTelemetryAttributes(this.telemetryContent, this.payLoad);\n        const viewProps: IFooterViewProps = {\n            ... this.props,\n            heading: this._createHeading(heading!),\n            image: this._createImageMarkup(image!),\n            text:this._createText(text!),\n            linkText: this._createLinkText(link!),\n            EditableLink: this._createLink(link!),\n            // @ts-ignore\n            FooterItem: {\n                moduleProps: this.props,\n                className: footerItemClassName\n            },\n            // @ts-ignore\n            HeadingContainer: {\n                className: 'ms-footer__heading'\n            },\n            // @ts-ignore\n            ItemContainer: {\n                className: 'ms-footer__link__container'\n            },\n             // @ts-ignore\n            Link: link && link.linkUrl && link.linkUrl.destinationUrl && {\n                tag: 'a',\n                className: 'ms-footer__link',\n                href: link.linkUrl.destinationUrl,\n                title:linkText,\n                target: link.openInNewTab ? '_blank' : undefined,\n                onClick: onTelemetryClick(this.telemetryContent, this.payLoad, linkText),\n                ...this.attributes\n            },\n            className:footerItemClassName\n        };\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    public handleHeadingChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.heading!.text = event.target.value;\n\n    public handleTextChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.text = event.target.value;\n\n    public handleLinkTextChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.link!.linkText = event.target.value;\n\n    private _createLink(link: ILinkData): React.ReactNode | null {\n        if(link) {\n            const linkText = link.linkText ? link.linkText : '';\n            // TODO: Update the inner tag in the anchor link to span\n            const editableLink: Msdyn365.ILinksData = {\n                ariaLabel: link.ariaLabel,\n                className: 'ms-footer__link',\n                linkText: linkText,\n                linkUrl: link.linkUrl.destinationUrl,\n                openInNewTab: link.openInNewTab,\n                role: 'button',\n                additionalProperties: this.attributes!,\n                onClick: onTelemetryClick(this.telemetryContent, this.payLoad, linkText)\n            };\n            return(\n                <Msdyn365.Link\n                    link={editableLink}\n                    editProps={{onTextChange: this.handleLinkTextChange, requestContext: this.props.context.request}}\n                />\n            );\n\n        }\n        return null;\n    }\n\n    private _createLinkText(link: ILinkData): React.ReactNode | null {\n        if(!link || !link.linkText) {\n            return null;\n        }\n\n        return (<span className='ms-footer__link__text'>{link.linkText}</span>);\n    }\n\n    private _createHeading(heading: IHeadingData): React.ReactNode | null {\n        if(!heading || !heading.text || !heading.text.length) {\n            return null;\n        }\n\n        return (\n            <Msdyn365.Text\n                tag= {heading.tag || 'h2'}\n                text= {heading.text}\n                className='ms-footer__heading__title'\n                editProps= {{onEdit: this.handleHeadingChange, requestContext: this.props.context.request}}\n            />\n        );\n    }\n\n    private _createText(text: string): React.ReactNode | null {\n        if (!text) {\n            return null;\n        }\n        return (\n                <Msdyn365.Text\n                    tag= 'div'\n                    text= {text}\n                    className='ms-footer-item__text'\n                    editProps={{onEdit: this.handleTextChange, requestContext: this.props.context.request}}\n                />\n        );\n    }\n\n    private _createImageMarkup(item: Msdyn365.IImageData, ariaHiddenAttr?: boolean): React.ReactNode | null {\n        if(!item || !item.src || !item.src.length) {\n            return null;\n        }\n\n        const defaultImageSettings: Msdyn365.IImageSettings = {\n            viewports: {\n                xs: { q: `w=24&h=24&m=6`, w: 0, h: 0 },\n                lg: { q: `w=24&h=24&m=6`, w: 0, h: 0 }\n            },\n            lazyload: true\n        };\n        return (\n            <Msdyn365.Image\n                {...item}\n                gridSettings={this.props.context.request.gridSettings!}\n                imageSettings={item.imageSettings || defaultImageSettings}\n                loadFailureBehavior='default'\n                aria-hidden={ariaHiddenAttr}\n                editProps={{key:this.props.config.image || {}, requestContext: this.props.context.request}}\n            />\n        );\n    }\n}\n\nexport default FooterItem;\n"]}