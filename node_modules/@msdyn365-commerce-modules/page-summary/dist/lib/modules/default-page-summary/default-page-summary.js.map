{"version":3,"file":"default-page-summary.js","sourceRoot":"./src/","sources":["modules/default-page-summary/default-page-summary.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as React from 'react';\n\nimport { HtmlHeadInclude, IAny, IGeneric } from '@msdyn365-commerce/core';\nimport { IDefaultPageSummaryData } from './default-page-summary.data';\nimport { IDefaultPageSummaryProps } from './default-page-summary.props.autogenerated';\n\n/**\n *\n * DefaultPageSummaryMetadata component\n * @extends {React.PureComponent<DefaultPageSummaryProps>}\n */\nclass DefaultPageSummary extends React.PureComponent<IDefaultPageSummaryProps<IDefaultPageSummaryData>> {\n    public render(): JSX.Element {\n        if (this.props.data.pageSummary.result === undefined) {\n            throw new Error('PageSummaryData input to page-summary is undefined. Unable to generate page-summary');\n        }\n        let {\n            data: {\n                pageSummary: {\n                    result: { title, description, keywords, sharingImageUrl, faviconUrl }\n                }\n            },\n        } = this.props;\n\n        const {\n            config,\n            context,\n            data: {\n                pageSummary: {\n                    result: { canonicalUrl }\n                }\n            },\n        } = this.props;\n\n        // Override values coming from data action if config values are provided\n        title = config.title || title;\n        description = config.description || description;\n        keywords = config.keywords || keywords;\n        sharingImageUrl = (config.sharingImage && config.sharingImage.src) || sharingImageUrl;\n        faviconUrl = config.faviconUrl || faviconUrl;\n\n        const pageTitle = this._constructPageTitle(title, context && context.request && context.request.app);\n        return (\n            <React.Fragment>\n                <HtmlHeadInclude>\n                    {pageTitle && <title>{pageTitle}</title>}\n                    {description && <meta name='description' content={description} />}\n                    {keywords && <meta name='keywords' content={keywords} />}\n                    {canonicalUrl && <link rel='canonical' href={canonicalUrl} />}\n                    {faviconUrl && <link rel='shortcut icon' href={faviconUrl} />}\n                </HtmlHeadInclude>\n                {!config.disableOgTags && this._renderOgTags(pageTitle, description, sharingImageUrl)}\n                {!config.disableTwitterTags && this._renderTwitterTags(pageTitle, description, sharingImageUrl)}\n            </React.Fragment>\n        );\n    }\n\n    private _renderOgTags(title: string | undefined, description: string | undefined, sharingImageUrl: string | undefined): JSX.Element {\n        return (\n            <HtmlHeadInclude>\n                {title && <meta property='og:title' content={title} />}\n                {description && <meta property='og:description' content={description} />}\n                {sharingImageUrl && <meta property='og:image' content={sharingImageUrl} />}\n                <meta property='og:type' content='website' />\n            </HtmlHeadInclude>\n        );\n    }\n\n    private _renderTwitterTags(\n        title: string | undefined,\n        description: string | undefined,\n        sharingImageUrl: string | undefined\n    ): JSX.Element {\n        return (\n            <HtmlHeadInclude>\n                {title && <meta name='twitter:title' content={title} />}\n                {description && <meta name='twitter:description' content={description} />}\n                {sharingImageUrl && <meta name='twitter:image' content={sharingImageUrl} />}\n                {<meta name='twitter:card' content='summary' />}\n            </HtmlHeadInclude>\n        );\n    }\n\n    private _constructPageTitle(title: string | undefined, app: IGeneric<IAny>): string | undefined {\n        if(!title) {\n            title = '';\n        }\n\n        const moduleConfig = this.props.config;\n        if (moduleConfig && moduleConfig.ignoreTitleSuffixPrefix) {\n            return title;\n        }\n\n        const appConfig = app && app.platform;\n        if (appConfig) {\n            if (appConfig.pageTitlePrefix) {\n                title = (appConfig.pageTitlePrefix as string) + title;\n            }\n            if (appConfig.pageTitleSuffix) {\n                title = title + (appConfig.pageTitleSuffix as string);\n            }\n        }\n\n        return title;\n    }\n}\n\nexport default DefaultPageSummary;\n"]}