{"version":3,"file":"default-page-summary.action.js","sourceRoot":"./src/","sources":["modules/default-page-summary/default-page-summary.action.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,0BAA0B,EAAE,MAAM,2CAA2C,CAAC;AACvF,OAAO,EAEH,0BAA0B,EAM7B,MAAM,yBAAyB,CAAC;AAajC,MAAM,OAAO,gBAAgB;IAIzB,YAAY,MAAiC,EAAE,cAA+B;QAKvE,uBAAkB,GAAG,GAAW,EAAE,CAAC,aAAa,CAAC;QACjD,gBAAW,GAAG,GAAW,EAAE,CAAC,GAAG,0BAA0B,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QACrH,kBAAa,GAAG,GAAc,EAAE,CAAC,SAAS,CAAC;QAN9C,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;QAC3B,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;IACzC,CAAC;CAKJ;AAED,MAAM,MAAM,GAAG,KAAK,EAAE,KAAuB,EAAE,OAAuB,EAA6B,EAAE;IACjG,MAAM,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;IACzB,OAAO;QACH,KAAK,EAAE,MAAM,IAAI,MAAM,CAAC,KAAK;QAC7B,WAAW,EAAE,MAAM,IAAI,MAAM,CAAC,WAAW;QACzC,QAAQ,EAAE,MAAM,IAAI,MAAM,CAAC,QAAQ;QACnC,eAAe,EAAE,MAAM,IAAI,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,YAAY,CAAC,GAAG;QACzE,YAAY,EAAE,OAAO,CAAC,cAAc,IAAI,OAAO,CAAC,cAAc,CAAC,YAAY;QAC3E,UAAU,EAAE,MAAM,IAAI,MAAM,CAAC,UAAU;KAC1C,CAAC;AACN,CAAC,CAAC;AAEF,eAAe,0BAA0B,CAAC;IACtC,EAAE,EAAE,8DAA8D;IAClE,MAAM,EAA6B,MAAM;IACzC,KAAK,EAAE,CAAC,IAA0B,EAAE,EAAE;QAClC,OAAO,IAAI,gBAAgB,CAA4B,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IAC7F,CAAC;CACJ,CAAC,CAAC","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { buildCacheKeyWithUrlTokens } from '@msdyn365-commerce-modules/retail-actions';\nimport {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext,\n    IRequestContext\n} from '@msdyn365-commerce/core';\nimport { IDefaultPageSummaryConfig } from './default-page-summary.props.autogenerated';\n\nexport interface IPageSummaryData {\n    title?: string;\n    description?: string;\n    keywords?: string;\n    sharingImageUrl?: string;\n    canonicalUrl?: string;\n    faviconUrl?: string;\n}\n\n/** Page Summary Input */\nexport class PageSummaryInput implements IActionInput {\n    public requestContext: IRequestContext;\n    public config: IDefaultPageSummaryConfig;\n\n    constructor(config: IDefaultPageSummaryConfig, requestContext: IRequestContext) {\n        this.config = config || {};\n        this.requestContext = requestContext;\n    }\n\n    public getCacheObjectType = (): string => 'PageSummary';\n    public getCacheKey = (): string => `${buildCacheKeyWithUrlTokens('PageSummary', this.requestContext)}-${this.config.title}`;\n    public dataCacheType = (): CacheType => 'request';\n}\n\nconst action = async (input: PageSummaryInput, context: IActionContext): Promise<IPageSummaryData> => {\n    const { config } = input;\n    return {\n        title: config && config.title,\n        description: config && config.description,\n        keywords: config && config.keywords,\n        sharingImageUrl: config && config.sharingImage && config.sharingImage.src,\n        canonicalUrl: context.requestContext && context.requestContext.canonicalUrl,\n        faviconUrl: config && config.faviconUrl\n    };\n};\n\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/page-summary/default-page-summary',\n    action: <IAction<IPageSummaryData>>action,\n    input: (args: ICreateActionContext) => {\n        return new PageSummaryInput(<IDefaultPageSummaryConfig>args.config, args.requestContext);\n    }\n});\n"]}