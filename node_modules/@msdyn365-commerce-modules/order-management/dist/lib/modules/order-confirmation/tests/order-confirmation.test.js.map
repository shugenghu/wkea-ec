{"version":3,"file":"order-confirmation.test.js","sourceRoot":"./src/","sources":["modules/order-confirmation/tests/order-confirmation.test.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { wrapInResolvedAsyncResult } from '@msdyn365-commerce-modules/retail-actions';\nimport { buildMockCoreContext, buildMockModuleProps } from '@msdyn365-commerce/core';\nimport { AsyncResult, LoyaltyCard, SalesOrder, SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport { render } from 'enzyme';\nimport * as React from 'react';\nimport OrderConfirmation from '../order-confirmation';\nimport { IOrderConfirmationData } from '../order-confirmation.data';\nimport { HeadingTag, IOrderConfirmationConfig, IOrderConfirmationProps, IOrderConfirmationResources } from '../order-confirmation.props.autogenerated';\nimport renderView from '../order-confirmation.view';\nimport { mockProducts, mockSalesOrder, mockTenderTypes, mockTransaction } from './__mock__';\n\n// @ts-ignore\nconst mockContext: ICoreContext = buildMockCoreContext({\n    // @ts-ignore only mock partial data\n    request: {\n        gridSettings: {\n            xs: { w: 767, h: 0 },\n            sm: { w: 991, h: 0 },\n            md: { w: 1199, h: 0 },\n            lg: { w: 1599, h: 0 },\n            xl: { w: 1600, h: 0 }\n        },\n        // @ts-ignore only mock partial data\n        apiSettings: {\n            channelId: 5637145359\n        },\n        // @ts-ignore only mock partial data\n        channel: {\n            PickupDeliveryModeCode: '70'\n        }\n    }\n});\n\nconst loyaltyCard: LoyaltyCard = {\n    CardNumber: '1234567890',\n    LoyaltyEnrollmentDate: new Date('Wed Jul 03 2019 14:44:37 GMT-0700'),\n    RewardPoints: [\n        {\n            RewardPointId: 'Fabrikam',\n            RewardPointTypeValue: 1,\n            RewardPointCurrency: 'USD',\n            IsRedeemable: true,\n            PointsExpiringSoon: 34,\n            ActivePoints: 90,\n            Description: 'Fabrikam awesome points'\n        }\n    ]\n};\n\nconst mockDataWithSalesOrder: IOrderConfirmationData = {\n    orderHydration: {\n        status: 'SUCCESS',\n        result: {\n            salesOrder: mockSalesOrder,\n            products: mockProducts\n        }\n    } as AsyncResult<{\n        salesOrder: SalesOrder;\n        products: SimpleProduct[];\n    }>,\n    tenderTypes: wrapInResolvedAsyncResult(mockTenderTypes),\n    loyaltyCard: wrapInResolvedAsyncResult(loyaltyCard)\n};\n\nconst mockDataWithTransaction: IOrderConfirmationData = {\n    orderHydration: {\n        status: 'SUCCESS',\n        result: {\n            salesOrder: mockTransaction,\n            products: mockProducts\n        }\n    } as AsyncResult<{\n        salesOrder: SalesOrder;\n        products: SimpleProduct[];\n    }>,\n    tenderTypes: wrapInResolvedAsyncResult(mockTenderTypes),\n    loyaltyCard: wrapInResolvedAsyncResult(loyaltyCard)\n};\n\nconst mockConfigSalesOrder: IOrderConfirmationConfig = {\n    contactNumber: '123-456-7890'\n};\n\nconst mockConfigResources: IOrderConfirmationResources = {\n    orderSummaryHeading: 'Order summary',\n    receiptEmailMessage: 'Confirmation email sent to ',\n    receiptIdLabel: 'Receipt#',\n    loadingLabel: 'Loading...',\n    freePriceText: 'FREE',\n    orderSummaryItemsTotalLabel: 'Subtotal',\n    orderSummaryShippingFeeLabel: 'Shipping',\n    orderSummaryTaxLabel: 'Tax',\n    orderSummaryGrandTotalLabel: 'Grand total',\n    salesLineQuantityText: 'Quantity:',\n    processingLabel: 'Processing',\n    creditCardEndingLabel: 'card ending in',\n    giftCardEndingLabel: 'Gift card ending in',\n    amountCoveredLabel: 'Amount covered:',\n    loyaltyCardUsedLabel: 'Loyalty card used',\n    cashUsedLabel: 'Cash',\n    customerAccountUsedLabel: 'Customer Account',\n    orderIdLabel: 'Order ID:',\n    confirmationIdLabel: 'Confirmation Id',\n    orderSummaryTitle: 'Order summary',\n    paymentMethodsTitle: 'Payment method',\n    shippingAddressTitle: 'Shipping address',\n    noSalesOrderText: 'No order confirmation found',\n    needHelpLabel: 'Need help?',\n    helpLineNumberLabel: 'Call',\n    helpLineContactAriaLabel: 'Need help, call',\n    orderItemLabel: 'item',\n    orderItemsLabel: 'items',\n    pickedUpSalesLines: 'Store pickup',\n    deliveredSalesLines: 'Delivery',\n    carryOutSalesLines: 'Purchased',\n    orderStatusReadyForPickup: 'Ready for pickup',\n    orderStatusProcessing: 'Processing',\n    orderStatusShipped: 'Shipped',\n    orderStatusPickedUp: 'Picked up',\n    orderStatusCanceled: 'Canceled',\n    phoneLabel: 'Phone: ',\n    phoneAriaLabel: 'Shop phone',\n    buyItAgainLabel: 'Buy it again',\n    buyItAgainAriaLabel: 'Buy it again for {productName}',\n    shipToLabel: 'Ship to',\n    storeLabel: 'Store',\n    productDimensionTypeColor: 'Color:',\n    productDimensionTypeSize: 'Size:',\n    productDimensionTypeStyle: 'Style:',\n    genericErrorMessage: 'Something went wrong. Please try again later.',\n    trackingLabel: 'Tracking number:',\n    trackingComingSoonLabel: 'Not yet available',\n    trackingAriaLabel: 'Track your order',\n    pointsEarnedLabel: 'Points earned',\n    backToShopping: 'Back to shopping',\n    configString: 'Configuration',\n    discountStringText: 'Savings ',\n    pickupItemsHeader: 'Pickup address',\n    pickingItemsLabel: 'Picking up 1 item',\n    orderPlacedOnLabel: 'Order placed on:',\n    shippingItemToYouLabel: 'Shipping 2 items to you'\n};\n\nconst mockConfigWithTransition: IOrderConfirmationConfig = {\n    heading: {\n        text: 'Order confirmation',\n        tag: HeadingTag.h1\n    },\n    contactNumber: '000-000-0000'\n};\n\nconst mockActions = {};\n\ndescribe('OrderConfirmation', () => {\n    let modulePropsWithSalesOrder: IOrderConfirmationProps<IOrderConfirmationData>;\n    let modulePropsWithTransaction: IOrderConfirmationProps<IOrderConfirmationData>;\n\n    beforeAll(() => {\n        modulePropsWithSalesOrder = {\n            ...(buildMockModuleProps(mockDataWithSalesOrder, mockActions, mockConfigSalesOrder, mockContext) as IOrderConfirmationProps<\n                IOrderConfirmationData\n            >),\n            resources: mockConfigResources,\n            // @ts-ignore\n            renderView\n        };\n        modulePropsWithTransaction = {\n            ...(buildMockModuleProps(mockDataWithTransaction, mockActions, mockConfigWithTransition, mockContext) as IOrderConfirmationProps<\n                IOrderConfirmationData\n            >),\n            resources: mockConfigResources,\n            // @ts-ignore\n            renderView\n        };\n    });\n    it('renders correctly with sales order', () => {\n        const module = render(<OrderConfirmation {...modulePropsWithSalesOrder} />);\n        expect(module).toMatchSnapshot();\n    });\n\n    it('renders correctly with transaction', () => {\n        const module = render(<OrderConfirmation {...modulePropsWithTransaction} />);\n        expect(module).toMatchSnapshot();\n    });\n});\n"]}