{"version":3,"file":"order-details.js","sourceRoot":"./src/","sources":["modules/order-details/order-details.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Button, getTelemetryObject, IModuleProps, INodeProps, ITelemetryContent } from '@msdyn365-commerce-modules/utilities';\nimport * as Msdyn365 from '@msdyn365-commerce/core';\nimport { SalesOrder, SimpleProduct } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport classname from 'classnames';\nimport get from 'lodash/get';\nimport { computed } from 'mobx';\nimport * as React from 'react';\nimport { IGetOrderSummaryInput, IHelp, IOrderSummary, IPaymentMethods, IPaymentMethodsInput  } from '../../common';\nimport { getGroups, IGroups } from '../../common/get-groups';\nimport { getOrderInfomationInput, getOrderInformation, IOrderInformation } from '../../common/get-order-information';\nimport { ISalesLine } from '../../common/get-sales-line';\nimport { getSalesLines, getSalesLinesInput } from '../../common/get-sales-lines';\nimport LabelComponent from '../../common/label';\nimport { getTenderIdOperationIdMap, IPriceContext } from '../../common/utilities';\nimport { IOrderDetailsData, IOrderDetailsProps } from './../..';\nimport { getOrderDetailsHelp } from './components/get-help';\nimport { getOrderDetailsOrderSummary } from './components/get-order-summary';\nimport { getOrderDetailsPaymentMethods } from './components/get-payment-methods';\nimport { addressOptions } from './order-details.props.autogenerated';\n\nexport * from '../../common/get-groups';\nexport * from '../../common/get-order-information';\nexport * from '../../common/get-sales-line';\nexport * from '../../common/get-sales-lines';\nexport * from '../../common/utilities';\nexport * from './components/get-help';\nexport * from './components/get-order-summary';\nexport * from './components/get-payment-methods';\n\nexport interface IOrderDetailsViewProps extends IOrderDetailsProps<IOrderDetailsData> {\n    moduleProps: IModuleProps;\n    salesOrder?: SalesOrder;\n    footerProps?: INodeProps;\n    alert?: React.ReactNode;\n    loading?: React.ReactNode;\n    heading: React.ReactNode;\n    backToShoppingLink?: React.ReactNode;\n    orderInfomation?: IOrderInformation;\n    salesLines?: ISalesLine[];\n    groups?: IGroups;\n    orderSummary?: IOrderSummary;\n    payment?: IPaymentMethods;\n    help?: IHelp;\n}\n\n/**\n *\n * OrderDetails component\n * @extends {React.PureComponent<IOrderDetailsProps<IOrderDetailsData>>}\n */\nclass OrderDetails extends React.PureComponent<IOrderDetailsProps<IOrderDetailsData>> {\n    private moduleName: string = 'ms-order-details';\n    private telemetryContent: ITelemetryContent;\n\n    @computed get isCurrentChannel(): boolean {\n        if (!this.order) {\n            return false;\n        }\n        return this.order.ChannelId === get(this.props, 'context.request.apiSettings.channelId');\n    }\n\n    @computed get isDataReady(): boolean {\n        return get(this.props, 'data.orderHydration.status') === 'SUCCESS';\n    }\n\n    @computed get hasError(): boolean {\n        return get(this.props, 'data.orderHydration.status') === 'FAILED';\n    }\n\n    @computed get order(): SalesOrder | undefined {\n        return get(this.props, 'data.orderHydration.result.salesOrder');\n    }\n\n    @computed get products(): SimpleProduct[] {\n        return get(this.props, 'data.orderHydration.result.products') || [];\n    }\n\n    @computed get priceContext(): IPriceContext {\n        const {\n            id,\n            typeName,\n            context,\n            telemetry,\n            resources: { freePriceText }\n        } = this.props;\n        return {\n            id,\n            typeName,\n            context,\n            telemetry,\n            freePriceText\n        };\n    }\n\n    @computed get earnedPoints(): number {\n        const loyaltyCard = this.props.data.loyaltyCard.result;\n        if (loyaltyCard && loyaltyCard.RewardPoints && this.order) {\n            const pointPrograms = loyaltyCard.RewardPoints.map(point => point.RewardPointId);\n            const rewardLines = this.order.LoyaltyRewardPointLines || [];\n            let total = 0;\n            rewardLines.forEach(line => {\n                if ((line.RewardPointAmountQuantity || 0) > 0 && pointPrograms.indexOf(line.RewardPointId) > -1) {\n                    total += line.RewardPointAmountQuantity!;\n                }\n            });\n            return total;\n        }\n        return 0;\n    }\n\n    @computed get orderSummaryProps(): IGetOrderSummaryInput | undefined {\n        if (!this.order) {\n            return;\n        }\n        const { request } = this.props.context;\n        const pickupDeliveryModeCode = request && request.channel && request.channel.PickupDeliveryModeCode;\n        const orderDetailsLines =  this.order?.SalesLines;\n        const canShip = orderDetailsLines?.some(orderDetailsLine => (orderDetailsLine.DeliveryMode && orderDetailsLine.DeliveryMode !== '') ? orderDetailsLine.DeliveryMode !== pickupDeliveryModeCode : orderDetailsLine);\n\n        const {\n            resources: { orderSummaryHeading, orderSummaryItemsTotalLabel, orderSummaryShippingFeeLabel, orderSummaryTaxLabel, orderSummaryGrandTotalLabel, pointsEarnedLabel }\n        } = this.props;\n        return {\n            order: this.order,\n            earnedPoints: this.earnedPoints,\n            priceContext: this.priceContext,\n            resource: {\n                orderSummaryHeading,\n                orderSummaryItemsTotalLabel,\n                orderSummaryShippingFeeLabel,\n                orderSummaryTaxLabel,\n                pointsEarnedLabel,\n                orderSummaryGrandTotalLabel\n            },\n            canShip: canShip\n        };\n    }\n\n    @computed get paymentMethodsProps(): IPaymentMethodsInput | undefined {\n        const tenderTypes = this.props.data.tenderTypes.result;\n        if (!this.order || !this.order.TenderLines || !tenderTypes) {\n            return;\n        }\n\n        const locale = get(this.props, 'context.request.locale') || 'en-US';\n\n        const {\n            resources: {\n                paymentMethodsTitle,\n                creditCardEndingLabel,\n                giftCardEndingLabel,\n                amountCoveredLabel,\n                cashUsedLabel,\n                loyaltyCardUsedLabel,\n                customerAccountUsedLabel\n            }\n        } = this.props;\n\n        return {\n            priceContext: this.priceContext,\n            tenderLines: this.order.TenderLines,\n            tenderIdOperationIdMap: getTenderIdOperationIdMap(tenderTypes),\n            locale,\n            resource: {\n                paymentMethodsTitle,\n                creditCardEndingLabel,\n                giftCardEndingLabel,\n                amountCoveredLabel,\n                cashUsedLabel,\n                loyaltyCardUsedLabel,\n                customerAccountUsedLabel\n            }\n        };\n    }\n\n    constructor(props: IOrderDetailsProps<IOrderDetailsData>) {\n        super(props);\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!, this.props.friendlyName, this.props.telemetry);\n    }\n\n    public render(): JSX.Element {\n        const {\n            resources: {\n                noSalesOrderDetailsText,\n                genericErrorMessage,\n                needHelpLabel,\n                helpLineNumberLabel,\n                loadingLabel,\n                backToShopping,\n                orderItemLabel,\n                orderItemsLabel,\n                helpLineContactAriaLabel,\n            },\n            config: { heading, contactNumber, showChannelInfo }\n        } = this.props;\n\n        const showAddress = this.props.config.addressOptions !== undefined && this.props.config.addressOptions === addressOptions.showAddressWithSingleLine || this.props.config.addressOptions === addressOptions.showAddressWithMultiplelines;\n        const showFullAddress = this.props.config.addressOptions !== undefined && this.props.config.addressOptions === addressOptions.showAddressWithMultiplelines;\n        const moduleProps = { moduleProps: this.props, className: classname('ms-order-details', this.props.config.className) };\n        const backToShoppingUrl = Msdyn365.getUrlSync('home', this.props.context.actionContext) || '';\n        const channelIdentities = this.props.data.channels.result && this.props.data.channels.result.channelIdentities;\n        const orgUnitLocations = this.props.data.orgUnitLocations.result && this.props.data.orgUnitLocations.result.orgUnitLocations;\n\n        let viewProps: IOrderDetailsViewProps = {\n            ...this.props,\n            moduleProps,\n            heading: heading && (\n            <Msdyn365.Text\n                {...heading}\n                className='ms-order-details__heading'\n                text={heading.text}\n                tag={heading.tag || 'h2'}\n                editProps={{ onEdit: this.handleOrderDetailsHeadingChange, requestContext: this.props.context.request }}\n            />\n            ),\n            backToShoppingLink: backToShoppingUrl && (\n                <Button className='ms-order-details__btn-keep-shopping' href={backToShoppingUrl}>\n                    {backToShopping}\n                </Button>\n            ),\n            footerProps: { className: 'ms-order-details__footer' }\n        };\n\n        if (this.hasError) {\n            viewProps = {\n                ...viewProps,\n                alert: <LabelComponent className='ms-order-details__alert' label={genericErrorMessage} />\n            };\n            return this.props.renderView(viewProps) as React.ReactElement;\n        }\n\n        if (!this.isDataReady) {\n            viewProps = {\n                ...viewProps,\n                loading: <LabelComponent className='ms-order-details__loading' label={loadingLabel} />\n            };\n            return this.props.renderView(viewProps) as React.ReactElement;\n        }\n\n        if (!this.order) {\n            viewProps = {\n                ...viewProps,\n                alert: <LabelComponent className='ms-order-details__alert' label={noSalesOrderDetailsText} />\n            };\n            return this.props.renderView(viewProps) as React.ReactElement;\n        }\n\n        const salesLinesInput = getSalesLinesInput(this.props, this.moduleName, this.order, this.products, this.priceContext, showFullAddress, this.telemetryContent);\n        const salesLines = salesLinesInput && getSalesLines(salesLinesInput);\n\n        const orderInfomationInput = this.order && getOrderInfomationInput(this.props, this.moduleName, this.order, this.priceContext, channelIdentities, orgUnitLocations, showChannelInfo);\n        const orderInfomation = orderInfomationInput && getOrderInformation(orderInfomationInput);\n\n        viewProps = {\n            ...viewProps,\n            salesOrder: this.order,\n            orderInfomation,\n            salesLines,\n            groups: salesLines\n                ? getGroups({\n                    moduleName: this.moduleName,\n                    salesLines,\n                    resources: { orderItemLabel, orderItemsLabel },\n                    showAddress\n                })\n                : undefined,\n            orderSummary: this.orderSummaryProps ? getOrderDetailsOrderSummary(this.orderSummaryProps) : undefined,\n            payment: this.paymentMethodsProps ? getOrderDetailsPaymentMethods(this.paymentMethodsProps) : undefined,\n            help: contactNumber ? getOrderDetailsHelp({ needHelpLabel, helpLineNumberLabel, contactNumber, helpLineContactAriaLabel, telemetryContent: this.telemetryContent }) : undefined\n        };\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    public handleOrderDetailsHeadingChange = (event: Msdyn365.ContentEditableEvent) => this.props.config.heading!.text = event.target.value;\n}\n\nexport default OrderDetails;\n"]}