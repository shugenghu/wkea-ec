/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import { buildMockModuleProps, buildMockRequest, IRequestContext } from '@msdyn365-commerce/core';
import { render } from 'enzyme';
// tslint:disable-next-line:no-unused-variable
import * as React from 'react';
import ContentblockModule from '../content-block';
import { actionableRegion, HeadingTag, IContentBlockConfig, IContentBlockProps } from '../content-block.props.autogenerated';
import ContentBlockView from '../content-block.view';

const mockConfig: IContentBlockConfig = {
    heading:{
        text:'Micheal Hill',
        tag: HeadingTag.h2
      },
      paragraph:'We think about you and the reasons behind your purchase – designing timeless pieces that bring out your best.',
      image:{
        src: 'https://img-prod-cms-mr-microsoft-com.akamaized.net/cms/api/fabrikam/imageFileData/MA1QsS'
      },
      links:[
        {
        linkText: 'Shop now',
        linkUrl:
        {
            destinationUrl: 'https://mocktest'
        },
        ariaLabel: 'Mock aria label'
      }
      ],
      className:'',
      imageLink:
      {
        destinationUrl: '/modern/storefaq'
      },
      actionableRegion:actionableRegion.imageAndLinks,
      imageAriaLabel:'image aria label'
};

const mockConfig2: IContentBlockConfig = {
    heading:{
        text:'Micheal Hill',
        tag: HeadingTag.h2
      },
      paragraph:'We think about you and the reasons behind your purchase – designing timeless pieces that bring out your best.',
      image:{
        src: 'https://img-prod-cms-mr-microsoft-com.akamaized.net/cms/api/fabrikam/imageFileData/MA1QsS'
      },
      links:[
        {
        linkText: 'Shop now',
        linkUrl:
        {
            destinationUrl: 'https://mocktest'
        },
        ariaLabel: 'Mock aria label'
      }
      ],
      className:'',
      actionableRegion:actionableRegion.imageAndLinks,
      imageAriaLabel:'image aria label'
};

// @ts-ignore
const mockRequest: IRequestContext = buildMockRequest();
// @ts-ignore
const mockContext: ICoreContext = {
    request: mockRequest
};

describe('Content block integration tests', () => {
    it('renders correctly with anchor', () => {
        const moduleProps: IContentBlockProps<{}> = {
            ...(buildMockModuleProps({}, {}, mockConfig, mockContext) as IContentBlockProps<{}>),
            // @ts-ignore
            renderView: ContentBlockView
        };
        const component = render(<ContentblockModule {...moduleProps} />);
        expect(component).toMatchSnapshot();
    });
});

describe('Content block integration tests', () => {
    it('renders correctly without anchor', () => {
        const moduleProps: IContentBlockProps<{}> = {
            ...(buildMockModuleProps({}, {}, mockConfig2, mockContext) as IContentBlockProps<{}>),
            // @ts-ignore
            renderView: ContentBlockView
        };
        const component = render(<ContentblockModule {...moduleProps} />);
        expect(component).toMatchSnapshot();
    });
});
