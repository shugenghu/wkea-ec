{"version":3,"file":"header.js","sourceRoot":"./src/","sources":["modules/header/header.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport {\n    Button, getPayloadObject, getTelemetryAttributes, getTelemetryObject, IModuleProps, INodeProps, ITelemetryContent, KeyCodes, Modal,\n    ModalBody, ModalHeader, onTelemetryClick, Popover, TelemetryConstant\n} from '@msdyn365-commerce-modules/utilities';\nimport { CartIconComponent, WishListIconComponent } from '@msdyn365-commerce/components';\nimport * as MsDyn365 from '@msdyn365-commerce/core';\nimport { Customer } from '@msdyn365-commerce/retail-proxy';\nimport classnames from 'classnames';\nimport { computed } from 'mobx';\nimport * as React from 'react';\nimport { Logo, NavIcon } from './components';\nimport { IHeaderData } from './header.data';\nimport { IHeaderProps, IHeaderResources, IMyAccountLinksData } from './header.props.autogenerated';\n\nexport interface IHeaderState {\n    mobileMenuCollapsed: boolean;\n    signinPopoverOpen: boolean;\n}\n\nexport interface IHeaderViewProps extends IHeaderProps<IHeaderData>, IHeaderState {\n    logo: React.ReactNode;\n    wishListIconDesktop: React.ReactNode;\n    wishListIconMobile: React.ReactNode;\n    cartIcon: React.ReactNode;\n    navIcon: React.ReactNode;\n    className: string;\n    menuBar: React.ReactNode[];\n    search: React.ReactNode[];\n    siteOptions: React.ReactNode[];\n    HeaderTag: IModuleProps;\n    HeaderContainer: INodeProps;\n    MobileMenuContainer: INodeProps;\n    MobileMenuHeader: React.ReactNode;\n    MobileMenuBodyContainer: INodeProps;\n    MobileMenuLinksContainer: INodeProps;\n    HeaderTopBarContainer: INodeProps;\n    Divider: INodeProps;\n\n    AccountInfoDropdownParentContainer?: INodeProps;\n    AccountInfoDropdownPopoverConentContainer?: INodeProps;\n    accountInfoDropdownButton?: React.ReactNode;\n\n    signOutLink?: React.ReactNode;\n    signInLink?: React.ReactNode;\n    accountLinks?: React.ReactNode[];\n}\n\n/**\n *\n * Header component\n * @extends {React.PureComponent<IHeaderProps<IHeaderData>>}\n */\nclass Header extends React.PureComponent<IHeaderProps<IHeaderData>, IHeaderState> {\n    private popOverRef: React.RefObject<HTMLButtonElement>;\n    private telemetryContent: ITelemetryContent;\n    @computed public get displayName(): Readonly<string | undefined> {\n        const customer = this.props.data.accountInformation?.result;\n        return customer ? customer.FirstName || customer.Name : undefined;\n    }\n\n    constructor(props: IHeaderProps<IHeaderData>) {\n        super(props);\n        this.popOverRef = React.createRef();\n        this._toggleNavbar = this._toggleNavbar.bind(this);\n        this._togglePopover = this._togglePopover.bind(this);\n        this._keydown = this._keydown.bind(this);\n        this.state = {\n            mobileMenuCollapsed: true,\n            signinPopoverOpen: false\n        };\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!, this.props.friendlyName, this.props.telemetry);\n    }\n\n    public componentDidMount(): void {\n        if (MsDyn365.msdyn365Commerce.isBrowser) {\n            window.addEventListener('keydown', this._keydown);\n        }\n    }\n\n    public componentWillUnmount(): void {\n        if (MsDyn365.msdyn365Commerce.isBrowser) {\n            window.removeEventListener('keydown', this._keydown, false);\n        }\n    }\n\n    // tslint:disable-next-line: max-func-body-length\n    public render(): JSX.Element | null {\n        const {\n            id,\n            typeName,\n            data: { accountInformation,\n                cart: { result: cart }\n            },\n            context: {\n                request: {\n                    user\n                }\n            },\n            context,\n            resources: {\n                cartLabel\n            }\n        } = this.props;\n        const { logoLink, logoImage } = this.props.config;\n        const headerClassName = classnames('ms-header', this.props.config.className);\n        const navbarKey = 'header-nav-mobile';\n        const customer = accountInformation && accountInformation.result;\n        const cartIconSlot = this._getSlot('cartIcon');\n        const menuBarSlot = this._getSlot('menuBar');\n        const searchSlot = this._getSlot('search');\n        const siteOptionsSlot = this._getSlot('siteOptions');\n        const viewProps: IHeaderViewProps = {\n            ...(this.props as IHeaderProps<IHeaderData>),\n            ...(this.state),\n            logo: <Logo {...{ link: logoLink, image: logoImage, className: 'ms-header__logo', gridSettings: this.props.context.request.gridSettings, requestContext: this.props.context.request, telemetryContent: this.telemetryContent }} />,\n            wishListIconDesktop: (\n                <WishListIconComponent\n                    className='ms-header__wishlist-desktop'\n                    showButtonTooltip={true}\n                    wishlistTooltipText={this.props.resources.wishlistTooltipText}\n                    context={context}\n                    id={id}\n                    typeName={typeName}\n                    telemetryContent={this.telemetryContent}\n                    data={{}}\n                />\n            ),\n            wishListIconMobile: (\n                <WishListIconComponent\n                    className='ms-header__wishlist-mobile'\n                    showButtonTooltip={true}\n                    wishlistTooltipText={this.props.resources.wishlistTooltipText}\n                    context={context}\n                    id={id}\n                    typeName={typeName}\n                    telemetryContent={this.telemetryContent}\n                    data={{}}\n                />\n            ),\n            cartIcon: (cartIconSlot && cartIconSlot.length > 0)\n                ? cartIconSlot[0]\n                : cart && <CartIconComponent cartLabel={cartLabel} context={context} id={id} typeName={typeName} telemetryContent={this.telemetryContent} data={{ cart: cart }} />,\n            navIcon: <NavIcon {...{ resources: this.props.resources, isExpanded: !this.state.mobileMenuCollapsed, targetId: navbarKey, toggleNavBar: this._toggleNavbar, telemetryContent: this.telemetryContent }} />,\n            menuBar: menuBarSlot && menuBarSlot.length && menuBarSlot || [],\n            search: searchSlot && searchSlot.length && searchSlot || [],\n            siteOptions: siteOptionsSlot && siteOptionsSlot.length && siteOptionsSlot || [],\n            className: headerClassName,\n            HeaderTag: {\n                moduleProps: this.props,\n                className: classnames(headerClassName),\n                tag: 'header'\n            },\n            HeaderContainer: {\n                className: classnames('ms-header__container')\n            },\n            HeaderTopBarContainer: {\n                className: classnames('ms-header__topbar')\n            },\n            Divider: {\n                className: classnames('ms-header__divider')\n            },\n            MobileMenuContainer: {\n                tag: Modal,\n                id: navbarKey,\n                className: 'ms-header__mobile-hamburger',\n                isOpen: !this.state.mobileMenuCollapsed,\n                wrapClassName: 'ms-header__modal'\n            },\n            MobileMenuHeader: (\n                <ModalHeader\n                    className='ms-header__mobile-hamburger-menu-header'\n                    toggle={this._toggleNavbar}\n                />\n            ),\n            MobileMenuBodyContainer: {\n                tag: ModalBody,\n                className: 'ms-header__mobile-hamburger-menu-body',\n            },\n            MobileMenuLinksContainer: {\n                className: 'ms-header__mobile-hamburger-menu-links',\n            },\n            AccountInfoDropdownParentContainer: {\n                className: 'ms-header__account-info'\n            },\n            AccountInfoDropdownPopoverConentContainer: customer && this.displayName && {\n                tag: Popover,\n                id: 'myprofilePopover',\n                className: 'ms-header__account-info-content',\n                placement: 'bottom',\n                isOpen: this.state.signinPopoverOpen,\n                target: this.popOverRef,\n                toggle: this._togglePopover,\n            } || undefined,\n            signInLink: this._getSigninButton(customer, user, this.props.resources),\n            signOutLink: this._getSignOutButton(customer, user, this.props.resources),\n            accountInfoDropdownButton: this._getAccountInfoDropdownButton(customer),\n            accountLinks: this._getAccountLinks(customer)\n        };\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    /* Handle link text change*/\n    public handleLinkTextChange = (linkIndex: number) => (event: MsDyn365.ContentEditableEvent) => {\n        if (this.props.config.myAccountLinks && this.props.config.myAccountLinks[linkIndex]) {\n            this.props.config.myAccountLinks[linkIndex].linkText = event.target.value;\n        }\n    }\n\n    private _getSlot(slotName: string): React.ReactNode[] | null {\n        const { slots } = this.props;\n        return (slots && slots[slotName] && slots[slotName].length && slots[slotName]) || null;\n    }\n\n    private _getSigninButton(customer: Customer | undefined, user: MsDyn365.IRequestContextUser | undefined, resources: IHeaderResources): React.ReactNode | undefined {\n        const payLoad = getPayloadObject('click', this.telemetryContent, TelemetryConstant.SignIn);\n        const attributes = getTelemetryAttributes(this.telemetryContent, payLoad);\n        return !customer && (\n            <Button\n                className='ms-header__signin-button'\n                title={resources.signInLinkText}\n                href={user && user.signInUrl}\n                aria-label={resources.signInLinkAriaText}\n                onClick={onTelemetryClick(this.telemetryContent, payLoad, 'Sign in')}\n                {...attributes}\n            >\n                <span className='ms-header__signin-button-text' aria-hidden={true}>{resources.signInLinkText}</span>\n            </Button>\n        );\n    }\n\n    private _getSignOutButton(customer: Customer | undefined, user: MsDyn365.IRequestContextUser | undefined, resources: IHeaderResources): React.ReactNode | undefined {\n        const payLoad = getPayloadObject('click', this.telemetryContent, TelemetryConstant.SignOut);\n        const attributes = getTelemetryAttributes(this.telemetryContent, payLoad);\n        return customer && this.displayName && (\n            <Button\n                className={'ms-header__signout-button'}\n                title={resources.signOutLinkText}\n                href={user && user.signOutUrl || ''}\n                aria-label={resources.signOutLinkAriaText}\n                onClick={onTelemetryClick(this.telemetryContent, payLoad, 'Sign out')}\n                {...attributes}\n            >\n                <span className='ms-header__signout-button-text' aria-hidden={true}>{resources.signOutLinkText}</span>\n            </Button>\n        );\n    }\n\n    private _getAccountInfoDropdownButton(customer: Customer | undefined): React.ReactNode | undefined {\n        const payLoad = getPayloadObject('click', this.telemetryContent, TelemetryConstant.MyProfile);\n        const attributes = getTelemetryAttributes(this.telemetryContent, payLoad);\n        return customer && this.displayName && (\n            <Button\n                innerRef={this.popOverRef}\n                className={'ms-header__profile-button'}\n                aria-describedby='myprofilePopover'\n                onClick={this._togglePopover}\n                color='link'\n                aria-expanded={this.state.signinPopoverOpen}\n                {...attributes}\n            >\n                <span className='ms-profile-button-text'>{this.displayName}</span>\n            </Button>\n        );\n    }\n\n    private _getAccountLinks(customer: Customer | undefined): React.ReactNode[] | undefined {\n        const { myAccountLinks } = this.props.config;\n        const payLoad = getPayloadObject('click', this.telemetryContent, '');\n        if(!customer || ! this.displayName || !myAccountLinks || !myAccountLinks.length) {\n            return undefined;\n        }\n        return myAccountLinks.map((cta: IMyAccountLinksData, index: number) => {\n            payLoad.contentAction.etext = cta.linkText;\n            const attributes = getTelemetryAttributes(this.telemetryContent, payLoad);\n            const editableLink: MsDyn365.ILinksData = {\n                ariaLabel: cta.ariaLabel,\n                className: 'ms-signin-info__account-link-button',\n                linkText: cta.linkText,\n                linkUrl: cta.linkUrl.destinationUrl,\n                openInNewTab: cta.openInNewTab,\n                role: 'button',\n                additionalProperties: attributes\n            };\n\n            return (\n                <MsDyn365.Link\n                    key={index}\n                    link={editableLink}\n                    editProps={{ onTextChange: this.handleLinkTextChange(index), requestContext: this.props.context.request }}\n                />\n            );\n        });\n    }\n\n    private _toggleNavbar(): void {\n        this.setState({\n            mobileMenuCollapsed: !this.state.mobileMenuCollapsed\n        });\n    }\n\n    private _togglePopover(): void {\n        this.setState({\n            signinPopoverOpen: !this.state.signinPopoverOpen\n        });\n    }\n\n    private _keydown(e: KeyboardEvent): void {\n        if (e.keyCode === KeyCodes.Escape) {\n            this.setState({ mobileMenuCollapsed: true });\n        }\n    }\n}\n\nexport default Header;"]}