/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import { buildMockModuleProps } from '@msdyn365-commerce/core';
/// <reference types="jest" />

// tslint:disable-next-line:no-unused-variable
import { Heading } from '@msdyn365-commerce-modules/utilities';
import { render } from 'enzyme';
import * as React from 'react';
import { IIframeViewProps } from '../../iframe';
import {
  HeadingTag, IHeadingData, IIframeConfig, IIframeProps
} from '../../iframe.props.autogenerated';
import IFrameView from '../../iframe.view';

describe('Iframe', () => {

  it('renders correctly with full screen', () => {
    const moduleProps: IIframeProps<{}> = buildMockModuleProps({}, {}) as IIframeProps<{}>;
    const heading: IHeadingData = {
      tag: HeadingTag.h2,
      text: 'mock heading'
    };
    const headingtag = (<Heading {...heading} className='ms-iframe__heading__title' />) as React.ReactNode;
    const iframe = (
      // tslint:disable-next-line: react-iframe-missing-sandbox
      <iframe
        className='mock ms-iframe-content'
        src='https://ppe-streaming-video-mr-microsoft-com.akamaized.net/5b4aaa0e-602a-4964-80d0-cdea46ec368f/1c372c3e-debb-42a3-a6db-58904cebdaad.mp4'
        height='700px'
        aria-label='iframe'
      />
      ) as React.ReactNode ;

    const mockProps: IIframeViewProps = {
      ...moduleProps as IIframeProps<IIframeConfig>,
      Heading: headingtag,
      IframeContainer: {
        moduleProps,
        className: 'mock ms-iframe',
      },
      IFrame: iframe,
    };
    const component = render(<IFrameView {...mockProps} />);
    expect(component).toMatchSnapshot();
  });
});
