/*!
 * Copyright (c) Microsoft Corporation.
 * All rights reserved. See LICENSE in the project root for license information.
 */
import { createDataActionHook } from '@msdyn365-commerce/core';
import { getProductInfoFromSimpleProduct } from './telemetry.action.helper';
const beforeGetByIds = async (inputs) => {
};
const afterGetByIds = async (_inputs, simpleProducts, actionContext) => {
    if (Array.isArray(simpleProducts) && simpleProducts.length) {
        simpleProducts.forEach((simpleProduct) => {
            const productInfo = getProductInfoFromSimpleProduct(simpleProduct, actionContext.requestContext);
            actionContext.requestContext.telemetryData[productInfo.productSku] = productInfo;
        });
    }
    else if (simpleProducts) {
        const productInfo = getProductInfoFromSimpleProduct(simpleProducts, actionContext.requestContext);
        actionContext.requestContext.telemetryData[productInfo.productSku] = productInfo;
    }
};
createDataActionHook({
    actionId: '@msdyn365-commerce/retail-proxy/Products/GetByIds',
    postReaderHook: afterGetByIds,
    preReaderHook: beforeGetByIds
});
//# sourceMappingURL=getByIds-product-telemetry.action.js.map