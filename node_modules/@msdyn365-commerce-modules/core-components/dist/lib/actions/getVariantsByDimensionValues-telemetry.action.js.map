{"version":3,"file":"getVariantsByDimensionValues-telemetry.action.js","sourceRoot":"./src/","sources":["actions/getVariantsByDimensionValues-telemetry.action.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,oBAAoB,EAAgC,MAAM,yBAAyB,CAAC;AAE7F,OAAO,EAAE,+BAA+B,EAAE,MAAM,2BAA2B,CAAC;AAE5E,MAAM,kCAAkC,GAAG,KAAK,EAAE,MAAqC,EAAE,EAAE;AAE3F,CAAC,CAAC;AAEF,MAAM,iCAAiC,GAAG,KAAK,EAC3C,OAAsC,EACtC,cAA+C,EAC/C,aAA6B,EAC/B,EAAE;IACA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE;QAChC,cAAc,GAAG,CAAC,cAAc,CAAC,CAAC;KACrC;IAED,cAAc,CAAC,OAAO,CAAC,KAAK,EAAC,OAAO,EAAC,EAAE;QACnC,IAAI,OAAO,EAAE;YACT,OAAO,GAAG,MAAM,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACzC,MAAM,WAAW,GAAG,+BAA+B,CAAC,OAAO,EAAE,aAAa,CAAC,cAAc,CAAC,CAAC;YAC3F,aAAa,CAAC,cAAc,CAAC,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,WAAW,CAAC;SACpF;IACL,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,oBAAoB,CAAC;IACjB,QAAQ,EAAE,uEAAuE;IACjF,cAAc,EAAE,iCAAiC;IACjD,aAAa,EAAE,kCAAkC;CACpD,CAAC,CAAC","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { createDataActionHook, IActionContext, IActionInput } from '@msdyn365-commerce/core';\nimport { SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport { getProductInfoFromSimpleProduct } from './telemetry.action.helper';\n\nconst beforeGetVariantsByDimensionValues = async (inputs: IActionInput | IActionInput[]) => {\n    // placeholder\n};\n\nconst afterGetVariantsByDimensionValues = async (\n    _inputs: IActionInput | IActionInput[],\n    simpleProducts: SimpleProduct | SimpleProduct[],\n    actionContext: IActionContext\n) => {\n    if (!Array.isArray(simpleProducts)) {\n        simpleProducts = [simpleProducts];\n    }\n\n    simpleProducts.forEach(async product => {\n        if (product) {\n            product = await Promise.resolve(product);\n            const productInfo = getProductInfoFromSimpleProduct(product, actionContext.requestContext);\n            actionContext.requestContext.telemetryData[productInfo.productSku] = productInfo;\n        }\n    });\n};\n\ncreateDataActionHook({\n    actionId: '@msdyn365-commerce/retail-proxy/Products/GetVariantsByDimensionValues',\n    postReaderHook: afterGetVariantsByDimensionValues,\n    preReaderHook: beforeGetVariantsByDimensionValues\n});\n"]}