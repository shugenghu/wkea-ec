{"version":3,"file":"readCart-telemetry.action.js","sourceRoot":"./src/","sources":["actions/readCart-telemetry.action.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,oBAAoB,EAAgC,MAAM,yBAAyB,CAAC;AAG7F,MAAM,UAAU,GAAG,KAAK,EAAE,MAAqC,EAAE,EAAE;AAEnE,CAAC,CAAC;AAEF,MAAM,SAAS,GAAG,KAAK,EAAE,OAAsC,EAAE,IAAmB,EAAE,aAA6B,EAAE,EAAE;IACnH,IAAI;QACA,MAAM,UAAU,GAAG,MAAM,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAC/E,aAAa,CAAC,cAAc,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC;KACzE;IAAC,OAAO,CAAC,EAAE;QACR,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,wCAAwC,EAAE,CAAC,CAAC,CAAC;KAC9E;AACL,CAAC,CAAC;AAEF,oBAAoB,CAAC;IACjB,QAAQ,EAAE,4CAA4C;IACtD,cAAc,EAAE,SAAS;IACzB,aAAa,EAAE,UAAU;CAC5B,CAAC,CAAC","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { createDataActionHook, IActionContext, IActionInput } from '@msdyn365-commerce/core';\nimport { Cart } from '@msdyn365-commerce/retail-proxy';\n\nconst beforeRead = async (inputs: IActionInput | IActionInput[]) => {\n    // placeholder\n};\n\nconst afterRead = async (_inputs: IActionInput | IActionInput[], cart: Cart | Cart[], actionContext: IActionContext) => {\n    try {\n        const activeCart = await Promise.resolve(Array.isArray(cart) ? cart[0] : cart);\n        actionContext.requestContext.telemetryData[`activeCart`] = activeCart;\n    } catch (e) {\n        actionContext.telemetry.debug('ReadCart post-data action hook failed.', e);\n    }\n};\n\ncreateDataActionHook({\n    actionId: '@msdyn365-commerce/retail-proxy/Carts/Read',\n    postReaderHook: afterRead,\n    preReaderHook: beforeRead\n});\n"]}