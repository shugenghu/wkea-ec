{"version":3,"file":"getById-product-telemetry.action.js","sourceRoot":"./src/","sources":["actions/getById-product-telemetry.action.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,oBAAoB,EAAgC,MAAM,yBAAyB,CAAC;AAE7F,OAAO,EAAE,cAAc,EAAE,MAAM,uCAAuC,CAAC;AACvE,OAAO,EAAE,+BAA+B,EAAE,MAAM,2BAA2B,CAAC;AAE5E,MAAM,aAAa,GAAG,KAAK,EAAE,MAAqC,EAAE,EAAE;AAEtE,CAAC,CAAC;AAEF,MAAM,YAAY,GAAG,KAAK,EACtB,OAAsC,EACtC,aAA8C,EAC9C,aAA6B,EAC/B,EAAE;IACA,aAAa,GAAG,MAAM,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;IAGvG,IAAI,aAAa,EAAE;QACf,MAAM,WAAW,GAAG,+BAA+B,CAAC,aAAa,EAAE,aAAa,CAAC,cAAc,CAAC,CAAC;QACjG,aAAa,CAAC,cAAc,CAAC,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,WAAW,CAAC;QACjF,aAAa,CAAC,cAAc,CAAC,aAAa,CAAC,cAAc,CAAC,eAAe,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;KACjH;AACL,CAAC,CAAC;AAEF,oBAAoB,CAAC;IACjB,QAAQ,EAAE,kDAAkD;IAC5D,cAAc,EAAE,YAAY;IAC5B,aAAa,EAAE,aAAa;CAC/B,CAAC,CAAC","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport { createDataActionHook, IActionContext, IActionInput } from '@msdyn365-commerce/core';\nimport { SimpleProduct } from '@msdyn365-commerce/retail-proxy';\nimport { TelemetryEvent } from '@msdyn365-commerce/telemetry-internal';\nimport { getProductInfoFromSimpleProduct } from './telemetry.action.helper';\n\nconst beforeGetById = async (inputs: IActionInput | IActionInput[]) => {\n    // placeholder\n};\n\nconst afterGetById = async (\n    _inputs: IActionInput | IActionInput[],\n    simpleProduct: SimpleProduct | SimpleProduct[],\n    actionContext: IActionContext\n) => {\n    simpleProduct = await Promise.resolve(Array.isArray(simpleProduct) ? simpleProduct[0] : simpleProduct);\n\n    // If simple product result is defined run the post hook\n    if (simpleProduct) {\n        const productInfo = getProductInfoFromSimpleProduct(simpleProduct, actionContext.requestContext);\n        actionContext.requestContext.telemetryData[productInfo.productSku] = productInfo;\n        actionContext.requestContext.telemetryData[TelemetryEvent.ProductPageView] = productInfo ? [productInfo] : [];\n    }\n};\n\ncreateDataActionHook({\n    actionId: '@msdyn365-commerce/retail-proxy/Products/GetById',\n    postReaderHook: afterGetById,\n    preReaderHook: beforeGetById\n});\n"]}