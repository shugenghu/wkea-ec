{"version":3,"file":"default-external-script.test.js","sourceRoot":"./src/","sources":["modules/default-external-script/tests/default-external-script.test.tsx"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,MAAM,CAAC;AACd,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,QAAQ,MAAM,WAAW,CAAC;AACjC,OAAO,qBAAqB,MAAM,4BAA4B,CAAC;AAG/D,QAAQ,CAAC,mCAAmC,EAAE,GAAG,EAAE;IAC/C,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAGhD,EAAE,CAAC,sDAAsD,EAAE,CAAC,IAAS,EAAE,EAAE;QACrE,MAAM,WAAW,GAA8C;YAC3D,MAAM,EAAE;gBACJ,YAAY,EAAE,wBAAwB;gBACtC,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,IAAI;gBAEX,EAAE,EAAE,OAAO;aACd;YACD,IAAI,EAAE,EAAE;YACR,WAAW,EAAE,EAAE;YACf,EAAE,EAAE,OAAO;YACX,QAAQ,EAAE,EAAE;SACf,CAAC;QAEF,QAAQ,CAAC,MAAM,CAAC,oBAAC,qBAAqB,oBAAK,WAAW,EAAI,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAChE,IAAI,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAGH,EAAE,CAAC,wEAAwE,EAAE,CAAC,IAAS,EAAE,EAAE;QACvF,MAAM,WAAW,GAA8C;YAC3D,MAAM,EAAE;gBACJ,YAAY,EAAE,2BAA2B;gBACzC,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,IAAI;gBAEX,EAAE,EAAE,OAAO;aACd;YACD,IAAI,EAAE,EAAE;YACR,WAAW,EAAE,EAAE;YACf,EAAE,EAAE,OAAO;YACX,QAAQ,EAAE,EAAE;SACf,CAAC;QAEF,QAAQ,CAAC,MAAM,CAAC,oBAAC,qBAAqB,oBAAK,WAAW,EAAI,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAChE,IAAI,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAGH,EAAE,CAAC,gFAAgF,EAAE,CAAC,IAAS,EAAE,EAAE;QAC/F,MAAM,WAAW,GAA8C;YAC3D,MAAM,EAAE;gBACJ,YAAY,EAAE,2BAA2B;gBACzC,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,IAAI;gBAEX,EAAE,EAAE,OAAO;aACd;YACD,IAAI,EAAE,EAAE;YACR,WAAW,EAAE,EAAE;YACf,EAAE,EAAE,OAAO;YACX,QAAQ,EAAE,EAAE;YACZ,OAAO,EAAE;gBACL,OAAO,EAAE;oBAEL,GAAG,EAAE;wBACD,YAAY,EAAE,iCAAiC;qBAClD;iBACJ;aACJ;SACJ,CAAC;QAEF,QAAQ,CAAC,MAAM,CAAC,oBAAC,qBAAqB,oBAAK,WAAW,EAAI,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,yDAAyD,CAAC,CAAC;QAC3H,IAAI,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAGH,EAAE,CAAC,uDAAuD,EAAE,CAAC,IAAS,EAAE,EAAE;QACtE,MAAM,WAAW,GAA8C;YAC3D,MAAM,EAAE;gBACJ,YAAY,EAAE,oCAAoC;gBAClD,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,IAAI;gBAEX,EAAE,EAAE,OAAO;aACd;YACD,IAAI,EAAE,EAAE;YACR,WAAW,EAAE,EAAE;YACf,EAAE,EAAE,OAAO;YACX,QAAQ,EAAE,EAAE;SACf,CAAC;QAEF,QAAQ,CAAC,MAAM,CAAC,oBAAC,qBAAqB,oBAAK,WAAW,EAAI,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,oCAAoC,CAAC,CAAC;QACtG,IAAI,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC","sourcesContent":["/*!\n * Copyright (c) Microsoft Corporation.\n * All rights reserved. See LICENSE in the project root for license information.\n */\n\nimport 'jest';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport DefaultExternalScript from '../default-external-script';\nimport { IDefaultExternalScriptProps } from '../default-external-script.props.autogenerated';\n\ndescribe('Script injector - Declarative API', () => {\n    const container = document.createElement('div');\n\n    // tslint:disable-next-line:no-any\n    it('returns null, if the scriptSource is not a valid url', (done: any) => {\n        const scriptProps: Readonly<IDefaultExternalScriptProps<{}>> = {\n            config: {\n                scriptSource: 'console.log(\\'Test\\');',\n                async: true,\n                defer: true,\n                // @ts-ignore\n                id: '12345'\n            },\n            data: '',\n            dataActions: [],\n            id: '12345',\n            typeName: ''\n        };\n\n        ReactDOM.render(<DefaultExternalScript {...scriptProps} />, container);\n        expect(container.getElementsByTagName('script').length).toBe(0);\n        done();\n    });\n\n    // tslint:disable-next-line:no-any\n    it('returns null, if the relative script source does not link to a js file', (done: any) => {\n        const scriptProps: Readonly<IDefaultExternalScriptProps<{}>> = {\n            config: {\n                scriptSource: 'headStart/notajsfile.html',\n                async: true,\n                defer: true,\n                // @ts-ignore\n                id: '12345'\n            },\n            data: '',\n            dataActions: [],\n            id: '12345',\n            typeName: ''\n        };\n\n        ReactDOM.render(<DefaultExternalScript {...scriptProps} />, container);\n        expect(container.getElementsByTagName('script').length).toBe(0);\n        done();\n    });\n\n    // tslint:disable-next-line:no-any\n    it('validates that a relative script url is properly constructed with statics link', (done: any) => {\n        const scriptProps: Readonly<IDefaultExternalScriptProps<{}>> = {\n            config: {\n                scriptSource: './js-statics/headStart.js',\n                async: true,\n                defer: true,\n                // @ts-ignore\n                id: '12345'\n            },\n            data: '',\n            dataActions: [],\n            id: '12345',\n            typeName: '',\n            context: {\n                request: {\n                    // @ts-ignore\n                    url: {\n                        staticCdnUrl: 'https://alpha.contoso.com/_scnr'\n                    }\n                }\n            }\n        };\n\n        ReactDOM.render(<DefaultExternalScript {...scriptProps} />, container);\n        expect(container.getElementsByTagName('script')[0].src).toEqual('https://alpha.contoso.com/_scnr/js-statics/headStart.js');\n        done();\n    });\n\n    // tslint:disable-next-line:no-any\n    it('validates that an external script is correctly placed', (done: any) => {\n        const scriptProps: Readonly<IDefaultExternalScriptProps<{}>> = {\n            config: {\n                scriptSource: 'https://www.contoso.com/example.js',\n                async: true,\n                defer: true,\n                // @ts-ignore\n                id: '12345'\n            },\n            data: '',\n            dataActions: [],\n            id: '12345',\n            typeName: ''\n        };\n\n        ReactDOM.render(<DefaultExternalScript {...scriptProps} />, container);\n        expect(container.getElementsByTagName('script')[0].src).toEqual('https://www.contoso.com/example.js');\n        done();\n    });\n});\n"]}