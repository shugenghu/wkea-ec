{"version":3,"file":"integration.test.js","sourceRoot":"./src/","sources":["modules/product-collection/tests/integration.test.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAE/B,OAAO,EAAE,oBAAoB,EAAE,gBAAgB,EAAmB,MAAM,yBAAyB,CAAC;AAElG,OAAO,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAC;AAChC,OAAO,EAAkF,uBAAuB,EAAE,qBAAqB,EAAE,MAAM,UAAU,CAAC;AAE1J,MAAM,WAAW,GAAwB;IACrC,QAAQ,EAAE,WAAW;IACrB,MAAM,EAAE,OAAO;IACf,IAAI,EAAE,aAAa;IACnB,WAAW,EAAE,+IAA+I;IAC5J,SAAS,EAAE,KAAK;IAChB,KAAK,EAAE,KAAK;IACZ,YAAY,EAAE,GAAG;IACjB,aAAa,EAAE,gBAAgB;IAC/B,eAAe,EAAE,mIAAmI;CACvJ,CAAC;AAEF,MAAM,qBAAqB,GAA0B,EAAE,CAAC;AACxD,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAExC,MAAM,eAAe,GAAiB;IAClC,QAAQ,EAAE,qBAAqB;IAC/B,YAAY,EAAE,EAAE;CACnB,CAAC;AAEF,MAAM,aAAa,GAAgC;IAC/C,SAAS,EAAE,MAAM;IACjB,iBAAiB,EAAE,gBAAgB;IACnC,gBAAgB,EAAE,eAAe;IACjC,eAAe,EAAE,gBAAgB;IACjC,WAAW,EAAE,MAAM;IACnB,eAAe,EAAE,UAAU;CAC9B,CAAC;AAGF,MAAM,WAAW,GAAoB,gBAAgB,EAAE,CAAC;AAExD,MAAM,WAAW,GAAiB;IAC9B,OAAO,EAAE,WAAW;IACpB,GAAG,EAAE;QACD,MAAM,EAAE;YACJ,UAAU,EAAE,KAAK;SACpB;KACJ;IAED,gBAAgB,EAAE;QACd,cAAc,EAAE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC;KAChD;CACJ,CAAC;AAEF,MAAM,WAAW,GAA6B;IAC1C,iBAAiB,EAAE,eAAe;CACrC,CAAC;AAEF,QAAQ,CAAC,iCAAiC,EAAE,GAAG,EAAE;IAC7C,IAAI,WAAwC,CAAC;IAE7C,EAAE,CAAC,wCAAwC,EAAE,GAAG,EAAE;QAC9C,WAAW,GAAG;YACV,GAAG,oBAAoB,CAAC,EAAE,EAAE,EAAE,EAAE,WAAW,EAAE,WAAW,CAAgC;YACxF,SAAS,EAAE,aAAa;YAExB,UAAU,EAAE,qBAAqB;SACpC,CAAC;QAEF,MAAM,SAAS,GAAG,MAAM,CAAC,oBAAC,uBAAuB,oBAAK,WAAW,EAAI,CAAC,CAAC;QACvE,MAAM,CAAC,SAAS,CAAC,CAAC,eAAe,EAAE,CAAC;IACxC,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC","sourcesContent":["import * as React from 'react';\n\nimport { buildMockModuleProps, buildMockRequest, IRequestContext } from '@msdyn365-commerce/core';\nimport { IProductList, ProductSearchResult } from '@msdyn365-commerce/retail-proxy';\nimport { render } from 'enzyme';\nimport { IProductCollectionConfig, IProductCollectionProps, IProductCollectionResources, ProductCollectionModule, ProductCollectionView } from '../../..';\n\nconst mockProduct: ProductSearchResult = {\n    RecordId: 22565429819,\n    ItemId: '81120',\n    Name: 'Cotton Polo',\n    Description: 'Casual shirts are made for the \\u201cgood times\\u201d.  Our custom fitting shirts are relaxed enough to be comfortable without looking baggy.',\n    BasePrice: 59.99,\n    Price: 59.99,\n    TotalRatings: 182,\n    AverageRating: 3.71428571428571,\n    PrimaryImageUrl: 'https://cms-ppe-imageresizer-mr.trafficmanager.net/cms/api/fabrikamsb/imageFileData/search?fileName=/Products%2F91032_000_001.png'\n};\n\nconst mockProductCollection: ProductSearchResult[] = [];\nmockProductCollection.push(mockProduct);\n\nconst mockProductList: IProductList = {\n    products: mockProductCollection,\n    listMetadata: {}\n};\n\nconst mockResources: IProductCollectionResources = {\n    priceFree: 'Free',\n    originalPriceText: 'Original price',\n    currentPriceText: 'Current price',\n    ratingAriaLabel: 'average rating',\n    flipperNext: 'next',\n    flipperPrevious: 'previous'\n};\n\n// @ts-ignore\nconst mockRequest: IRequestContext = buildMockRequest();\n// @ts-ignore\nconst mockContext: ICoreContext = {\n    request: mockRequest,\n    app: {\n        config: {\n            hideRating: false\n        },\n    },\n    // @ts-ignore: Using partial for testing\n    cultureFormatter: {\n        formatCurrency: jest.fn(price => `$${price}`)\n    }\n};\n\nconst mockConfigs: IProductCollectionConfig = {\n    productCollection: mockProductList,\n};\n\ndescribe('Product collection Module tests', () => {\n    let moduleProps: IProductCollectionProps<{}>;\n\n    it('Renders as expected for valid products', () => {\n        moduleProps = {\n            ...buildMockModuleProps({}, {}, mockConfigs, mockContext) as IProductCollectionProps<{}>,\n            resources: mockResources,\n            // @ts-ignore\n            renderView: ProductCollectionView,\n        };\n\n        const component = render(<ProductCollectionModule {...moduleProps} />);\n        expect(component).toMatchSnapshot();\n    });\n});"]}