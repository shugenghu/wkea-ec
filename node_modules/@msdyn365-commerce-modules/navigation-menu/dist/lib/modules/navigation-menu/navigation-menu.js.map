{"version":3,"file":"navigation-menu.js","sourceRoot":"./src/","sources":["modules/navigation-menu/navigation-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getCategoryUrl } from '@msdyn365-commerce-modules/retail-actions';\nimport { addThrottledEvent, IModuleProps,  INodeProps } from '@msdyn365-commerce-modules/utilities';\nimport { CategoryHierarchy } from '@msdyn365-commerce/commerce-entities';\nimport { IActionContext, IGridSettings, IImageSettings, isEmptyOrNullObject} from '@msdyn365-commerce/core';\nimport { TextValueTranslation } from '@msdyn365-commerce/retail-proxy';\nimport classnames from 'classnames';\nimport { computed, observable } from 'mobx';\nimport * as React from 'react';\nimport { IMenuItemData, INavigationMenuData } from './navigation-menu.data';\nimport { ICmsNavItemsData, INavigationMenuProps, ISubMenusData, navigationMenuSource } from './navigation-menu.props.autogenerated';\n\nexport interface  INavigationMenuViewProps extends INavigationMenuProps<INavigationMenuData> {\n    className: string;\n    menuItemData: IMenuItemData[];\n    Navigation: IModuleProps;\n    MenuList: INodeProps;\n    ListItem: INodeProps;\n    Link: INodeProps;\n    Button: INodeProps;\n    Span: INodeProps;\n    ImageContainer:INodeProps;\n    MobileDescriptionContainer:INodeProps;\n    MobileBackButton:INodeProps;\n    MobileDescriptionLabel:INodeProps;\n    imageSettings: IImageSettings;\n    gridSettings: IGridSettings;\n    isMobileView: boolean;\n    DivContainer?:INodeProps;\n    ImageDivContainer?:INodeProps;\n    showCategoryImage?:boolean;\n}\n\nexport type GridSize = 'xs' | 'sm' | 'md' | 'lg' | 'xl';\n\nexport interface INavigationMenuState {\n    isMobile: boolean;\n}\n\n/**\n *\n * NavigationMenu component\n * @extends {React.PureComponent<INavigationMenuProps<INavigationMenuData>>}\n */\nclass NavigationMenu extends React.PureComponent<INavigationMenuProps<INavigationMenuData>, INavigationMenuState> {\n    private static CMSItemIdInit: number = 1000;\n    private static RSItemIdInit: number = 5000;\n    private resizeThrottledEventHandler?: (event: Event) => void;\n    private menuItemList: IMenuItemData[];\n    private isRetail: boolean = true;\n    private isCMS: boolean = true;\n    @observable\n    private viewport: GridSize;\n    public static getFriendlyName(locale: string, nameTranslations?: TextValueTranslation[]): string | undefined {\n        let nameTranslation: TextValueTranslation | undefined;\n        if (locale && nameTranslations && nameTranslations.length > 0) {\n            nameTranslation = nameTranslations.find(item => item.Language!.toLowerCase() === locale.toLowerCase());\n        }\n\n        return nameTranslation && nameTranslation.Text;\n    }\n\n    constructor(props: INavigationMenuProps<INavigationMenuData>) {\n        super(props);\n        this._updateViewport = this._updateViewport.bind(this);\n        this.viewport = props.context.request && props.context.request.device && props.context.request.device.Type === 'Mobile' ? 'xs' : 'lg';\n        this._setNavigationSource(this.props.config && this.props.config.navigationMenuSource);\n        this.state = {isMobile: this.isMobile};\n        this.menuItemList = [];\n    }\n\n    @computed get isMobile(): boolean {\n        return (this.viewport === 'xs' || this.viewport === 'sm');\n    }\n\n    public componentDidMount(): void {\n        this.resizeThrottledEventHandler =\n        window && addThrottledEvent(window, 'resize', this._updateViewport as EventListener);\n        this._updateViewport();\n    }\n\n    public componentWillUnmount(): void {\n        window && window.removeEventListener('resize', this.resizeThrottledEventHandler!, false);\n    }\n\n    public render(): JSX.Element | null {\n        this.menuItemList =  this._mapData();\n        if (isEmptyOrNullObject(this.props.data)) {\n            this.props.telemetry.error('Navigatiomenu returned null');\n            return null;\n        }\n\n        const defaultImageSettings: IImageSettings = {\n            viewports: {\n                xs: { q: `w=224&h=300&m=6`, w: 0, h: 0 },\n                xl: { q: `w=224&h=300&m=6`, w: 0, h: 0 }\n            },\n            lazyload: true\n        };\n\n        const viewProps = {\n            ...this.props,\n            ...this.state,\n            imageSettings: defaultImageSettings,\n            gridSettings: this.props.context.request.gridSettings,\n            Navigation: {\n                moduleProps: this.props,\n                className: classnames('ms-nav', this.props.config.className, this.state.isMobile ? 'mobile-vp' : 'desktop-vp'),\n                tag:'nav',\n                role:'navigation',\n                'aria-label': this.props.resources.menuAriaLabel\n            },\n            MenuList: {\n                className: 'ms-nav__list',\n                tag:'ul',\n                role: 'menu'\n            },\n            ListItem: {\n                className: 'ms-nav__list__item',\n                role: 'presentation',\n                tag:'li'\n            },\n            showCategoryImage:this.props.config.displayCategoryImage||false,\n            Link: {\n                tag: 'a',\n                className: 'ms-nav__list__item__link',\n                role: 'menuitem'\n            },\n            DivContainer:\n            {\n                tag: 'div',\n                className:'ms-nav__feature',\n                role:'menu'\n            },\n            ImageDivContainer:\n            {\n                tag:'div',\n                className:'category-image',\n                role:'menu'\n            },\n            Button: {\n                className: 'ms-nav__list__item__button',\n                tag:'button',\n                role:'menuitem',\n                onClick:this.props\n            },\n            ImageContainer: {\n                className: 'ms-nav__list__item__image'\n            },\n            Span: {\n                className: 'ms-nav__list__item__span',\n                tag:'span'\n            },\n            MobileDescriptionContainer: {\n                className: 'ms-nav__list__mobile__container'\n            },\n            MobileBackButton: {\n                className: 'ms-nav__list__mobile__container__button',\n                tag:'button',\n                'aria-label': this.props.resources.backButtonAriaLabel,\n                onClick:this.props\n            },\n            MobileDescriptionLabel: {\n                className: 'ms-nav__list__mobile__container__span',\n                tag:'span'\n            },\n            isMobileView: this.state.isMobile,\n            menuItemData: this.menuItemList,\n            className: classnames('ms-nav', this.props.config.className)\n        };\n\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    private _mapData(): IMenuItemData[] {\n        const { data, config } = this.props;\n        const mergedData: IMenuItemData[] = [];\n        if (this.isRetail && data && data.categories && data.categories.result && data.categories.result.length > 0) {\n            data.categories.result.map((item: CategoryHierarchy) => (\n                mergedData.push(this._constructMenuItemData(item, undefined, true))\n            ));\n        }\n\n        if (this.isCMS && config.cmsNavItems &&  config.cmsNavItems.length > 0) {\n            config.cmsNavItems.map((item: ICmsNavItemsData, idx: number) => (\n                mergedData.push(this._constructMenuItemData(undefined, item, false, idx+1))\n            ));\n        }\n        return mergedData;\n    }\n\n    // tslint:disable-next-line: cyclomatic-complexity\n    private _constructMenuItemData(retailItem?: CategoryHierarchy, cmsItem?: ICmsNavItemsData, isRetail?: boolean, idx?: number): IMenuItemData {\n        const locale = this.props.context && this.props.context.request && this.props.context.request.locale ? this.props.context.request.locale : 'en-us';\n        const imageSouce  = retailItem && retailItem.Images && retailItem.Images[0].Uri ? retailItem.Images[0].Uri: 'empty';\n        if (isRetail) {\n            return {\n                id: NavigationMenu.RSItemIdInit++,\n                linkText: NavigationMenu.getFriendlyName(locale, retailItem && retailItem.NameTranslations) || '',\n                linkURL: retailItem && retailItem.Url,\n                imageSource: imageSouce,\n                subMenu: this._getNestedChildren(retailItem,imageSouce)\n            } as IMenuItemData;\n        } else {\n            return {\n                id: NavigationMenu.CMSItemIdInit++,\n                linkText: cmsItem && cmsItem.linkText || '',\n                linkURL: cmsItem && cmsItem.linkUrl && cmsItem.linkUrl.destinationUrl || '',\n                imageDestinationURL: cmsItem && cmsItem.imageLink && cmsItem.imageLink.destinationUrl || '',\n                imageSource: cmsItem && cmsItem.image && cmsItem.image.src || '',\n                subMenu: this._getCMSNestedChildren(cmsItem)\n            } as IMenuItemData;\n        }\n    }\n\n    private _getNestedChildren(category?: CategoryHierarchy,imageSourceUrl?:string): IMenuItemData[] {\n        const nestedChildren: IMenuItemData[] = [];\n        if (!category || !category.Children || !category.Children.length) {\n            return [];\n        }\n        nestedChildren.push({linkText: this.props.resources.allCategoryMenuText,imageSource:imageSourceUrl,linkURL: getCategoryUrl(category, this.props.context as unknown as IActionContext, {}) });\n        category.Children.map((item: CategoryHierarchy) => {\n            nestedChildren.push(this._constructMenuItemData(item, undefined, true));\n        });\n        return nestedChildren;\n    }\n\n    private _getCMSNestedChildren(category?: ICmsNavItemsData): IMenuItemData[] {\n        const nestedChildren: IMenuItemData[] = [];\n\n        if (!category || !category.subMenus || !category.subMenus.length) {\n            return [];\n        }\n\n        category.subMenus.map((item: ISubMenusData, idx: number) => {\n            nestedChildren.push(this._constructMenuItemData(undefined, item, false, idx));\n        });\n        return nestedChildren;\n    }\n\n    private _setNavigationSource = (sourceType?: navigationMenuSource): void => {\n        switch(sourceType) {\n            case navigationMenuSource.retailServerOnly:\n                this.isRetail = true;\n                this.isCMS = false;\n                break;\n            case navigationMenuSource.cmsOnly:\n                this.isRetail = false;\n                this.isCMS = true;\n                break;\n            case navigationMenuSource.all:\n                this.isRetail = true;\n                this.isCMS = true;\n                break;\n            default:\n        }\n    }\n\n    private _updateViewport(): void {\n        this.viewport = this._getViewport();\n        this.setState({ isMobile: this.isMobile });\n    }\n\n    private _getViewport(): GridSize {\n        const { context } = this.props;\n\n        // always render in mobile viewport on a mobile device\n        if (context.request && context.request.device && context.request.device.Type === 'Mobile') {\n            return 'xs';\n        }\n\n        if (typeof window !== undefined && window.innerWidth) {\n            const gridSettings = context.request.gridSettings;\n            if (gridSettings) {\n                if (gridSettings.xs && window.innerWidth <= gridSettings.xs.w) {\n                    return 'xs';\n                } else if (gridSettings.sm && window.innerWidth <= gridSettings.sm.w) {\n                    return 'sm';\n                } else if (gridSettings.md && window.innerWidth <= gridSettings.md.w) {\n                    return 'md';\n                } else if (gridSettings.lg && window.innerWidth <= gridSettings.lg.w) {\n                    return 'lg';\n                } else {\n                    return 'xl';\n                }\n            }\n        }\n\n        return 'xs';\n    }\n}\n\nexport default NavigationMenu;\n"]}