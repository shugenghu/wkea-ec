import * as React from 'react';
import { buildMockModuleProps } from '@msdyn365-commerce/core';
import { mount } from 'enzyme';
import { NavigationMenu } from '../../../../';
const mockResources = {
    allCategoryMenuText: '',
    menuAriaLabel: 'Menu',
    backButtonAriaLabel: 'Back'
};
const mockMenu = [
    {
        linkText: 'Contact',
        linkUrl: {
            destinationUrl: '/fedev',
            type: 'externalLink'
        },
        ariaLabel: 'Contact',
        subMenus: [
            {
                linkText: 'sub menu1',
                linkUrl: {
                    destinationUrl: '/fedev',
                    type: 'externalLink'
                },
                ariaLabel: 'Contact',
            },
            {
                linkText: 'sub menu1',
                linkUrl: {
                    destinationUrl: '/fedev',
                    type: 'externalLink'
                },
                ariaLabel: 'Contact',
            }
        ]
    }
];
const mockData = {
    categories: {
        status: 'SUCCESS',
        result: [
            {
                Name: 'Link1',
                RecordId: 1,
                NameTranslations: [
                    {
                        Language: 'en-us',
                        Text: 'Fashion Accessories'
                    }
                ],
                Children: [
                    {
                        RecordId: 1,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'E2E'
                            }
                        ]
                    },
                    {
                        RecordId: 2,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Fashion Sunglasses'
                            }
                        ]
                    }
                ]
            },
            {
                RecordId: 2,
                NameTranslations: [
                    {
                        Language: 'en-us',
                        Text: 'Mens Wear'
                    }
                ],
                Children: [
                    {
                        RecordId: 1,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Casual Shirts'
                            }
                        ]
                    },
                    {
                        RecordId: 2,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Coats & Jackets'
                            }
                        ]
                    },
                    {
                        RecordId: 3,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Dress Shirts'
                            }
                        ]
                    },
                    {
                        RecordId: 4,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Hats'
                            }
                        ]
                    },
                    {
                        RecordId: 5,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Mens Jeans'
                            }
                        ]
                    }
                ]
            },
            {
                RecordId: 3,
                NameTranslations: [
                    {
                        Language: 'en-us',
                        Text: 'Womenswear'
                    }
                ],
                Children: [
                    {
                        RecordId: 1,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Coats'
                            }
                        ]
                    },
                    {
                        RecordId: 2,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Dresses'
                            }
                        ]
                    },
                    {
                        RecordId: 3,
                        Children: [],
                        NameTranslations: [
                            {
                                Language: 'en-us',
                                Text: 'Skirts'
                            }
                        ]
                    }
                ]
            }
        ]
    }
};
const mockConfigAll = {
    navigationMenuSource: 'all',
    cmsNavItems: mockMenu
};
const mockConfigRS = {
    navigationMenuSource: 'retailServerOnly',
};
const mockConfigCMS = {
    navigationMenuSource: 'cmsOnly',
    cmsNavItems: mockMenu
};
const mockMobileContext = {
    request: {
        device: {
            Type: 'Mobile'
        }
    }
};
describe('NavigationMenu', () => {
    it('render navigation source for all', () => {
        const moduleProps = {
            ...buildMockModuleProps(mockData, {}, mockConfigAll),
            resources: mockResources,
            renderView: jest.fn(props => { return React.createElement("div", { props: props }); })
        };
        const wrapper = mount(React.createElement(NavigationMenu, Object.assign({}, moduleProps)));
        expect(moduleProps.renderView).toBeCalled();
        const viewProps = wrapper.childAt(0).props().props;
        expect(viewProps.menuItemData).toBeDefined();
        expect(viewProps.menuItemData).toMatchSnapshot();
    });
    it('render navigation source for RetailServer only.', () => {
        const moduleProps = {
            ...buildMockModuleProps(mockData, {}, mockConfigRS),
            resources: mockResources,
            renderView: jest.fn(props => { return React.createElement("div", { props: props }); })
        };
        const wrapper = mount(React.createElement(NavigationMenu, Object.assign({}, moduleProps)));
        expect(moduleProps.renderView).toBeCalled();
        const viewProps = wrapper.childAt(0).props().props;
        expect(viewProps.menuItemData).toBeDefined();
        expect(viewProps.menuItemData).toMatchSnapshot();
    });
    it('render navigation source for CMS only.', () => {
        const moduleProps = {
            ...buildMockModuleProps(mockData, {}, mockConfigCMS),
            resources: mockResources,
            renderView: jest.fn(props => { return React.createElement("div", { props: props }); })
        };
        const wrapper = mount(React.createElement(NavigationMenu, Object.assign({}, moduleProps)));
        expect(moduleProps.renderView).toBeCalled();
        const viewProps = wrapper.childAt(0).props().props;
        expect(viewProps.menuItemData).toBeDefined();
        expect(viewProps.menuItemData).toMatchSnapshot();
    });
    it('adds "mobile-vp" class in mobile viewport', () => {
        const moduleProps = {
            ...buildMockModuleProps(mockData, {}, mockConfigCMS, mockMobileContext),
            resources: mockResources,
            renderView: jest.fn(props => { return React.createElement("div", { props: props }); })
        };
        const wrapper = mount(React.createElement(NavigationMenu, Object.assign({}, moduleProps)));
        expect(moduleProps.renderView).toBeCalled();
        const viewProps = wrapper.childAt(0).props().props;
        expect(viewProps.Navigation.className).toEqual('ms-nav mobile-vp');
    });
});
//# sourceMappingURL=navigation-menu.test.js.map