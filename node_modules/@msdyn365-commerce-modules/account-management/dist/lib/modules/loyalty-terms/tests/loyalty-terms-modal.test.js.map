{"version":3,"file":"loyalty-terms-modal.test.js","sourceRoot":"./src/","sources":["modules/loyalty-terms/tests/loyalty-terms-modal.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { buildMockCoreContext, ICoreContext } from '@msdyn365-commerce/core';\nimport { mount, render} from 'enzyme';\nimport * as React from 'react';\nimport {ILoyaltyTermsModalProps, ILoyaltyTermsModalResources, LoyaltyTermsModal } from '../components/loyalty-terms-modal';\n\ndescribe('Loyalty terms modal', () => {\n    let mockCoreContext: ICoreContext;\n    const modalToggleRef = React.createRef<HTMLButtonElement>();\n    let onToggle: () => void;\n    let onSubmit: () => void;\n    let onCheck: () => void;\n\n    const resources: ILoyaltyTermsModalResources = {\n        loyaltyTermsHeading: 'Loyalty terms',\n        loyaltyAgreeToTerms: 'By checking this box you agree to the terms above',\n        joinLoyaltyTermsText: 'Join now',\n        cancelLoyaltyTermsText: 'Cancel'\n    };\n\n    let props: ILoyaltyTermsModalProps;\n\n    beforeEach(() => {\n        mockCoreContext = buildMockCoreContext({});\n        mockCoreContext.app = {config: {reviewTextMaxLength: 500, reviewTitleMaxLength: 50}};\n        mockCoreContext.actionContext.requestContext.apiSettings.rnr = {id: 'rnrId', url: 'rnrUrl', proxyUrl: ''};\n        onToggle = jest.fn();\n        onSubmit = jest.fn();\n        onCheck = jest.fn();\n\n        props =  {\n            returnRef: modalToggleRef,\n            resources: resources,\n            checked: false,\n            isOpen: true,\n            terms: <p>terms</p>,\n            onToggle: onToggle,\n            onSubmit: onSubmit,\n            onCheck: onCheck\n        };\n    });\n\n    it('The review modal snapshots return as expected', () => {\n        const modal = LoyaltyTermsModal(props);\n        expect(modal.modal).toMatchSnapshot();\n        expect(modal.modalHeader).toMatchSnapshot();\n        expect(modal.modalFooter).toMatchSnapshot();\n        expect(modal.modalBody).toMatchSnapshot();\n        expect(render(modal.cancelButton)).toMatchSnapshot();\n        expect(render(modal.submitButton)).toMatchSnapshot();\n        expect(render(modal.heading)).toMatchSnapshot();\n        expect(render(modal.terms as React.ReactElement)).toMatchSnapshot();\n        expect(render(modal.checkbox)).toMatchSnapshot();\n        expect(render(modal.agreeText)).toMatchSnapshot();\n    });\n\n    it('does not call submit on click when checked is false', () => {\n        props.checked = false;\n        const modal = LoyaltyTermsModal(props);\n        const button = mount(modal.submitButton);\n        button.simulate('click');\n        expect(onSubmit).not.toHaveBeenCalled();\n    });\n\n    it('calls submit on click when checked is true', () => {\n        props.checked = true;\n        const modal = LoyaltyTermsModal(props);\n        const button = mount(modal.submitButton);\n        button.simulate('click');\n        expect(onSubmit).toHaveBeenCalled();\n    });\n\n    it('checkbox calls onCheck', () => {\n        const modal = LoyaltyTermsModal(props);\n        const checkbox = mount(modal.checkbox);\n        checkbox.simulate('change');\n        expect(onCheck).toHaveBeenCalled();\n    });\n});"]}