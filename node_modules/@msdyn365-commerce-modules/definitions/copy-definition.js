const fs = require('fs-extra');
const path = require('path');
const chalk = require('chalk');
const glob = require('glob');

// Copy all schema definition files over to the dist for packaging and distribution
glob('./src/*.json', { nodir: true }, function(er, files) {
    var copyPromises = [];
    for (var i = 0; i < files.length; i++) {
        var currentFile = files[i];
        copyPromises.push(fs.copy(path.resolve(__dirname, currentFile), path.resolve(__dirname, 'dist', currentFile)));
    }

    Promise.all(copyPromises)
        .then(function() {
            console.log(chalk.default.green('copied files successfully!'));
        })
        .catch(function(err) {
            console.log(`Error copying over schema definition files ${err}`);
        });
});