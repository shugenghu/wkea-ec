import { OrderSummary } from '@msdyn365-commerce-modules/order-summary-utilities';
import * as Msdyn365 from '@msdyn365-commerce/core';
import get from 'lodash/get';
import * as React from 'react';
export const getOrderSummary = (input) => {
    const { config: { orderSummaryHeading }, data: { checkout }, resources: { subTotalLabel, shippingLabel, taxLabel, orderTotalLabel, loyaltyLabel, giftcardLabel, totalDiscountsLabel, freeText, toBeCalculatedText, otherCharges }, context, typeName, id, telemetry } = input;
    const checkoutState = get(checkout, 'result');
    const cart = get(checkout, 'result.checkoutCart.cart');
    const showLineItems = cart.CartLines && cart.CartLines.length > 0;
    const channelConfiguration = context.request.channel;
    const handleOrderSummaryHeadingChange = (event) => {
        const { config: { orderSummaryHeading } } = input;
        orderSummaryHeading.text = event.target.value;
    };
    return {
        orderSummaryProps: { className: 'ms-checkout-guest-profile__selected-item' },
        heading: orderSummaryHeading && orderSummaryHeading.text && (React.createElement(Msdyn365.Text, Object.assign({ className: 'msc-order-summary__heading' }, orderSummaryHeading, { tag: orderSummaryHeading.tag || 'h2', text: orderSummaryHeading.text, editProps: { onEdit: handleOrderSummaryHeadingChange, requestContext: context.request } }))),
        lines: showLineItems
            ? OrderSummary({
                checkoutState,
                cart,
                subTotalLabel,
                shippingLabel,
                taxLabel,
                orderTotalLabel,
                loyaltyLabel,
                giftcardLabel,
                totalDiscountsLabel,
                freeText,
                toBeCalculatedText,
                context,
                typeName,
                id,
                channelConfiguration,
                telemetry,
                otherChargeLabel: otherCharges
            })
            : undefined
    };
};
//# sourceMappingURL=get-order-summary.js.map