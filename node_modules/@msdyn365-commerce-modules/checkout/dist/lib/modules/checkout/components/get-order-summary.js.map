{"version":3,"file":"get-order-summary.js","sourceRoot":"./src/","sources":["modules/checkout/components/get-order-summary.tsx"],"names":[],"mappings":"AAIA,OAAO,EAAsB,YAAY,EAAE,MAAM,oDAAoD,CAAC;AAEtG,OAAO,KAAK,QAAQ,MAAM,yBAAyB,CAAC;AACpD,OAAO,GAAG,MAAM,YAAY,CAAC;AAC7B,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAS/B,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,KAAoC,EAAiB,EAAE;IACnF,MAAM,EACF,MAAM,EAAE,EAAE,mBAAmB,EAAE,EAC/B,IAAI,EAAE,EAAE,QAAQ,EAAE,EAClB,SAAS,EAAE,EACP,aAAa,EACb,aAAa,EACb,QAAQ,EACR,eAAe,EACf,YAAY,EACZ,aAAa,EACb,mBAAmB,EACnB,QAAQ,EACR,kBAAkB,EAClB,YAAY,EACf,EACD,OAAO,EACP,QAAQ,EACR,EAAE,EACF,SAAS,EACZ,GAAG,KAAK,CAAC;IAEV,MAAM,aAAa,GAAG,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;IAC9C,MAAM,IAAI,GAAG,GAAG,CAAC,QAAQ,EAAE,0BAA0B,CAAC,CAAC;IACvD,MAAM,aAAa,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;IAClE,MAAM,oBAAoB,GAAG,OAAO,CAAC,OAAO,CAAC,OAAQ,CAAC;IAEtD,MAAM,+BAA+B,GAAG,CAAC,KAAoC,EAAE,EAAE;QAC7E,MAAM,EAEF,MAAM,EAAE,EAAE,mBAAmB,EAAE,EAClC,GAAG,KAAK,CAAC;QACV,mBAAoB,CAAC,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;IACnD,CAAC,CAAC;IAEF,OAAO;QACH,iBAAiB,EAAE,EAAE,SAAS,EAAE,0CAA0C,EAAE;QAC5E,OAAO,EAAE,mBAAmB,IAAI,mBAAmB,CAAC,IAAI,IAAI,CAC5D,oBAAC,QAAQ,CAAC,IAAI,kBACV,SAAS,EAAC,4BAA4B,IAClC,mBAAmB,IACvB,GAAG,EAAE,mBAAmB,CAAC,GAAG,IAAI,IAAI,EACpC,IAAI,EAAE,mBAAmB,CAAC,IAAI,EAC9B,SAAS,EAAE,EAAE,MAAM,EAAE,+BAA+B,EAAE,cAAc,EAAE,OAAO,CAAC,OAAO,EAAE,IACzF,CACD;QACD,KAAK,EAAE,aAAa;YAChB,CAAC,CAAC,YAAY,CAAC;gBACT,aAAa;gBACb,IAAI;gBACJ,aAAa;gBACb,aAAa;gBACb,QAAQ;gBACR,eAAe;gBACf,YAAY;gBACZ,aAAa;gBACb,mBAAmB;gBACnB,QAAQ;gBACR,kBAAkB;gBAClB,OAAO;gBACP,QAAQ;gBACR,EAAE;gBACF,oBAAoB;gBACpB,SAAS;gBACT,gBAAgB,EAAE,YAAY;aACjC,CAAC;YACJ,CAAC,CAAC,SAAS;KAClB,CAAC;AAEN,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IOrderSummaryLines, OrderSummary } from '@msdyn365-commerce-modules/order-summary-utilities';\nimport { INodeProps } from '@msdyn365-commerce-modules/utilities';\nimport * as Msdyn365 from '@msdyn365-commerce/core';\nimport get from 'lodash/get';\nimport * as React from 'react';\nimport { ICheckoutData } from '../checkout.data';\nimport { ICheckoutProps } from '../checkout.props.autogenerated';\n\nexport interface IOrderSummary {\n    orderSummaryProps: INodeProps;\n    heading?: React.ReactNode;\n    lines?: IOrderSummaryLines;\n}\nexport const getOrderSummary = (input: ICheckoutProps<ICheckoutData>): IOrderSummary => {\n    const {\n        config: { orderSummaryHeading },\n        data: { checkout },\n        resources: {\n            subTotalLabel,\n            shippingLabel,\n            taxLabel,\n            orderTotalLabel,\n            loyaltyLabel,\n            giftcardLabel,\n            totalDiscountsLabel,\n            freeText,\n            toBeCalculatedText,\n            otherCharges\n        },\n        context,\n        typeName,\n        id,\n        telemetry\n    } = input;\n\n    const checkoutState = get(checkout, 'result');\n    const cart = get(checkout, 'result.checkoutCart.cart');\n    const showLineItems = cart.CartLines && cart.CartLines.length > 0;\n    const channelConfiguration = context.request.channel!;\n\n    const handleOrderSummaryHeadingChange = (event: Msdyn365.ContentEditableEvent) => {\n        const {\n            // tslint:disable-next-line: no-shadowed-variable\n            config: { orderSummaryHeading }\n        } = input;\n        orderSummaryHeading!.text = event.target.value;\n    };\n\n    return {\n        orderSummaryProps: { className: 'ms-checkout-guest-profile__selected-item' },\n        heading: orderSummaryHeading && orderSummaryHeading.text && (\n        <Msdyn365.Text\n            className='msc-order-summary__heading'\n            {...orderSummaryHeading}\n            tag={orderSummaryHeading.tag || 'h2'}\n            text={orderSummaryHeading.text}\n            editProps={{ onEdit: handleOrderSummaryHeadingChange, requestContext: context.request }}\n        />\n        ),\n        lines: showLineItems\n            ? OrderSummary({\n                  checkoutState,\n                  cart,\n                  subTotalLabel,\n                  shippingLabel,\n                  taxLabel,\n                  orderTotalLabel,\n                  loyaltyLabel,\n                  giftcardLabel,\n                  totalDiscountsLabel,\n                  freeText,\n                  toBeCalculatedText,\n                  context,\n                  typeName,\n                  id,\n                  channelConfiguration,\n                  telemetry,\n                  otherChargeLabel: otherCharges\n              })\n            : undefined\n    };\n\n};\n"]}