{"version":3,"file":"guided-form.test.js","sourceRoot":"./src/","sources":["modules/checkout/tests/unit/guided-form.test.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// tslint:disable-next-line:no-unused-variable\nimport { IModuleStateManager } from '@msdyn365-commerce-modules/checkout-utilities';\nimport { shallow } from 'enzyme';\nimport * as React from 'react';\nimport GuidedCardComponent from '../../components/guided-card';\nimport GuidedFormComponent, { ICheckoutGuidedFormProps } from '../../components/guided-form';\nimport { mockResources } from '../__mock__';\n\nlet mockProps: ICheckoutGuidedFormProps;\n\nlet mockModuleState: IModuleStateManager;\n\nconst mockItem1 = {\n    props: {\n        id: 'mock-item-1',\n        config: {\n            heading: 'mock-heading-1'\n        }\n    }\n};\n\nconst mockItem2 = {\n    props: {\n        id: 'mock-item-2',\n        config: {\n            heading: 'mock-heading-2'\n        }\n    }\n};\n\ndescribe('Checkout unit tests - Guided card', () => {\n    beforeEach(() => {\n        // @ts-ignore: mock partial data\n        mockModuleState = {\n            childIds: ['mock-item-1', 'mock-item-2'],\n            init: jest.fn(),\n            // @ts-ignore\n            getModule: jest.fn(() => ({\n                hasModuleState: true,\n                isDisabled: false\n            }))\n        };\n\n        mockProps = {\n            items: [mockItem1, mockItem2],\n            resource: mockResources,\n            moduleState: mockModuleState\n        };\n    });\n\n    it('renders correctly', () => {\n        const wrapper = shallow(<GuidedFormComponent {...mockProps} />);\n        expect(wrapper).toMatchSnapshot();\n    });\n\n    it('handles onNext', () => {\n        const wrapper = shallow(<GuidedFormComponent {...mockProps} />);\n\n        let guidedCards = wrapper.find(GuidedCardComponent);\n        expect(guidedCards).toHaveLength(2);\n\n        // @ts-ignore\n        expect(wrapper.instance().state.currentStep).toBe(0);\n\n        expect(guidedCards.at(0).props()).toMatchObject({\n            title: 'mock-heading-1',\n            step: 0,\n            disabled: false,\n            isActive: true,\n            isVisted: false,\n            isExpanded: true\n        });\n\n        expect(guidedCards.at(1).props()).toMatchObject({\n            title: 'mock-heading-2',\n            step: 1,\n            disabled: false,\n            isActive: false,\n            isVisted: false,\n            isExpanded: false\n        });\n\n        // @ts-ignore\n        wrapper.instance().onNext(); // Move to the next step\n        guidedCards = wrapper.find(GuidedCardComponent);\n\n        // @ts-ignore\n        expect(wrapper.instance().state.currentStep).toBe(1);\n\n        expect(guidedCards.at(0).props()).toMatchObject({\n            title: 'mock-heading-1',\n            step: 0,\n            disabled: false,\n            isActive: false,\n            isVisted: true,\n            isExpanded: true\n        });\n\n        expect(guidedCards.at(1).props()).toMatchObject({\n            title: 'mock-heading-2',\n            step: 1,\n            disabled: false,\n            isActive: true,\n            isVisted: false,\n            isExpanded: true\n        });\n\n        // @ts-ignore\n        wrapper.instance().onNext(); // Move to the final step\n        guidedCards = wrapper.find(GuidedCardComponent);\n\n        // @ts-ignore\n        expect(wrapper.instance().state.currentStep).toBe(2);\n\n        expect(guidedCards.at(0).props()).toMatchObject({\n            title: 'mock-heading-1',\n            step: 0,\n            disabled: false,\n            isActive: false,\n            isVisted: true,\n            isExpanded: true\n        });\n\n        expect(guidedCards.at(1).props()).toMatchObject({\n            title: 'mock-heading-2',\n            step: 1,\n            disabled: false,\n            isActive: false,\n            isVisted: true,\n            isExpanded: true\n        });\n    });\n\n    it('disables the disabled item', () => {\n        mockProps = {\n            ...mockProps,\n            moduleState: {\n                ...mockModuleState,\n                // @ts-ignore\n                getModule: jest.fn(id => ({\n                    hasModuleState: true,\n                    isDisabled: id === 'mock-item-1'\n                }))\n            }\n        };\n\n        const wrapper = shallow(<GuidedFormComponent {...mockProps} />);\n\n        let guidedCards = wrapper.find(GuidedCardComponent);\n\n        // @ts-ignore\n        expect(wrapper.instance().state.currentStep).toBe(0);\n\n        expect(guidedCards.at(0).props()).toMatchObject({\n            title: 'mock-heading-1',\n            step: -1,\n            disabled: true,\n            isActive: false,\n            isVisted: false,\n            isExpanded: false\n        });\n\n        expect(guidedCards.at(1).props()).toMatchObject({\n            title: 'mock-heading-2',\n            step: 0,\n            disabled: false,\n            isActive: true,\n            isVisted: false,\n            isExpanded: true\n        });\n\n        // @ts-ignore\n        wrapper.instance().onNext(); // Move to the final step\n        guidedCards = wrapper.find(GuidedCardComponent);\n\n        // @ts-ignore\n        expect(wrapper.instance().state.currentStep).toBe(1);\n\n        expect(guidedCards.at(0).props()).toMatchObject({\n            title: 'mock-heading-1',\n            step: -1,\n            disabled: true,\n            isActive: false,\n            isVisted: false,\n            isExpanded: false\n        });\n\n        expect(guidedCards.at(1).props()).toMatchObject({\n            title: 'mock-heading-2',\n            step: 0,\n            disabled: false,\n            isActive: false,\n            isVisted: true,\n            isExpanded: true\n        });\n    });\n});\n"]}