{"version":3,"file":"guided-card.test.js","sourceRoot":"./src/","sources":["modules/checkout/tests/unit/guided-card.test.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// tslint:disable-next-line:no-unused-variable\nimport { mount, render, shallow } from 'enzyme';\nimport * as React from 'react';\nimport GuidedCardComponent, { ICheckoutGuidedCardProps } from '../../components/guided-card';\nimport { mockResources } from '../__mock__';\n\nconst CARD_WRAPPER = '.ms-checkout__guided-card';\nconst CARD_BODY = '.ms-checkout__guided-card-body';\nconst EDIT_BTN = '.ms-checkout__guided-card-btn-edit';\nconst SAVE_BTN = '.ms-checkout__guided-card-btn-save';\nconst CANCEL_BTN = '.ms-checkout__guided-card-btn-cancel';\nconst CARD_TITLE = '.ms-checkout__guided-card-title';\n\nlet mockProps: ICheckoutGuidedCardProps;\n\ndescribe('Checkout unit tests - Guided card', () => {\n    beforeEach(() => {\n        mockProps = {\n            step: 0,\n            title: {\n                headingTag: 'h1',\n                text: 'Mock Title'\n            },\n            disabled: false,\n            isActive: false,\n            isVisted: false,\n            isExpanded: false,\n            isReady: false,\n            hasControlGroup: true,\n            children: 'Children',\n            resource: mockResources,\n            onEdit: jest.fn(),\n            onCancel: jest.fn(),\n            onSubmit: jest.fn(),\n            onNext: jest.fn()\n        };\n    });\n\n    it('renders correctly', () => {\n        mockProps = {\n            ...mockProps,\n            disabled: false,\n            isActive: false,\n            isReady: true,\n            isVisted: true,\n            isExpanded: true\n        };\n        const wrapper = render(<GuidedCardComponent {...mockProps} />);\n        expect(wrapper.find(CARD_TITLE).text()).toBe('1. Mock Title');\n        expect(wrapper).toMatchSnapshot();\n    });\n\n    it('handles disabled', () => {\n        mockProps = {\n            ...mockProps,\n            disabled: true,\n            isActive: false,\n            isReady: false,\n            isVisted: false,\n            isExpanded: false\n        };\n        const wrapper = shallow(<GuidedCardComponent {...mockProps} />);\n        expect(wrapper.find(CARD_WRAPPER).hasClass('hidden')).toBe(true);\n    });\n\n    it('handles waiting state', () => {\n        mockProps = {\n            ...mockProps,\n            disabled: false,\n            isActive: false,\n            isReady: false,\n            isVisted: false,\n            isExpanded: false\n        };\n        const wrapper = shallow(<GuidedCardComponent {...mockProps} />);\n        // expect(wrapper.find(`${CARD_BODY}.hidden`)).toHaveLength(1);\n        expect(wrapper.find(CARD_BODY).hasClass('hidden')).toBe(true);\n    });\n\n    it('handles updating and without seleced item state', () => {\n        mockProps = {\n            ...mockProps,\n            disabled: false,\n            isActive: true,\n            isReady: false,\n            isVisted: false,\n            isExpanded: true\n        };\n        const wrapper = shallow(<GuidedCardComponent {...mockProps} />);\n        expect(wrapper.find(EDIT_BTN)).toHaveLength(0);\n        expect(wrapper.find(SAVE_BTN)).toHaveLength(1);\n        expect(wrapper.find(CANCEL_BTN)).toHaveLength(0);\n        expect(wrapper.find(SAVE_BTN).props().title).toBe(mockResources.saveAndContinueBtnLabel);\n    });\n\n    it('handles updating and with selected item state', () => {\n        mockProps = {\n            ...mockProps,\n            disabled: false,\n            isActive: true,\n            isReady: false,\n            isCancelAllowed: true,\n            isVisted: true,\n            isExpanded: true\n        };\n        const wrapper = shallow(<GuidedCardComponent {...mockProps} />);\n        expect(wrapper.find(EDIT_BTN)).toHaveLength(0);\n        expect(wrapper.find(SAVE_BTN)).toHaveLength(1);\n        expect(wrapper.find(CANCEL_BTN)).toHaveLength(1);\n        expect(wrapper.find(SAVE_BTN).props().title).toBe(mockResources.saveBtnLabel);\n    });\n\n    it('handles ready state', () => {\n        mockProps = {\n            ...mockProps,\n            disabled: false,\n            isActive: false,\n            isReady: true,\n            isVisted: true,\n            isExpanded: true\n        };\n        const wrapper = shallow(<GuidedCardComponent {...mockProps} />);\n        expect(wrapper.find(EDIT_BTN)).toHaveLength(1);\n        expect(wrapper.find(SAVE_BTN)).toHaveLength(0);\n        expect(wrapper.find(CANCEL_BTN)).toHaveLength(0);\n    });\n\n    it('handles when submitting', () => {\n        mockProps = {\n            ...mockProps,\n            isActive: true,\n            isReady: false,\n            isVisted: true,\n            isExpanded: true,\n            isSubmitting: true\n        };\n        const wrapper = shallow(<GuidedCardComponent {...mockProps} />);\n        expect(wrapper.find(SAVE_BTN).hasClass('is-submitting')).toBe(true);\n    });\n\n    it('handles not title provide', () => {\n        mockProps = {\n            ...mockProps,\n            title: undefined,\n            isActive: true,\n            isReady: false,\n            isVisted: true,\n            isExpanded: true\n        };\n        const wrapper = shallow(<GuidedCardComponent {...mockProps} />);\n        expect(wrapper.find('.ms-checkout__guided-card-title').text()).toBe('1. ');\n    });\n\n    it('moves to next section when ready', () => {\n        mockProps = {\n            ...mockProps,\n            isActive: true,\n            isReady: true\n        };\n        const wrapper = shallow(<GuidedCardComponent {...mockProps} />);\n        const instance = wrapper.instance() as GuidedCardComponent;\n        instance.componentDidUpdate({} as ICheckoutGuidedCardProps);\n        expect(mockProps.onNext).toBeCalled();\n    });\n\n    it('set the focus to the first focusable element when current step switch to isUpdating status', () => {\n        mockProps = {\n            ...mockProps,\n            isActive: true,\n            isReady: false\n        };\n        const mockPrevProps: ICheckoutGuidedCardProps = {\n            ...mockProps,\n            isActive: true,\n            isReady: true\n        };\n        const wrapper = mount(<GuidedCardComponent {...mockProps} />);\n        const instance = wrapper.instance() as GuidedCardComponent;\n        // @ts-ignore\n        const spyFocusOnFirstFocusableElement = jest.spyOn(instance, 'focusOnFirstFocusableElement');\n        instance.componentDidUpdate(mockPrevProps);\n        expect(spyFocusOnFirstFocusableElement).toHaveBeenCalled();\n    });\n\n    it('set the focus to Edit button once edit button appear when current step switch to isReady status', () => {\n        mockProps = {\n            ...mockProps,\n            isVisted: true,\n            isReady: true\n        };\n        const mockPrevProps: ICheckoutGuidedCardProps = {\n            ...mockProps,\n            isVisted: true,\n            isReady: false\n        };\n        const wrapper = mount(<GuidedCardComponent {...mockProps} />);\n        const instance = wrapper.instance() as GuidedCardComponent;\n        // @ts-ignore\n        const spyFocusOnEditButton = jest.spyOn(instance, 'focusOnEditButton');\n        // @ts-ignore\n        const spyScrollToTitle = jest.spyOn(instance, 'scrollToTitle');\n        instance.componentDidUpdate(mockPrevProps);\n        expect(spyFocusOnEditButton).toHaveBeenCalled();\n        expect(spyScrollToTitle).toHaveBeenCalled();\n    });\n});\n"]}