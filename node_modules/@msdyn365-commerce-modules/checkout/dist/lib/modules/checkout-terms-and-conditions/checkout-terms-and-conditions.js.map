{"version":3,"file":"checkout-terms-and-conditions.js","sourceRoot":"./src/","sources":["modules/checkout-terms-and-conditions/checkout-terms-and-conditions.tsx"],"names":[],"mappings":";AAIA,OAAO,SAAS,MAAM,YAAY,CAAC;AACnC,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,MAAM,CAAC;AACpE,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AACtC,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAE/B,OAAO,EAAqB,eAAe,EAAE,MAAM,+CAA+C,CAAC;AACnG,OAAO,EAAE,MAAM,EAAE,kBAAkB,EAA+C,MAAM,sCAAsC,CAAC;AAC/H,OAAO,KAAK,QAAQ,MAAM,yBAAyB,CAAC;AAMpD,OAAO,iBAAiB,MAAM,sDAAsD,CAAC;AACrF,OAAO,qBAAqB,MAAM,0DAA0D,CAAC;AAC7F,OAAO,mBAAmB,MAAM,wDAAwD,CAAC;AA+CzF,IAAM,0BAA0B,GAAhC,MAAM,0BAA2B,SAAQ,KAAK,CAAC,SAAiD;IAK5F,YAAY,KAA6C;QACrD,KAAK,CAAC,KAAK,CAAC,CAAC;QAJG,oBAAe,GAAY,IAAI,CAAC;QAkF5C,0BAAqB,GAAG,GAAgC,EAAE;YAC9D,MAAM,EACF,WAAW,EAAE,EAAE,OAAO,EAAE,EACxB,MAAM,EAAE,EAAE,YAAY,EAAE,WAAW,EAAE,EACxC,GAAG,IAAI,CAAC,KAAK,CAAC;YACf,MAAM,UAAU,GAAG,OAAO,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;YAC/C,MAAM,2BAA2B,GAAG,IAAI,CAAC,eAAe,CAAC;YAEzD,OAAO;gBACH,2BAA2B,EAAE,EAAE,SAAS,EAAE,6CAA6C,EAAE;gBACzF,QAAQ,EAAE,YAAY,IAAI,oBAAC,iBAAiB,oBAAK,EAAE,SAAS,EAAE,2BAA2B,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,gBAAgB,EAAE,IAAI,CAAC,gBAAgB,EAAE,EAAI;gBAC1M,WAAW,EAAE,oBAAC,QAAQ,CAAC,iBAAiB,IAAC,IAAI,EAAE,WAAW,GAAI;aACjE,CAAC;QACN,CAAC,CAAA;QAGO,SAAI,GAAG,KAAK,IAAmB,EAAE;YACrC,MAAM,EACF,IAAI,EACJ,MAAM,EAAE,EAAE,YAAY,EAAE,EAC3B,GAAG,IAAI,CAAC,KAAK,CAAC;YAEf,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,2BAA2B,IAAI,CAAC,YAAY,EAAE;gBACpE,MAAM,IAAI,CAAC,kCAAkC,CAAC,IAAI,CAAC,CAAC;gBACpD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;aAC/B;iBAAM,IAAI,YAAY,EAAE;gBACrB,MAAM,IAAI,CAAC,kCAAkC,CAAC,KAAK,CAAC,CAAC;gBACrD,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;aAChC;YAED,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC;gBACxB,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU;aACtD,CAAC,CAAC;QACP,CAAC,CAAC;QAEM,oBAAe,GAAG,GAAqC,EAAE;YAC7D,MAAM,EAAE,iBAAiB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YACnD,OAAO;gBACH,KAAK,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,yCAAyC,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,WAAW,EAAE;gBACpH,KAAK,EAAE,oBAAC,mBAAmB,oBAAK,EAAE,KAAK,EAAE,iBAAiB,EAAE,EAAI;gBAChE,OAAO,EAAE,oBAAC,qBAAqB,oBAAK,EAAE,OAAO,EAAE,IAAI,CAAC,YAAY,EAAE,EAAI;aACzE,CAAC;QACN,CAAC,CAAC;QAEM,oBAAe,GAAG,GAAoB,EAAE;YAC5C,MAAM,EAAE,cAAc,GAAG,QAAQ,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YAC/E,OAAO,CACH,oBAAC,MAAM,IACH,SAAS,EAAC,iDAAiD,EAC3D,KAAK,EAAE,cAAc,gBACT,kBAAkB,EAC9B,KAAK,EAAC,WAAW,EACjB,OAAO,EAAE,IAAI,CAAC,QAAQ,IAErB,cAAc,CACV,CACZ,CAAC;QACN,CAAC,CAAC;QAEM,kBAAa,GAAG,GAAoB,EAAE;YAC1C,MAAM,EAAE,YAAY,GAAG,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YACzE,OAAO,CACH,oBAAC,MAAM,IACH,SAAS,EAAC,+CAA+C,EACzD,KAAK,EAAE,YAAY,gBACP,gBAAgB,EAC5B,KAAK,EAAC,SAAS,EACf,OAAO,EAAE,IAAI,CAAC,QAAQ,IAErB,YAAY,CACR,CACZ,CAAC;QACN,CAAC,CAAC;QAEM,kBAAa,GAAG,GAAoB,EAAE;YAC1C,MAAM,EAAE,YAAY,GAAG,QAAQ,EAAE,gBAAgB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YAC3E,OAAO,CACH,oBAAC,MAAM,IACH,SAAS,EAAC,+CAA+C,EACzD,KAAK,EAAE,YAAY,gBACP,gBAAgB,EAC5B,KAAK,EAAC,SAAS,EACf,OAAO,EAAE,IAAI,CAAC,MAAM,IAEnB,YAAY,CACR,CACZ,CAAC;QACN,CAAC,CAAC;QAEM,WAAM,GAAG,GAAS,EAAE;YACxB,IAAI,CAAC,UAAU,EAAE,CAAC;QACtB,CAAC,CAAC;QAEM,aAAQ,GAAG,KAAK,IAAmB,EAAE;YACzC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;gBACvB,IAAI,IAAI,CAAC,UAAU,EAAE;oBACjB,MAAM,IAAI,CAAC,kCAAkC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;iBACvE;qBAAM;oBACH,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;oBACjD,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;iBAC5C;aACJ;iBAAM;gBACH,IAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,MAAM,IAAI,CAAC,kCAAkC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBACpE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;aACpC;QACL,CAAC,CAAC;QAEM,eAAU,GAAG,GAAG,EAAE;YACtB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QACxC,CAAC,CAAC;QAEM,aAAQ,GAAG,CAAC,YAAoB,EAAQ,EAAE;YAC9C,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;YACzC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACzC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YACpC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACrC,CAAC,CAAC;QAEM,aAAQ,GAAG,GAAS,EAAE;YAE1B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;gBAClC,OAAO;aACV;YAED,MAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,2BAA2B,CAAC;YACpF,IAAI,CAAC,eAAe,EAAE;gBAElB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;gBACpC,OAAO;aACV;iBAAM;gBAEH,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAC1C,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;aACpC;QACL,CAAC,CAAC;QAEM,uCAAkC,GAAG,KAAK,EAAE,eAAwB,EAAiB,EAAE;YAC3F,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;gBACjC,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,kCAAkC,CAAC,EAAE,8BAA8B,EAAE,eAAe,EAAE,CAAC,CAAC;aACjI;QACL,CAAC,CAAC;QAEM,eAAU,GAAG,GAAS,EAAE;YAC5B,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC1C,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;QAClC,CAAC,CAAC;QAEM,aAAQ,GAAG,KAAK,EAAE,KAA0C,EAAE,EAAE;YACpE,MAAM,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC;YACrC,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;YAC/B,IAAI,IAAI,CAAC,UAAU,EAAE;gBACjB,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC;aACzB;QACL,CAAC,CAAC;QA3OE,IAAI,CAAC,gBAAgB,GAAG,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,iBAAkB,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAC7I,CAAC;IAES,IAAI,WAAW;QACrB,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,SAAS,CAAC;IAC9F,CAAC;IAES,IAAI,aAAa;QACvB,MAAM,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QACjD,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,sBAAsB,IAAI,CAAC,kBAAkB,IAAI,KAAK,CAAC,CAAC;IAC3F,CAAC;IAES,IAAI,UAAU;QACpB,MAAM,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QACjD,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,sBAAsB,IAAI,CAAC,kBAAkB,CAAC;IACjF,CAAC;IAES,IAAI,qCAAqC;QAC/C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAC3C,OAAO,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;IACvC,CAAC;IAEM,KAAK,CAAC,iBAAiB;QAE1B,IAAI,CACA,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,EACtB,KAAK,IAAI,EAAE;YACP,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,CACJ,CAAC;QAEF,QAAQ,CACJ,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,2BAA2B,EACpG,KAAK,IAAI,EAAE;YACP,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,2BAA2B,IAAI,IAAI,CAAC,qCAAqC,CAAC;QACtI,CAAC,CACJ,CAAC;IACN,CAAC;IAEM,MAAM;QACT,MAAM,EACF,WAAW,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,EAClC,MAAM,EAAE,EAAE,SAAS,EAAE,EACxB,GAAG,IAAI,CAAC,KAAK,CAAC;QACf,MAAM,2BAA2B,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,2BAA2B,CAAC;QACjG,MAAM,OAAO,GAAG,QAAQ,CAAC;QACzB,MAAM,aAAa,GAAG,CAAC,OAAO,CAAC;QAC/B,MAAM,cAAc,GAAG,CAAC,QAAQ,IAAI,OAAO,CAAC;QAE5C,MAAM,SAAS,GAAG;YACd,GAAG,IAAI,CAAC,KAAK;YACb,GAAG,IAAI,CAAC,KAAK;YACb,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,gBAAgB,EAAE,IAAI,CAAC,YAAY;YACnC,SAAS,EAAE;gBACP,OAAO,EAAE,OAAO;gBAChB,gBAAgB,EAAE,aAAa,IAAI,IAAI,CAAC,aAAa;gBACrD,gBAAgB,EAAE,cAAc,IAAI,IAAI,CAAC,aAAa;gBACtD,kBAAkB,EAAE,aAAa,IAAI,IAAI,CAAC,aAAa,IAAI,2BAA2B;aACzF;YACD,0BAA0B,EAAE;gBACxB,WAAW,EAAE,IAAI,CAAC,KAAK;gBACvB,SAAS,EAAE,SAAS,CAAC,kCAAkC,EAAE,SAAS,CAAC;aACtE;YACD,yBAAyB,EAAE,IAAI,CAAC,qBAAqB,EAAE;YACvD,YAAY,EAAE,IAAI,CAAC,eAAe,EAAE;YACpC,UAAU,EAAE,IAAI,CAAC,aAAa,EAAE;YAChC,UAAU,EAAE,IAAI,CAAC,aAAa,EAAE;YAChC,YAAY,EAAE,IAAI,CAAC,eAAe,EAAE;YACpC,MAAM,EAAE,IAAI,CAAC,QAAQ;YACrB,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,QAAQ,EAAE,IAAI,CAAC,QAAQ;SAC1B,CAAC;QACF,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,SAAS,CAAuB,CAAC;IAClE,CAAC;CAkKJ,CAAA;AAlPe;IAAX,UAAU;mEAAyC;AACxC;IAAX,UAAU;gEAA+B;AAOhC;IAAT,QAAQ;6DAER;AAES;IAAT,QAAQ;+DAGR;AAES;IAAT,QAAQ;4DAGR;AAES;IAAT,QAAQ;uFAGR;AAyED;IADC,MAAM;wDAqBL;AAxHA,0BAA0B;IAF/B,eAAe;IACf,QAAQ;GACH,0BAA0B,CAoP/B;AAED,eAAe,0BAA0B,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport classname from 'classnames';\nimport { action, computed, observable, reaction, when } from 'mobx';\nimport { observer } from 'mobx-react';\nimport * as React from 'react';\n\nimport { IModuleStateProps, withModuleState } from '@msdyn365-commerce-modules/checkout-utilities';\nimport { Button, getTelemetryObject, IModuleProps, INodeProps, ITelemetryContent } from '@msdyn365-commerce-modules/utilities';\nimport * as MsDyn365 from '@msdyn365-commerce/core';\n\nimport { ICheckoutTermsAndConditionsData } from './checkout-terms-and-conditions.data';\nimport {\n    ICheckoutTermsAndConditionsProps\n} from './checkout-terms-and-conditions.props.autogenerated';\nimport CheckboxComponent from './components/checkout-terms-and-conditions.check-box';\nimport ErrorMessageComponent from './components/checkout-terms-and-conditions.error-message';\nimport ErrorTitleComponent from './components/checkout-terms-and-conditions.error-title';\n\nexport interface ICheckoutTermsAndConditionsModuleProps extends ICheckoutTermsAndConditionsProps<ICheckoutTermsAndConditionsData>, IModuleStateProps { }\n\nexport interface ICheckoutTermsAndConditions {\n    termsAndConditionAcceptance: INodeProps;\n    checkBox: React.ReactNode;\n    description: React.ReactNode;\n}\n\nexport interface ICheckoutTermsAndConditionsError {\n    error: INodeProps;\n    title: React.ReactNode;\n    message: React.ReactNode;\n}\n\nexport interface ICheckoutTermsAndConditionsViewState {\n    isError: boolean;\n    isShowSaveButton: boolean;\n    isShowEditButton: boolean;\n    isShowCancelButton: boolean;\n}\n\nexport interface ICheckoutTermsAndConditionsViewProps extends ICheckoutTermsAndConditionsProps<{}> {\n    checkoutTermsAndConditions: IModuleProps;\n    isTermsAccepted: boolean;\n    errorMessageData: string;\n    viewState: ICheckoutTermsAndConditionsViewState;\n    termsAndConditionsContent: ICheckoutTermsAndConditions;\n    errorMessage?: ICheckoutTermsAndConditionsError;\n    saveButton?: React.ReactNode;\n    editButton?: React.ReactNode;\n    cancelButton?: React.ReactNode;\n    onChange(event: React.ChangeEvent<HTMLInputElement>): void;\n    onSave(): void;\n    onEdit(): void;\n    onCancel(): void;\n}\n\n/**\n *\n * CheckoutTermsAndConditions component\n * @extends {React.Component<ICheckoutTermsAndConditionsProps<ICheckoutTermsAndConditionsData>>}\n */\n// @ts-ignore\n@withModuleState\n@observer\nclass CheckoutTermsAndConditions extends React.Component<ICheckoutTermsAndConditionsModuleProps> {\n    private telemetryContent: ITelemetryContent;\n    @observable private isTermsAccepted: boolean = true;\n    @observable private errorMessage?: string;\n\n    constructor(props: ICheckoutTermsAndConditionsModuleProps) {\n        super(props);\n        this.telemetryContent = getTelemetryObject(this.props.context.request.telemetryPageName!, this.props.friendlyName, this.props.telemetry);\n    }\n\n    @computed get isDataReady(): boolean {\n        return (this.props.data.checkout.result && this.props.data.checkout.status) === 'SUCCESS';\n    }\n\n    @computed get isShowButtons(): boolean {\n        const { showControlButtons } = this.props.config;\n        return !this.props.moduleState.hasExternalSubmitGroup && (showControlButtons || false);\n    }\n\n    @computed get isAutoSave(): boolean {\n        const { showControlButtons } = this.props.config;\n        return !this.props.moduleState.hasExternalSubmitGroup && !showControlButtons;\n    }\n\n    @computed get defaultTermsAndConditionAcceptedValue(): boolean {\n        const { showCheckbox } = this.props.config;\n        return showCheckbox ? false : true;\n    }\n\n    public async componentDidMount(): Promise<void> {\n        // @ts-ignore: Compiler not reconizing condition check for function params\n        when(\n            () => this.isDataReady,\n            async () => {\n                await this.init();\n            }\n        );\n\n        reaction(\n            () => this.props.data.checkout.result && this.props.data.checkout.result.isTermsAndConditionAccepted,\n            async () => {\n                this.isTermsAccepted = this.props.data.checkout.result?.isTermsAndConditionAccepted || this.defaultTermsAndConditionAcceptedValue;\n            }\n        );\n    }\n\n    public render(): JSX.Element | null {\n        const {\n            moduleState: { isReady, hasError },\n            config: { className }\n        } = this.props;\n        const isTermsAndConditionAccepted = this.props.data.checkout.result?.isTermsAndConditionAccepted;\n        const isError = hasError;\n        const isShowContent = !isReady;\n        const isShowSelected = !hasError && isReady;\n\n        const viewProps = {\n            ...this.props,\n            ...this.state,\n            isTermsAccepted: this.isTermsAccepted,\n            errorMessageData: this.errorMessage,\n            viewState: {\n                isError: isError,\n                isShowSaveButton: isShowContent && this.isShowButtons,\n                isShowEditButton: isShowSelected && this.isShowButtons,\n                isShowCancelButton: isShowContent && this.isShowButtons && isTermsAndConditionAccepted,\n            },\n            checkoutTermsAndConditions: {\n                moduleProps: this.props,\n                className: classname('ms-checkout-terms-and-conditions', className)\n            },\n            termsAndConditionsContent: this.getTermsAndConditions(),\n            errorMessage: this.getErrorMessage(),\n            saveButton: this.getSaveButton(),\n            editButton: this.getEditButton(),\n            cancelButton: this.getCancelButton(),\n            onSave: this.onSubmit,\n            onEdit: this.onEdit,\n            onCancel: this.onCancel,\n            onChange: this.onChange\n        };\n        return this.props.renderView(viewProps) as React.ReactElement;\n    }\n\n    private getTermsAndConditions = (): ICheckoutTermsAndConditions => {\n        const {\n            moduleState: { isReady },\n            config: { showCheckbox, description }\n        } = this.props;\n        const isDisabled = isReady && !this.isAutoSave;\n        const isTermsAndConditionAccepted = this.isTermsAccepted;\n\n        return {\n            termsAndConditionAcceptance: { className: 'ms-checkout-terms-and-conditions__container' },\n            checkBox: showCheckbox && <CheckboxComponent {...{ isChecked: isTermsAndConditionAccepted, disabled: isDisabled, onChange: this.onChange, id: this.props.id, telemetryContent: this.telemetryContent }} />,\n            description: <MsDyn365.RichTextComponent text={description} />\n        };\n    }\n\n    @action\n    private init = async (): Promise<void> => {\n        const {\n            data,\n            config: { showCheckbox }\n        } = this.props;\n\n        if (data.checkout.result?.isTermsAndConditionAccepted || !showCheckbox) {\n            await this.updateTermsAndConditionsAcceptance(true);\n            this.isTermsAccepted = true;\n        } else if (showCheckbox) {\n            await this.updateTermsAndConditionsAcceptance(false);\n            this.isTermsAccepted = false;\n        }\n\n        this.props.moduleState.init({\n            onEdit: this.onEdit,\n            onCancel: this.onCancel,\n            onSubmit: this.onSubmit,\n            status: this.isTermsAccepted ? 'ready' : 'updating'\n        });\n    };\n\n    private getErrorMessage = (): ICheckoutTermsAndConditionsError => {\n        const { errorMessageTitle } = this.props.resources;\n        return {\n            error: { tag: 'div', className: 'ms-checkout-terms-and-conditions__error', role: 'alert', 'aria-live': 'assertive' },\n            title: <ErrorTitleComponent {...{ title: errorMessageTitle }} />,\n            message: <ErrorMessageComponent {...{ message: this.errorMessage }} />\n        };\n    };\n\n    private getCancelButton = (): React.ReactNode => {\n        const { cancelBtnLabel = 'Cancel', cancelBtnAriaLabel } = this.props.resources;\n        return (\n            <Button\n                className='ms-checkout-terms-and-conditions__button-cancel'\n                title={cancelBtnLabel}\n                aria-label={cancelBtnAriaLabel}\n                color='secondary'\n                onClick={this.onCancel}\n            >\n                {cancelBtnLabel}\n            </Button>\n        );\n    };\n\n    private getSaveButton = (): React.ReactNode => {\n        const { saveBtnLabel = 'Save', saveBtnAriaLabel } = this.props.resources;\n        return (\n            <Button\n                className='ms-checkout-terms-and-conditions__button-save'\n                title={saveBtnLabel}\n                aria-label={saveBtnAriaLabel}\n                color='primary'\n                onClick={this.onSubmit}\n            >\n                {saveBtnLabel}\n            </Button>\n        );\n    };\n\n    private getEditButton = (): React.ReactNode => {\n        const { editBtnLabel = 'Change', editBtnAriaLabel } = this.props.resources;\n        return (\n            <Button\n                className='ms-checkout-terms-and-conditions__button-edit'\n                title={editBtnLabel}\n                aria-label={editBtnAriaLabel}\n                color='primary'\n                onClick={this.onEdit}\n            >\n                {editBtnLabel}\n            </Button>\n        );\n    };\n\n    private onEdit = (): void => {\n        this.onUpdating();\n    };\n\n    private onSubmit = async (): Promise<void> => {\n        if (!this.isTermsAccepted) {\n            if (this.isAutoSave) {\n                await this.updateTermsAndConditionsAcceptance(this.isTermsAccepted);\n            } else {\n                this.setError(this.props.resources.errorMessage);\n                this.props.moduleState.setHasError(true);\n            }\n        } else {\n            this.clearError();\n            await this.updateTermsAndConditionsAcceptance(this.isTermsAccepted);\n            this.props.moduleState.onReady();\n        }\n    };\n\n    private onUpdating = () => {\n        this.props.moduleState.onUpdating();\n    };\n\n    private setError = (errorMessage: string): void => {\n        this.props.telemetry.error(errorMessage);\n        this.props.moduleState.setHasError(true);\n        this.props.moduleState.onUpdating();\n        this.errorMessage = errorMessage;\n    };\n\n    private onCancel = (): void => {\n        // Reset to the saved value\n        if (!this.props.data.checkout.result) {\n            return;\n        }\n\n        const isTermsAccepted = this.props.data.checkout.result.isTermsAndConditionAccepted;\n        if (!isTermsAccepted) {\n            // It has no saved email, set to status updating and request user to fill the email form\n            this.props.moduleState.onUpdating();\n            return;\n        } else {\n            // It has saved email, set to status ready\n            this.isTermsAccepted = true;\n            this.props.moduleState.setHasError(false);\n            this.props.moduleState.onReady();\n        }\n    };\n\n    private updateTermsAndConditionsAcceptance = async (isTermsAccepted: boolean): Promise<void> => {\n        if (this.props.data.checkout.result) {\n            await this.props.data.checkout.result.updateTermsAndConditionsAcceptance({ newIsTermsAndConditionAccepted: isTermsAccepted });\n        }\n    };\n\n    private clearError = (): void => {\n        this.props.moduleState.setHasError(false);\n        this.errorMessage = undefined;\n    };\n\n    private onChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const checked = event.target.checked;\n        this.isTermsAccepted = checked;\n        if (this.isAutoSave) {\n            await this.onSubmit();\n        }\n    };\n\n}\n\nexport default CheckoutTermsAndConditions;\n"]}