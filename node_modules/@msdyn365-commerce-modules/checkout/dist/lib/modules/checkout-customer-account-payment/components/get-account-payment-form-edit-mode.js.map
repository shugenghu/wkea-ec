{"version":3,"file":"get-account-payment-form-edit-mode.js","sourceRoot":"./src/","sources":["modules/checkout-customer-account-payment/components/get-account-payment-form-edit-mode.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Alert, Button, INodeProps, NodeTag } from '@msdyn365-commerce-modules/utilities';\nimport { Customer } from '@msdyn365-commerce/retail-proxy';\nimport * as React from 'react';\nimport { ICheckoutCustomerAccountPaymentResources } from '../checkout-customer-account-payment.props.autogenerated';\n\nexport interface IGetAccountPaymentEditViewFormInput {\n    resources: ICheckoutCustomerAccountPaymentResources;\n    amount: number;\n    maxAmount: number;\n    customer: Customer | undefined;\n    customerCreatedDate: string;\n    availableCredit: string;\n    showCreditLimit: boolean;\n    errorMessage: string | undefined;\n    creditSectionIsExpanded: boolean;\n    orderTotal: string;\n    excessCredit: string | undefined;\n    appliedAmount: string | undefined;\n    onAddPayment(): Promise<void>;\n    onChangePaymentAmount(newAmount: number): void;\n    onToggleCreditSection(): void;\n    onRemovePayment(): Promise<void>;\n}\n\nexport interface IAccountPaymentEditViewForm {\n    formProps: INodeProps;\n    inputLabel: React.ReactNode;\n    inputAmount: React.ReactNode;\n    addPaymentButton: React.ReactNode;\n    customerName: React.ReactNode;\n    customerAccountNumber: React.ReactNode;\n    customerSince: React.ReactNode;\n    accountCredit: React.ReactNode;\n    alert: React.ReactNode;\n    accountDetails: React.ReactNode;\n    appliedLine: React.ReactNode;\n    bottomBorder: React.ReactNode;\n}\n\n// tslint:disable-next-line:max-func-body-length\nexport const getAccountPaymentFormEditMode = (options: IGetAccountPaymentEditViewFormInput): IAccountPaymentEditViewForm => {\n    const {\n        resources,\n        onAddPayment,\n        amount,\n        onChangePaymentAmount,\n        maxAmount,\n        customer,\n        customerCreatedDate,\n        availableCredit,\n        showCreditLimit,\n        errorMessage,\n        onToggleCreditSection,\n        creditSectionIsExpanded,\n        orderTotal,\n        excessCredit,\n        onRemovePayment,\n        appliedAmount\n    } = options;\n\n    const { addPaymentButtonLabel, inputAmountLabel, inputAmountAriaLabel, customerSinceLabel, accountCreditLabel, creditDetailsSectionLabel, orderTotalLabel, availableCreditLabel, creditExcessLabel, appliedCustomerAccountPaymentLabel,\n    removeCustomerAccountPaymentLabel } = resources;\n\n    const inputLabel = (\n        <span id='ms-checkout-customer-account__label' className='ms-checkout-customer-account__input-label'>\n            {inputAmountLabel}\n        </span>\n    );\n\n    const onAddAccountPayment = async (e: React.SyntheticEvent): Promise<void> => {\n        e.preventDefault();\n        await onAddPayment();\n    };\n\n    const formProps = {\n        className: 'ms-checkout-customer-account__form-edit',\n        onSubmit: onAddAccountPayment,\n        tag: 'form' as NodeTag\n    };\n\n    const addPaymentButton = (\n        <Button\n            className='ms-checkout-customer-account__btn-pay'\n            onClick={onAddAccountPayment}\n            disabled={(amount > maxAmount) || (amount < 0) }\n        >\n            {addPaymentButtonLabel}\n        </Button>\n    );\n\n    const onChangeAmount = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const value = parseFloat(e.target.value || '0');\n        onChangePaymentAmount(value);\n    };\n\n    const inputAmount = (\n        <input\n            type='number'\n            className='ms-checkout-customer-account__input-amount form-control'\n            value= {amount}\n            onInput= {onChangeAmount}\n            aria-label= {inputAmountAriaLabel}\n            aria-valuemin= {0}\n            aria-valuemax={maxAmount}\n            aria-valuenow={amount}\n            min = {0}\n            max ={maxAmount}\n        />\n    );\n\n    const customerName = (\n        <div\n            className='ms-checkout-customer-account__account-name'\n        >\n            {customer?.Name}\n        </div>\n    );\n\n    const customerAccountNumber = (\n        <div\n            className='ms-checkout-customer-account__account-number'\n        >\n            {'#'}{customer?.AccountNumber}\n        </div>\n    );\n\n    const customerSince = (\n        <div\n            className='ms-checkout-customer-account__customer-since'\n        >\n            {customerSinceLabel}{customerCreatedDate}\n        </div>\n    );\n\n    const accountCredit = (\n            <>\n                <span\n                    className='ms-checkout-customer-account__account-credit-label'\n                >\n                    {accountCreditLabel}\n                </span>\n                {showCreditLimit && <span\n                    className='ms-checkout-customer-account__account-credit'\n                >\n                    {availableCredit}\n                </span>}\n                <span\n                    className= {creditSectionIsExpanded ? 'ms-checkout-customer-account__account-credit-toggle-up' : 'ms-checkout-customer-account__account-credit-toggle-down'}\n                    onClick={onToggleCreditSection}\n                    role='button'\n                />\n            </>\n    );\n\n    const accountDetails = (\n        creditSectionIsExpanded ?\n        (\n        <div\n            className='ms-checkout-customer-account__credit-details-section'\n        >\n            <>\n                <div\n                    className='ms-checkout-customer-account__account-credit-current-order-preview'\n                >\n                    <span\n                        className='ms-checkout-customer-account__account-credit-current-order-icon'\n                    />\n                    <span\n                        className='ms-checkout-customer-account__account-credit-current-order-preview-label'\n                    >\n                        {creditDetailsSectionLabel}\n                    </span>\n                </div>\n            </>\n            <div\n                className='ms-checkout-customer-account__available-credit-section'\n            >\n                <span\n                    className='ms-checkout-customer-account__available-credit-label'\n                >\n                    {availableCreditLabel}\n                </span>\n                <span\n                    className='ms-checkout-customer-account__available-credit'\n                >\n                    {availableCredit}\n                </span>\n            </div>\n            <div\n                className='ms-checkout-customer-account__order-total-section'\n            >\n                <span\n                    className='ms-checkout-customer-account__order-total-label'\n                >\n                    {orderTotalLabel}\n                </span>\n                <span\n                    className='ms-checkout-customer-account__order-total'\n                >\n                    {orderTotal}\n                </span>\n            </div>\n            <div\n                className='ms-checkout-customer-account__excess-credit-section'\n            >\n                <span\n                    className='ms-checkout-customer-account__excess-credit-label'\n                >\n                    {creditExcessLabel}\n                </span>\n                <span\n                    className='ms-checkout-customer-account__excess-credit'\n                >\n                    {excessCredit}\n                </span>\n            </div>\n        </div>\n\n        ): undefined\n    );\n\n    const alert = (\n        <Alert\n            tag='span'\n            id='ms-checkout-customer-account__error'\n            className='ms-checkout-customer-account__input-error'\n            role='alert'\n            assertive={false}\n            fade={false}\n            includeAlertClass={false}\n            isOpen={!!errorMessage}\n        >\n            {errorMessage}\n        </Alert>\n    );\n\n    const appliedLine = (\n        appliedAmount ?\n        (\n            <div\n                className='ms-checkout-customer-account__applied-line'\n            >\n                <span\n                    className='ms-checkout-customer-account__applied-label'\n                >\n                    {appliedCustomerAccountPaymentLabel}\n                </span>\n                <span\n                    className='ms-checkout-customer-account__applied-amount'\n                >\n                    {appliedAmount}\n                </span>\n                <a\n                    className='ms-checkout-customer-account__remove'\n                    onClick={onRemovePayment}\n                    role='button'\n                >\n                    {removeCustomerAccountPaymentLabel}\n                </a>\n            </div>\n        ) : undefined\n    );\n\n    const bottomBorder = (\n        <div className = 'ms-checkout-customer-account__bottom-border' />\n    );\n\n    return {\n        formProps,\n        inputLabel,\n        inputAmount,\n        addPaymentButton,\n        customerName,\n        customerAccountNumber,\n        customerSince,\n        accountCredit,\n        alert,\n        accountDetails,\n        appliedLine,\n        bottomBorder\n    };\n};"]}