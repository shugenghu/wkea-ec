{"version":3,"file":"checkout-customer-account-payment.test.js","sourceRoot":"./src/","sources":["modules/checkout-customer-account-payment/tests/unit/checkout-customer-account-payment.test.tsx"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// tslint:disable-next-line:no-unused-variable\nimport { mount, shallow } from 'enzyme';\nimport * as React from 'react';\nimport { EditForm } from '../../checkout-customer-account-payment.view';\nimport { getAccountPaymentFormEditMode, IAccountPaymentEditViewForm, IGetAccountPaymentEditViewFormInput } from '../../components';\n\nconst mockResources = {\n    addPaymentButtonLabel: 'test',\n    inputAmountLabel: 'test2',\n    inputAmountAriaLabel: 'test3',\n    customerSinceLabel: 'test4',\n    accountCreditLabel: 'test5',\n    inputAmountSummaryLabel: 'test6',\n    invalidAmountMessage: 'test7',\n    orderTotalLabel: 'test8',\n    creditExcessLabel: 'test9',\n    availableCreditLabel: 'test10',\n    creditDetailsSectionLabel: 'test11',\n    appliedCustomerAccountPaymentLabel: 'test12',\n    removeCustomerAccountPaymentLabel: 'test13'\n};\n\ndescribe('Checkout customer account payment unit tests', () => {\n\n    beforeEach(() => {\n        jest.resetAllMocks();\n    });\n\n    it('Clicking pay calls the add payment amount function ', () => {\n        const mockOptions: IGetAccountPaymentEditViewFormInput = {\n            amount: 199,\n            onChangePaymentAmount: jest.fn(),\n            onAddPayment: jest.fn(),\n            resources: mockResources,\n            maxAmount: 200,\n            customer: {Name: 'Test Name', AccountNumber: '1968'},\n            customerCreatedDate: '01/01/1970',\n            availableCredit: '$50.00',\n            showCreditLimit: true,\n            errorMessage: '',\n            onToggleCreditSection: jest.fn(),\n            creditSectionIsExpanded: false,\n            orderTotal: '$60',\n            excessCredit: '-$10',\n            onRemovePayment: jest.fn(),\n            appliedAmount: '$20'\n\n        };\n        const form: IAccountPaymentEditViewForm = getAccountPaymentFormEditMode(mockOptions);\n        const component = mount(<EditForm {...form} />);\n        const button = component.find('.ms-checkout-customer-account__btn-pay').first();\n        button.simulate('click');\n        expect(mockOptions.onAddPayment).toBeCalled();\n    });\n\n    it('Changing the amount calls the on change payment amount function ', () => {\n        const mockOptions: IGetAccountPaymentEditViewFormInput = {\n            amount: 199,\n            onAddPayment: jest.fn(),\n            onChangePaymentAmount: jest.fn(),\n            resources: mockResources,\n            maxAmount: 200,\n            customer: {Name: 'Test Name', AccountNumber: '1968'},\n            customerCreatedDate: '01/01/1970',\n            availableCredit: '$50.00',\n            showCreditLimit: true,\n            errorMessage: '',\n            onToggleCreditSection: jest.fn(),\n            creditSectionIsExpanded: false,\n            orderTotal: '$60',\n            excessCredit: '-$10',\n            onRemovePayment: jest.fn(),\n            appliedAmount: '$20'\n\n        };\n        const form: IAccountPaymentEditViewForm = getAccountPaymentFormEditMode(mockOptions);\n        const component = shallow(<EditForm {...form} />);\n        const input = component.find('input.ms-checkout-customer-account__input-amount');\n        const event = { target: { value: 11 } };\n        input.simulate('input', event);\n        expect(mockOptions.onChangePaymentAmount).toBeCalledWith(\n            11\n        );\n    });\n\n    it('If show credit limit is false, credit limit should not be shown', () => {\n        const mockOptions: IGetAccountPaymentEditViewFormInput = {\n            amount: 199,\n            onAddPayment: jest.fn(),\n            onChangePaymentAmount: jest.fn(),\n            resources: mockResources,\n            maxAmount: 200,\n            customer: {Name: 'Test Name', AccountNumber: '1968'},\n            customerCreatedDate: '01/01/1970',\n            availableCredit: '$50',\n            showCreditLimit: false,\n            errorMessage: '',\n            onToggleCreditSection: jest.fn(),\n            creditSectionIsExpanded: false,\n            orderTotal: '$60',\n            excessCredit: '-$10',\n            onRemovePayment: jest.fn(),\n            appliedAmount: '$20'\n\n        };\n        const form: IAccountPaymentEditViewForm = getAccountPaymentFormEditMode(mockOptions);\n        const component = shallow(<EditForm {...form} />);\n        const creditComponent = component.find('input.ms-checkout-customer-account__account-credit');\n        expect(creditComponent).toMatchSnapshot();\n    });\n\n    it('If show credit limit is true, credit limit should be shown', () => {\n        const mockOptions: IGetAccountPaymentEditViewFormInput = {\n            amount: 199,\n            onAddPayment: jest.fn(),\n            onChangePaymentAmount: jest.fn(),\n            resources: mockResources,\n            maxAmount: 200,\n            customer: {Name: 'Test Name', AccountNumber: '1968'},\n            customerCreatedDate: '01/01/1970',\n            availableCredit: '$40.50',\n            showCreditLimit: true,\n            errorMessage: '',\n            onToggleCreditSection: jest.fn(),\n            creditSectionIsExpanded: false,\n            orderTotal: '$60',\n            excessCredit: '-$20',\n            onRemovePayment: jest.fn(),\n            appliedAmount: '$20'\n\n        };\n        const form: IAccountPaymentEditViewForm = getAccountPaymentFormEditMode(mockOptions);\n        const component = shallow(<EditForm {...form} />);\n        const creditComponent = component.find('input.ms-checkout-customer-account__account-credit');\n        expect(creditComponent).toMatchSnapshot();\n    });\n\n    it('Clicking remove calls the remove payment amount function ', () => {\n        const mockOptions: IGetAccountPaymentEditViewFormInput = {\n            amount: 199,\n            onChangePaymentAmount: jest.fn(),\n            onAddPayment: jest.fn(),\n            resources: mockResources,\n            maxAmount: 200,\n            customer: {Name: 'Test Name', AccountNumber: '1968'},\n            customerCreatedDate: '01/01/1970',\n            availableCredit: '$50.00',\n            showCreditLimit: true,\n            errorMessage: '',\n            onToggleCreditSection: jest.fn(),\n            creditSectionIsExpanded: false,\n            orderTotal: '$60',\n            excessCredit: '-$10',\n            onRemovePayment: jest.fn(),\n            appliedAmount: '$20'\n\n        };\n        const form: IAccountPaymentEditViewForm = getAccountPaymentFormEditMode(mockOptions);\n        const component = mount(<EditForm {...form} />);\n        const button = component.find('.ms-checkout-customer-account__remove').first();\n        button.simulate('click');\n        expect(mockOptions.onRemovePayment).toBeCalled();\n    });\n\n    it('Clicking toggle expands the credit details section ', () => {\n        const mockOptions: IGetAccountPaymentEditViewFormInput = {\n            amount: 199,\n            onChangePaymentAmount: jest.fn(),\n            onAddPayment: jest.fn(),\n            resources: mockResources,\n            maxAmount: 200,\n            customer: {Name: 'Test Name', AccountNumber: '1968'},\n            customerCreatedDate: '01/01/1970',\n            availableCredit: '$50.00',\n            showCreditLimit: true,\n            errorMessage: '',\n            onToggleCreditSection: jest.fn(),\n            creditSectionIsExpanded: false,\n            orderTotal: '$60',\n            excessCredit: '-$10',\n            onRemovePayment: jest.fn(),\n            appliedAmount: '$20'\n\n        };\n        const form: IAccountPaymentEditViewForm = getAccountPaymentFormEditMode(mockOptions);\n        const component = mount(<EditForm {...form} />);\n        const button = component.find('.ms-checkout-customer-account__account-credit-toggle-down').first();\n        button.simulate('click');\n        expect(mockOptions.onToggleCreditSection).toBeCalled();\n    });\n});"]}