/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

// tslint:disable-next-line:no-unused-variable
import { shallow } from 'enzyme';
import * as React from 'react';
import { getForm } from '../../components/get-form';
import { Form as GiftCardForm } from '../../gift-card-balance-check.view';
import { mockResources } from '../__mock__';

const mockData = {
    errorMessage: '',
    giftCardNumber: '',
    giftCardPin: '',
    giftCardExp: '',
    resources: mockResources,
    onEnterGiftCardNumber: jest.fn(),
    onEnterGiftCardPin: jest.fn(),
    onEnterGiftCardExp: jest.fn(),
    onApplyGiftCard: jest.fn()
};

describe('GiftCardBalanceCheck unit tests - GiftCardForm', () => {
    it('renders correctly - empty form', () => {
        const mockProps = getForm(mockData);
        const component = shallow(<GiftCardForm {...mockProps} />);
        expect(component).toMatchSnapshot();
        const input = component.find('input.ms-gift-card-balance-check__input-text');
        const event = { target: { value: '' } };
        input.simulate('change', event);
        expect(mockData.onEnterGiftCardNumber).toBeCalled();
    });

    it('renders correctly - with value', () => {
        const mockProps = getForm({
            ...mockData,
            giftCardNumber: '000'
        });
        const component = shallow(<GiftCardForm {...mockProps} />);
        expect(component).toMatchSnapshot();
    });

    it('renders correctly - with error', () => {
        const mockProps = getForm({
            ...mockData,
            errorMessage: 'Some error message'
        });
        const component = shallow(<GiftCardForm {...mockProps} />);
        expect(component).toMatchSnapshot();
    });
});
