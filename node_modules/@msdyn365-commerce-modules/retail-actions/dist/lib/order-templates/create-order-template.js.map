{"version":3,"file":"create-order-template.js","sourceRoot":"","sources":["../../../src/order-templates/create-order-template.ts"],"names":[],"mappings":"AAAA,OAAO,EAEH,0BAA0B,EAK7B,MAAM,yBAAyB,CAAC;AAEjC,OAAO,EAAE,sBAAsB,EAAE,MAAM,4EAA4E,CAAC;AAEpH;;GAEG;AACH,MAAM,OAAO,wBAAwB;IAGjC,YAAY,YAAoB;QAIzB,gBAAW,GAAG,GAAG,EAAE,CAAC,0BAA0B,CAAC;QAC/C,uBAAkB,GAAG,GAAG,EAAE,CAAC,0BAA0B,CAAC;QACtD,kBAAa,GAAG,GAAc,EAAE,CAAC,MAAM,CAAC;QAL3C,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;IACrC,CAAC;CAKJ;AAED;;;;GAIG;AACH,MAAM,CAAC,MAAM,wBAAwB,GAAG,CAAC,SAA+B,EAAE,YAAoB,EAA4B,EAAE;IACxH,MAAM,EAAE,cAAc,EAAE,GAAG,SAAS,CAAC;IACrC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE;QACtC,MAAM,IAAI,KAAK,CAAC,6DAA6D,CAAC,CAAC;KAClF;IACD,OAAO,IAAI,wBAAwB,CAAC,YAAY,CAAC,CAAC;AACtD,CAAC,CAAC;AAEF;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,yBAAyB,CAAC,KAA+B,EAAE,GAAmB;IAChG,IAAI;QACA,MAAM,aAAa,GAAgB;YAC/B,EAAE,EAAE,EAAE;YACN,IAAI,EAAE,KAAK,CAAC,YAAY;YACxB,oBAAoB,uBAA+B;SACtD,CAAC;QACF,MAAM,kBAAkB,GAAG,MAAM,sBAAsB,CAAC;YACpD,aAAa,EAAE,GAAG;SACrB,EAAE,aAAa,CAAC,CAAC;QAClB,IAAI,kBAAkB,IAAI,kBAAkB,CAAC,EAAE,KAAK,EAAE,EAAE;YACpD,OAAO,kBAAkB,CAAC;SAC7B;aAAM;YACH,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,+BAA+B,CAAC,CAAC;YACrD,MAAM,KAAK,CAAC,+BAA+B,CAAC,CAAC;SAChD;KACJ;IAAC,OAAO,KAAK,EAAE;QACZ,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,KAAK,CAAC;KACf;AACL,CAAC;AAED;;;GAGG;AACH,eAAe,0BAA0B,CAAc;IACnD,EAAE,EAAE,iFAAiF;IACrF,MAAM,EAAwB,yBAAyB;IACvD,KAAK,EAAE,wBAAwB;CAClC,CAAC,CAAC","sourcesContent":["import {\n    CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext\n} from '@msdyn365-commerce/core';\nimport { ProductList, ProductListType } from '@msdyn365-commerce/retail-proxy';\nimport { createProductListAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';\n\n/**\n *  Input class for the CreateOrderTemplate data action.\n */\nexport class CreateOrderTemplateInput implements IActionInput {\n    public readonly templateName: string;\n\n    constructor(templateName: string) {\n        this.templateName = templateName;\n    }\n\n    public getCacheKey = () => 'CreateOrderTemplateInput';\n    public getCacheObjectType = () => 'CreateOrderTemplateInput';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * createInput method for the CreateOrderTemplate method.\n * @param {ICreateActionContext} inputData The input data passed to the createInput method.\n * @param {string} templateName The name of template.\n */\nexport const createOrderTemplateInput = (inputData: ICreateActionContext, templateName: string): CreateOrderTemplateInput => {\n    const { requestContext } = inputData;\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('Unable to create order template. User is not authenticated.');\n    }\n    return new CreateOrderTemplateInput(templateName);\n};\n\n/**\n * The action method for the CreateOrderTemplate data action.\n * @param {CreateOrderTemplateInput} input The action input.\n * @param {IActionContext} ctx The action context.\n */\nexport async function createOrderTemplateAction(input: CreateOrderTemplateInput, ctx: IActionContext): Promise<ProductList> {\n    try {\n        const orderTemplate: ProductList = {\n            Id: '',\n            Name: input.templateName,\n            ProductListTypeValue: ProductListType.OrderTemplate\n        };\n        const createdProductList = await createProductListAsync({\n            callerContext: ctx\n        }, orderTemplate);\n        if (createdProductList && createdProductList.Id !== '') {\n            return createdProductList;\n        } else {\n            ctx.telemetry.error('Created product list was null');\n            throw Error('Created product list was null');\n        }\n    } catch (error) {\n        ctx.telemetry.error('Not able to create order template', error);\n        throw error;\n    }\n}\n\n/**\n * The CreateOrderTemplate Data Action.\n * Returns created order template.\n */\nexport default createObservableDataAction<ProductList>({\n    id: '@msdyn365-commerce-modules/retail-actions/order-templates/create-order-template',\n    action: <IAction<ProductList>>createOrderTemplateAction,\n    input: createOrderTemplateInput\n});"]}