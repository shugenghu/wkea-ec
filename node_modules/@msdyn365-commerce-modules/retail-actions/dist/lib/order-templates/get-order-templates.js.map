{"version":3,"file":"get-order-templates.js","sourceRoot":"","sources":["../../../src/order-templates/get-order-templates.ts"],"names":[],"mappings":"AAAA,OAAO,EACH,0BAA0B,EAIJ,MAAM,yBAAyB,CAAC;AAE1D,OAAO,EAAE,WAAW,EAAE,MAAM,4EAA4E,CAAC;AAGzG;;GAEG;AACH,MAAM,OAAO,sBAAsB;IAI/B,YAAY,aAAsB,EAAE,mBAAyC;QAKtE,gBAAW,GAAG,GAAW,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,mBAAmB,EAAE,MAAM,EAAE,GAAG,IAAI,IAAI,CAAC,mBAAmB,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;QACvI,uBAAkB,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;QACzC,kBAAa,GAAG,GAAc,EAAE,CAAC,UAAU,CAAC;QAC5C,sBAAiB,GAAG,GAAG,EAAE,CAAC,KAAK,CAAC;QAPnC,IAAI,CAAC,aAAa,GAAG,aAAa,IAAI,EAAE,CAAC;QACzC,IAAI,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;IACnD,CAAC;CAMJ;AAED;;;;;GAKG;AACH,MAAM,CAAC,MAAM,4BAA4B,GAAG,CAAC,SAA+B,EAAE,aAAsB,EAAE,mBAAyC,EAA0B,EAAE;IACvK,MAAM,EAAE,cAAc,EAAE,GAAG,SAAS,CAAC;IACrC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE;QACtC,MAAM,IAAI,KAAK,CAAC,iEAAiE,CAAC,CAAC;KACtF;IAED,OAAO,IAAI,sBAAsB,CAAC,aAAa,IAAI,EAAE,EAAE,mBAAmB,CAAC,CAAC;AAChF,CAAC,CAAC;AAEF;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,uBAAuB,CAAC,KAA6B,EAAE,GAAmB;IAC5F,IAAI;QAEA,MAAM,yBAAyB,GAA8B;YACzD,aAAa,EAAE,KAAK,CAAC,aAAa;YAClC,UAAU,EAAE,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,qBAAqB;SAC5D,CAAC;QACF,OAAO,WAAW,CACd;YACI,aAAa,EAAE,GAAG;YAClB,mBAAmB,EAAE,KAAK,CAAC,mBAAmB;SACjD,EACD,yBAAyB,CAC5B,CAAC;KACL;IAAC,OAAO,KAAK,EAAE;QACZ,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,KAAK,CAAC;KACf;AACL,CAAC;AAED;;;GAGG;AACH,eAAe,0BAA0B,CAAgB;IACrD,EAAE,EAAE,+EAA+E;IACnF,MAAM,EAA0B,uBAAuB;IACvD,KAAK,EAAE,4BAA4B;CACtC,CAAC,CAAC","sourcesContent":["import { CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext } from '@msdyn365-commerce/core';\nimport { QueryResultSettings } from '@msdyn365-commerce/retail-proxy';\nimport { searchAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';\nimport { ProductList, ProductListSearchCriteria } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\n\n/**\n *  Input class for the GetOrderTemplates data action\n */\nexport class GetOrderTemplatesInput implements IActionInput {\n    public readonly productListId: string;\n    public readonly queryResultSettings?: QueryResultSettings;\n\n    constructor(productListId?: string, queryResultSettings?: QueryResultSettings) {\n        this.productListId = productListId || '';\n        this.queryResultSettings = queryResultSettings;\n    }\n\n    public getCacheKey = (): string => `${this.productListId}|${this.queryResultSettings?.Paging?.Top}|${this.queryResultSettings?.Paging?.Skip}`;\n    public getCacheObjectType = () => 'ProductList';\n    public dataCacheType = (): CacheType => 'instance';\n    public shouldCacheOutput = () => false;\n}\n\n/**\n * createInput method for the GetOrderTemplate method\n * @param inputData The input data passed to the createInput method.\n * @param productListId? The product list identifier.\n * @param queryResultSettings? The query result setting required for pagination/ordering.\n */\nexport const createGetOrderTemplatesInput = (inputData: ICreateActionContext, productListId?: string, queryResultSettings?: QueryResultSettings): GetOrderTemplatesInput => {\n    const { requestContext } = inputData;\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('Unable to create get order template. User is not authenticated.');\n    }\n\n    return new GetOrderTemplatesInput(productListId || '', queryResultSettings);\n};\n\n/**\n * The action method for the GetOrderTemplates data action\n * @param input The action input\n * @param ctx The action context\n */\nexport async function getOrderTemplatesAction(input: GetOrderTemplatesInput, ctx: IActionContext): Promise<ProductList[]> {\n    try {\n\n        const productListSearchCriteria: ProductListSearchCriteria = {\n            ProductListId: input.productListId,\n            CustomerId: ctx.requestContext.user.customerAccountNumber\n        };\n        return searchAsync(\n            {\n                callerContext: ctx,\n                queryResultSettings: input.queryResultSettings\n            },\n            productListSearchCriteria\n        );\n    } catch (error) {\n        ctx.telemetry.error('Not able to get order template(s)', error);\n        throw error;\n    }\n}\n\n/**\n * The GetOrderTemplates Data Action\n * Returns order templates\n */\nexport default createObservableDataAction<ProductList[]>({\n    id: '@msdyn365-commerce-modules/retail-actions/order-templates/get-order-templates',\n    action: <IAction<ProductList[]>>getOrderTemplatesAction,\n    input: createGetOrderTemplatesInput\n});"]}