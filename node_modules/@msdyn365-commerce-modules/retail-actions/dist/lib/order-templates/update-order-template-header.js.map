{"version":3,"file":"update-order-template-header.js","sourceRoot":"","sources":["../../../src/order-templates/update-order-template-header.ts"],"names":[],"mappings":"AAAA,OAAO,EACH,0BAA0B,EAIJ,MAAM,yBAAyB,CAAC;AAC1D,OAAO,EAAE,WAAW,EAAE,MAAM,4EAA4E,CAAC;AAGzG;;GAEG;AACH,MAAM,OAAO,8BAA8B;IAGvC,YAAY,aAA0B;QAI/B,gBAAW,GAAG,GAAG,EAAE,CAAC,gCAAgC,CAAC;QACrD,uBAAkB,GAAG,GAAG,EAAE,CAAC,gCAAgC,CAAC;QAC5D,kBAAa,GAAG,GAAc,EAAE,CAAC,MAAM,CAAC;QAL3C,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACvC,CAAC;CAKJ;AAED;;;;GAIG;AACH,MAAM,CAAC,MAAM,8BAA8B,GAAG,CAAC,SAA+B,EAAE,aAA0B,EAAkC,EAAE;IAC1I,MAAM,EAAE,cAAc,EAAE,GAAG,SAAS,CAAC;IACrC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE;QACtC,MAAM,IAAI,KAAK,CAAC,6DAA6D,CAAC,CAAC;KAClF;IACD,OAAO,IAAI,8BAA8B,CAAC,aAAa,CAAC,CAAC;AAC7D,CAAC,CAAC;AAEF;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,+BAA+B,CAAC,KAAqC,EAAE,GAAmB;IAC5G,IAAI;QACA,MAAM,EAAE,aAAa,EAAE,GAAG,KAAK,CAAC;QAChC,MAAM,kBAAkB,GAAG,MAAM,WAAW,CAAC;YACzC,aAAa,EAAE,GAAG;SACrB,EAAE,aAAa,CAAC,CAAC;QAClB,IAAI,kBAAkB,EAAE;YACpB,OAAO,kBAAkB,CAAC;SAC7B;aAAM;YACH,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,wBAAwB,aAAa,CAAC,EAAE,qBAAqB,CAAC,CAAC;YACnF,MAAM,KAAK,CAAC,gCAAgC,CAAC,CAAC;SACjD;KACJ;IAAC,OAAO,KAAK,EAAE;QACZ,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,KAAK,CAAC;KACf;AACL,CAAC;AAED;;;GAGG;AACH,eAAe,0BAA0B,CAAc;IACnD,EAAE,EAAE,wFAAwF;IAC5F,MAAM,EAAwB,+BAA+B;IAC7D,KAAK,EAAE,8BAA8B;CACxC,CAAC,CAAC","sourcesContent":["import { CacheType,\n    createObservableDataAction,\n    IAction,\n    IActionContext,\n    IActionInput,\n    ICreateActionContext } from '@msdyn365-commerce/core';\nimport { updateAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductListsDataActions.g';\nimport { ProductList } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\n\n/**\n *  Input class for the UpdateOrderTemplate data action.\n */\nexport class UpdateOrderTemplateHeaderInput implements IActionInput {\n    public readonly orderTemplate: ProductList;\n\n    constructor(orderTemplate: ProductList) {\n        this.orderTemplate = orderTemplate;\n    }\n\n    public getCacheKey = () => 'UpdateOrderTemplateHeaderInput';\n    public getCacheObjectType = () => 'UpdateOrderTemplateHeaderInput';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * createInput method for the UpdateOrderTemplateHeader method.\n * @param {ICreateActionContext} inputData The input data passed to the createInput method.\n * @param {ProductList} orderTemplate The template header.\n */\nexport const updateOrderTemplateHeaderInput = (inputData: ICreateActionContext, orderTemplate: ProductList): UpdateOrderTemplateHeaderInput => {\n    const { requestContext } = inputData;\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('Unable to update order template. User is not authenticated.');\n    }\n    return new UpdateOrderTemplateHeaderInput(orderTemplate);\n};\n\n/**\n * The action method for the UpdateOrderTemplate data action.\n * @param {UpdateOrderTemplateHeaderInput} input The action input.\n * @param {IActionContext} ctx The action context.\n */\nexport async function updateOrderTemplateHeaderAction(input: UpdateOrderTemplateHeaderInput, ctx: IActionContext): Promise<ProductList> {\n    try {\n        const { orderTemplate } = input;\n        const updatedProductList = await updateAsync({\n            callerContext: ctx\n        }, orderTemplate);\n        if (updatedProductList) {\n            return updatedProductList;\n        } else {\n            ctx.telemetry.error(`Updated product list ${orderTemplate.Id} came back as null.`);\n            throw Error('Updated product list was null.');\n        }\n    } catch (error) {\n        ctx.telemetry.error('Not able to update order template', error);\n        throw error;\n    }\n}\n\n/**\n * The UpdateOrderTemplate Data Action.\n * Returns updated order template.\n */\nexport default createObservableDataAction<ProductList>({\n    id: '@msdyn365-commerce-modules/retail-actions/order-templates/update-order-template-header',\n    action: <IAction<ProductList>>updateOrderTemplateHeaderAction,\n    input: updateOrderTemplateHeaderInput\n});"]}