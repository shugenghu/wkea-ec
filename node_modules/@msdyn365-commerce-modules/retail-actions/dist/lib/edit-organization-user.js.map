{"version":3,"file":"edit-organization-user.js","sourceRoot":"","sources":["../../src/edit-organization-user.ts"],"names":[],"mappings":"AAAA,OAAO,EAAa,0BAA0B,EAA+E,MAAM,yBAAyB,CAAC;AAE7J,OAAO,EAAE,WAAW,EAAE,MAAM,oFAAoF,CAAC;AACjH;;GAEG;AACH,MAAM,OAAO,yBAAyB;IAGlC,YAAY,OAA4B;QAIjC,gBAAW,GAAG,GAAG,EAAE,CAAC,sBAAsB,CAAC;QAC3C,uBAAkB,GAAG,GAAG,EAAE,CAAC,sBAAsB,CAAC;QAClD,kBAAa,GAAG,GAAc,EAAE,CAAC,MAAM,CAAC;QAL3C,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;IACxB,CAAC;CAKJ;AAED;;GAEG;AACH,MAAM,CAAC,MAAM,+BAA+B,GAAG,CAAC,SAA+C,EAAE,OAA4B,EAAgB,EAAE;IAC3I,MAAM,EAAE,cAAc,EAAE,GAAG,SAAS,CAAC;IAErC,sCAAsC;IACtC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE;QACtC,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;KAC7C;IAED,OAAO,IAAI,yBAAyB,CAAC,OAAO,CAAC,CAAC;AAClD,CAAC,CAAC;AAEF,MAAM,CAAC,KAAK,UAAU,oBAAoB,CAAC,KAAgC,EAAE,GAAmB;IAC5F,MAAM,EAAE,IAAI,EAAE,GAAG,KAAK,CAAC;IAEvB,OAAO,WAAW,CAAC,EAAE,aAAa,EAAE,GAAG,EAAC,EAAE,IAAI,CAAC;SAC1C,IAAI,CAAC,WAAW,CAAC,EAAE;QAChB,OAAO,WAAW,CAAC;IACvB,CAAC,CAAC;SACD,KAAK,CAAC,GAAG,EAAE;QACR,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,uEAAuE,CAAC,CAAC;QAC7F,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAC;IAC7F,CAAC,CAAC,CAAC;AACX,CAAC;AAED;;;;GAIG;AACH,eAAe,0BAA0B,CAAsB;IAC3D,EAAE,EAAE,kEAAkE;IACtE,MAAM,EAAgC,oBAAoB;IAC1D,KAAK,EAAuD,+BAAgC;CAC/F,CAAC,CAAC","sourcesContent":["import { CacheType, createObservableDataAction, IAction, IActionContext, IActionInput, IAny, ICreateActionContext, IGeneric } from '@msdyn365-commerce/core';\nimport { BusinessPartnerUser } from '@msdyn365-commerce/retail-proxy';\nimport { updateAsync } from '@msdyn365-commerce/retail-proxy/dist/DataActions/BusinessPartnerUsersDataActions.g';\n/**\n * Input class for edit organization user data action\n */\nexport class EditOrganizationUserInput implements IActionInput {\n    public user: BusinessPartnerUser;\n\n    constructor(newUser: BusinessPartnerUser) {\n        this.user = newUser;\n    }\n\n    public getCacheKey = () => `EditOrganizationUser`;\n    public getCacheObjectType = () => 'EditOrganizationUser';\n    public dataCacheType = (): CacheType => 'none';\n}\n\n/**\n * Input class for edit organization user data action\n */\nexport const createEditOrganizationUserInput = (inputData: ICreateActionContext<IGeneric<IAny>>, newUser: BusinessPartnerUser): IActionInput => {\n    const { requestContext } = inputData;\n    \n    // Check if the user is authenticated.\n    if (!requestContext.user.isAuthenticated) {\n        throw new Error('User is not logged in.');\n    }\n\n    return new EditOrganizationUserInput(newUser);\n};\n\nexport async function editOrganizationUser(input: EditOrganizationUserInput, ctx: IActionContext): Promise<BusinessPartnerUser> {\n    const { user } = input;\n\n    return updateAsync({ callerContext: ctx}, user)\n        .then(updatedUser => {\n            return updatedUser;\n        })\n        .catch(() => {\n            ctx.telemetry.debug('[Edit-organization-user] Unable to update BusinessPartnerUser account');\n            throw new Error('[Edit-organization-user] Unable to update BusinessPartnerUser account');\n        });\n}\n\n/**\n * The EditOrganizationUser data action\n * Takes in an instance of a BusinessPartnerUser and updates the\n * same user with the new information.\n */\nexport default createObservableDataAction<BusinessPartnerUser>({\n    id: '@msdyn365-commerce-modules/retail-actions/Edit-organization-user',\n    action: <IAction<BusinessPartnerUser>>editOrganizationUser,\n    input: <(args: ICreateActionContext) => IActionInput>(<IAny>createEditOrganizationUserInput),\n});"]}