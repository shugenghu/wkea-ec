{"version":3,"file":"search-by-text.js","sourceRoot":"","sources":["../../src/search-by-text.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,0BAA0B,EAAwC,MAAM,yBAAyB,CAAC;AAC3G,OAAO,EAAuB,YAAY,EAAE,MAAM,sCAAsC,CAAC;AACzF,OAAO,EAAE,uBAAuB,EAAE,MAAM,wEAAwE,CAAC;AAEjH,OAAO,EAAE,wBAAwB,EAAE,MAAM,sCAAsC,CAAC;AAEhF;;GAEG;AACH,MAAM,UAAU,2BAA2B,CAAE,SAA+D;IACxG,MAAM,EAAE,cAAc,EAAE,EAAC,KAAK,EAAE,WAAW,EAAE,EAAC,SAAS,EAAC,EAAC,EAAC,GAAG,SAAS,CAAC;IAEvE,MAAM,MAAM,GAAG,KAAK,IAAI,KAAK,CAAC,CAAC,CAAC;IAEhC,IAAI,CAAC,MAAM,EAAE;QACT,MAAM,IAAI,KAAK,CAAC,mIAAmI,CAAC,CAAC;KACxJ;IAED,MAAM,kBAAkB,GAAG,wBAAwB,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;IAC7E,OAAO,uBAAuB,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;AACzG,CAAC;AAED;;;;GAIG;AACH,eAAe,0BAA0B,CAAC;IACtC,EAAE,EAAE,0DAA0D;IAC9D,MAAM,EAAkC,YAAY;IACpD,KAAK,EAAE,2BAA2B;CACrC,CAAC,CAAC","sourcesContent":["import { IAction } from '@msdyn365-commerce/core';\nimport { createObservableDataAction, IAny, ICreateActionContext, IGeneric } from '@msdyn365-commerce/core';\nimport { IDataServiceRequest, retailAction } from '@msdyn365-commerce/retail-proxy/dist';\nimport { createSearchByTextInput } from '@msdyn365-commerce/retail-proxy/dist/DataActions/ProductsDataActions.g';\nimport { ProductSearchResult } from '@msdyn365-commerce/retail-proxy/dist/Entities/CommerceTypes.g';\nimport { QueryResultSettingsProxy } from './utilities/QueryResultSettingsProxy';\n\n/**\n * createInput method for the searchByText data action\n */\nexport function createSearchByTextInputFunc (inputData: ICreateActionContext<IGeneric<IAny>, IGeneric<IAny>>): IDataServiceRequest {\n    const { requestContext: {query, apiSettings: {channelId}}} = inputData;\n\n    const search = query && query.q;\n\n    if (!search) {\n        throw new Error('Unable to preform search without search text. Query string ?q={searchText} must be present or should be configued in module data.');\n    }\n\n    const querySettingsProxy = QueryResultSettingsProxy.fromInputData(inputData);\n    return createSearchByTextInput(querySettingsProxy.QueryResultSettings, Number(channelId), 0, search);\n}\n\n/**\n * The searchByText data action\n * Queries RetailServers product searchByText API using a\n * query string parameter and returns a list of ProductSearchResults\n */\nexport default createObservableDataAction({\n    id: '@msdyn365-commerce-modules/retail-actions/search-by-text',\n    action: <IAction<ProductSearchResult[]>>retailAction,\n    input: createSearchByTextInputFunc\n});\n"]}